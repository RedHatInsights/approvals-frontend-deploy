(self.webpackChunkapproval=self.webpackChunkapproval||[]).push([[893],{49214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({myRequests:{id:"tabs.myRequests",defaultMessage:"My requests"},allRequests:{id:"tabs.allRequests",defaultMessage:"All requests"},approvalProccess:{id:"tabs.approvalProcess",defaultMessage:"Approval processes"}})},7248:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({approvalTitle:{id:"commonMessages.approvalTitle",defaultMessage:"Approval"},product:{id:"commonMessages.product",defaultMessage:"Product"},portfolio:{id:"commonMessages.portfolio",defaultMessage:"Portfolio"},platform:{id:"commonMessages.platform",defaultMessage:"Platform"},order:{id:"commonMessages.order",defaultMessage:"Order"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"},actions:{id:"commonMessages.actions",defaultMessage:"Actions"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},delete:{id:"commonMessages.delete",defaultMessage:"Delete"},deleting:{id:"commonMessages.deleting",defaultMessage:"Deleting"},cancel:{id:"commonMessages.cancel",defaultMessage:"Cancel"},save:{id:"commonMessages.save",defaultMessage:"Save"}})},87388:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({createApprovalTitle:{id:"formMessages.createApprovalTitle",defaultMessage:"Create approval process"},generalInformation:{id:"formMessages.generalInformation",defaultMessage:"General information"},setGroups:{id:"formMessages.setGroups",defaultMessage:"Add groups"},enterInfo:{id:"formMessages.enterInfo",defaultMessage:"Enter your information"},approvalProcessName:{id:"formMessages.approvalProcessName",defaultMessage:"Name"},enterApprovalName:{id:"formMessages.enterApprovalName",defaultMessage:"Enter a name for the approval process"},description:{id:"formMessages.description",defaultMessage:"Description"},nameTaken:{id:"formMessages.nameTaken",defaultMessage:"Name has already been taken"},selectPlaceholder:{id:"formMessages.selectPlaceholder",defaultMessage:"Select..."},summary:{id:"formMessages.summary",defaultMessage:"Summary"},groups:{id:"formMessages.groups",defaultMessage:"Groups"},create:{id:"formMessages.create",defaultMessage:"Create"},existingGroupsMessage:{id:"formMessages.existingGroups",defaultMessage:"Current groups"}})},31004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({name:{id:"tableToolbar.name",defaultMessage:"Name"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},clearAllFilters:{id:"tableToolbar.clearAllFilters",defaultMessage:"Clear all filters"},clearAllFiltersDescription:{id:"tableToolbar.clearAllFiltersDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},ariaLabel:{id:"tableToolbar.ariaLabel",defaultMessage:"{title} table"}})},51403:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(30624),s=r.n(n),a=r(45697),o=r.n(a),i=r(92223),l=r(219),c=r(86728),u=r(74183),f=r(97446),p=r(63540),d=r(20018),m=function(e){var t=e.title,r=e.icon,n=e.description,a=e.PrimaryAction,o=e.renderDescription;return s().createElement(l.ub,{className:"pf-u-ml-auto pf-u-mr-auto"},s().createElement(c.k,{icon:r}),s().createElement(d.TextContent,null,s().createElement(p.Text,{component:p.TextVariants.h1},t)),s().createElement(u.B,null,n,o&&o()),s().createElement(f.i,null,a&&s().createElement(a,null)))};m.propTypes={title:o().string.isRequired,icon:o().any.isRequired,isSearch:o().bool,description:o().string.isRequired,PrimaryAction:o().any,renderDescription:o().func};const g=m;var v=function(e){var t=e.title,r=e.icon,n=e.isSearch,a=e.description,o=e.PrimaryAction,l=e.renderDescription;return n?s().createElement(i.Z,{centered:!0,"aria-label":"No records"},s().createElement(g,{title:t,icon:r,description:a,PrimaryAction:o,renderDescription:l})):s().createElement(g,{title:t,icon:r,description:a,PrimaryAction:o,renderDescription:l})};v.propTypes={title:o().string.isRequired,icon:o().any.isRequired,isSearch:o().bool,description:o().string.isRequired,PrimaryAction:o().any,renderDescription:o().func};const w=v},30060:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var n=r(87462),s=r(42982),a=r(4942),o=r(30624),i=r.n(o),l=r(45697),c=r.n(l),u=r(3326),f=r(61338),p=r(76690),d=r(86896),m=r(54213),g=r(66031),v=r(31004);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){var t,r=e.columns,a=e.fetchData,l=e.toolbarButtons,c=e.actionResolver,w=e.routes,b=e.titlePlural,h=e.titleSingular,M=e.pagination,k=e.filterValue,P=e.onFilterChange,E=e.isLoading,O=e.renderEmptyState,Z=e.sortBy,S=e.onSort,D=e.activeFiltersConfig,T=e.filterConfig,j=e.rows,R=e.ouiaId,A=(0,d.Z)(),C={itemCount:M.count,page:(0,f.FZ)(M.limit,M.offset),perPage:M.limit,onSetPage:function(e,t){return a(y(y({},M),{},{offset:(0,f.SJ)(t,M.limit)}))},onPerPageSelect:function(e,t){return a(y(y({},M),{},{limit:t}))},isDisabled:E};return i().createElement(m.Z,{type:"content","page-type":"tab-".concat(b),id:"tab-".concat(b)},w(),(0!==j.length||(null==D||null===(t=D.filters)||void 0===t?void 0:t.length)>0)&&i().createElement(g.Z,(0,n.Z)({className:"pf-u-p-lg ins__approval__primary_toolbar",pagination:C},l&&{actionsConfig:{dropdownProps:{position:"right"},actions:[l()]}},{filterConfig:{items:[{label:A.formatMessage(v.Z.name),filterValues:{id:"filter-by-name",placeholder:A.formatMessage(v.Z.filterByTitle,{title:h}),"aria-label":A.formatMessage(v.Z.filterByTitle,{title:h}),onChange:function(e,t){return P(t)},value:k}}].concat((0,s.Z)(T))},activeFiltersConfig:D})),E&&i().createElement(p.Eo,null),E||0!==j.length?i().createElement(o.Fragment,null,!E&&i().createElement(u.Table,{"aria-label":A.formatMessage(v.Z.ariaLabel,{title:b}),rows:j,cells:r,actionResolver:c,className:"pf-u-pt-0 vertical-align-inherit",sortBy:Z,onSort:S,ouiaId:R},i().createElement(u.TableHeader,null),i().createElement(u.TableBody,null)),M.count>0&&i().createElement(g.Z,{className:"pf-u-pl-lg pf-u-pr-lg ins__approval__primary_toolbar",pagination:y(y({},C),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"pf-u-pr-0"})})):O())};b.propTypes={columns:c().array.isRequired,toolbarButtons:c().func,fetchData:c().func.isRequired,pagination:c().shape({limit:c().number,offset:c().number,count:c().number}),titlePlural:c().string,titleSingular:c().string,routes:c().func,actionResolver:c().func,filterValue:c().string,onFilterChange:c().func,isLoading:c().bool,renderEmptyState:c().func,sortBy:c().object,onSort:c().func,activeFiltersConfig:c().object,filterConfig:c().array,rows:c().array,ouiaId:c().string},b.defaultProps={requests:[],isLoading:!1,pagination:f.he,routes:function(){return null},renderEmptyState:function(){return null},filterConfig:[]}},12824:(e,t,r)=>{"use strict";r.d(t,{H:()=>m});var n=r(30624),s=r.n(n),a=r(45697),o=r.n(a),i=r(334),l=r(98378),c=r(82819),u=r(18061),f=r(49214),p=r(86896),d=[{eventKey:0,message:f.Z.myRequests,name:"/requests"},{eventKey:1,message:f.Z.allRequests,name:"/allrequests"},{eventKey:2,message:f.Z.approvalProccess,name:"/workflows"}],m=function(e){var t=e.tabItems,r=void 0===t?d:t,n=(0,p.Z)(),a=(0,i.useHistory)(),o=(0,i.useLocation)(),f=o.pathname,m=o.search,g=r.find((function(e){var t=e.name;return f.includes(t)}));return s().createElement(l.mQ,{className:"pf-u-mt-sm",activeKey:g?g.eventKey:0,onSelect:function(e,t){return a.push({pathname:r[t].name,search:m})}},r.map((function(e){return s().createElement(c.O,{title:s().createElement(u.T,null,n.formatMessage(e.message)),key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};m.propTypes={tabItems:o().array}},18393:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(87462),s=r(4942),a=r(45987),o=r(30624),i=r.n(o),l=r(45697),c=r.n(l),u=r(78267),f=r(46182),p=r(26196),d=r(80345),m=r(94851),g=r(72969),v=r(56485),w=r(38089),y=r(90222),b=r(23811),h=r(77789);const M=function(e){var t=e.name,r=e.label,n=(0,h.default)({name:t}).input,s=n.value,a=n.onChange,o=function(e){if(a(s.filter((function(t){return t.value!==e}))),0===(null==s?void 0:s.length))return null};return s&&s.length?i().createElement(b.FormGroup,{fieldId:t,label:r},i().createElement(y.ChipGroup,null,s.map((function(e){var t=e.label,r=e.value;return i().createElement(w.Chip,{key:r.value,onClick:function(){return o(r)}},t)})))):""};var k=function(e){var t,r=e.templateProps,o=(0,a.Z)(e,["templateProps"]);return i().createElement("div",null,i().createElement(u.Z,(0,n.Z)({componentMapper:(t={},(0,s.Z)(t,f.default.SELECT,d.ZP),(0,s.Z)(t,f.default.TEXTAREA,m.Z),(0,s.Z)(t,f.default.TEXT_FIELD,g.Z),(0,s.Z)(t,f.default.SUB_FORM,v.Z),(0,s.Z)(t,"initial-chips",M),t),FormTemplate:function(e){return i().createElement(p.ZP,(0,n.Z)({},e,r))}},o)))};k.propTypes={templateProps:c().object,schema:c().object};const P=k},89138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>et,workflowsListState:()=>Ye});var n=r(87462),s=r(70885),a=r(42982),o=r(4942),i=r(30624),l=r.n(i),c=r(37703),u=r(334),f=r(32895),p=r(59505),d=r(6202),m=r(32752),g=r(20777),v=r(71070),w=r(3326),y=r(36580),b=r(15861),h=r(87757),M=r.n(h),k=r(23468),P=r(61338),E=r(84866),O=(0,k.xZ)(),Z=(0,k.VZ)();function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.he,r="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),n="&filter[name][contains_i]=".concat(e);return(0,k.Hx)().get("".concat(E._R,"/workflows/?").concat(n).concat(r))}var D=function(e){return O.showWorkflow(e)};function T(e){return j.apply(this,arguments)}function j(){return(j=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return A.apply(this,arguments)}function A(){return A=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}const C=(0,r(86244).defineMessages)({edit:{id:"worfklowMessages.edit",defaultMessage:"Edit"},editInformation:{id:"worfklowMessages.editInformation",defaultMessage:"Edit information"},deleteApprovalTitle:{id:"worfklowMessages.deleteApprovalTitle",defaultMessage:"Delete approval process"},approvalProcess:{id:"worfklowMessages.approvalProcess",defaultMessage:"approval process"},approvalProcesses:{id:"worfklowMessages.approvalProcesses",defaultMessage:"approval processes"},noApprovalProcesses:{id:"worfklowMessages.noApprovalProcesses",defaultMessage:"No approval processes"},createApprovalProcess:{id:"worfklowMessages.createApprovalProcess",defaultMessage:"Create approval process"},sequence:{id:"workflowMessages.sequence",defaultMessage:"Sequence"},enterSequence:{id:"workflowMessages.enterSequence",defaultMessage:"Enter sequence"},removeProcessTitle:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}}?"},removeProcessAriaLabel:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}} modal"},removeProcessDescription:{id:"workflowMessages.removeProcessDescription",defaultMessage:"{name} will be removed."},removeProcessDescriptionWithDeps:{id:"workflowMessages.removeProcessDescriptionWithDeps",defaultMessage:"{name} will be removed from the following applications: {dependenciesList}"},editProcessTitle:{id:"workflowMessages.editProcessTitle",defaultMessage:"Make any changes to approval process {name}"},addProcessSuccessTitle:{id:"workflowMessages.addProcessSuccessTitle",defaultMessage:"Success adding approval process"},addProcessSuccessDescription:{id:"workflowMessages.addProcessSuccessDescription",defaultMessage:"The approval process was added successfully."},updateProcessSuccessTitle:{id:"workflowMessages.updateProcessSuccessTitle",defaultMessage:"Success updating approval process"},updateProcessSuccessDescription:{id:"workflowMessages.updateProcessSuccessDescription",defaultMessage:"The approval process was updated successfully."},repositionProcessSuccessTitle:{id:"workflowMessages.repositionProcessSuccessTitle",defaultMessage:"Success updating approval process sequence"},repositionProcessSuccessDescription:{id:"workflowMessages.repositionProcessSuccessDescription",defaultMessage:"The approval process' sequence was updated successfully."},removeProcessSuccessTitle:{id:"workflowMessages.removeProcessSuccessTitle",defaultMessage:"Success removing approval process"},removeProcessSuccessDescription:{id:"workflowMessages.removeProcessSuccessDescription",defaultMessage:"The approval process was removed successfully."},removeProcessesSuccessTitle:{id:"workflowMessages.removeProcessesSuccessTitle",defaultMessage:"Success removing approval processes"},removeProcessesSuccessDescription:{id:"workflowMessages.removeProcessesSuccessDescription",defaultMessage:"The selected approval processes were removed successfully."},up:{id:"workflowMessages.up",defaultMessage:"up"},down:{id:"workflowMessages.down",defaultMessage:"down"}});var F=function(e){return function(t,r){var n=r().workflowReducer,s=n.workflows,a=n.filterValue,o=e;if(!e&&s){var i=s.meta;o={limit:i.limit,offset:i.offset}}return t({type:y.DI,payload:S(a,o)})}},_=function(e){return{type:y.dp,payload:e}};function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.he,r="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),n="&name=".concat(e);return(0,k.Hx)().get("".concat(E._R,"/workflows/?").concat(n).concat(r))}var x=function(e){return function(t,r){var n=r().workflowReducer,s=n.workflows,a=n.filterValue,o=e;if(!e&&s){var i=s.meta;o={limit:i.limit,offset:i.offset}}return t({type:y.DI,payload:q(a,o)})}},W=r(45987),N=r(86896),I=r(78826),V=r(26196),L=r(50409),B=r(18393),H=r(46182),G=r(94330),U=r(57666),K=r(87388);const $=(0,U.Z)((function(e,t,r){return function(e){return S(e)}(e).then((function(n){var s=n.data;if(t?s.find((function(r){return e===r.name&&t!==r.id})):s.find((function(t){return e===t.name})))throw r.formatMessage(K.Z.nameTaken)}))})),X=function(e,t){return[{component:H.default.TEXT_FIELD,name:"name",isRequired:!0,id:"workflow-name",label:e.formatMessage(K.Z.approvalProcessName),validate:[function(r){return $(r,t,e)},{type:G.default.REQUIRED,message:e.formatMessage(K.Z.enterApprovalName)}]},{component:H.default.TEXTAREA,name:"description",id:"workflow-description",label:e.formatMessage(K.Z.description)}]};var J=r(11107);const z=(0,U.Z)((0,J.$W)()?function(e){var t="&name=".concat(e);return(0,k.Hx)().get("".concat(E._R,"/groups/?").concat(e&&e.length>0?t:"")).then((function(e){var t=e.data;return t&&t.length>0?t.map((function(e){var t=e.id;return{label:e.name,value:t}})):void 0}))}:function(e){var t="&name=".concat(e);return(0,k.Hx)().get("".concat(E.OJ,'/groups/?role_names=",Approval Administrator,Approval Approver,"\n  ').concat(e&&e.length>0?t:"")).then((function(e){var t=e.data;return t&&t.length>0?t.map((function(e){var t=e.uuid;return{label:e.name,value:t}})):void 0}))});function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e,t,r){var n=r.getState().values.current_groups||[];return{key:n.length,loadOptions:function(){return e.loadOptions.apply(e,arguments).then((function(e){return e.map((function(e){return Y(Y({},e),n.find((function(t){return t.value===e.value}))?{isDisabled:!0}:{})}))}))}}};const te=function(e){return{component:H.default.SELECT,name:"group_refs",label:e.formatMessage(K.Z.setGroups),loadOptions:z,initialValue:[],clearedValue:[],noValueUpdates:!0,isMulti:!0,isSearchable:!0,simpleValue:!1,menuIsPortal:!0,isClearable:!0,placeholder:e.formatMessage(K.Z.selectPlaceholder),resolveProps:ee}},re=function(e){return{component:"initial-chips",name:"current_groups",label:e.formatMessage(K.Z.existingGroupsMessage),initialValues:[]}},ne=function(e,t){return{fields:[].concat((0,a.Z)(X(e,t)),[te(e),re(e)])}};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const oe=function(){var e=(0,c.I0)(),t=(0,u.useHistory)().push,r=(0,N.Z)(),s=function(){return t(L.Z.workflows.index)};return l().createElement(I.u_,{isOpen:!0,onClose:s,title:r.formatMessage(K.Z.createApprovalTitle),variant:"small"},l().createElement(B.Z,{onSubmit:function(n){var s=n.group_refs,a=void 0===s?[]:s,o=(0,W.Z)(n,["group_refs"]);return t(L.Z.workflows.index),e((0,J.$W)()?function(e,t){return{type:y.hu,payload:(r=e,(0,k.Hx)().get("".concat(E._R,"/templates/")).then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return function(e,t){return(0,k.Hx)().post("".concat(E._R,"/templates/").concat(e,"/workflows/"),t)}(e,r)}))),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.addProcessSuccessTitle),description:t.formatMessage(C.addProcessSuccessDescription)}}}};var r}(ae(ae({},o),{},{group_refs:a.length>0?a.map((function(e){return{name:e.label,uuid:e.value}})):[]}),r):function(e,t){return{type:y.hu,payload:(r=e,Z.listTemplates().then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return O.addWorkflowToTemplate(e,r,{})}))),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.addProcessSuccessTitle),description:t.formatMessage(C.addProcessSuccessDescription)}}}};var r}(ae(ae({},o),{},{group_refs:a.length>0?a.map((function(e){return{name:e.label,uuid:e.value}})):[]}),r)).then((function(){return e((0,J.$W)()?x():F())}))},onCancel:s,schema:ne(r),FormTemplate:function(e){return l().createElement(V.ZP,(0,n.Z)({},e,{buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))};var ie=r(45697),le=r.n(ie),ce=r(63540),ue=r(20018),fe=r(67463),pe=r(34348),de=r(19694),me=r(1054);const ge=function(e){var t=(0,c.v9)((function(e){return{workflows:e.workflowReducer.workflows}}),c.wU).workflows;return t&&t.data&&t.data.find((function(t){return t.id===e}))};var ve=r(76690),we=r(7248),ye=r(41609),be=r.n(ye);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke=function(e){var t=e.ids,r=void 0===t?[]:t,n=e.fetchData,o=e.pagination,f=void 0===o?P.he:o,p=e.resetSelectedWorkflows,m=(0,c.I0)(),g=(0,i.useState)(),v=(0,s.Z)(g,2),w=v[0],b=v[1],h=(0,i.useState)(!1),M=(0,s.Z)(h,2),k=M[0],O=M[1],Z=(0,u.useHistory)().push,S=(0,me.Z)(["workflow"]),j=(0,s.Z)(S,1)[0].workflow||1===r.length&&r[0],A=(0,N.Z)(),F=ge(j);if((0,i.useEffect)((function(){var e;j&&!F&&m((e=j,{type:y.Cb,payload:D(e)})).then((function(e){var t=e.value;return b(t)})).catch((function(){return Z(L.Z.workflows.index)}))}),[]),!j&&0===r.length)return null;var _=function(){return Z(L.Z.workflows.index)},q=function(){var e=F||w;return e&&!be()(e)&&e.metadata&&e.metadata.object_dependencies&&!be()(e.metadata.object_dependencies)?Object.keys(e.metadata.object_dependencies).reduce((function(e,t){return[].concat((0,a.Z)(e),["".concat(E.Fe[t]||t)])}),[]):[]},x=l().createElement("b",{key:"remove-key"},j?w&&w.name||F&&F.name:l().createElement(l().Fragment,null,r.length," ",A.formatMessage(C.approvalProcesses))),W=j&&!F&&!w;return l().createElement(I.u_,{isOpen:!0,variant:"small","aria-label":A.formatMessage(C.removeProcessAriaLabel,{count:j?1:r.length}),header:l().createElement(pe.Title,{size:"2xl",headingLevel:"h1"},l().createElement(de.ZP,{size:"sm",fill:"#f0ab00",className:"pf-u-mr-sm"}),A.formatMessage(C.removeProcessTitle,{count:j?1:r.length})),onClose:_,actions:[l().createElement(d.Button,{id:"submit-remove-workflow",ouiaId:"submit-remove-workflow",key:"submit",variant:"danger",type:"button",isDisabled:k,onClick:function(){return O(!0),m(j?function(e,t){return{type:y.J4,payload:T(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.removeProcessSuccessTitle),description:t.formatMessage(C.removeProcessSuccessDescription)}}}}}(j,A):function(e,t){return{type:y.qi,payload:R(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.removeProcessesSuccessTitle),description:t.formatMessage(C.removeProcessesSuccessDescription)}}}}}(r,A)).catch((function(){return O(!1)})).then((function(){return Z(L.Z.workflows.index)})).then((function(){return p()})).then((function(){return n(Me(Me({},f),{},{offset:(0,P.Vq)(f,j?1:r.length)}))}))}},k?l().createElement(l().Fragment,null,l().createElement(fe.Spinner,{size:"sm",className:"pf-u-mr-md"}),A.formatMessage(we.Z.deleting)):A.formatMessage(we.Z.delete)),l().createElement(d.Button,{id:"cancel-remove-workflow",ouiaId:"cancel-remove-workflow",key:"cancel",variant:"link",type:"button",isDisabled:k,onClick:_},A.formatMessage(we.Z.cancel))]},l().createElement(ue.TextContent,null,l().createElement(ce.Text,{component:ce.TextVariants.p},W?l().createElement(ve.Z0,null):be()(q())?A.formatMessage(C.removeProcessDescription,{name:x}):A.formatMessage(C.removeProcessDescriptionWithDeps,{name:x,dependenciesList:l().createElement("span",{key:"span",className:"pf-u-mt-lg span-block"},q().map((function(e){return l().createElement("li",{key:e},e)})))}))))};ke.propTypes={fetchData:le().func.isRequired,ids:le().array,resetSelectedWorkflows:le().func.isRequired,pagination:le().shape({limit:le().number,offset:le().number,count:le().number})};const Pe=ke;var Ee=r(23218),Oe=r(36001),Ze=r(42057),Se=r(81159),De=r(34023),Te=r(14132),je=r(81875);const Re=(0,i.createContext)({selectedWorkflows:[]});var Ae=function(e){var t=e.id,r=(0,i.useContext)(Re).cache,n=(0,c.I0)(),s=(0,N.Z)(),a=(0,c.v9)((function(e){var t=e.workflowReducer,r=t.isUpdating,n=t.isLoading;return{isUpdating:r>0||n,property:u}})),o=a.isUpdating,u=a.property,f=function(e){var a;return n((0,J.$W)()?(a={id:t,sequence:e},{type:y.vd,payload:a}):function(e){return{type:y.vd,payload:e}}({id:t,sequence:e})),function(e,t){return e[t]||(e[t]=(0,U.Z)((function(e,t,r){return t((0,J.$W)()?function(e,t){return{type:y.gJ,payload:(r=e,(0,k.Hx)().patch("".concat(E._R,"/workflows/").concat(r.id),r.sequence)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.repositionProcessSuccessTitle),description:t.formatMessage(C.repositionProcessSuccessDescription)}}}};var r}(e,r):function(e,t){return{type:y.gJ,payload:(r=e,O.reposition(r.id,r.sequence)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.repositionProcessSuccessTitle),description:t.formatMessage(C.repositionProcessSuccessDescription)}}}};var r}(e,r)).then((function(){return t((0,J.$W)()?x:F())}))}),1500)),e[t]}(r,t)({id:t,sequence:e},n,s)};return l().createElement(Se.K,null,l().createElement(De.v,null,l().createElement(d.Button,{ouiaId:"up-".concat(t),variant:"plain","aria-label":s.formatMessage(C.up),id:"up-".concat(t),onClick:function(){return f({increment:-1})},isDisabled:o},l().createElement(Te.ZP,null))),l().createElement(De.v,null,l().createElement(d.Button,{variant:"plain","aria-label":s.formatMessage(C.down),id:"down-".concat(t),onClick:function(){return f({increment:1})},isDisabled:o,ouiaId:"down-".concat(t)},l().createElement(je.ZP,null))))};Ae.propTypes={id:le().string.isRequired};var Ce=function(e){var t=e.group_refs,r=e.id;return l().createElement(Oe.k,{key:r,className:"pf-u-mt-sm"},t.map((function(e){var t=e.name,r=e.uuid;return l().createElement(Ze.B,{key:r},l().createElement(Ee._,{className:"group-label pf-u-mb-sm"},t))})))};Ce.propTypes={id:le().string,group_refs:le().arrayOf(le().shape({name:le().string.isRequired,uuid:le().string.isRequired}))};var Fe=function(e){var t=e.id,r=(0,i.useContext)(Re),n=r.selectedWorkflows,s=r.setSelectedWorkflows;return l().createElement(m.X,{id:"select-".concat(t),isChecked:n.includes(t),onChange:function(){return s(t)}})};Fe.propTypes={id:le().string.isRequired};var _e=function(e){return e.map((function(e){var t=e.id,r=e.name,n=e.description,s=e.sequence,a=e.group_refs;return{id:t,cells:[l().createElement(l().Fragment,{key:"".concat(t,"-buttons")},l().createElement(Ae,{id:t,ouiaId:"".concat(t,"-buttons"),sequence:s})),l().createElement(l().Fragment,{key:"".concat(t,"-checkbox")},l().createElement(Fe,{id:t})),r,n,l().createElement(l().Fragment,{key:t},l().createElement(Ce,{key:t,group_refs:a,id:t}))]}}))},qe=r(30060),xe=r(37412),We=r(12824),Ne=r(51403),Ie=r(31004);function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Be=function(e,t){var r=t.type,n=t.initialValues,s=t.schema;return"loaded"===r?Le(Le({},e),{},{initialValues:n,schema:s,isLoading:!1}):e},He=function(e){var t=e.group_refs.map((function(e){return{label:e.name,value:e.uuid}}));return Le(Le({},e),{},{group_refs:[],current_groups:t})};const Ge=function(){var e=(0,c.I0)(),t=(0,u.useHistory)().push,r=(0,N.Z)(),a=(0,me.Z)(["workflow"]),o=(0,s.Z)(a,1)[0].workflow,f=ge(o),p=(0,i.useReducer)(Be,{isLoading:!0}),d=(0,s.Z)(p,2),m=d[0],g=m.initialValues,v=m.schema,w=m.isLoading,b=d[1];(0,i.useEffect)((function(){f?b({type:"loaded",initialValues:He(f),schema:ne(r,f.id)}):D(o).then((function(e){return b({type:"loaded",initialValues:He(e),schema:ne(r,e.id)})}))}),[]);var h=function(){return t(L.Z.workflows.index)};return l().createElement(I.u_,{isOpen:!0,onClose:h,title:r.formatMessage(C.editInformation),description:!w&&r.formatMessage(C.editProcessTitle,{name:g.name}),variant:"small"},w&&l().createElement(ve.q3,null),!w&&l().createElement(B.Z,{onSubmit:function(t){var n=t.group_refs,s=void 0===n?[]:n,a=t.description,o=void 0===a?"":a,i=(0,W.Z)(t,["group_refs","description"]);h();var l=i.current_groups?i.current_groups.concat(null==s?void 0:s.filter((function(e){return i.current_groups.indexOf(e)<0}))):s,c=Le(Le({},i),{},{description:o,group_refs:l.map((function(e){return{name:e.label,uuid:e.value}}))});return delete c.current_groups,e(function(e,t){return{type:y.$O,payload:(r=e,O.updateWorkflow(r.id,r)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.updateProcessSuccessTitle),description:t.formatMessage(C.updateProcessSuccessDescription)}}}};var r}(c,r)).then((function(){return e(F())}))},onCancel:h,schema:v,initialValues:g,FormTemplate:function(e){return l().createElement(V.ZP,(0,n.Z)({},e,{submitLabel:r.formatMessage(we.Z.save),buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=function(e,t,r){return[{title:"",transforms:[(0,w.cellWidth)(1)]},{title:l().createElement(m.X,{onChange:r,isChecked:t,id:"select-all"}),transforms:[(0,w.cellWidth)(1)]},{title:e.formatMessage(Ie.Z.name)},{title:e.formatMessage(K.Z.description),transforms:[(0,w.cellWidth)(35)],cellTransforms:[w.truncate]},{title:e.formatMessage(K.Z.groups)}]},Xe=(0,U.Z)((function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.he;return r(!0),t(_(e)),t((0,J.$W)()?x(n):F(n)).then((function(){return r(!1)}))}),1e3),Je=function(e,t){return e?[{category:t.formatMessage(Ie.Z.name),key:"name",chips:[{name:e,value:e}]}]:[]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){return t.includes(e.id)}))},Qe=function(e,t,r){return r.indexOf(e)===t},Ye=function(e,t){switch(t.type){case"setRows":return Ke(Ke({},e),{},{rows:t.payload,selectedAll:ze(t.payload,e.selectedWorkflows)});case"setFetching":return Ke(Ke({},e),{},{isFetching:t.payload});case"setFilterValue":return Ke(Ke({},e),{},{filterValue:t.payload});case"select":return Ke(Ke({},e),{},{selectedAll:!1,selectedWorkflows:e.selectedWorkflows.includes(t.payload)?e.selectedWorkflows.filter((function(e){return e!==t.payload})):[].concat((0,a.Z)(e.selectedWorkflows),[t.payload])});case"selectAll":return Ke(Ke({},e),{},{selectedWorkflows:[].concat((0,a.Z)(e.selectedWorkflows),(0,a.Z)(t.payload)).filter(Qe),selectedAll:!0});case"unselectAll":return Ke(Ke({},e),{},{selectedWorkflows:e.selectedWorkflows.filter((function(e){return!t.payload.includes(e)})),selectedAll:!1});case"resetSelected":return Ke(Ke({},e),{},{selectedWorkflows:[],selectedAll:!1});case"setFilteringFlag":return Ke(Ke({},e),{},{isFiltering:t.payload});case"clearFilters":return Ke(Ke({},e),{},{filterValue:"",isFetching:!0});default:return e}};const et=function(){var e=(0,i.useRef)({}),t=(0,c.v9)((function(e){var t=e.workflowReducer;return{workflows:t.workflows,filterValueRedux:t.filterValue}}),c.wU),r=t.workflows,a=t.filterValueRedux,o=(null==r?void 0:r.data)||(null==r?void 0:r.results),m=(null==r?void 0:r.meta)||{count:r.count},w=(0,i.useReducer)(Ye,function(){return{filterValue:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",isFetching:!0,isFiltering:!1,selectedWorkflows:[],selectedAll:!1,rows:[]}}(a)),b=(0,s.Z)(w,2),h=b[0],M=h.filterValue,k=h.isFetching,E=h.isFiltering,O=h.selectedWorkflows,Z=h.selectedAll,S=h.rows,D=b[1],T=(0,c.I0)(),j=(0,u.useHistory)(),R=(0,N.Z)(),A=function(e){return D({type:"setFetching",payload:!0}),T((0,J.$W)()?x(e):F(e)).then((function(){return D({type:"setFetching",payload:!1})})).catch((function(){return D({type:"setFetching",payload:!1})}))};(0,i.useEffect)((function(){A(P.he)}),[]),(0,i.useEffect)((function(){D({type:"setRows",payload:_e(o)})}),[o]);var _=function(){return D({type:"clearFilters"}),T({type:y.fB}),A(m)},q=function(e){e&&""!==e?D({type:"setFilterValue",payload:e}):_(),Xe(e,T,(function(e){return D({type:"setFilteringFlag",payload:e})}),Ke(Ke({},m),{},{offset:0}))},W=O.length>0;return l().createElement(i.Fragment,null,l().createElement(xe.Q,{className:"top-toolbar"},l().createElement(xe.y,{title:R.formatMessage(we.Z.approvalTitle)}),l().createElement(We.H,null)),l().createElement(Re.Provider,{value:{selectedWorkflows:O,setSelectedWorkflows:function(e){return D({type:"select",payload:e})},cache:e.current}},l().createElement(qe.M,{ouiaId:"approval-process-table",rows:S,columns:$e(R,Z,(function(){return D(Z?{type:"unselectAll",payload:o.map((function(e){return e.id}))}:{type:"selectAll",payload:o.map((function(e){return e.id}))})})),fetchData:A,routes:function(){return l().createElement(i.Fragment,null,l().createElement(u.Route,{exact:!0,path:L.Z.workflows.add,render:function(e){return l().createElement(oe,(0,n.Z)({},e,{postMethod:A}))}}),l().createElement(u.Route,{exact:!0,path:L.Z.workflows.edit,component:Ge}),l().createElement(u.Route,{exact:!0,path:L.Z.workflows.remove,render:function(e){return l().createElement(Pe,(0,n.Z)({},e,{ids:O,fetchData:A,pagination:m,resetSelectedWorkflows:function(){return D({type:"resetSelected"})}}))}}))},actionResolver:function(){return[{title:R.formatMessage(C.edit),component:"button",onClick:function(e,t,r){return j.push({pathname:L.Z.workflows.edit,search:"?workflow=".concat(r.id)})}},{title:R.formatMessage(we.Z.delete),component:"button",onClick:function(e,t,r){return j.push({pathname:L.Z.workflows.remove,search:"?workflow=".concat(r.id)})}}]},titlePlural:R.formatMessage(C.approvalProcesses),titleSingular:R.formatMessage(C.approvalProcess),pagination:m,toolbarButtons:function(){return l().createElement(f.ki,{className:"pf-u-pl-lg top-toolbar"},l().createElement(p.Eg,null,l().createElement(u.Link,{id:"add-workflow-link",to:{pathname:L.Z.workflows.add}},l().createElement(d.Button,{ouiaId:"add-workflow-link",variant:"primary","aria-label":R.formatMessage(K.Z.create)},R.formatMessage(K.Z.create)))),l().createElement(p.Eg,null,l().createElement(u.Link,{id:"remove-multiple-workflows",className:W?"":"disabled-link",to:{pathname:L.Z.workflows.remove}},l().createElement(d.Button,{variant:"secondary",isDisabled:!W,"aria-label":R.formatMessage(C.deleteApprovalTitle)},R.formatMessage(we.Z.delete)))))},filterValue:M,onFilterChange:q,isLoading:k||E,renderEmptyState:function(){return l().createElement(Ne.Z,{title:""===M?R.formatMessage(C.noApprovalProcesses):R.formatMessage(Ie.Z.noResultsFound),icon:be()(M)?g.ZP:v.ZP,PrimaryAction:function(){return""!==M?l().createElement(d.Button,{onClick:function(){return _()},variant:"link"},R.formatMessage(Ie.Z.clearAllFilters)):l().createElement(u.Link,{id:"create-workflow-link",to:{pathname:L.Z.workflows.add}},l().createElement(d.Button,{ouiaId:"create-workflow-link",variant:"primary","aria-label":R.formatMessage(C.createApprovalProcess)},R.formatMessage(C.createApprovalProcess)))},description:""===M?R.formatMessage(C.noApprovalProcesses):R.formatMessage(Ie.Z.clearAllFiltersDescription),isSearch:!be()(M)})},activeFiltersConfig:{filters:Je(M,R),onDelete:function(){return q("")}}})))}},57666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(99166);const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return(0,n.Z)(e,t,r)}},1054:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(4942),s=r(334);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,s.useLocation)(),r=t.search,a=new URLSearchParams(r);return[e.reduce((function(e,t){return o(o({},e),{},(0,n.Z)({},t,a.get(t)))}),{}),r,a]}},70347:()=>{},80897:()=>{},81320:()=>{},21064:()=>{},82014:()=>{},25238:()=>{},56024:()=>{},43390:()=>{},314:()=>{},97236:()=>{},87234:()=>{},38299:()=>{}}]);
//# sourceMappingURL=../sourcemaps/workflows.aad2123bd49c0d00e89edd1431ec320b.js.map