(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{2134:function(e,t,n){"use strict";n.r(t);var r=n(27),a=n.n(r),o=n(235),c=n.n(o),i=n(3),l=n.n(i),u=n(0),s=n.n(u),p=n(1),f=n.n(p),d=n(22),m=n(15),b=n(33),h=n(278),v=n(250),g=n(58),w=n(251),y=n.n(w),E=n(253),O=n(4),k=n(247),j=n.n(k),T=n(248),S=n.n(T),R=n(255),q=n(243),x=Object(R.d)();function P(){return C.apply(this,arguments)}function C(){return(C=S()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return D.apply(this,arguments)}function D(){return(D=S()(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=S()(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getGroup(t);case 3:return n=e.sent,e.abrupt("return",n.name);case 7:if(e.prev=7,e.t0=e.catch(0),404===e.t0.status){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(236);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=Object(R.g)(),W=Object(R.f)();function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.a,n="&limit=".concat(t.limit,"&offset=").concat(t.offset),r="&filter[name][contains_i]=".concat(e);return Object(R.b)().get("".concat(q.a,"/workflows/?").concat(r).concat(n))}function A(e){return L.apply(this,arguments)}function L(){return(L=S()(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.showWorkflow(t);case 2:return n=e.sent,e.next=5,I(n.group_refs);case 5:return r=e.sent,e.abrupt("return",N({},n,{group_names:r}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return _.apply(this,arguments)}function _(){return(_=S()(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return K.apply(this,arguments)}function K(){return(K=S()(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=S()(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e,t){return{type:O.k,payload:B(e,t)}},U=function(e){return{type:O.j,payload:A(e)}},H=function(e){return{type:O.a,payload:(t=e,W.listTemplates().then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return V.addWorkflowToTemplate(e,t,{})}))),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding approval process",description:"The approval process was added successfully."},rejected:{variant:"danger",title:"Failed adding approval process",description:"The approval process was not added successfuly."}}}};var t},Q=function(e){return{type:O.n,payload:(t=e,V.updateWorkflow(t.id,t)),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating approval process",description:"The approval process was updated successfully."},rejected:{variant:"danger",title:"Failed updating approval process",description:"The approval process was not updated successfuly."}}}};var t},X=function(e){return{type:O.l,payload:M(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing approval process",description:"The approval process was removed successfully."}}}}},Y=function(e){return{type:O.m,payload:z(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing approval processes",description:"The selected approval processes were removed successfully."}}}}},Z=n(62),$=n(2126),ee=n(29),te=n(65),ne=n(40),re=n(238),ae=n(240),oe=n(104),ce=n(105),ie=n(237),le=function(e){var t=e.formData,n=t||{name:"",description:"",wfGroups:[]},r=n.name,a=n.description,o=n.wfGroups;return s.a.createElement(u.Fragment,null,s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(ie.Title,{size:"xl"}," Review ")),s.a.createElement(ae.StackItem,null,s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(ce.TextContent,null,s.a.createElement(oe.Text,{className:"data-table-detail heading",component:oe.TextVariants.h5},"Review and confirm your inputs. If there is anything incorrect, click Back and revise."))),s.a.createElement(ae.StackItem,null,s.a.createElement(te.Grid,{gutter:"md"},s.a.createElement(ne.GridItem,{span:2},s.a.createElement(oe.Text,{className:"data-table-detail heading",component:oe.TextVariants.h5},"Name")),s.a.createElement(ne.GridItem,{span:10},s.a.createElement(oe.Text,{className:"data-table-detail content",component:oe.TextVariants.p},r))),s.a.createElement(te.Grid,{gutter:"md"},s.a.createElement(ne.GridItem,{span:2},s.a.createElement(oe.Text,{className:"data-table-detail heading",component:oe.TextVariants.h5},"Description")),s.a.createElement(ne.GridItem,{span:10},s.a.createElement(oe.Text,{className:"data-table-detail content",component:oe.TextVariants.p},a))),void 0!==o&&o.map((function(e,t){return s.a.createElement(u.Fragment,{key:"Group-".concat(t)},s.a.createElement(te.Grid,{gutter:"md"},s.a.createElement(ne.GridItem,{span:2},s.a.createElement(oe.Text,{key:e.value,className:"data-table-detail heading",component:oe.TextVariants.h5},"Group ".concat(t+1))),s.a.createElement(ne.GridItem,{span:10},s.a.createElement(oe.Text,{key:e.label,className:"data-table-detail content",component:oe.TextVariants.p},"".concat(o[t].label)))))})))))))};le.propTypes={formData:f.a.object};var ue=le,se=n(68),pe=n(38),fe=n(244),de=n(330),me=function(e){var t=e.formData,n=e.handleChange,r=e.isValid,a=e.title,o=void 0===a?void 0:a,c=t.name,i=t.description;return s.a.createElement(u.Fragment,null,s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(ie.Title,{size:"md"}," ",o||"Enter your information"," ")),s.a.createElement(ae.StackItem,null,s.a.createElement(se.Form,null,s.a.createElement(pe.FormGroup,{label:"Approval process name",isRequired:!0,fieldId:"workflow-name",isValid:r(),helperTextInvalid:"Enter a name for the approval process"},s.a.createElement(fe.TextInput,{isRequired:!0,type:"text",id:"workflow-name",name:"workflow-name","aria-describedby":"workflow-name",value:c,isValid:r(),onChange:function(e,t){return n({name:t.currentTarget.value})}})),s.a.createElement(pe.FormGroup,{label:"Description",fieldId:"workflow-description"},s.a.createElement(de.TextArea,{type:"text",id:"workflow-description",name:"workflow-description",value:i,onChange:function(e,t){return n({description:t.currentTarget.value})}}))))))};me.propTypes={name:f.a.string,description:f.a.string,title:f.a.string,formData:f.a.object,handleChange:f.a.func.isRequired,isValid:f.a.func.isRequired};var be=me,he=n(18),ve=n.n(he),ge=n(367),we=n.n(ge),ye=n(368),Ee=n.n(ye),Oe=n(2132),ke=n(254),je=n(35),Te=function(){return{type:O.f,payload:P().then((function(e){var t=e.data;return ve()(t.map((function(e){return{value:e.uuid,label:e.name}})))}))}},Se=function(e){var t=e.formData,n=e.handleChange,r=e.title,a=Object(u.useState)(!1),o=c()(a,2),i=o[0],l=o[1],p=Object(u.useState)([]),f=c()(p,2),m=f[0],b=f[1],h=Object(u.useState)(1),v=c()(h,2),w=v[0],y=v[1],E=Object(u.useState)([]),O=c()(E,2),k=O[0],j=O[1],T=Object(u.useState)([]),S=c()(T,2),x=S[0],P=S[1],C=Object(d.useSelector)((function(e){return e.groupReducer.groups||[]})),I=Object(d.useDispatch)();Object(u.useEffect)((function(){P(!0),I(Te()).then((function(){return P(!1)}))}),[]),Object(u.useEffect)((function(){b(t.wfGroups?t.wfGroups:[]),y(t.wfGroups?t.wfGroups.length:1)}),[t.wfGroups]);var D=function(e){l(e)},F=function(e){var t=parseInt(e.target.id),r=ve()(m.filter((function(e,n){return t!==n})));b(r),y(w-1),n({wfGroups:r})},G=function(e){return t=e,Object(R.b)().get("".concat(q.b,"/groups/").concat(t.length>0?"?name=".concat(t):"")).then((function(e){return e.data.map((function(e){var t=e.uuid;return{label:e.name,value:t}}))}));var t},N=function(e){return s.a.createElement(ae.StackItem,{key:"Stack_".concat(e+1)},s.a.createElement(pe.FormGroup,{label:"Group ".concat(e+1),fieldId:"".concat(e+1,"_stage_label")},s.a.createElement(te.Grid,{gutter:"md"},s.a.createElement(ne.GridItem,{span:8},s.a.createElement(Oe.a,{cacheOptions:!0,isClearable:!0,label:"".concat(e+1," Group"),"aria-label":"".concat(e+1," Group"),onToggle:D,key:"stage-".concat(e+1),onChange:function(t){return r=t,(a=m)[e]=r,b(a),void n({wfGroups:a});var r,a},value:m[e],inpuValue:k,isexpanded:i,loadOptions:Object(ke.a)(G),defaultOptions:C,onInputChange:function(e){return t=e.replace(/\W/g,""),void j(t);var t}})),s.a.createElement(ne.GridItem,{span:1,style:{display:"flex"}},e>0&&s.a.createElement(g.Button,{variant:"link",isInline:!0,key:e,id:e,onClick:F},s.a.createElement(Ee.a,null)," ","Remove")))))};return s.a.createElement(u.Fragment,null,s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(ie.Title,{size:"md"},r||"Set groups")),s.a.createElement(ae.StackItem,null,x&&s.a.createElement(je.e,null),!x&&s.a.createElement(re.Stack,{gutter:"sm"},m.map((function(e,t){return N(t)})),s.a.createElement(ae.StackItem,{style:{borderTop:10}},s.a.createElement(g.Button,{id:"add-workflow-stage",variant:"link",isInline:!0,onClick:function(){b([].concat(ve()(m),[void 0])),y(w+1)}},s.a.createElement(we.a,null)," ","Add ".concat(m.length>0?"another":"a"," group")))))))};Se.propTypes={name:f.a.string,description:f.a.string,title:f.a.string,formData:f.a.object,handleChange:f.a.func};var Re=Se;function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xe=function(e){var t=e.history.push,n=e.addWorkflow,r=e.addNotification,a=e.postMethod,o=e.rbacGroups,i=Object(u.useState)({}),p=c()(i,2),f=p[0],d=p[1],m=function(e){d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{},e))},b=[{name:"General information",component:s.a.createElement(be,{formData:f,handleChange:m,isValid:function(){return f.name&&f.name.length>0}})},{name:"Set groups",component:s.a.createElement(Re,{formData:f,handleChange:m,options:o})},{name:"Review",component:s.a.createElement(ue,{formData:f,options:o}),nextButtonText:"Confirm"}];return s.a.createElement($.Wizard,{title:"Create approval process",isOpen:!0,onClose:function(){r({variant:"warning",title:"Creating approval process",dismissable:!0,description:"Creating approval process was cancelled by the user."}),t("/workflows")},onSave:function(){var e=f.name,r=f.description,o=f.wfGroups,c={name:e,description:r,group_refs:o?o.map((function(e){return e.value})):[]};return n(c).then((function(){return a()})).then((function(){return t("/workflows")}))},steps:b})};xe.defaultProps={rbacGroups:[],initialValues:{}},xe.propTypes={history:f.a.shape({push:f.a.func.isRequired}).isRequired,addWorkflow:f.a.func.isRequired,match:f.a.object,addNotification:f.a.func.isRequired,fetchWorkflow:f.a.func.isRequired,postMethod:f.a.func.isRequired,rbacGroups:f.a.arrayOf(f.a.shape({value:f.a.oneOfType([f.a.number,f.a.string]).isRequired,label:f.a.string.isRequired})).isRequired};var Pe=Object(m.o)(Object(d.connect)((function(e){return{rbacGroups:e.groupReducer.groups}}),(function(e){return Object(Z.a)({addNotification:ee.addNotification,addWorkflow:H,fetchWorkflow:U},e)}))(xe)),Ce=n(271),Ie=n(249),De=n(288),Fe=n(289),Ge=function(e){var t=e.formData,n=e.handleChange,r=e.isValid,a=e.title,o=void 0===a?void 0:a,c=t.sequence;return s.a.createElement(u.Fragment,null,s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(ie.Title,{size:"md"}," ",o||"Enter your information"," ")),s.a.createElement(ae.StackItem,null,s.a.createElement(se.Form,null,s.a.createElement(pe.FormGroup,{label:"Enter sequence",isRequired:!0,fieldId:"workflow-sequence",isValid:r(),helperTextInvalid:"Enter a positive number"},s.a.createElement(fe.TextInput,{isRequired:!0,type:"number",id:"workflow-sequence",isValid:r(),name:"workflow-sequence","aria-describedby":"workflow-name",value:c,onChange:function(e,t){return n({sequence:t.currentTarget.value})}}))))))};Ge.propTypes={sequence:f.a.string,title:f.a.string,formData:f.a.object,handleChange:f.a.func.isRequired,isValid:f.a.func.isRequired};var Ne=Ge;n(64);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){var t=e.history.push,n=e.match.params.id,r=e.addNotification,a=e.fetchWorkflow,o=e.updateWorkflow,i=e.postMethod,l=e.workflow,p=e.isFetching,f=e.editType,d=Object(u.useState)({}),m=c()(d,2),b=m[0],h=m[1],v=function(e){return h(We({},b,{},e))};Object(u.useEffect)((function(){a(n).then((function(e){return h(We({},b,{},e.value))}))}),[]);var w=function(){return b.sequence&&b.sequence>=0},y=function(){return b.name&&b.name.length>0},E=function(){return"sequence"===f?w():y()},O=function(){r({variant:"warning",title:"Edit approval process",dismissable:!0,description:"Edit approval process was cancelled by the user."}),t("/workflows")};return s.a.createElement(Ie.Modal,{title:"Edit approval process",width:"40%",isOpen:!0,onClose:O},s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(pe.FormGroup,{fieldId:"edit-workflow-info-modal-info"},p&&s.a.createElement(je.e,null),!p&&("info"===f?s.a.createElement(be,{formData:b,handleChange:v,isValid:y,title:"Make any changes to approval process ".concat(l.name)}):s.a.createElement(Ne,{formData:b,handleChange:v,isValid:w,title:"Set the sequence for the approval process ".concat(l.name)})))),s.a.createElement(ae.StackItem,null,s.a.createElement(Ce.ActionGroup,null,s.a.createElement(De.Split,{gutter:"md"},s.a.createElement(Fe.SplitItem,null,s.a.createElement(g.Button,{"aria-label":"Save",id:"save-edit-workflow-info",variant:"primary",type:"submit",validated:!p&&E(),onClick:function(){if(E()){var e=b.name,r=b.description,a=b.sequence;o({id:n,name:e,description:r,sequence:a}).then((function(){return i()})).then((function(){return t("/workflows")}))}}},"Save")),s.a.createElement(Fe.SplitItem,null,s.a.createElement(g.Button,{id:"cancel-edit-workflow-info","aria-label":"Cancel",variant:"secondary",type:"button",onClick:O},"Cancel")))))))};Be.defaultProps={isFetching:!1,editType:"info"},Be.propTypes={history:f.a.shape({push:f.a.func.isRequired}).isRequired,match:f.a.object,addNotification:f.a.func.isRequired,fetchWorkflow:f.a.func.isRequired,postMethod:f.a.func.isRequired,updateWorkflow:f.a.func.isRequired,workflow:f.a.object,id:f.a.string,editType:f.a.string,isFetching:f.a.bool};var Ae=Object(m.o)(Object(d.connect)((function(e){var t=e.workflowReducer;return{workflow:t.workflow,isFetching:t.isRecordLoading}}),(function(e){return Object(Z.a)({addNotification:ee.addNotification,addWorkflow:H,updateWorkflow:Q,fetchWorkflow:U},e)}))(Be));function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e){var t=e.history.push,n=e.match.params.id,r=e.addNotification,a=e.fetchWorkflow,o=e.updateWorkflow,i=e.postMethod,l=e.isFetching,p=Object(u.useState)({}),f=c()(p,2),d=f[0],m=f[1];Object(u.useEffect)((function(){a(n).then((function(e){return m((t=e.value,n=t.group_refs.map((function(e,n){return{label:t.group_names[n]?t.group_names[n]:e,value:e}})),Me({},t,{wfGroups:n})));var t,n}))}),[]);var b=function(){r({variant:"warning",title:"Edit approval process's groups",dismissable:!0,description:"Edit approval process's groups was cancelled by the user."}),t("/workflows")};return s.a.createElement(Ie.Modal,{title:"Edit approval process's groups",width:"40%",isOpen:!0,onClose:b},s.a.createElement(re.Stack,{gutter:"md"},s.a.createElement(ae.StackItem,null,s.a.createElement(pe.FormGroup,{fieldId:"workflow-stages-formgroup"},l&&s.a.createElement(je.e,null),!l&&s.a.createElement(ae.StackItem,{className:"stages-modal"},s.a.createElement(Re,{className:"stages-modal",formData:d,handleChange:function(e){m(Me({},d,{},e))},title:"Add or remove ".concat(d.name,"'s groups")})))),s.a.createElement(ae.StackItem,null,s.a.createElement(Ce.ActionGroup,null,s.a.createElement(De.Split,{gutter:"md"},s.a.createElement(Fe.SplitItem,null,s.a.createElement(g.Button,{"aria-label":"Save",variant:"primary",type:"submit",isDisabled:l,onClick:function(){var e={group_refs:d.wfGroups.map((function(e){return e.value}))};o(Me({id:n},e)).then((function(){return i()})).then((function(){return t("/workflows")}))}},"Save")),s.a.createElement(Fe.SplitItem,null,s.a.createElement(g.Button,{"aria-label":"Cancel",variant:"secondary",type:"button",onClick:b},"Cancel")))))))};_e.defaultProps={rbacGroups:[],isFetching:!1},_e.propTypes={history:f.a.shape({push:f.a.func.isRequired}),addWorkflow:f.a.func.isRequired,match:f.a.object,addNotification:f.a.func.isRequired,fetchWorkflow:f.a.func.isRequired,fetchRbacGroups:f.a.func.isRequired,postMethod:f.a.func.isRequired,updateWorkflow:f.a.func.isRequired,id:f.a.string,editType:f.a.string,rbacGroups:f.a.arrayOf(f.a.shape({value:f.a.oneOfType([f.a.number,f.a.string]).isRequired,label:f.a.string.isRequired})).isRequired,isFetching:f.a.bool,item:f.a.shape({id:f.a.string,name:f.a.string})};var ze=Object(m.o)(Object(d.connect)((function(e){return{isFetching:e.workflowReducer.isRecordLoading}}),(function(e){return Object(Z.a)({addNotification:ee.addNotification,addWorkflow:H,updateWorkflow:Q,fetchWorkflow:U,fetchRbacGroups:Te},e)}))(_e)),Ke=n(91),Je=n(270),Ue=function(e){var t=e.history,n=t.goBack,r=t.push,a=e.match.params.id,o=e.ids,c=e.removeWorkflow,i=e.removeWorkflows,l=e.fetchData,u=e.setSelectedWorkflows;if(!(a||o&&0!==o.length))return null;var p=function(){return n()};return s.a.createElement(Ie.Modal,{isOpen:!0,isSmall:!0,width:"40%",title:"",onClose:p,actions:[s.a.createElement(g.Button,{id:"cancel-remove-workflow",key:"cancel",variant:"secondary",type:"button",onClick:p},"Cancel"),s.a.createElement(g.Button,{id:"submit-remove-workflow",key:"submit",variant:"primary",type:"button",onClick:function(){return(a?c(a):i(o)).then(u([])).then(l()).then(r("/workflows"))}},"Confirm")]},s.a.createElement(Je.Bullseye,null,s.a.createElement(ce.TextContent,null,s.a.createElement(oe.Text,{component:oe.TextVariants.h1},s.a.createElement(Ke.a,{id:"remove-workflow-modal",defaultMessage:"Removing {count, number} {count, plural,\n              one {approval process}\n              other {approval processes}\n            }",values:{count:void 0!==a?1:o.length}})))))};Ue.propTypes={history:f.a.shape({goBack:f.a.func.isRequired,push:f.a.func.isRequired}).isRequired,match:f.a.object,removeWorkflows:f.a.func.isRequired,removeWorkflow:f.a.func.isRequired,fetchData:f.a.func.isRequired,setSelectedWorkflows:f.a.func.isRequired,workflowId:f.a.string,ids:f.a.array};var He=Object(m.o)(Object(d.connect)(null,(function(e){return Object(Z.a)({removeWorkflow:X,removeWorkflows:Y},e)}))(Ue)),Qe=n(2131),Xe=function(e){var t=e.description,n=e.groupRefs,r=e.id,a=Object(u.useState)([]),o=c()(a,2),i=o[0],l=o[1],p=Object(u.useState)(),f=c()(p,2),m=f[0],b=f[1],h=Object(u.useState)(),v=c()(h,2),g=v[0],w=v[1],y=Object(d.useSelector)((function(e){return e.workflowReducer.expandedWorkflows})),E=function(){return Promise.all(n.map((function(e){return function(e){return Object(R.b)().get("".concat(q.b,"/groups/").concat(e,"/")).then((function(e){return e.name})).catch((function(t){if(404!==t.status)throw t;return e}))}(e)})))};return Object(u.useEffect)((function(){m||!y.includes(r)||g||(w(!0),E().then((function(e){l(e),b(!0)})).catch((function(){return b(!0)})))}),[y]),s.a.createElement(u.Fragment,null,s.a.createElement(ce.TextContent,null,s.a.createElement(oe.Text,{className:"data-table-detail heading",component:oe.TextVariants.small},"Description"),s.a.createElement(oe.Text,{className:"data-table-detail content",component:oe.TextVariants.h5},t)),s.a.createElement(ce.TextContent,null,s.a.createElement(u.Fragment,null,s.a.createElement(oe.Text,{className:"data-table-detail heading",component:oe.TextVariants.small},"Groups"),m?s.a.createElement(oe.Text,{className:"data-table-detail content",component:oe.TextVariants.h5},i.join(",")):s.a.createElement("div",null,s.a.createElement(Qe.Skeleton,{size:Qe.SkeletonSize.sm})))))};Xe.propTypes={description:f.a.string,groupRefs:f.a.array.isRequired,id:f.a.string.isRequired};var Ye=Xe,Ze=function(e){return e.filter((function(e){return"Always approve"!==e.name})).reduce((function(e,t,n){var r=t.id,a=t.name,o=t.description,c=t.sequence,i=t.group_refs;return[].concat(ve()(e),[{id:r,isOpen:!1,selected:!1,cells:[a,o,c]},{parent:2*n,cells:[{title:s.a.createElement(Ye,{description:o,groupRefs:i,id:r})}]}])}),[])},$e=n(295),et=n(261),tt=n(275),nt=n(239),rt=n(287);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=[{title:"Name",cellFormatters:[E.b]},"Description","Sequence"],it=Object(ke.a)((function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.a;n(!0),t(J(e,r)).then((function(){return n(!1)}))}),1e3),lt={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},ut=function(e,t){switch(t.type){case"setFetching":return ot({},e,{isFetching:t.payload});case"setFilterValue":return ot({},e,{filterValue:t.payload});case"setFilteringFlag":return ot({},e,{isFiltering:t.payload});default:return e}},st=function(){var e=Object(u.useState)([]),t=c()(e,2),n=t[0],r=t[1],o=Object(u.useReducer)(ut,lt),i=c()(o,2),l=i[0],p=l.filterValue,f=l.isFetching,w=l.isFiltering,E=i[1],k=Object(d.useSelector)((function(e){return e.workflowReducer.workflows})),j=k.data,T=k.meta,S=Object(d.useDispatch)(),R=Object(m.k)();Object(u.useEffect)((function(){S(J(p,F.a)).then((function(){return E({type:"setFetching",payload:!1})})),Object(nt.b)()}),[]);var q=function(e){E({type:"setFilterValue",payload:e}),it(e,S,(function(e){return E({type:"setFilteringFlag",payload:e})}),ot({},T,{offset:0}))},x=function(e,t){E({type:"setFetching",payload:!0}),S(J(p,t)).then((function(){return E({type:"setFetching",payload:!1})})).catch((function(){return E({type:"setFetching",payload:!1})}))},P=n.length>0;return s.a.createElement(u.Fragment,null,s.a.createElement(et.a,null,s.a.createElement(et.b,{title:"Approval"}),s.a.createElement(tt.a,{tabItems:[{eventKey:0,title:"Request queue",name:"/requests"},{eventKey:1,title:"Approval processes",name:"/workflows"}]})),s.a.createElement($e.a,{data:j,isSelectable:!0,createRows:Ze,columns:ct,fetchData:x,routes:function(){return s.a.createElement(u.Fragment,null,s.a.createElement(m.d,{exact:!0,path:"/workflows/add-workflow",render:function(e){return s.a.createElement(Pe,a()({},e,{postMethod:x}))}}),s.a.createElement(m.d,{exact:!0,path:"/workflows/edit-info/:id",render:function(e){return s.a.createElement(Ae,a()({editType:"info"},e,{postMethod:x}))}}),s.a.createElement(m.d,{exact:!0,path:"/workflows/edit-stages/:id",render:function(e){return s.a.createElement(ze,a()({editType:"stages"},e,{postMethod:x}))}}),s.a.createElement(m.d,{exact:!0,path:"/workflows/edit-sequence/:id",render:function(e){return s.a.createElement(Ae,a()({editType:"sequence"},e,{postMethod:x}))}}),s.a.createElement(m.d,{exact:!0,path:"/workflows/remove/:id",render:function(e){return s.a.createElement(He,a()({},e,{fetchData:x,setSelectedWorkflows:r}))}}),s.a.createElement(m.d,{exact:!0,path:"/workflows/remove",render:function(e){return s.a.createElement(He,a()({},e,{ids:n,fetchData:x,setSelectedWorkflows:r}))}}))},actionResolver:function(e,t){return t.rowIndex%2==1?null:[{title:"Edit info",onClick:function(e,t,n){return R.push("/workflows/edit-info/".concat(n.id))}},{title:"Edit groups",onClick:function(e,t,n){return R.push("/workflows/edit-stages/".concat(n.id))}},{title:"Edit sequence",onClick:function(e,t,n){return R.push("/workflows/edit-sequence/".concat(n.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return R.push("/workflows/remove/".concat(n.id))}}]},titlePlural:"approval processes",titleSingular:"approval process",pagination:T,setCheckedItems:function(e){return r(e.map((function(e){return e.id})))},toolbarButtons:function(){return s.a.createElement(h.ToolbarGroup,{className:"pf-u-pl-lg top-toolbar"},s.a.createElement(v.ToolbarItem,null,s.a.createElement(b.Link,{id:"add-workflow-link",to:"/workflows/add-workflow"},s.a.createElement(g.Button,{variant:"primary","aria-label":"Create approval process"},"Create approval process"))),s.a.createElement(v.ToolbarItem,null,s.a.createElement(b.Link,{id:"remove-multiple-workflows",className:P?"":"disabled-link",to:{pathname:"/workflows/remove"}},s.a.createElement(g.Button,{variant:"link",isDisabled:!P,style:{color:P?"var(--pf-global--danger-color--100)":"var(--pf-global--disabled-color--100)"},"aria-label":"Delete approval process"},"Delete"))))},filterValue:p,onFilterChange:q,isLoading:f||w,onCollapse:function(e,t,n){S(function(e){return{type:O.d,payload:e}}(e)),t((function(t){return n(t,e)}))},renderEmptyState:function(){return s.a.createElement(rt.a,{title:""===p?"No approval processes":"No results found",Icon:y.a,PrimaryAction:function(){return""!==p?s.a.createElement(g.Button,{onClick:function(){return q("")},variant:"link"},"Clear all filters"):null},description:""===p?"No approval processes.":"No results match the filter criteria. Remove all filters or clear all filters to show results."})}}))};st.propTypes={history:f.a.shape({push:f.a.func.isRequired}).isRequired,workflows:f.a.array,isLoading:f.a.bool,selectedWorkflows:f.a.array},st.defaultProps={workflows:[],rbacGroups:{},isLoading:!1};t.default=st},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r={limit:50,offset:0,itemCount:1,numberOfItems:50},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return(e-1)*t}},239:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(0),a=n.n(r),o=n(323),c=["notified"],i=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},l=function(e){return c.includes(e)},u=function(e){return a.a.createElement("span",{key:e},a.a.createElement(o.DateFormat,{date:e,type:"relative"}))}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="".concat("/api","/approval/v1.0"),a="".concat("/api","/rbac/v1")},254:function(e,t,n){"use strict";var r=n(260);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,n)}},255:function(e,t,n){"use strict";n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return j})),n.d(t,"a",(function(){return T})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return x}));var r=n(247),a=n.n(r),o=n(248),c=n.n(o),i=n(3),l=n.n(i),u=n(298),s=n.n(u),p=n(243),f=n(304),d=n(314);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=s.a.create();h.interceptors.request.use(function(){var e=c()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h.interceptors.response.use((function(e){return e.data||e})),h.interceptors.response.use(null,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};throw b({},e.response)}));var v=new d.WorkflowApi(void 0,p.a,h),g=new d.ActionApi(void 0,p.a,h),w=new d.RequestApi(void 0,p.a,h),y=new d.TemplateApi(void 0,p.a,h),E=new f.GroupApi(void 0,p.b,h);function O(){return w}function k(){return y}function j(){return v}function T(){return g}function S(){return E}function R(){return h}var q=s.a.create();function x(){return q}q.interceptors.request.use(function(){var e=c()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q.interceptors.response.use((function(e){var t=e.data;if(t.errors)throw{message:t.errors[0].errorType,data:t.errors[0].message};return t}))},261:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),c=n.n(o),i=n(108),l=n(109),u=n(104),s=n(105),p=n(35),f=n(33),d=n(273),m=n(274),b=function(e){var t=e.breadcrumbs;return t?a.a.createElement(d.Breadcrumb,null,Object.values(t).map((function(e){return a.a.createElement(m.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&a.a.createElement(f.NavLink,{exact:!0,to:e.to},e.title)||e.title)}))):null};b.propTypes={breadcrumbs:c.a.arrayOf(c.a.shape({title:c.a.string.isRequired,isActive:c.a.bool,to:c.a.string}))};var h=b;n(272);n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var v=function(e){var t=e.children,n=e.breadcrumbs,r=e.paddingBottom;return a.a.createElement("div",{className:"pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg ".concat(r?"pf-u-pb-sm":""," top-toolbar")},n&&a.a.createElement(i.Level,{className:"pf-u-mb-md"},a.a.createElement(h,{breadcrumbs:n})),t)};v.propTypes={children:c.a.oneOfType([c.a.arrayOf(c.a.node),c.a.node]).isRequired,breadcrumbs:c.a.array,paddingBottom:c.a.bool},v.defaultProps={paddingBottom:!1};var g=function(e){var t=e.title,n=e.description,o=e.children;return a.a.createElement(r.Fragment,null,a.a.createElement(i.Level,null,a.a.createElement(l.LevelItem,null,a.a.createElement(s.TextContent,{className:"pf-u-mb-sm"},a.a.createElement(u.Text,{component:u.TextVariants.h1},t||a.a.createElement(p.d,null))),n&&a.a.createElement(s.TextContent,{className:"pf-u-pt-sm pf-u-mb-md"},a.a.createElement(u.Text,{component:u.TextVariants.p},n))),o))};g.propTypes={title:c.a.string,description:c.a.string,children:c.a.oneOfType([c.a.node,c.a.arrayOf(c.a.node)])}},272:function(e,t,n){},275:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),c=n.n(o),i=n(15),l=n(269),u=n(268),s=function(e){var t=e.history.push,n=e.location.pathname,r=e.tabItems,o=r.find((function(e){var t=e.name;return n.includes(t)}));return a.a.createElement(l.Tabs,{className:"pf-u-mt-sm",activeKey:o?o.eventKey:0,onSelect:function(e,n){return t(r[n].name)}},r.map((function(e){return a.a.createElement(u.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};s.propTypes={location:c.a.shape({pathname:c.a.string.isRequired}),history:c.a.shape({push:c.a.func.isRequired}),tabItems:c.a.array.isRequired},t.a=Object(i.o)(s)},287:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),c=n.n(o),i=(n(58),n(361)),l=n(362),u=n(363),s=n(364),p=n(104),f=n(105),d=n(345),m=(n(33),function(e){var t=e.title,n=e.Icon,r=e.description,o=e.PrimaryAction,c=e.renderDescription;return a.a.createElement(d.EmptyTable,{centered:!0,"aria-label":"No records"},a.a.createElement(i.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},a.a.createElement(l.EmptyStateIcon,{icon:n}),a.a.createElement(f.TextContent,null,a.a.createElement(p.Text,{component:p.TextVariants.h1},t)),a.a.createElement(u.EmptyStateBody,null,r,c()),a.a.createElement(s.EmptyStateSecondaryActions,null,o&&a.a.createElement(o,null))))});m.defaultProps={renderDescription:function(){return null}},m.propTypes={title:c.a.string.isRequired,Icon:c.a.any.isRequired,description:c.a.string.isRequired,PrimaryAction:c.a.any,renderDescription:c.a.func},t.a=m;c.a.string.isRequired,c.a.string.isRequired},295:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(235),c=n.n(o),i=n(0),l=n.n(i),u=n(1),s=n.n(u),p=n(276),f=n(278),d=n(250),m=n(108),b=n(109),h=n(245),v=n(374),g=n(373),w=n(236),y=n(251),E=n.n(y),O=n(110),k=n.n(O),j=n(244),T=function(e){var t=e.searchValue,n=e.onFilterChange,r=e.placeholder,a=e.isClearable;return l.a.createElement(d.ToolbarItem,null,l.a.createElement("div",{className:"toolbar-filter-input-group"},l.a.createElement(j.TextInput,{placeholder:r,value:t,type:"text",onChange:n,"aria-label":r}),l.a.createElement("span",{className:"filter-icons-container"},a&&t&&l.a.createElement(k.a,{className:"clear-filter",width:"16",height:"16",onClick:function(){return n("")}})||l.a.createElement(E.a,null))))};T.propTypes={onFilterChange:s.a.func.isRequired,placeholder:s.a.string,searchValue:s.a.string,isClearable:s.a.bool},T.defaultProps={searchValue:"",isClearable:!1};var S=T,R=n(66),q=n(35),x=n(27),P=n.n(x),C=n(39),I=n.n(C),D=n(260),F=n(111),G=function(e){var t=e.meta,n=t.limit,r=t.count,a=t.offset,o=e.apiProps,c=e.apiRequest,i=e.className,u=e.isCompact,s=I()(e,["meta","apiProps","apiRequest","className","isCompact"]);return l.a.createElement("div",{className:i},l.a.createElement(F.Pagination,P()({perPage:n||50,itemCount:r||0,onPerPageSelect:function(e,t){return c(o,{offset:a,limit:t})},page:Object(w.b)(n,a),onSetPage:function(e,t,r){var a={offset:Object(w.c)(t,n),limit:n},i=function(){return c(o,a)};return r?Object(D.a)(i,250)():i()},direction:"down",isCompact:u},s)))};G.propTypes={meta:s.a.shape({count:s.a.number,limit:s.a.number.isRequired,offset:s.a.number.isRequired}),apiRequest:s.a.func.isRequired,apiProps:s.a.any,className:s.a.string,isCompact:s.a.bool},G.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1};var N=G;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return B}));var B=function(e){var t=e.isSelectable,n=e.createRows,r=e.columns,a=e.fetchData,o=e.toolbarButtons,u=e.data,s=e.actionResolver,w=e.routes,y=e.titlePlural,E=e.titleSingular,O=e.pagination,k=e.setCheckedItems,j=e.filterValue,T=e.onFilterChange,x=e.isLoading,P=e.onCollapse,C=e.renderEmptyState,I=Object(i.useState)([]),D=c()(I,2),F=D[0],G=D[1];Object(i.useEffect)((function(){G(n(u))}),[u]);var V=function(e,t){return e.map((function(e){return e.id===t?W({},e,{isOpen:!e.isOpen}):W({},e)}))},B=function(e,t){var n=e.map((function(e){return e.id===t?W({},e,{selected:!e.selected}):W({},e)})),r=n.filter((function(e){return e.id&&e.selected}));return k(r),n};return l.a.createElement(R.Section,{type:"content","page-type":"tab-".concat(y),id:"tab-".concat(y)},w(),function(e){return l.a.createElement(p.Toolbar,{className:"pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg pf-u-pb-lg top-toolbar"},l.a.createElement(m.Level,{style:{flex:1}},l.a.createElement(b.LevelItem,null,l.a.createElement(p.Toolbar,null,l.a.createElement(S,{onFilterChange:T,searchValue:j,isClearable:!0,placeholder:"Filter by ".concat(E)}),o())),l.a.createElement(b.LevelItem,null,l.a.createElement(p.Toolbar,null,l.a.createElement(f.ToolbarGroup,null,l.a.createElement(d.ToolbarItem,null,l.a.createElement(N,{apiRequest:a,isDisabled:e,meta:O,isCompact:!0})))))))}(x),x&&l.a.createElement(q.b,null),x||0!==F.length?l.a.createElement(h.b,{"aria-label":"".concat(y," table"),onCollapse:function(e,t,n,r){var a=r.id;return P?P(a,G,V):G((function(e){return V(e,a)}))},rows:F,cells:r,onSelect:t&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.id;return G(-1===n?F.map((function(e){return W({},e,{selected:t})})):function(e){return B(e,a)})},actionResolver:s,className:"table-fix"},l.a.createElement(v.a,null),l.a.createElement(g.a,null)):C())};B.propTypes={isSelectable:s.a.bool,createRows:s.a.func.isRequired,columns:s.a.array.isRequired,toolbarButtons:s.a.func,fetchData:s.a.func.isRequired,data:s.a.array,pagination:s.a.shape({limit:s.a.number,offset:s.a.number,count:s.a.number}),titlePlural:s.a.string,titleSingular:s.a.string,routes:s.a.func,actionResolver:s.a.func,setCheckedItems:s.a.func,filterValue:s.a.string,onFilterChange:s.a.func,isLoading:s.a.bool,onCollapse:s.a.func,renderEmptyState:s.a.func},B.defaultProps={requests:[],isLoading:!1,pagination:w.a,toolbarButtons:function(){return null},isSelectable:null,routes:function(){return null},renderEmptyState:function(){return null}}}}]);
//# sourceMappingURL=../sourcemaps/workflows.js.map