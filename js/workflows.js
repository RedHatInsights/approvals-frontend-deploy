(self.webpackChunkapproval=self.webpackChunkapproval||[]).push([[893],{49214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({myRequests:{id:"tabs.myRequests",defaultMessage:"My requests"},allRequests:{id:"tabs.allRequests",defaultMessage:"All requests"},approvalProccess:{id:"tabs.approvalProcess",defaultMessage:"Approval processes"}})},7248:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({approvalTitle:{id:"commonMessages.approvalTitle",defaultMessage:"Approval"},product:{id:"commonMessages.product",defaultMessage:"Product"},portfolio:{id:"commonMessages.portfolio",defaultMessage:"Portfolio"},platform:{id:"commonMessages.platform",defaultMessage:"Platform"},order:{id:"commonMessages.order",defaultMessage:"Order"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"},actions:{id:"commonMessages.actions",defaultMessage:"Actions"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},delete:{id:"commonMessages.delete",defaultMessage:"Delete"},deleting:{id:"commonMessages.deleting",defaultMessage:"Deleting"},cancel:{id:"commonMessages.cancel",defaultMessage:"Cancel"},save:{id:"commonMessages.save",defaultMessage:"Save"}})},87388:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({createApprovalTitle:{id:"formMessages.createApprovalTitle",defaultMessage:"Create approval process"},generalInformation:{id:"formMessages.generalInformation",defaultMessage:"General information"},setGroups:{id:"formMessages.setGroups",defaultMessage:"Add groups"},enterInfo:{id:"formMessages.enterInfo",defaultMessage:"Enter your information"},approvalProcessName:{id:"formMessages.approvalProcessName",defaultMessage:"Name"},enterApprovalName:{id:"formMessages.enterApprovalName",defaultMessage:"Enter a name for the approval process"},description:{id:"formMessages.description",defaultMessage:"Description"},nameTaken:{id:"formMessages.nameTaken",defaultMessage:"Name has already been taken"},selectPlaceholder:{id:"formMessages.selectPlaceholder",defaultMessage:"Select..."},summary:{id:"formMessages.summary",defaultMessage:"Summary"},groups:{id:"formMessages.groups",defaultMessage:"Groups"},create:{id:"formMessages.create",defaultMessage:"Create"},existingGroupsMessage:{id:"formMessages.existingGroups",defaultMessage:"Current groups"}})},31004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({name:{id:"tableToolbar.name",defaultMessage:"Name"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},clearAllFilters:{id:"tableToolbar.clearAllFilters",defaultMessage:"Clear all filters"},clearAllFiltersDescription:{id:"tableToolbar.clearAllFiltersDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},ariaLabel:{id:"tableToolbar.ariaLabel",defaultMessage:"{title} table"}})},51403:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(30624),s=r.n(n),a=r(45697),o=r.n(a),i=r(92223),l=r(219),c=r(86728),u=r(74183),f=r(97446),p=r(63540),d=r(20018),m=function(e){var t=e.title,r=e.icon,n=e.description,a=e.PrimaryAction,o=e.renderDescription;return s().createElement(l.ub,{className:"pf-u-ml-auto pf-u-mr-auto"},s().createElement(c.k,{icon:r}),s().createElement(d.TextContent,null,s().createElement(p.Text,{component:p.TextVariants.h1},t)),s().createElement(u.B,null,n,o&&o()),s().createElement(f.i,null,a&&s().createElement(a,null)))};m.propTypes={title:o().string.isRequired,icon:o().any.isRequired,isSearch:o().bool,description:o().string.isRequired,PrimaryAction:o().any,renderDescription:o().func};const g=m;var v=function(e){var t=e.title,r=e.icon,n=e.isSearch,a=e.description,o=e.PrimaryAction,l=e.renderDescription;return n?s().createElement(i.Z,{centered:!0,"aria-label":"No records"},s().createElement(g,{title:t,icon:r,description:a,PrimaryAction:o,renderDescription:l})):s().createElement(g,{title:t,icon:r,description:a,PrimaryAction:o,renderDescription:l})};v.propTypes={title:o().string.isRequired,icon:o().any.isRequired,isSearch:o().bool,description:o().string.isRequired,PrimaryAction:o().any,renderDescription:o().func};const w=v},30060:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var n=r(87462),s=r(42982),a=r(4942),o=r(30624),i=r.n(o),l=r(45697),c=r.n(l),u=r(3326),f=r(61338),p=r(76690),d=r(86896),m=r(54213),g=r(66031),v=r(31004);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){var t,r=e.columns,a=e.fetchData,l=e.toolbarButtons,c=e.actionResolver,w=e.routes,b=e.titlePlural,h=e.titleSingular,M=e.pagination,P=e.filterValue,k=e.onFilterChange,E=e.isLoading,O=e.renderEmptyState,Z=e.sortBy,S=e.onSort,T=e.activeFiltersConfig,D=e.filterConfig,j=e.rows,A=e.ouiaId,R=(0,d.Z)(),C={itemCount:M.count,page:(0,f.FZ)(M.limit,M.offset),perPage:M.limit,onSetPage:function(e,t){return a(y(y({},M),{},{offset:(0,f.SJ)(t,M.limit)}))},onPerPageSelect:function(e,t){return a(y(y({},M),{},{limit:t}))},isDisabled:E};return i().createElement(m.Z,{type:"content","page-type":"tab-".concat(b),id:"tab-".concat(b)},w(),(0!==j.length||(null==T||null===(t=T.filters)||void 0===t?void 0:t.length)>0)&&i().createElement(g.Z,(0,n.Z)({className:"pf-u-p-lg ins__approval__primary_toolbar",pagination:C},l&&{actionsConfig:{dropdownProps:{position:"right"},actions:[l()]}},{filterConfig:{items:[{label:R.formatMessage(v.Z.name),filterValues:{id:"filter-by-name",placeholder:R.formatMessage(v.Z.filterByTitle,{title:h}),"aria-label":R.formatMessage(v.Z.filterByTitle,{title:h}),onChange:function(e,t){return k(t)},value:P}}].concat((0,s.Z)(D))},activeFiltersConfig:T})),E&&i().createElement(p.Eo,null),E||0!==j.length?i().createElement(o.Fragment,null,!E&&i().createElement(u.Table,{"aria-label":R.formatMessage(v.Z.ariaLabel,{title:b}),rows:j,cells:r,actionResolver:c,className:"pf-u-pt-0 vertical-align-inherit",sortBy:Z,onSort:S,ouiaId:A},i().createElement(u.TableHeader,null),i().createElement(u.TableBody,null)),M.count>0&&i().createElement(g.Z,{className:"pf-u-pl-lg pf-u-pr-lg ins__approval__primary_toolbar",pagination:y(y({},C),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"pf-u-pr-0"})})):O())};b.propTypes={columns:c().array.isRequired,toolbarButtons:c().func,fetchData:c().func.isRequired,pagination:c().shape({limit:c().number,offset:c().number,count:c().number}),titlePlural:c().string,titleSingular:c().string,routes:c().func,actionResolver:c().func,filterValue:c().string,onFilterChange:c().func,isLoading:c().bool,renderEmptyState:c().func,sortBy:c().object,onSort:c().func,activeFiltersConfig:c().object,filterConfig:c().array,rows:c().array,ouiaId:c().string},b.defaultProps={requests:[],isLoading:!1,pagination:f.he,routes:function(){return null},renderEmptyState:function(){return null},filterConfig:[]}},12824:(e,t,r)=>{"use strict";r.d(t,{H:()=>m});var n=r(30624),s=r.n(n),a=r(45697),o=r.n(a),i=r(334),l=r(98378),c=r(82819),u=r(18061),f=r(49214),p=r(86896),d=[{eventKey:0,message:f.Z.myRequests,name:"/requests"},{eventKey:1,message:f.Z.allRequests,name:"/allrequests"},{eventKey:2,message:f.Z.approvalProccess,name:"/workflows"}],m=function(e){var t=e.tabItems,r=void 0===t?d:t,n=(0,p.Z)(),a=(0,i.useHistory)(),o=(0,i.useLocation)(),f=o.pathname,m=o.search,g=r.find((function(e){var t=e.name;return f.includes(t)}));return s().createElement(l.mQ,{className:"pf-u-mt-sm",activeKey:g?g.eventKey:0,onSelect:function(e,t){return a.push({pathname:r[t].name,search:m})}},r.map((function(e){return s().createElement(c.O,{title:s().createElement(u.T,null,n.formatMessage(e.message)),key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};m.propTypes={tabItems:o().array}},18393:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(87462),s=r(4942),a=r(45987),o=r(30624),i=r.n(o),l=r(45697),c=r.n(l),u=r(78267),f=r(46182),p=r(26196),d=r(80345),m=r(94851),g=r(72969),v=r(56485),w=r(38089),y=r(90222),b=r(23811),h=r(77789);const M=function(e){var t=e.name,r=e.label,n=(0,h.default)({name:t}).input,s=n.value,a=n.onChange,o=function(e){if(a(s.filter((function(t){return t.value!==e}))),0===(null==s?void 0:s.length))return null};return s&&s.length?i().createElement(b.FormGroup,{fieldId:t,label:r},i().createElement(y.ChipGroup,null,s.map((function(e){var t=e.label,r=e.value;return i().createElement(w.Chip,{key:r.value,onClick:function(){return o(r)}},t)})))):""};var P=function(e){var t,r=e.templateProps,o=(0,a.Z)(e,["templateProps"]);return i().createElement("div",null,i().createElement(u.Z,(0,n.Z)({componentMapper:(t={},(0,s.Z)(t,f.default.SELECT,d.ZP),(0,s.Z)(t,f.default.TEXTAREA,m.Z),(0,s.Z)(t,f.default.TEXT_FIELD,g.Z),(0,s.Z)(t,f.default.SUB_FORM,v.Z),(0,s.Z)(t,"initial-chips",M),t),FormTemplate:function(e){return i().createElement(p.ZP,(0,n.Z)({},e,r))}},o)))};P.propTypes={templateProps:c().object,schema:c().object};const k=P},40729:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Qe,workflowsListState:()=>ze});var n=r(87462),s=r(70885),a=r(42982),o=r(4942),i=r(30624),l=r.n(i),c=r(37703),u=r(334),f=r(32895),p=r(59505),d=r(6202),m=r(32752),g=r(20777),v=r(71070),w=r(3326),y=r(36580),b=r(15861),h=r(87757),M=r.n(h),P=r(96692),k=r(61338),E=r(84866),O=(0,P.xZ)(),Z=(0,P.VZ)();function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.he,r="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),n="&filter[name][contains_i]=".concat(e);return(0,P.Hx)().get("".concat(E._R,"/workflows/?").concat(n).concat(r))}var T=function(e){return O.showWorkflow(e)};function D(e){return j.apply(this,arguments)}function j(){return(j=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return R.apply(this,arguments)}function R(){return R=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=(0,b.Z)(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}const C=(0,r(86244).defineMessages)({edit:{id:"worfklowMessages.edit",defaultMessage:"Edit"},editInformation:{id:"worfklowMessages.editInformation",defaultMessage:"Edit information"},deleteApprovalTitle:{id:"worfklowMessages.deleteApprovalTitle",defaultMessage:"Delete approval process"},approvalProcess:{id:"worfklowMessages.approvalProcess",defaultMessage:"approval process"},approvalProcesses:{id:"worfklowMessages.approvalProcesses",defaultMessage:"approval processes"},noApprovalProcesses:{id:"worfklowMessages.noApprovalProcesses",defaultMessage:"No approval processes"},createApprovalProcess:{id:"worfklowMessages.createApprovalProcess",defaultMessage:"Create approval process"},sequence:{id:"workflowMessages.sequence",defaultMessage:"Sequence"},enterSequence:{id:"workflowMessages.enterSequence",defaultMessage:"Enter sequence"},removeProcessTitle:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}}?"},removeProcessAriaLabel:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}} modal"},removeProcessDescription:{id:"workflowMessages.removeProcessDescription",defaultMessage:"{name} will be removed."},removeProcessDescriptionWithDeps:{id:"workflowMessages.removeProcessDescriptionWithDeps",defaultMessage:"{name} will be removed from the following applications: {dependenciesList}"},editProcessTitle:{id:"workflowMessages.editProcessTitle",defaultMessage:"Make any changes to approval process {name}"},addProcessSuccessTitle:{id:"workflowMessages.addProcessSuccessTitle",defaultMessage:"Success adding approval process"},addProcessSuccessDescription:{id:"workflowMessages.addProcessSuccessDescription",defaultMessage:"The approval process was added successfully."},updateProcessSuccessTitle:{id:"workflowMessages.updateProcessSuccessTitle",defaultMessage:"Success updating approval process"},updateProcessSuccessDescription:{id:"workflowMessages.updateProcessSuccessDescription",defaultMessage:"The approval process was updated successfully."},repositionProcessSuccessTitle:{id:"workflowMessages.repositionProcessSuccessTitle",defaultMessage:"Success updating approval process sequence"},repositionProcessSuccessDescription:{id:"workflowMessages.repositionProcessSuccessDescription",defaultMessage:"The approval process' sequence was updated successfully."},removeProcessSuccessTitle:{id:"workflowMessages.removeProcessSuccessTitle",defaultMessage:"Success removing approval process"},removeProcessSuccessDescription:{id:"workflowMessages.removeProcessSuccessDescription",defaultMessage:"The approval process was removed successfully."},removeProcessesSuccessTitle:{id:"workflowMessages.removeProcessesSuccessTitle",defaultMessage:"Success removing approval processes"},removeProcessesSuccessDescription:{id:"workflowMessages.removeProcessesSuccessDescription",defaultMessage:"The selected approval processes were removed successfully."},up:{id:"workflowMessages.up",defaultMessage:"up"},down:{id:"workflowMessages.down",defaultMessage:"down"}});var F=function(e){return function(t,r){var n=r().workflowReducer,s=n.workflows,a=n.filterValue,o=e;if(!e&&s){var i=s.meta;o={limit:i.limit,offset:i.offset}}return t({type:y.DI,payload:S(a,o)})}},_=function(e){return{type:y.dp,payload:e}},q=r(45987),x=r(86896),I=r(78826),N=r(26196),W=r(50409),L=r(18393),V=r(46182),B=r(94330),G=r(57666),H=r(87388);const U=(0,G.Z)((function(e,t,r){return function(e){return S(e)}(e).then((function(n){var s=n.data;if(t?s.find((function(r){return e===r.name&&t!==r.id})):s.find((function(t){return e===t.name})))throw r.formatMessage(H.Z.nameTaken)}))})),K=function(e,t){return[{component:V.default.TEXT_FIELD,name:"name",isRequired:!0,id:"workflow-name",label:e.formatMessage(H.Z.approvalProcessName),validate:[function(r){return U(r,t,e)},{type:B.default.REQUIRED,message:e.formatMessage(H.Z.enterApprovalName)}]},{component:V.default.TEXTAREA,name:"description",id:"workflow-description",label:e.formatMessage(H.Z.description)}]},X=(0,G.Z)((function(e){var t="&name=".concat(e);return(0,P.Hx)().get("".concat(E.OJ,'/groups/?role_names=",Approval Administrator,Approval Approver,"\n  ').concat(e&&e.length>0?t:"")).then((function(e){var t=e.data;return t&&t.length>0?t.map((function(e){var t=e.uuid;return{label:e.name,value:t}})):void 0}))}));function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(e,t,r){var n=r.getState().values.current_groups||[];return{key:n.length,loadOptions:function(){return e.loadOptions.apply(e,arguments).then((function(e){return e.map((function(e){return z(z({},e),n.find((function(t){return t.value===e.value}))?{isDisabled:!0}:{})}))}))}}};const $=function(e){return{component:V.default.SELECT,name:"group_refs",label:e.formatMessage(H.Z.setGroups),loadOptions:X,initialValue:[],clearedValue:[],noValueUpdates:!0,isMulti:!0,isSearchable:!0,simpleValue:!1,menuIsPortal:!0,isClearable:!0,placeholder:e.formatMessage(H.Z.selectPlaceholder),resolveProps:Q}},Y=function(e){return{component:"initial-chips",name:"current_groups",label:e.formatMessage(H.Z.existingGroupsMessage),initialValues:[]}},ee=function(e,t){return{fields:[].concat((0,a.Z)(K(e,t)),[$(e),Y(e)])}};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ne=function(){var e=(0,c.I0)(),t=(0,u.useHistory)().push,r=(0,x.Z)(),s=function(){return t(W.Z.workflows.index)};return l().createElement(I.u_,{isOpen:!0,onClose:s,title:r.formatMessage(H.Z.createApprovalTitle),variant:"small"},l().createElement(L.Z,{onSubmit:function(n){var s=n.group_refs,a=void 0===s?[]:s,o=(0,q.Z)(n,["group_refs"]);return t(W.Z.workflows.index),e(function(e,t){return{type:y.hu,payload:(r=e,Z.listTemplates().then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return O.addWorkflowToTemplate(e,r,{})}))),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.addProcessSuccessTitle),description:t.formatMessage(C.addProcessSuccessDescription)}}}};var r}(re(re({},o),{},{group_refs:a.length>0?a.map((function(e){return{name:e.label,uuid:e.value}})):[]}),r)).then((function(){return e(F())}))},onCancel:s,schema:ee(r),FormTemplate:function(e){return l().createElement(N.ZP,(0,n.Z)({},e,{buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))};var se=r(45697),ae=r.n(se),oe=r(63540),ie=r(20018),le=r(67463),ce=r(34348),ue=r(19694),fe=r(1054);const pe=function(e){var t=(0,c.v9)((function(e){return{workflows:e.workflowReducer.workflows}}),c.wU).workflows;return t&&t.data&&t.data.find((function(t){return t.id===e}))};var de=r(76690),me=r(7248),ge=r(41609),ve=r.n(ge);function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=function(e){var t=e.ids,r=void 0===t?[]:t,n=e.fetchData,o=e.pagination,f=void 0===o?k.he:o,p=e.resetSelectedWorkflows,m=(0,c.I0)(),g=(0,i.useState)(),v=(0,s.Z)(g,2),w=v[0],b=v[1],h=(0,i.useState)(!1),M=(0,s.Z)(h,2),P=M[0],O=M[1],Z=(0,u.useHistory)().push,S=(0,fe.Z)(["workflow"]),j=(0,s.Z)(S,1)[0].workflow||1===r.length&&r[0],R=(0,x.Z)(),F=pe(j);if((0,i.useEffect)((function(){var e;j&&!F&&m((e=j,{type:y.Cb,payload:T(e)})).then((function(e){var t=e.value;return b(t)})).catch((function(){return Z(W.Z.workflows.index)}))}),[]),!j&&0===r.length)return null;var _=function(){return Z(W.Z.workflows.index)},q=function(){var e=F||w;return e&&!ve()(e)&&e.metadata&&e.metadata.object_dependencies&&!ve()(e.metadata.object_dependencies)?Object.keys(e.metadata.object_dependencies).reduce((function(e,t){return[].concat((0,a.Z)(e),["".concat(E.Fe[t]||t)])}),[]):[]},N=l().createElement("b",{key:"remove-key"},j?w&&w.name||F&&F.name:l().createElement(l().Fragment,null,r.length," ",R.formatMessage(C.approvalProcesses))),L=j&&!F&&!w;return l().createElement(I.u_,{isOpen:!0,variant:"small","aria-label":R.formatMessage(C.removeProcessAriaLabel,{count:j?1:r.length}),header:l().createElement(ce.Title,{size:"2xl",headingLevel:"h1"},l().createElement(ue.ZP,{size:"sm",fill:"#f0ab00",className:"pf-u-mr-sm"}),R.formatMessage(C.removeProcessTitle,{count:j?1:r.length})),onClose:_,actions:[l().createElement(d.Button,{id:"submit-remove-workflow",ouiaId:"submit-remove-workflow",key:"submit",variant:"danger",type:"button",isDisabled:P,onClick:function(){return O(!0),m(j?function(e,t){return{type:y.J4,payload:D(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.removeProcessSuccessTitle),description:t.formatMessage(C.removeProcessSuccessDescription)}}}}}(j,R):function(e,t){return{type:y.qi,payload:A(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.removeProcessesSuccessTitle),description:t.formatMessage(C.removeProcessesSuccessDescription)}}}}}(r,R)).catch((function(){return O(!1)})).then((function(){return Z(W.Z.workflows.index)})).then((function(){return p()})).then((function(){return n(ye(ye({},f),{},{offset:(0,k.Vq)(f,j?1:r.length)}))}))}},P?l().createElement(l().Fragment,null,l().createElement(le.Spinner,{size:"sm",className:"pf-u-mr-md"}),R.formatMessage(me.Z.deleting)):R.formatMessage(me.Z.delete)),l().createElement(d.Button,{id:"cancel-remove-workflow",ouiaId:"cancel-remove-workflow",key:"cancel",variant:"link",type:"button",isDisabled:P,onClick:_},R.formatMessage(me.Z.cancel))]},l().createElement(ie.TextContent,null,l().createElement(oe.Text,{component:oe.TextVariants.p},L?l().createElement(de.Z0,null):ve()(q())?R.formatMessage(C.removeProcessDescription,{name:N}):R.formatMessage(C.removeProcessDescriptionWithDeps,{name:N,dependenciesList:l().createElement("span",{key:"span",className:"pf-u-mt-lg span-block"},q().map((function(e){return l().createElement("li",{key:e},e)})))}))))};be.propTypes={fetchData:ae().func.isRequired,ids:ae().array,resetSelectedWorkflows:ae().func.isRequired,pagination:ae().shape({limit:ae().number,offset:ae().number,count:ae().number})};const he=be;var Me=r(23218),Pe=r(36001),ke=r(42057),Ee=r(81159),Oe=r(34023),Ze=r(14132),Se=r(81875);const Te=(0,i.createContext)({selectedWorkflows:[]});var De=function(e){var t=e.id,r=(0,i.useContext)(Te).cache,n=(0,c.I0)(),s=(0,x.Z)(),a=(0,c.v9)((function(e){var t=e.workflowReducer,r=t.isUpdating,n=t.isLoading;return{isUpdating:r>0||n,property:u}})),o=a.isUpdating,u=a.property,f=function(e){var a;return n((a={id:t,sequence:e},{type:y.vd,payload:a})),function(e,t){return e[t]||(e[t]=(0,G.Z)((function(e,t,r){return t(function(e,t){return{type:y.gJ,payload:(r=e,O.reposition(r.id,r.sequence)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.repositionProcessSuccessTitle),description:t.formatMessage(C.repositionProcessSuccessDescription)}}}};var r}(e,r)).then((function(){return t(F())}))}),1500)),e[t]}(r,t)({id:t,sequence:e},n,s)};return l().createElement(Ee.K,null,l().createElement(Oe.v,null,l().createElement(d.Button,{ouiaId:"up-".concat(t),variant:"plain","aria-label":s.formatMessage(C.up),id:"up-".concat(t),onClick:function(){return f({increment:-1})},isDisabled:o},l().createElement(Ze.ZP,null))),l().createElement(Oe.v,null,l().createElement(d.Button,{variant:"plain","aria-label":s.formatMessage(C.down),id:"down-".concat(t),onClick:function(){return f({increment:1})},isDisabled:o,ouiaId:"down-".concat(t)},l().createElement(Se.ZP,null))))};De.propTypes={id:ae().string.isRequired};var je=function(e){var t=e.group_refs,r=e.id;return l().createElement(Pe.k,{key:r,className:"pf-u-mt-sm"},t.map((function(e){var t=e.name,r=e.uuid;return l().createElement(ke.B,{key:r},l().createElement(Me._,{className:"group-label pf-u-mb-sm"},t))})))};je.propTypes={id:ae().string,group_refs:ae().arrayOf(ae().shape({name:ae().string.isRequired,uuid:ae().string.isRequired}))};var Ae=function(e){var t=e.id,r=(0,i.useContext)(Te),n=r.selectedWorkflows,s=r.setSelectedWorkflows;return l().createElement(m.X,{id:"select-".concat(t),isChecked:n.includes(t),onChange:function(){return s(t)}})};Ae.propTypes={id:ae().string.isRequired};var Re=function(e){return e.map((function(e){var t=e.id,r=e.name,n=e.description,s=e.sequence,a=e.group_refs;return{id:t,cells:[l().createElement(l().Fragment,{key:"".concat(t,"-buttons")},l().createElement(De,{id:t,ouiaId:"".concat(t,"-buttons"),sequence:s})),l().createElement(l().Fragment,{key:"".concat(t,"-checkbox")},l().createElement(Ae,{id:t})),r,n,l().createElement(l().Fragment,{key:t},l().createElement(je,{key:t,group_refs:a,id:t}))]}}))},Ce=r(30060),Fe=r(37412),_e=r(12824),qe=r(51403),xe=r(31004);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var We=function(e,t){var r=t.type,n=t.initialValues,s=t.schema;return"loaded"===r?Ne(Ne({},e),{},{initialValues:n,schema:s,isLoading:!1}):e},Le=function(e){var t=e.group_refs.map((function(e){return{label:e.name,value:e.uuid}}));return Ne(Ne({},e),{},{group_refs:[],current_groups:t})};const Ve=function(){var e=(0,c.I0)(),t=(0,u.useHistory)().push,r=(0,x.Z)(),a=(0,fe.Z)(["workflow"]),o=(0,s.Z)(a,1)[0].workflow,f=pe(o),p=(0,i.useReducer)(We,{isLoading:!0}),d=(0,s.Z)(p,2),m=d[0],g=m.initialValues,v=m.schema,w=m.isLoading,b=d[1];(0,i.useEffect)((function(){f?b({type:"loaded",initialValues:Le(f),schema:ee(r,f.id)}):T(o).then((function(e){return b({type:"loaded",initialValues:Le(e),schema:ee(r,e.id)})}))}),[]);var h=function(){return t(W.Z.workflows.index)};return l().createElement(I.u_,{isOpen:!0,onClose:h,title:r.formatMessage(C.editInformation),description:!w&&r.formatMessage(C.editProcessTitle,{name:g.name}),variant:"small"},w&&l().createElement(de.q3,null),!w&&l().createElement(L.Z,{onSubmit:function(t){var n=t.group_refs,s=void 0===n?[]:n,a=t.description,o=void 0===a?"":a,i=(0,q.Z)(t,["group_refs","description"]);h();var l=i.current_groups?i.current_groups.concat(null==s?void 0:s.filter((function(e){return i.current_groups.indexOf(e)<0}))):s,c=Ne(Ne({},i),{},{description:o,group_refs:l.map((function(e){return{name:e.label,uuid:e.value}}))});return delete c.current_groups,e(function(e,t){return{type:y.$O,payload:(r=e,O.updateWorkflow(r.id,r)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(C.updateProcessSuccessTitle),description:t.formatMessage(C.updateProcessSuccessDescription)}}}};var r}(c,r)).then((function(){return e(F())}))},onCancel:h,schema:v,initialValues:g,FormTemplate:function(e){return l().createElement(N.ZP,(0,n.Z)({},e,{submitLabel:r.formatMessage(me.Z.save),buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))};function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(e,t,r){return[{title:"",transforms:[(0,w.cellWidth)(1)]},{title:l().createElement(m.X,{onChange:r,isChecked:t,id:"select-all"}),transforms:[(0,w.cellWidth)(1)]},{title:e.formatMessage(xe.Z.name)},{title:e.formatMessage(H.Z.description),transforms:[(0,w.cellWidth)(35)],cellTransforms:[w.truncate]},{title:e.formatMessage(H.Z.groups)}]},Ue=(0,G.Z)((function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k.he;return r(!0),t(_(e)),t(F(n)).then((function(){return r(!1)}))}),1e3),Ke=function(e,t){return e?[{category:t.formatMessage(xe.Z.name),key:"name",chips:[{name:e,value:e}]}]:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){return t.includes(e.id)}))},Je=function(e,t,r){return r.indexOf(e)===t},ze=function(e,t){switch(t.type){case"setRows":return Ge(Ge({},e),{},{rows:t.payload,selectedAll:Xe(t.payload,e.selectedWorkflows)});case"setFetching":return Ge(Ge({},e),{},{isFetching:t.payload});case"setFilterValue":return Ge(Ge({},e),{},{filterValue:t.payload});case"select":return Ge(Ge({},e),{},{selectedAll:!1,selectedWorkflows:e.selectedWorkflows.includes(t.payload)?e.selectedWorkflows.filter((function(e){return e!==t.payload})):[].concat((0,a.Z)(e.selectedWorkflows),[t.payload])});case"selectAll":return Ge(Ge({},e),{},{selectedWorkflows:[].concat((0,a.Z)(e.selectedWorkflows),(0,a.Z)(t.payload)).filter(Je),selectedAll:!0});case"unselectAll":return Ge(Ge({},e),{},{selectedWorkflows:e.selectedWorkflows.filter((function(e){return!t.payload.includes(e)})),selectedAll:!1});case"resetSelected":return Ge(Ge({},e),{},{selectedWorkflows:[],selectedAll:!1});case"setFilteringFlag":return Ge(Ge({},e),{},{isFiltering:t.payload});case"clearFilters":return Ge(Ge({},e),{},{filterValue:"",isFetching:!0});default:return e}};const Qe=function(){var e=(0,i.useRef)({}),t=(0,c.v9)((function(e){var t=e.workflowReducer;return{workflows:t.workflows,filterValueRedux:t.filterValue}}),c.wU),r=t.workflows,a=r.data,o=r.meta,m=t.filterValueRedux,w=(0,i.useReducer)(ze,function(){return{filterValue:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",isFetching:!0,isFiltering:!1,selectedWorkflows:[],selectedAll:!1,rows:[]}}(m)),b=(0,s.Z)(w,2),h=b[0],M=h.filterValue,P=h.isFetching,E=h.isFiltering,O=h.selectedWorkflows,Z=h.selectedAll,S=h.rows,T=b[1],D=(0,c.I0)(),j=(0,u.useHistory)(),A=(0,x.Z)(),R=function(e){return T({type:"setFetching",payload:!0}),D(F(e)).then((function(){return T({type:"setFetching",payload:!1})})).catch((function(){return T({type:"setFetching",payload:!1})}))};(0,i.useEffect)((function(){R(k.he)}),[]),(0,i.useEffect)((function(){T({type:"setRows",payload:Re(a)})}),[a]);var _=function(){return T({type:"clearFilters"}),D({type:y.fB}),R(o)},q=function(e){e&&""!==e?T({type:"setFilterValue",payload:e}):_(),Ue(e,D,(function(e){return T({type:"setFilteringFlag",payload:e})}),Ge(Ge({},o),{},{offset:0}))},I=O.length>0;return l().createElement(i.Fragment,null,l().createElement(Fe.Q,null,l().createElement(Fe.y,{title:A.formatMessage(me.Z.approvalTitle)}),l().createElement(_e.H,null)),l().createElement(Te.Provider,{value:{selectedWorkflows:O,setSelectedWorkflows:function(e){return T({type:"select",payload:e})},cache:e.current}},l().createElement(Ce.M,{ouiaId:"approval-process-table",rows:S,columns:He(A,Z,(function(){return T(Z?{type:"unselectAll",payload:a.map((function(e){return e.id}))}:{type:"selectAll",payload:a.map((function(e){return e.id}))})})),fetchData:R,routes:function(){return l().createElement(i.Fragment,null,l().createElement(u.Route,{exact:!0,path:W.Z.workflows.add,render:function(e){return l().createElement(ne,(0,n.Z)({},e,{postMethod:R}))}}),l().createElement(u.Route,{exact:!0,path:W.Z.workflows.edit,component:Ve}),l().createElement(u.Route,{exact:!0,path:W.Z.workflows.remove,render:function(e){return l().createElement(he,(0,n.Z)({},e,{ids:O,fetchData:R,pagination:o,resetSelectedWorkflows:function(){return T({type:"resetSelected"})}}))}}))},actionResolver:function(){return[{title:A.formatMessage(C.edit),component:"button",onClick:function(e,t,r){return j.push({pathname:W.Z.workflows.edit,search:"?workflow=".concat(r.id)})}},{title:A.formatMessage(me.Z.delete),component:"button",onClick:function(e,t,r){return j.push({pathname:W.Z.workflows.remove,search:"?workflow=".concat(r.id)})}}]},titlePlural:A.formatMessage(C.approvalProcesses),titleSingular:A.formatMessage(C.approvalProcess),pagination:o,toolbarButtons:function(){return l().createElement(f.ki,{className:"pf-u-pl-lg top-toolbar"},l().createElement(p.Eg,null,l().createElement(u.Link,{id:"add-workflow-link",to:{pathname:W.Z.workflows.add}},l().createElement(d.Button,{ouiaId:"add-workflow-link",variant:"primary","aria-label":A.formatMessage(H.Z.create)},A.formatMessage(H.Z.create)))),l().createElement(p.Eg,null,l().createElement(u.Link,{id:"remove-multiple-workflows",className:I?"":"disabled-link",to:{pathname:W.Z.workflows.remove}},l().createElement(d.Button,{variant:"secondary",isDisabled:!I,"aria-label":A.formatMessage(C.deleteApprovalTitle)},A.formatMessage(me.Z.delete)))))},filterValue:M,onFilterChange:q,isLoading:P||E,renderEmptyState:function(){return l().createElement(qe.Z,{title:""===M?A.formatMessage(C.noApprovalProcesses):A.formatMessage(xe.Z.noResultsFound),icon:ve()(M)?g.ZP:v.ZP,PrimaryAction:function(){return""!==M?l().createElement(d.Button,{onClick:function(){return _()},variant:"link"},A.formatMessage(xe.Z.clearAllFilters)):l().createElement(u.Link,{id:"create-workflow-link",to:{pathname:W.Z.workflows.add}},l().createElement(d.Button,{ouiaId:"create-workflow-link",variant:"primary","aria-label":A.formatMessage(C.createApprovalProcess)},A.formatMessage(C.createApprovalProcess)))},description:""===M?A.formatMessage(C.noApprovalProcesses):A.formatMessage(xe.Z.clearAllFiltersDescription),isSearch:!ve()(M)})},activeFiltersConfig:{filters:Ke(M,A),onDelete:function(){return q("")}}})))}},57666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(99166);const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return(0,n.Z)(e,t,r)}},1054:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(4942),s=r(334);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,s.useLocation)(),r=t.search,a=new URLSearchParams(r);return[e.reduce((function(e,t){return o(o({},e),{},(0,n.Z)({},t,a.get(t)))}),{}),r,a]}},70347:()=>{},80897:()=>{},81320:()=>{},21064:()=>{},82014:()=>{},25238:()=>{},56024:()=>{},43390:()=>{},314:()=>{},97236:()=>{},87234:()=>{},38299:()=>{}}]);
//# sourceMappingURL=../sourcemaps/workflows.57a5f8cdb61822420ade8bd771228d3c.js.map