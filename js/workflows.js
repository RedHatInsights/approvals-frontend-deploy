(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{2212:function(e,t,n){"use strict";n.r(t);var r=n(84),a=n.n(r),o=n(52),i=n.n(o),c=n(3),l=n.n(c),u=n(0),s=n.n(u),p=n(42),f=n(24),d=n(19),m=n(2205),b=n(2206),w=n(81),g=n(376),v=n.n(g),y=n(369),h=n(416),E=n(5),O=n(37),k=n.n(O),j=n(55),S=n.n(j),T=n(93),P=n(86),q=n(29),x=Object(T.g)(),C=Object(T.f)();function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.a,n=arguments.length>2?arguments[2]:void 0,r="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),a="&filter[name][contains_i]=".concat(e),o=n?"&sort_by=".concat(n.property,":").concat(n.direction):"";return Object(T.b)().get("".concat(q.a,"/workflows/?").concat(a).concat(r).concat(o))}function D(e){return I.apply(this,arguments)}function I(){return(I=S()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.showWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return V.apply(this,arguments)}function V(){return(V=S()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return G.apply(this,arguments)}function G(){return(G=S()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=S()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e){return function(t,n){var r=n().workflowReducer,a=r.sortBy,o=r.workflows,i=r.filterValue,c=e;if(!e&&o){var l=o.meta;c={limit:l.limit,offset:l.offset}}return t({type:E.l,payload:R(i,c,a)})}},B=function(e){return{type:E.k,payload:D(e)}},M=function(e){return{type:E.a,payload:(t=e,C.listTemplates().then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return x.addWorkflowToTemplate(e,t,{})}))),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding approval process",description:"The approval process was added successfully."}}}};var t},_=function(e){return{type:E.s,payload:(t=e,x.updateWorkflow(t.id,t)),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating approval process",description:"The approval process was updated successfully."}}}};var t},A=function(e){return{type:E.m,payload:F(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing approval process",description:"The approval process was removed successfully."}}}}},L=function(e){return{type:E.n,payload:N(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing approval processes",description:"The selected approval processes were removed successfully."}}}}},z=function(e){return{type:E.p,payload:e}},K=n(1),J=n.n(K),U=n(2200),H=n(35),Q=n(99),X=n(62),Y=n(82),Z=n(85),$=n(25),ee=n(43),te=n(83),ne=function(e){var t=e.formData,n=t||{name:"",description:"",wfGroups:[]},r=n.name,a=n.description,o=n.wfGroups;return s.a.createElement(u.Fragment,null,s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(te.Title,{size:"xl"}," Review ")),s.a.createElement(Z.StackItem,null,s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{className:"data-table-detail heading",component:$.TextVariants.h5},"Review and confirm your inputs. If there is anything incorrect, click Back and revise."))),s.a.createElement(Z.StackItem,null,s.a.createElement(Q.Grid,{gutter:"md"},s.a.createElement(X.GridItem,{span:2},s.a.createElement($.Text,{className:"data-table-detail heading",component:$.TextVariants.h5},"Name")),s.a.createElement(X.GridItem,{span:10},s.a.createElement($.Text,{className:"data-table-detail content",component:$.TextVariants.p},r))),s.a.createElement(Q.Grid,{gutter:"md"},s.a.createElement(X.GridItem,{span:2},s.a.createElement($.Text,{className:"data-table-detail heading",component:$.TextVariants.h5},"Description")),s.a.createElement(X.GridItem,{span:10},s.a.createElement($.Text,{className:"data-table-detail content",component:$.TextVariants.p},a))),o&&o.length>0&&o.map((function(e,t){return s.a.createElement(u.Fragment,{key:"Groups"},s.a.createElement(Q.Grid,{gutter:"md"},s.a.createElement(X.GridItem,{span:2},s.a.createElement($.Text,{key:e.value,className:"data-table-detail heading",component:$.TextVariants.h5},0===t?"Groups":"")),s.a.createElement(X.GridItem,{span:10},s.a.createElement($.Text,{key:e.label,className:"data-table-detail content",component:$.TextVariants.p},"".concat(o[t].label)))))})))))))};ne.propTypes={formData:J.a.object};var re=ne,ae=n(101),oe=n(54),ie=n(365),ce=n(428),le=n(362),ue=function(e){return function(e){return R(e)}(e).then((function(t){return t.data.find((function(t){return e===t.name}))?"Name has already been taken":void 0}))},se=function(e){var t=e.formData,n=e.initialValue,r=e.handleChange,a=e.setIsValid,o=e.title,c=void 0===o?void 0:o,l=t.name||"",p=t.description||"",f=Object(u.useState)(void 0),d=i()(f,2),m=d[0],b=d[1],w=function(e){b(e),a(!e)},g=function(e){var t,r;!e||e.length<1?b("Enter a name for the approval process"):n&&n.name===e?b(void 0):(t=e,r=w,Object(le.a)(ue(t).then((function(e){return r(e)}))))};return s.a.createElement(u.Fragment,null,s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(te.Title,{size:"md"}," ",c||"Enter your information"," ")),s.a.createElement(Z.StackItem,null,s.a.createElement(ae.Form,null,s.a.createElement(oe.FormGroup,{label:"Approval process name",isRequired:!0,fieldId:"workflow-name",isValid:!m,helperTextInvalid:m},s.a.createElement(ie.TextInput,{isRequired:!0,type:"text",id:"workflow-name",name:"workflow-name","aria-describedby":"workflow-name",value:l,isValid:!m,onBlur:function(){return g(l)},onChange:function(e,t){return function(e){b(!e||e.length<1?"Enter a name for the approval process":void 0),r({name:e})}(t.currentTarget.value)}})),s.a.createElement(oe.FormGroup,{label:"Description",fieldId:"workflow-description"},s.a.createElement(ce.TextArea,{type:"text",id:"workflow-description",name:"workflow-description",value:p,onChange:function(e,t){return r({description:t.currentTarget.value})}}))))))};se.propTypes={name:J.a.string,description:J.a.string,title:J.a.string,formData:J.a.object,handleChange:J.a.func.isRequired,isValid:J.a.bool,setIsValid:J.a.func.isRequired,initialValue:J.a.shape({name:J.a.string})};var pe=se,fe=n(2207);Object(T.d)();var de=function(e){var t="&name=".concat(e);return Object(T.b)().get("".concat(q.b,'/groups/?role_names=",Approval Administrator,Approval Approver,"\n  ').concat(e&&e.length>0?t:"")).then((function(e){var t=e.data;return t&&t.length>0?t.map((function(e){var t=e.uuid;return{label:e.name,value:t}})):void 0}))},me=n(34);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var we=function(e){var t=e.formData,n=e.handleChange,r=e.title,a=Object(u.useState)(!1),o=i()(a,2),c=o[0],f=o[1],d=Object(u.useState)([]),m=i()(d,2),b=m[0],w=m[1],g=Object(u.useState)([]),v=i()(g,2),y=v[0],h=v[1],O=Object(u.useState)([]),k=i()(O,2),j=k[0],S=k[1],T=Object(p.useSelector)((function(e){return e.groupReducer.groups||[]})),P=Object(p.useDispatch)();Object(u.useEffect)((function(){S(!0),P({type:E.g,payload:de()}).then((function(){return S(!1)}))}),[]),Object(u.useEffect)((function(){w(t.wfGroups?t.wfGroups:[])}),[t.wfGroups]);return s.a.createElement(u.Fragment,null,s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,{key:"title"},s.a.createElement(te.Title,{size:"md"},r||"Set groups")),s.a.createElement(Z.StackItem,{key:"group"},j&&s.a.createElement(me.e,null),!j&&s.a.createElement(fe.a,{cacheOptions:!0,isClearable:!0,isMulti:!0,styles:{menuPortal:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{zIndex:9999})}},menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"bottom",label:"Group","aria-label":"Group",onToggle:function(e){f(e)},key:"groups",onChange:function(e){return w(t=e),void n({wfGroups:t});var t},value:b,inpuValue:y,isexpanded:c,loadOptions:Object(le.a)(de),defaultOptions:T,onInputChange:function(e){return t=e.replace(/\W/g,""),void h(t);var t}}))))};we.propTypes={name:J.a.string,description:J.a.string,title:J.a.string,formData:J.a.object,handleChange:J.a.func};var ge=we,ve=n(348);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(){var e=Object(u.useState)({wfGroups:[]}),t=i()(e,2),n=t[0],r=t[1],a=Object(p.useDispatch)(),o=Object(f.k)().push,c=Object(p.useSelector)((function(e){return e.groupReducer.groups})),d=Object(u.useState)(void 0!==n.name&&n.name.length>0),m=i()(d,2),b=m[0],w=m[1],g=Object(u.useState)(1),v=i()(g,2),y=v[0],h=v[1],E=function(e){r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},e))},O=[{id:1,name:"General information",enableNext:b&&n.name&&n.name.length>0,component:s.a.createElement(pe,{formData:n,handleChange:E,setIsValid:w})},{id:2,name:"Set groups",canJumpTo:y>=2,enableNext:b&&n.name&&n.name.length>0,component:s.a.createElement(ge,{formData:n,handleChange:E,options:c})},{id:3,canJumpTo:y>=3,enableNext:b&&n.name&&n.name.length>0,name:"Review",component:s.a.createElement(re,{formData:n,options:c}),nextButtonText:"Confirm"}];return s.a.createElement(U.Wizard,{title:"Create approval process",isOpen:!0,onClose:function(){a(Object(H.addNotification)({variant:"warning",title:"Creating approval process",dismissable:!0,description:"Creating approval process was cancelled by the user."})),o(ve.a.workflows.index)},onSave:function(){var e=n.name,t=n.description,r=n.wfGroups,i={name:e,description:t,group_refs:r&&r.length>0?r.map((function(e){return{name:e.label,uuid:e.value}})):[]};o(ve.a.workflows.index),a(M(i)).then((function(){return a(W())}))},onNext:function(e){var t=e.id;h((function(e){return e<t?t:e}))},steps:O})};he.defaultProps={rbacGroups:[],initialValues:{}},he.propTypes={match:J.a.object,rbacGroups:J.a.arrayOf(J.a.shape({value:J.a.oneOfType([J.a.number,J.a.string]).isRequired,label:J.a.string.isRequired})).isRequired};var Ee=he,Oe=n(92),ke=n(396),je=n(356),Se=n(368),Te=n(367),Pe=function(e){var t=e.formData,n=e.handleChange,r=e.isValid,a=e.setIsValid,o=e.title,i=void 0===o?void 0:o,c=t.sequence;return s.a.createElement(u.Fragment,null,s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(te.Title,{size:"md"}," ",i||"Enter your information"," ")),s.a.createElement(Z.StackItem,null,s.a.createElement(ae.Form,null,s.a.createElement(oe.FormGroup,{label:"Enter sequence",isRequired:!0,fieldId:"workflow-sequence",isValid:r,helperTextInvalid:"Enter a positive number"},s.a.createElement(ie.TextInput,{isRequired:!0,type:"number",id:"workflow-sequence",isValid:r,name:"workflow-sequence","aria-describedby":"workflow-name",value:c,onChange:function(e,t){return function(e){a(e>=0),n({sequence:e})}(t.currentTarget.value)}}))))))};Pe.propTypes={sequence:J.a.string,title:J.a.string,formData:J.a.object,handleChange:J.a.func.isRequired,setIsValid:J.a.func.isRequired,isValid:J.a.bool};var qe=Pe,xe=n(352),Ce=function(e){var t=Object(p.useSelector)((function(e){return{workflows:e.workflowReducer.workflows}}),p.shallowEqual).workflows;return t&&t.data&&t.data.find((function(t){return t.id===e}))};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=function(e){var t=e.addNotification,n=e.fetchWorkflow,r=e.updateWorkflow,a=e.postMethod,o=e.workflow,c=e.isFetching,l=e.editType,p=Object(u.useState)({}),d=i()(p,2),m=d[0],b=d[1],g=Object(u.useState)({}),v=i()(g,2),y=v[0],h=v[1],E=Object(u.useState)(!0),O=i()(E,2),k=O[0],j=O[1],S=Object(f.k)().push,T=Object(xe.a)(["workflow"]),P=i()(T,1)[0].workflow,q=Ce(P),x=function(e){return b(De({},m,{},e))};Object(u.useEffect)((function(){q?b(De({},m,{},q)):n(P).then((function(e){b(De({},m,{},e.value)),h(De({},e.value))}))}),[]);var C=function(){var e="sequence"===l?{title:"Edit approval process's sequence",description:"Edit approval process's sequence was cancelled by the user."}:{title:"Edit approval process's information",description:"Edit approval process's information was cancelled by the user."};t({variant:"warning",title:e.title,dismissable:!0,description:e.description}),S("/workflows")},R=q?q.name:o&&o.name;return s.a.createElement(je.Modal,{title:"sequence"===l?"Edit sequence":"Edit information",width:"40%",isOpen:!0,onClose:C},s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(oe.FormGroup,{fieldId:"edit-workflow-info-modal-info"},c&&s.a.createElement(me.e,null),!c&&("info"===l?s.a.createElement(pe,{formData:m,initialValue:y,handleChange:x,setIsValid:j,title:"Make any changes to approval process ".concat(R)}):s.a.createElement(qe,{formData:m,initialValue:y,handleChange:x,isValid:k,setIsValid:j,title:"Set the sequence for the approval process ".concat(R)})))),s.a.createElement(Z.StackItem,null,s.a.createElement(ke.ActionGroup,null,s.a.createElement(Se.Split,{gutter:"md"},s.a.createElement(Te.SplitItem,null,s.a.createElement(w.Button,{"aria-label":"Save",id:"save-edit-workflow-info",variant:"primary",type:"submit",onClick:function(){if(k){var e=m.name,t=m.description,n=m.sequence;r({id:P,name:e,description:t,sequence:n}).then((function(){return a()})).then((function(){return S("/workflows")}))}}},"Save")),s.a.createElement(Te.SplitItem,null,s.a.createElement(w.Button,{id:"cancel-edit-workflow-info","aria-label":"Cancel",variant:"secondary",type:"button",onClick:C},"Cancel")))))))};Ie.defaultProps={isFetching:!1,editType:"info"},Ie.propTypes={addNotification:J.a.func.isRequired,fetchWorkflow:J.a.func.isRequired,postMethod:J.a.func.isRequired,updateWorkflow:J.a.func.isRequired,workflow:J.a.object,id:J.a.string,editType:J.a.string,isFetching:J.a.bool};var Fe=Object(p.connect)((function(e){var t=e.workflowReducer;return{workflow:t.workflow,isFetching:t.isRecordLoading}}),(function(e){return Object(Oe.a)({addNotification:H.addNotification,addWorkflow:M,updateWorkflow:_,fetchWorkflow:B},e)}))(Ie);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){var t=e.addNotification,n=e.fetchWorkflow,r=e.updateWorkflow,a=e.postMethod,o=e.isFetching,c=Object(u.useState)({}),l=i()(c,2),p=l[0],d=l[1],m=Object(f.k)().push,b=Object(xe.a)(["workflow"]),g=i()(b,1)[0].workflow,v=Ce(g),y=function(e){var t=e.group_refs.map((function(e){return{label:e.name,value:e.uuid}}));return Ne({},e,{wfGroups:t})};Object(u.useEffect)((function(){v?d(y(v)):n(g).then((function(e){return d(y(e.value))}))}),[]);var h=function(){t({variant:"warning",title:"Edit approval process's groups",dismissable:!0,description:"Edit approval process's groups was cancelled by the user."}),m("/workflows")};return s.a.createElement(je.Modal,{title:"Edit approval process's groups",width:"40%",isOpen:!0,onClose:h},s.a.createElement(Y.Stack,{gutter:"md"},s.a.createElement(Z.StackItem,null,s.a.createElement(oe.FormGroup,{fieldId:"workflow-groups-formgroup"},o&&s.a.createElement(me.e,null),!o&&s.a.createElement(Z.StackItem,{className:"groups-modal"},s.a.createElement(ge,{className:"groups-modal",formData:p,handleChange:function(e){d(Ne({},p,{},e))},title:"Add or remove ".concat(p.name,"'s groups")})))),s.a.createElement(Z.StackItem,null,s.a.createElement(ke.ActionGroup,null,s.a.createElement(Se.Split,{gutter:"md"},s.a.createElement(Te.SplitItem,null,s.a.createElement(w.Button,{"aria-label":"Save",variant:"primary",type:"submit",isDisabled:o,onClick:function(){var e=p.wfGroups,t={group_refs:e?e.map((function(e){return{name:e.label,uuid:e.value}})):[]};r(Ne({id:g},t)).then((function(){return a()})).then((function(){return m("/workflows")}))}},"Save")),s.a.createElement(Te.SplitItem,null,s.a.createElement(w.Button,{"aria-label":"Cancel",variant:"secondary",type:"button",onClick:h},"Cancel")))))))};Ge.defaultProps={isFetching:!1},Ge.propTypes={addNotification:J.a.func.isRequired,fetchWorkflow:J.a.func.isRequired,postMethod:J.a.func.isRequired,updateWorkflow:J.a.func.isRequired,isFetching:J.a.bool};var We=Object(p.connect)((function(e){return{isFetching:e.workflowReducer.isRecordLoading}}),(function(e){return Object(Oe.a)({addNotification:H.addNotification,addWorkflow:M,updateWorkflow:_,fetchWorkflow:B},e)}))(Ge),Be=n(2211),Me=n(401),_e=n(460),Ae=n.n(_e),Le=function(e){var t=e.ids,n=e.removeWorkflow,r=e.removeWorkflows,a=e.fetchData,o=e.setSelectedWorkflows,c=Object(u.useState)(!1),l=i()(c,2),p=l[0],d=l[1],m=Object(f.k)().push,b=Object(xe.a)(["workflow"]),g=i()(b,1)[0].workflow;if(!(g||t&&0!==t.length))return null;var v=function(){return m(ve.a.workflows.index)};return s.a.createElement(je.Modal,{isOpen:!0,isSmall:!0,width:"40%",title:"",onClose:v,actions:[s.a.createElement(w.Button,{id:"cancel-remove-workflow",key:"cancel",variant:"secondary",type:"button",onClick:v},"Cancel"),s.a.createElement(w.Button,{id:"submit-remove-workflow",key:"submit",variant:"primary",type:"button",isDisabled:p,onClick:function(){return d(!0),(g?n(g):r(t)).catch((function(){return d(!1)})).then((function(){return m(ve.a.workflows.index)})).then((function(){return o([])})).then((function(){return a()}))}},p?s.a.createElement(s.a.Fragment,null,s.a.createElement(Me.Spinner,{size:"sm"})," Removing "):"Remove")]},s.a.createElement(Se.Split,{gutter:"md"},s.a.createElement(Te.SplitItem,null,s.a.createElement(Ae.a,{size:"xl",fill:"#f0ab00"})),s.a.createElement(Te.SplitItem,null,s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{component:$.TextVariants.p},s.a.createElement(Be.a,{id:"remove-workflow-modal",defaultMessage:"Removing {count, number} {count, plural,\n              one {approval process}\n              other {approval processes}\n            }",values:{count:g?1:t.length}}))))))};Le.propTypes={removeWorkflows:J.a.func.isRequired,removeWorkflow:J.a.func.isRequired,fetchData:J.a.func.isRequired,setSelectedWorkflows:J.a.func.isRequired,ids:J.a.array};var ze=Object(p.connect)(null,(function(e){return Object(Oe.a)({removeWorkflow:A,removeWorkflows:L},e)}))(Le),Ke=n(31),Je=n.n(Ke),Ue=function(e){var t=e.description,n=e.groupRefs;return s.a.createElement(u.Fragment,null,s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{className:"data-table-detail heading",component:$.TextVariants.small},"Description"),s.a.createElement($.Text,{className:"data-table-detail content",component:$.TextVariants.h5},t)),s.a.createElement(ee.TextContent,null,s.a.createElement(u.Fragment,null,s.a.createElement($.Text,{className:"data-table-detail heading",component:$.TextVariants.small},"Groups"),s.a.createElement($.Text,{className:"data-table-detail content",component:$.TextVariants.h5},function(e){return e.map((function(e){return e.name}))}(n).join(",")))))};Ue.propTypes={description:J.a.string,groupRefs:J.a.array.isRequired,id:J.a.string.isRequired};var He=Ue,Qe=function(e){return e.reduce((function(e,t,n){var r=t.id,a=t.name,o=t.description,i=t.sequence,c=t.group_refs;return[].concat(Je()(e),[{id:r,isOpen:!1,selected:!1,cells:[a,o,i]},{parent:2*n,cells:[{title:s.a.createElement(He,{description:o,groupRefs:c,id:r})}]}])}),[])},Xe=n(398),Ye=n(63),Ze=n(397),$e=n(45),et=n(408);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=[{title:"Name",cellFormatters:[y.b],transforms:[h.a]},{title:"Description",transforms:[h.a]},{title:"Sequence",transforms:[h.a]}],at=Object(le.a)((function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.a;return n(!0),t(z(e)),t(W(r)).then((function(){return n(!1)}))}),1e3),ot=function(e){return e?[{category:"Name",key:"name",chips:[{name:e,value:e}]}]:[]},it=function(e,t){switch(t.type){case"setFetching":return nt({},e,{isFetching:t.payload});case"setFilterValue":return nt({},e,{filterValue:t.payload});case"setFilteringFlag":return nt({},e,{isFiltering:t.payload});default:return e}};t.default=function(){var e=Object(u.useState)([]),t=i()(e,2),n=t[0],r=t[1],o=Object(p.useSelector)((function(e){var t=e.workflowReducer;return{workflows:t.workflows,sortBy:t.sortBy,filterValueRedux:t.filterValue}}),p.shallowEqual),c=o.workflows,l=c.data,g=c.meta,y=o.sortBy,h=o.filterValueRedux,O=Object(u.useReducer)(it,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{filterValue:e,isOpen:!1,isFetching:!0,isFiltering:!1}}(h)),k=i()(O,2),j=k[0],S=j.filterValue,T=j.isFetching,q=j.isFiltering,x=k[1],C=Object(p.useDispatch)(),R=Object(f.k)();Object(u.useEffect)((function(){C(W(P.a)).then((function(){return x({type:"setFetching",payload:!1})})),Object($e.g)()}),[]);var D=function(e){x({type:"setFilterValue",payload:e}),at(e,C,(function(e){return x({type:"setFilteringFlag",payload:e})}),nt({},g,{offset:0}))},I=function(e){x({type:"setFetching",payload:!0}),C(W(e)).then((function(){return x({type:"setFetching",payload:!1})})).catch((function(){return x({type:"setFetching",payload:!1})}))},F=n.length>0;return s.a.createElement(u.Fragment,null,s.a.createElement(Ye.a,null,s.a.createElement(Ye.b,{title:"Approval"}),s.a.createElement(Ze.a,{tabItems:[{eventKey:0,title:"Request queue",name:"/requests"},{eventKey:1,title:"Approval processes",name:"/workflows"}]})),s.a.createElement(Xe.a,{sortBy:y,onSort:function(e,t,n,r){var a=r.property;return x({type:"setFetching",payload:!0}),C(function(e){return{type:E.r,payload:e}}({index:t,direction:n,property:a})),C(W()).then((function(){return x({type:"setFetching",payload:!1})})).catch((function(){return x({type:"setFetching",payload:!1})}))},data:l,isSelectable:!0,createRows:Qe,columns:rt,fetchData:I,routes:function(){return s.a.createElement(u.Fragment,null,s.a.createElement(f.d,{exact:!0,path:ve.a.workflows.add,render:function(e){return s.a.createElement(Ee,a()({},e,{postMethod:I}))}}),s.a.createElement(f.d,{exact:!0,path:ve.a.workflows.editInfo,render:function(e){return s.a.createElement(Fe,a()({editType:"info"},e,{postMethod:I}))}}),s.a.createElement(f.d,{exact:!0,path:ve.a.workflows.editGroups,render:function(e){return s.a.createElement(We,a()({editType:"groups"},e,{postMethod:I}))}}),s.a.createElement(f.d,{exact:!0,path:ve.a.workflows.editSequence,render:function(e){return s.a.createElement(Fe,a()({editType:"sequence"},e,{postMethod:I}))}}),s.a.createElement(f.d,{exact:!0,path:ve.a.workflows.remove,render:function(e){return s.a.createElement(ze,a()({},e,{ids:n,fetchData:I,setSelectedWorkflows:r}))}}))},actionResolver:function(e,t){return t.rowIndex%2==1?null:[{title:"Edit info",onClick:function(e,t,n){return R.push({pathname:ve.a.workflows.editInfo,search:"?workflow=".concat(n.id)})}},{title:"Edit groups",onClick:function(e,t,n){return R.push({pathname:ve.a.workflows.editGroups,search:"?workflow=".concat(n.id)})}},{title:"Edit sequence",onClick:function(e,t,n){return R.push({pathname:ve.a.workflows.editSequence,search:"?workflow=".concat(n.id)})}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return R.push({pathname:ve.a.workflows.remove,search:"?workflow=".concat(n.id)})}}]},titlePlural:"approval processes",titleSingular:"approval process",pagination:g,setCheckedItems:function(e){return r(e.map((function(e){return e.id})))},toolbarButtons:function(){return s.a.createElement(m.ToolbarGroup,{className:"pf-u-pl-lg top-toolbar"},s.a.createElement(b.ToolbarItem,null,s.a.createElement(d.Link,{id:"add-workflow-link",to:{pathname:ve.a.workflows.add}},s.a.createElement(w.Button,{variant:"primary","aria-label":"Create approval process"},"Create approval process"))),s.a.createElement(b.ToolbarItem,null,s.a.createElement(d.Link,{id:"remove-multiple-workflows",className:F?"":"disabled-link",to:{pathname:ve.a.workflows.remove}},s.a.createElement(w.Button,{variant:"link",isDisabled:!F,style:{color:F?"var(--pf-global--danger-color--100)":"var(--pf-global--disabled-color--100)"},"aria-label":"Delete approval process"},"Delete"))))},filterValue:S,onFilterChange:D,isLoading:T||q,onCollapse:function(e,t,n){C(function(e){return{type:E.e,payload:e}}(e)),t((function(t){return n(t,e)}))},renderEmptyState:function(){return s.a.createElement(et.a,{title:""===S?"No approval processes":"No results found",Icon:v.a,PrimaryAction:function(){return""!==S?s.a.createElement(w.Button,{onClick:function(){return D("")},variant:"link"},"Clear all filters"):null},description:""===S?"No approval processes.":"No results match the filter criteria. Remove all filters or clear all filters to show results."})},activeFiltersConfig:{filters:ot(S),onDelete:function(){return D("")}}}))}},348:function(e,t,n){"use strict";t.a={requests:{index:"/requests",addComment:"/requests/add-comment",approve:"/requests/approve",deny:"/requests/deny"},request:{index:"/request",addComment:"/request/add-comment",approve:"/request/approve",deny:"/request/deny"},workflows:{index:"/workflows",add:"/workflows/add-workflow",remove:"/workflows/remove",editInfo:"/workflows/edit-info",editGroups:"/workflows/edit-groups",editSequence:"/workflows/edit-sequence"}}},352:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(24);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(o.l)(),n=t.search,r=new URLSearchParams(n);return[e.reduce((function(e,t){return c({},e,a()({},t,r.get(t)))}),{}),n,r]}},362:function(e,t,n){"use strict";var r=n(469);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,n)}},397:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(24),l=n(393),u=n(392),s=function(e){var t=e.history.push,n=e.location.pathname,r=e.tabItems,o=r.find((function(e){var t=e.name;return n.includes(t)}));return a.a.createElement(l.Tabs,{className:"pf-u-mt-sm",activeKey:o?o.eventKey:0,onSelect:function(e,n){return t(r[n].name)}},r.map((function(e){return a.a.createElement(u.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};s.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}),history:i.a.shape({push:i.a.func.isRequired}),tabItems:i.a.array.isRequired},t.a=Object(c.o)(s)},398:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(84),a=n.n(r),o=n(31),i=n.n(o),c=n(3),l=n.n(c),u=n(52),s=n.n(u),p=n(0),f=n.n(p),d=n(1),m=n.n(d),b=n(355),w=n(468),g=n(467),v=n(86),y=n(34),h=n(2210),E=n(100),O=n(438);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.isSelectable,n=e.createRows,r=e.columns,o=e.fetchData,c=e.toolbarButtons,l=e.data,u=e.actionResolver,d=e.routes,m=e.titlePlural,k=e.titleSingular,S=e.pagination,T=e.setCheckedItems,P=e.filterValue,q=e.onFilterChange,x=e.isLoading,C=e.onCollapse,R=e.renderEmptyState,D=e.sortBy,I=e.onSort,F=e.activeFiltersConfig,V=e.filterConfig,N=Object(h.a)(),G=Object(p.useState)([]),W=s()(G,2),B=W[0],M=W[1];Object(p.useEffect)((function(){M(n(l))}),[l]);var _=function(e,t){return e.map((function(e){return e.id===t?j({},e,{isOpen:!e.isOpen}):j({},e)}))},A=function(e,t){var n=e.map((function(e){return e.id===t?j({},e,{selected:!e.selected}):j({},e)})),r=n.filter((function(e){return e.id&&e.selected}));return T(r),n},L={itemCount:S.count,page:Object(v.b)(S.limit,S.offset),perPage:S.limit,onSetPage:function(e,t){return o(j({},S,{offset:Object(v.c)(t,S.limit)}))},onPerPageSelect:function(e,t){return o(j({},S,{limit:t}))},isDisabled:x};return f.a.createElement(E.Section,{type:"content","page-type":"tab-".concat(m),id:"tab-".concat(m)},d(),f.a.createElement(O.PrimaryToolbar,a()({className:"pf-u-p-lg ins__approval__primary_toolbar",pagination:L},c&&{actionsConfig:{actions:[c()]}},{filterConfig:{items:[{label:N.formatMessage({id:"name",defaultMessage:"Name"}),filterValues:{id:"filter-by-name",placeholder:N.formatMessage({id:"filter-by-name",defaultMessage:"Filter by {title}"},{title:k}),"aria-label":N.formatMessage({id:"filter-by-name",defaultMessage:"Filter by {title}"},{title:k}),onChange:function(e,t){return q(t)},value:P}}].concat(i()(V))},activeFiltersConfig:F})),x&&f.a.createElement(y.b,null),x||0!==B.length?f.a.createElement(p.Fragment,null,!x&&f.a.createElement(b.b,{"aria-label":"".concat(m," table"),onCollapse:function(e,t,n,r){var a=r.id;return C?C(a,M,_):M((function(e){return _(e,a)}))},rows:B,cells:r,onSelect:t&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.id;return M(-1===n?B.map((function(e){return j({},e,{selected:t})})):function(e){return A(e,a)})},actionResolver:u,className:"table-fix",sortBy:D,onSort:I},f.a.createElement(w.a,null),f.a.createElement(g.a,null)),S.count>0&&f.a.createElement(O.PrimaryToolbar,{className:"pf-u-pl-lg pf-u-pr-lg ins__approval__primary_toolbar",pagination:j({},L,{dropDirection:"up",variant:"bottom",isCompact:!1})})):R())};S.propTypes={isSelectable:m.a.bool,createRows:m.a.func.isRequired,columns:m.a.array.isRequired,toolbarButtons:m.a.func,fetchData:m.a.func.isRequired,data:m.a.array,pagination:m.a.shape({limit:m.a.number,offset:m.a.number,count:m.a.number}),titlePlural:m.a.string,titleSingular:m.a.string,routes:m.a.func,actionResolver:m.a.func,setCheckedItems:m.a.func,filterValue:m.a.string,onFilterChange:m.a.func,isLoading:m.a.bool,onCollapse:m.a.func,renderEmptyState:m.a.func,sortBy:m.a.object,onSort:m.a.func,activeFiltersConfig:m.a.object,filterConfig:m.a.array},S.defaultProps={requests:[],isLoading:!1,pagination:v.a,isSelectable:null,routes:function(){return null},renderEmptyState:function(){return null},onSort:function(){return null},filterConfig:[]}},408:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=(n(81),n(103)),l=n(111),u=n(104),s=n(456),p=n(25),f=n(43),d=n(409),m=(n(19),function(e){var t=e.title,n=e.Icon,r=e.description,o=e.PrimaryAction,i=e.renderDescription;return a.a.createElement(d.EmptyTable,{centered:!0,"aria-label":"No records"},a.a.createElement(c.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},a.a.createElement(l.EmptyStateIcon,{icon:n}),a.a.createElement(f.TextContent,null,a.a.createElement(p.Text,{component:p.TextVariants.h1},t)),a.a.createElement(u.EmptyStateBody,null,r,i()),a.a.createElement(s.EmptyStateSecondaryActions,null,o&&a.a.createElement(o,null))))});m.defaultProps={renderDescription:function(){return null}},m.propTypes={title:i.a.string.isRequired,Icon:i.a.any.isRequired,description:i.a.string.isRequired,PrimaryAction:i.a.any,renderDescription:i.a.func},t.a=m;i.a.string.isRequired,i.a.string.isRequired}}]);
//# sourceMappingURL=../sourcemaps/workflows.js.map