!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],p=0,f=[];p<s.length;p++)i=s[p],r[i]&&f.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/beta/apps/approval/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([491,1]),n()}({115:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(0),i=n.n(o),s=n(137),c=n(136),l=n(135),u=n(74),p=function(e){var t=e.searchValue,n=e.onFilterChange,a=e.placeholder;return r.a.createElement(s.a,null,r.a.createElement(c.a,null,r.a.createElement("div",{className:"pf-c-input-group"},r.a.createElement(l.a,{placeholder:a,value:t,type:"text",onChange:n,"aria-label":"Find product button"}),r.a.createElement(u.c,{variant:"tertiary",id:"searchProductButton",onClick:function(){return n(t)}},r.a.createElement("i",{className:"fas fa-search","aria-hidden":"true"})))))};p.propTypes={onFilterChange:i.a.func.isRequired,placeholder:i.a.string,searchValue:i.a.string},p.defaultProps={searchValue:""},t.a=p},119:function(e,t,n){"use strict";var a=n(43),r=n.n(a),o=n(13),i=n.n(o),s=n(12),c=n.n(s),l=n(42),u=n.n(l),p=n(3),f=n.n(p),d=n(0),m=n.n(d),h=n(40),b=n.n(h),v=n(85),w=n(37),g=n.n(w),y=n(186),E=n(190),j=n(189),k=n(198),R=n(127),q=function(e){var t=e.input,n=e.options,a=e.isReadOnly,o=e.isDisabled,i=(e.FieldProvider,e.isRequired),s=u()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return f.a.createElement(y.a,r()({},t,s,{isDisabled:o||a}),function(e,t,n){if(t&&n)return e;var a=g()(e);return a.find(function(e){return void 0===e.value})?g()(a):[{label:n?"Please choose":"None"}].concat(g()(a))}(n,t.value,i).map(function(e){return f.a.createElement(E.a,r()({key:e.value||e.label},e,{label:e.label.toString()}))}))};q.propTypes={input:m.a.object.isRequired,options:m.a.arrayOf(m.a.shape({value:m.a.any,label:m.a.string.isRequired})).isRequired,isReadOnly:m.a.bool,isDisabled:m.a.bool,isRequired:m.a.bool,FieldProvider:m.a.any};var O=function(e){e.componentType;var t=e.label,n=e.isRequired,a=e.helperText,o=e.meta,i=e.description,s=e.hideLabel,c=u()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),l=o.error,p=o.touched&&l;return f.a.createElement(j.a,{isRequired:n,label:!s&&t,fieldId:c.id,isValid:!p,helperText:a,helperTextInvalid:o.error},i&&f.a.createElement(k.a,null,f.a.createElement(R.b,{component:R.a.small},i)),f.a.createElement(q,r()({label:t,isValid:!p,isRequired:n},c)))};O.propTypes={componentType:m.a.string,label:m.a.string,isRequired:m.a.bool,helperText:m.a.string,meta:m.a.object,description:m.a.string,hideLabel:m.a.bool};var T=O,C={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},F=function(e){var t=e.componentMapper,n=e.formContainer,a=u()(e,["componentMapper","formContainer"]);return f.a.createElement("div",{className:C[n].buttonClassName},f.a.createElement(b.a,r()({formFieldsMapper:c()({},v.formFieldsMapper,i()({componentMapper:t},h.componentTypes.SELECT,T)),layoutMapper:v.layoutMapper},C[n],a)))};F.propTypes={componentMapper:m.a.object,formContainer:m.a.oneOf(["default","modal"])},F.defaultProps={componentMapper:{},formContainer:"default"};t.a=F},21:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"c",function(){return u});var a="FETCH_REQUEST",r="FETCH_REQUESTS",o="FETCH_WORKFLOW",i="FETCH_WORKFLOWS",s="ADD_WORKFLOW",c="UPDATE_WORKFLOW",l="REMOVE_WORKFLOW",u="FETCH_RBAC_GROUPS"},441:function(e,t,n){var a={"./af":202,"./af.js":202,"./ar":203,"./ar-dz":204,"./ar-dz.js":204,"./ar-kw":205,"./ar-kw.js":205,"./ar-ly":206,"./ar-ly.js":206,"./ar-ma":207,"./ar-ma.js":207,"./ar-sa":208,"./ar-sa.js":208,"./ar-tn":209,"./ar-tn.js":209,"./ar.js":203,"./az":210,"./az.js":210,"./be":211,"./be.js":211,"./bg":212,"./bg.js":212,"./bm":213,"./bm.js":213,"./bn":214,"./bn.js":214,"./bo":215,"./bo.js":215,"./br":216,"./br.js":216,"./bs":217,"./bs.js":217,"./ca":218,"./ca.js":218,"./cs":219,"./cs.js":219,"./cv":220,"./cv.js":220,"./cy":221,"./cy.js":221,"./da":222,"./da.js":222,"./de":223,"./de-at":224,"./de-at.js":224,"./de-ch":225,"./de-ch.js":225,"./de.js":223,"./dv":226,"./dv.js":226,"./el":227,"./el.js":227,"./en-SG":228,"./en-SG.js":228,"./en-au":229,"./en-au.js":229,"./en-ca":230,"./en-ca.js":230,"./en-gb":231,"./en-gb.js":231,"./en-ie":232,"./en-ie.js":232,"./en-il":233,"./en-il.js":233,"./en-nz":234,"./en-nz.js":234,"./eo":235,"./eo.js":235,"./es":236,"./es-do":237,"./es-do.js":237,"./es-us":238,"./es-us.js":238,"./es.js":236,"./et":239,"./et.js":239,"./eu":240,"./eu.js":240,"./fa":241,"./fa.js":241,"./fi":242,"./fi.js":242,"./fo":243,"./fo.js":243,"./fr":244,"./fr-ca":245,"./fr-ca.js":245,"./fr-ch":246,"./fr-ch.js":246,"./fr.js":244,"./fy":247,"./fy.js":247,"./ga":248,"./ga.js":248,"./gd":249,"./gd.js":249,"./gl":250,"./gl.js":250,"./gom-latn":251,"./gom-latn.js":251,"./gu":252,"./gu.js":252,"./he":253,"./he.js":253,"./hi":254,"./hi.js":254,"./hr":255,"./hr.js":255,"./hu":256,"./hu.js":256,"./hy-am":257,"./hy-am.js":257,"./id":258,"./id.js":258,"./is":259,"./is.js":259,"./it":260,"./it-ch":261,"./it-ch.js":261,"./it.js":260,"./ja":262,"./ja.js":262,"./jv":263,"./jv.js":263,"./ka":264,"./ka.js":264,"./kk":265,"./kk.js":265,"./km":266,"./km.js":266,"./kn":267,"./kn.js":267,"./ko":268,"./ko.js":268,"./ku":269,"./ku.js":269,"./ky":270,"./ky.js":270,"./lb":271,"./lb.js":271,"./lo":272,"./lo.js":272,"./lt":273,"./lt.js":273,"./lv":274,"./lv.js":274,"./me":275,"./me.js":275,"./mi":276,"./mi.js":276,"./mk":277,"./mk.js":277,"./ml":278,"./ml.js":278,"./mn":279,"./mn.js":279,"./mr":280,"./mr.js":280,"./ms":281,"./ms-my":282,"./ms-my.js":282,"./ms.js":281,"./mt":283,"./mt.js":283,"./my":284,"./my.js":284,"./nb":285,"./nb.js":285,"./ne":286,"./ne.js":286,"./nl":287,"./nl-be":288,"./nl-be.js":288,"./nl.js":287,"./nn":289,"./nn.js":289,"./pa-in":290,"./pa-in.js":290,"./pl":291,"./pl.js":291,"./pt":292,"./pt-br":293,"./pt-br.js":293,"./pt.js":292,"./ro":294,"./ro.js":294,"./ru":295,"./ru.js":295,"./sd":296,"./sd.js":296,"./se":297,"./se.js":297,"./si":298,"./si.js":298,"./sk":299,"./sk.js":299,"./sl":300,"./sl.js":300,"./sq":301,"./sq.js":301,"./sr":302,"./sr-cyrl":303,"./sr-cyrl.js":303,"./sr.js":302,"./ss":304,"./ss.js":304,"./sv":305,"./sv.js":305,"./sw":306,"./sw.js":306,"./ta":307,"./ta.js":307,"./te":308,"./te.js":308,"./tet":309,"./tet.js":309,"./tg":310,"./tg.js":310,"./th":311,"./th.js":311,"./tl-ph":312,"./tl-ph.js":312,"./tlh":313,"./tlh.js":313,"./tr":314,"./tr.js":314,"./tzl":315,"./tzl.js":315,"./tzm":316,"./tzm-latn":317,"./tzm-latn.js":317,"./tzm.js":316,"./ug-cn":318,"./ug-cn.js":318,"./uk":319,"./uk.js":319,"./ur":320,"./ur.js":320,"./uz":321,"./uz-latn":322,"./uz-latn.js":322,"./uz.js":321,"./vi":323,"./vi.js":323,"./x-pseudo":324,"./x-pseudo.js":324,"./yo":325,"./yo.js":325,"./zh-cn":326,"./zh-cn.js":326,"./zh-hk":327,"./zh-hk.js":327,"./zh-tw":328,"./zh-tw.js":328};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=441},482:function(e,t,n){var a=n(483);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(339)(a,r);a.locals&&(e.exports=a.locals)},483:function(e,t,n){(t=e.exports=n(132)(!1)).i(n(484),""),t.push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\nbutton:focus {\n  outline: none; }\n\n.modal-form-right-align .pf-m-action:last-child .data-driven-forms__pf4-button-group:first-child {\n  margin-left: auto; }\n\n.data-table-detail.heading {\n  margin: 0 !important; }\n\n.data-table-detail.content {\n  margin-top: 0 !important; }\n\n.destructive-color:not(:disabled) {\n  color: #FF0000 !important; }\n",""])},490:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a),o=n(142),i=n.n(o),s=n(3),c=n.n(s),l=n(32),u=n(0),p=n.n(u),f=n(35),d=n(67),m=n(118),h=n(346),b=n(199),v=n(200),w=n(137),g=n(136),y=n(74),E=n(94),j=n(117),k=n(495),R=n(496),q=n(112),O=n(21),T=n(22),C=n.n(T),F=n(45),S=n.n(F),_=n(68),L=Object(_.a)();function N(){return x.apply(this,arguments)}function x(){return(x=S()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return W.apply(this,arguments)}function W(){return(W=S()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=S()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getGroup(t);case 2:return n=e.sent,e.abrupt("return",n.name);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var D=Object(_.d)(),A=Object(_.c)();function I(e){return z.apply(this,arguments)}function z(){return(z=S()(C.a.mark(function e(t){var n,a,o,i,s,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,a=void 0===n?10:n,o=t.offset,i=void 0===o?0:o,e.next=3,D.listWorkflows(a,i);case 3:return s=e.sent,c=s.data,e.abrupt("return",Promise.all(c.map(function(){var e=S()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.group_refs);case 2:return n=e.sent,e.abrupt("return",r()({},t,{group_names:n}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return r()({},s,{data:e})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return(M=S()(C.a.mark(function e(t){var n,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.showWorkflow(t);case 2:return n=e.sent,e.next=5,P(n.group_refs);case 5:return a=e.sent,e.abrupt("return",r()({},n,{group_names:a}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return(V=S()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.updateWorkflow(t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e){return B.apply(this,arguments)}function B(){return(B=S()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:O.g,payload:I(e)}},Q=function(e){return{type:O.f,payload:G(e)}},X=function(e){return{type:O.a,payload:(t=e,A.listTemplates().then(function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id}).then(function(e){return D.addWorkflowToTemplate(e,t,{})})),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding workflow",description:"The workflow was added successfully."},rejected:{variant:"danger",title:"Failed adding workflow",description:"The workflow was not added successfuly."}}}};var t},J=function(e){return{type:O.i,payload:U(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating workflow",description:"The workflow was updated successfully."},rejected:{variant:"danger",title:"Failed updating workflow",description:"The workflow was not updated successfuly."}}}}},Z=function(e){return{type:O.h,payload:K(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing workflow",description:"The workflow was removed successfully."}}}}},Y=n(13),$=n.n(Y),ee=n(37),te=n.n(ee),ne=n(42),ae=n.n(ne),re=n(53),oe=n(191),ie=n(57),se=n(85),ce=n(119),le=n(40),ue=function(e,t){return{fields:[{component:le.componentTypes.WIZARD,name:"workflow_wizard",fields:[{title:"Workflow information",name:"wf_step_info",stepKey:1,nextStep:"wf_step_stages",fields:[{component:le.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:!0,label:"Name",validate:[{type:le.validatorTypes.REQUIRED}]},{component:le.componentTypes.TEXTAREA_FIELD,name:"description",type:"text",label:"Description"}]},{stepKey:"wf_step_stages",title:"Set Approval Stages",name:"wf_step_stages",nextStep:"summary",fields:[{component:le.componentTypes.SELECT,name:"stage-1",isRequired:!1,label:"1st Stage",options:t},{component:le.componentTypes.SELECT,name:"stage-2",label:"2nd Stage",options:t},{component:le.componentTypes.SELECT,name:"stage-3",label:"3rd Stage",options:t}]},{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}]}]}},pe=n(198),fe=n(127),de=function(e){var t=e.values,n=t.name,a=t.description,r=ae()(t,["name","description"]);return c.a.createElement(s.Fragment,null,c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.h5},"Please review the workflow details")),c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.h5},"Name"),c.a.createElement(fe.b,{className:"data-table-detail content",component:fe.a.p},n)),c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.h5},"Description"),c.a.createElement(fe.b,{className:"data-table-detail content",component:fe.a.p},a)),c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.h5},"Approval Stages"),Object.keys(r).map(function(t){return t.startsWith("stage")&&c.a.createElement(fe.b,{key:t,className:"data-table-detail content",component:fe.a.p},"".concat(t," : ").concat(e.groupOptions.find(function(e){return e.value===r[t]}).label))})))};de.propTypes={name:p.a.string,description:p.a.string,groups:p.a.array};var me=de,he=function(e){var t=e.history.push,n=e.addWorkflow,a=e.addNotification,o=e.fetchWorkflow,i=e.fetchWorkflows,l=e.initialValues,u=e.updateWorkflow,p=e.initialGroups,f=e.workflowId,d=e.rbacGroups;Object(s.useEffect)(function(){f&&o(f).then(function(e){return b(e)})},[f]);var m=function(){a({variant:"warning",title:l?"Editing workflow":"Creating workflow",description:l?"Edit workflow was cancelled by the user.":"Creating workflow was cancelled by the user."}),t("/workflows")},h=[].concat(te()(d),[{value:void 0,label:"None"}]),b=function(e){return e.value.group_refs.map(function(e,t){return $()({},"stage-".concat(t+1),e)}).reduce(function(e,t){return r()({},e,t)},{})};return c.a.createElement(oe.a,{title:l?"Edit workflow":"Create workflow",isOpen:!0,onClose:m,isSmall:!0},c.a.createElement("div",{style:{padding:8}},c.a.createElement(ce.a,{schema:ue(0,h),schemaType:"default",onSubmit:function(e){var a=e.name,r=e.description,o=ae()(e,["name","description"]),s={name:a,description:r,group_refs:Object.values(o)};l?u(s).then(t("/workflows")).then(function(){return i()}):n(s).then(t("/workflows")).then(function(){return i()})},onCancel:m,initialValues:r()({},l,p),formFieldsMapper:r()({},se.formFieldsMapper,{summary:function(e){return c.a.createElement(me,{values:e.formOptions.getState().values,groupOptions:h})}}),formContainer:"modal",showFormControls:!1,buttonsLabels:{submitLabel:"Confirm"}})))};he.defaultProps={rbacGroups:[],initialGroups:[]},he.propTypes={history:p.a.shape({goBack:p.a.func.isRequired}).isRequired,addWorkflow:p.a.func.isRequired,addNotification:p.a.func.isRequired,fetchWorkflow:p.a.func.isRequired,fetchWorkflows:p.a.func.isRequired,initialValues:p.a.object,updateWorkflow:p.a.func.isRequired,workflowId:p.a.string,initialGroups:p.a.array,rbacGroups:p.a.arrayOf(p.a.shape({value:p.a.oneOfType([p.a.number,p.a.string]).isRequired,label:p.a.string.isRequired})).isRequired};var be=Object(d.f)(Object(l.connect)(function(e,t){var n=t.match.params.id,a=e.workflowReducer.selectedWorkflow;return{rbacGroups:e.groupReducer.groups,initialValues:n&&a,workflowId:n}},function(e){return Object(re.bindActionCreators)({addNotification:ie.addNotification,addWorkflow:X,updateWorkflow:J,fetchWorkflows:H,fetchWorkflow:Q},e)})(he)),ve=n(73),we=function(e){var t=e.history,n=t.goBack,a=t.push,r=e.removeWorkflow,o=e.fetchWorkflows,i=e.fetchWorkflow,l=e.workflowId,u=e.workflow;if(Object(s.useEffect)(function(){l&&i(l)},[l]),!u)return null;var p=function(){return n()};return c.a.createElement(oe.a,{isOpen:!0,isSmall:!0,title:"",onClose:p,actions:[c.a.createElement(y.c,{key:"cancel",variant:"secondary",type:"button",onClick:p},"Cancel"),c.a.createElement(y.c,{key:"submit",variant:"primary",type:"button",onClick:function(){return r(l).then(function(){o(),a("/workflows")})}},"Confirm")]},c.a.createElement(ve.a,null,c.a.createElement(pe.a,null,c.a.createElement(fe.b,{component:fe.a.h1},"Removing Workflow:  ",u.name))))};we.propTypes={history:p.a.shape({goBack:p.a.func.isRequired,push:p.a.func.isRequired}).isRequired,removeWorkflow:p.a.func.isRequired,fetchWorkflows:p.a.func.isRequired,fetchWorkflow:p.a.func.isRequired,workflowId:p.a.string,workflow:p.a.object};var ge=Object(d.f)(Object(l.connect)(function(e,t){var n=e.workflowReducer,a=n.selectedWorkflow,r=n.isLoading;return{workflowId:t.match.params.id,workflow:a,isLoading:r}},function(e){return Object(re.bindActionCreators)({fetchWorkflow:Q,fetchWorkflows:H,removeWorkflow:Z},e)})(we)),ye=n(52),Ee=function(e){var t=e.description,n=e.groups;return c.a.createElement(s.Fragment,null,c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.small},"Description"),c.a.createElement(fe.b,{className:"data-table-detail content",component:fe.a.h5},t)),c.a.createElement(pe.a,null,c.a.createElement(fe.b,{className:"data-table-detail heading",component:fe.a.small},"Groups"),c.a.createElement(fe.b,{className:"data-table-detail content",component:fe.a.h5},n.join(","))))};Ee.propTypes={description:p.a.string,groups:p.a.array};var je=Ee,ke=function(e){return e.filter(function(e){return"Always approve"!==e.name}).reduce(function(e,t,n){var a=t.id,r=t.name,o=t.description,i=t.group_names;return[].concat(te()(e),[{id:a,isOpen:!1,selected:!1,cells:[r,o,i.length]},{parent:2*n,cells:[{title:c.a.createElement(je,{description:o,groups:i})}]}])},[])},Re=n(115),qe=n(116),Oe=[{title:"Name",cellFormatters:[E.b]},"Description","Groups"],Te=function(e){var t=e.fetchRbacGroups,n=e.fetchWorkflows,a=e.pagination,o=e.workflows,l=e.history,u=Object(s.useState)(""),p=i()(u,2),E=p[0],O=p[1],T=Object(s.useState)([]),C=i()(T,2),F=C[0],S=C[1];Object(s.useEffect)(function(){t(),n().then(function(e){var t=e.value.data;return S(ke(t))}),Object(ye.c)()},[]);var _=function(e){return n({offset:a.offset,limit:e}).then(function(){return S(ke(o))})},L=function(e,t){var r={offset:Object(ye.b)(e,a.limit),limit:a.limit},o=function(){return n(r)};return t?Object(m.a)(o,250)():o().then(function(e){var t=e.value.data;return S(ke(t))})};return c.a.createElement(s.Fragment,null,c.a.createElement(d.b,{exact:!0,path:"/workflows/add-workflow",component:be}),c.a.createElement(d.b,{exact:!0,path:"/workflows/edit/:id",component:be}),c.a.createElement(d.b,{exact:!0,path:"/workflows/remove/:id",component:ge}),c.a.createElement(qe.TableToolbar,null,c.a.createElement(h.a,{style:{flex:1}},c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(Re.a,{onFilterChange:function(e){return O(e)},searchValue:E,placeholder:"Find a Workflow"}),c.a.createElement(w.a,null,c.a.createElement(g.a,null,c.a.createElement(f.b,{to:"/workflows/add-workflow"},c.a.createElement(y.c,{variant:"primary","aria-label":"Create Workflow"},"Create Workflow")))))),c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,null,c.a.createElement(g.a,null,c.a.createElement(q.Pagination,{itemsPerPage:a.limit||50,numberOfItems:a.count||50,onPerPageSelect:_,page:Object(ye.a)(a.limit,a.offset),onSetPage:L,direction:"down"}))))))),c.a.createElement(j.b,{"aria-label":"Approval Workflows table",onCollapse:function(e,t,n,a){var o=a.id;return S(function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{isOpen:!e.isOpen}):r()({},e)})}(e,o)})},rows:F,cells:Oe,onSelect:function(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return S(-1===n?F.map(function(e){return r()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{selected:!e.selected}):r()({},e)})}(e,a)})},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Edit",onClick:function(e,t,n){return l.push("/workflows/edit/".concat(n.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return l.push("/workflows/remove/".concat(n.id))}}]}},c.a.createElement(k.a,null),c.a.createElement(R.a,null)))};Te.propTypes={history:p.a.shape({goBack:p.a.func.isRequired,push:p.a.func.isRequired}).isRequired,filteredItems:p.a.array,workflows:p.a.array,platforms:p.a.array,isLoading:p.a.bool,searchFilter:p.a.string,fetchWorkflows:p.a.func.isRequired,fetchRbacGroups:p.a.func.isRequired,pagination:p.a.shape({limit:p.a.number.isRequired,offset:p.a.number.isRequired,count:p.a.number.isRequired})},Te.defaultProps={workflows:[],pagination:{}};t.default=Object(l.connect)(function(e){var t=e.workflowReducer,n=t.workflows,a=t.isLoading,r=e.groupReducer,o=r.groups,i=r.filterValue;return{workflows:n.data,pagination:n.meta,rbacGroups:o,isLoading:a,searchFilter:i}},function(e){return{fetchWorkflows:function(t){return e(H(t))},fetchRbacGroups:function(t){return e({type:O.c,payload:N().then(function(e){var t=e.data;return te()(t.map(function(e){return{value:e.uuid,label:e.name}}))})})}}})(Te)},491:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(3),s=n.n(i),c=n(9),l=n.n(c),u=n(35),p=n(32),f=n(358),d=n(64),m=n(57),h=n(352),b=n.n(h),v=n(353),w=n(13),g=n.n(w),y=n(12),E=n.n(y),j=n(21),k=function(e){return E()({},e,{isRequestDataLoading:!0})},R=(a={},g()(a,"".concat(j.e,"_PENDING"),k),g()(a,"".concat(j.e,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{requests:n,isRequestDataLoading:!1})}),g()(a,"".concat(j.d,"_PENDING"),k),g()(a,"".concat(j.d,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{selectedRequest:n,isRequestDataLoading:!1})}),a),q=function(e){return E()({},e,{isLoading:!0})},O=(r={},g()(r,"".concat(j.g,"_PENDING"),q),g()(r,"".concat(j.g,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{workflows:n,isLoading:!1})}),g()(r,"".concat(j.f,"_PENDING"),q),g()(r,"".concat(j.f,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{selectedWorkflow:n,isLoading:!1})}),r),T=(o={},g()(o,"".concat(j.c,"_PENDING"),function(e){return E()({},e,{isLoading:!0})}),g()(o,"".concat(j.c,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{groups:n,isLoading:!1})}),o),C=new d.ReducerRegistry({},[v.a,Object(f.a)(),Object(m.notificationsMiddleware)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]}),b.a]);C.register({requestReducer:Object(d.applyReducerHash)(R,{requests:[],request:{},filterValue:"",isRequestDataLoading:!1}),workflowReducer:Object(d.applyReducerHash)(O,{workflows:{data:[],meta:{count:0,limit:10,offset:0}},workflow:{},filterValue:"",isLoading:!1}),groupReducer:Object(d.applyReducerHash)(T,{groups:[],isLoading:!1}),notifications:m.notifications});var F=C.getStore(),S=n(107),_=n.n(S),L=n(108),N=n.n(L),x=n(109),P=n.n(x),W=n(110),D=n.n(W),A=n(39),I=n.n(A),z=n(111),G=n.n(z),M=n(0),U=n.n(M),V=n(67),K=n(42),B=n.n(K),H=n(140),Q=n.n(H),X=n(43),J=n.n(X),Z=n(37),Y=n.n(Z),$=n(141),ee=n(163),te=n(164),ne=n(165),ae=n(166),re=function(e){var t=e.items,n=B()(e,["items"]);return s.a.createElement(ee.a,{gutter:"md"},s.a.createElement(te.a,{sm:12,style:{padding:24}},s.a.createElement(ee.a,{gutter:"md"},Y()(Array(t)).map(function(e,t){return s.a.createElement(te.a,{sm:12,md:6,lg:3,key:t},s.a.createElement(ne.a,null,s.a.createElement(ae.a,null,s.a.createElement($.a,J()({height:160,width:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},n),s.a.createElement("rect",{x:"2",y:"99",rx:"3",ry:"3",width:"300",height:"6.4"})))))}))))};re.propTypes={items:U.a.number},re.defaultProps={items:1};var oe=function(e){return s.a.createElement("div",null,s.a.createElement($.a,J()({height:16,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#FFFFFF"},e),s.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"420",height:"10"})),s.a.createElement(re,null))},ie=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(492))})}),se=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(490))})}),ce="/requests",le="/workflows",ue=function(e){var t=e.rootClass,n=B()(e,["rootClass"]),a=document.getElementById("root");return a.removeAttribute("class"),a.classList.add("page__".concat(t),"pf-l-page__main","pf-c-page__main"),a.setAttribute("role","main"),s.a.createElement(V.b,n)};ue.propTypes={rootClass:U.a.string};var pe=function(){return s.a.createElement(i.Suspense,{fallback:s.a.createElement(oe,null)},s.a.createElement(V.d,null,s.a.createElement(ue,{path:ce,component:ie,rootClass:"requests"}),s.a.createElement(ue,{path:le,component:se,rootClass:"workflows"}),s.a.createElement(V.b,{render:function(){return s.a.createElement(V.a,{to:le})}})))},fe=(n(482),n(345)),de=n(197),me=[{eventKey:0,title:"Requests",name:"/requests"},{eventKey:1,title:"Workflows",name:"/workflows"}],he=function(e){var t=e.history.push,n=e.location.pathname,a=me.find(function(e){var t=e.name;return n.includes(t)});return s.a.createElement(fe.a,{className:"pf-u-mt-md",activeKey:a?a.eventKey:0,onSelect:function(e,n){return t(me[n].name)}},me.map(function(e){return s.a.createElement(de.a,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})}))};he.propTypes={children:U.a.oneOfType([U.a.node,U.a.arrayOf(U.a.node)]),location:U.a.shape({pathname:U.a.string.isRequired}),history:U.a.shape({push:U.a.func.isRequired})};var be=Object(V.f)(he),ve=n(134),we=(n(486),function(e){function t(){var e,n;_()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=P()(this,(e=D()(t)).call.apply(e,[this].concat(r))),g()(I()(n),"state",{chromeNavAvailable:!0,auth:!1}),n}return G()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=this;insights.chrome.init(),insights.chrome.auth.getUser().then(function(){return e.setState({auth:!0})}),insights.chrome.identifyApp("approval")}},{key:"render",value:function(){return this.state.auth?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.NotificationsPortal,null),s.a.createElement(d.PageHeader,{style:{paddingBottom:0}},s.a.createElement(ve.a,{headingLevel:"h1",size:"2xl"},"Approval"),s.a.createElement(be,null)),s.a.createElement(d.Main,null,s.a.createElement(pe,null))):s.a.createElement(oe,null)}}]),t}(i.Component));we.propTypes={history:U.a.object};var ge=Object(V.f)(Object(p.connect)()(we)),ye=window.location.pathname.split("/");ye.shift();var Ee="/";"beta"===ye[0]&&(Ee="/".concat(ye.shift(),"/")),l.a.render(s.a.createElement(p.Provider,{store:F},s.a.createElement(u.a,{basename:"".concat(Ee).concat(ye[0],"/").concat(ye[1])},s.a.createElement(ge,null))),document.getElementById("root"))},492:function(e,t,n){"use strict";n.r(t);var a=n(43),r=n.n(a),o=n(12),i=n.n(o),s=n(107),c=n.n(s),l=n(108),u=n.n(l),p=n(109),f=n.n(p),d=n(110),m=n.n(d),h=n(39),b=n.n(h),v=n(111),w=n.n(v),g=n(13),y=n.n(g),E=n(3),j=n.n(E),k=n(32),R=n(0),q=n.n(R),O=n(67),T=n(96),C=n.n(T),F=n(118),S=n(346),_=n(199),L=n(200),N=n(137),x=n(136),P=n(94),W=n(117),D=n(495),A=n(496),I=n(112),z=n(21),G=n(68),M=Object(G.b)();var U=function(e){return function(t,n){if(!n().requestReducer.isLoading)return t(function(){var e,t,n,a,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:z.e,payload:(e=o,t=e.limit,n=void 0===t?10:t,a=e.offset,r=void 0===a?0:a,M.listRequests(void 0,void 0,void 0,n,r))}}(e))}},V=n(119),K=n(53),B=n(191),H=n(57),Q=n(40),X=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return{component:Q.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:e,label:e?"Reason":"Comment"}}(e);return e&&(t.validate=[{type:Q.validatorTypes.REQUIRED}]),{fields:[t]}},J=function(e){var t=e.history.push,n=e.actionType,a=e.addNotification,r=e.fetchRequests,o=e.requestId,i=function(){var e="Add Comment"===n?n:"".concat(n," Request");a({variant:"warning",title:e,description:"".concat(e," was cancelled by the user.")}),t("/requests")};return j.a.createElement(B.a,{isLarge:!0,title:"Add Comment"===n?"Request #".concat(o):"".concat(n," Request #").concat(o),isOpen:!0,onClose:i},j.a.createElement(V.a,{schema:X("Deny"===n),schemaType:"default",onSubmit:function(){r().then(t("/requests"))},onCancel:i,formContainer:"modal"}))};J.propTypes={history:q.a.shape({push:q.a.func.isRequired}).isRequired,addNotification:q.a.func.isRequired,fetchRequests:q.a.func.isRequired,requests:q.a.object,requestId:q.a.string,actionType:q.a.string,match:q.a.object,location:q.a.object};var Z=Object(O.f)(Object(k.connect)(function(e,t){var n=t.match.params.id;return{requests:e.requestReducer.requests,requestId:n}},function(e){return Object(K.bindActionCreators)({addNotification:H.addNotification,fetchRequests:U},e)})(J)),Y=n(52),$=n(37),ee=n.n($),te=n(35),ne=n(198),ae=n(127),re=n(74),oe=function(e){var t=e.id,n=e.content;return j.a.createElement(E.Fragment,null,j.a.createElement(S.a,null,j.a.createElement(_.a,null,j.a.createElement(ne.a,null,j.a.createElement(ae.b,{className:"data-table-detail heading",component:ae.a.small},"Product"),j.a.createElement(ae.b,{className:"data-table-detail content",component:ae.a.h5},n?n.product:"Unknown"))),j.a.createElement(_.a,null,j.a.createElement(te.b,{to:"/requests/approve/".concat(t)},j.a.createElement(re.c,{variant:"link","aria-label":"Approve Request"},"Approve")),j.a.createElement(te.b,{to:"/requests/deny/".concat(t)},j.a.createElement(re.c,{variant:"link",className:"destructive-color","aria-label":"Deny Request"},"Deny")))),j.a.createElement(S.a,null,j.a.createElement(_.a,null,j.a.createElement(ne.a,null,j.a.createElement(ae.b,{className:"data-table-detail heading",component:ae.a.small},"Portfolio"),j.a.createElement(ae.b,{className:"data-table-detail content",component:ae.a.h5},n?n.portfolio:"Unknown")),j.a.createElement(ne.a,null,j.a.createElement(ae.b,{className:"data-table-detail heading",component:ae.a.small},"Platform"),j.a.createElement(ae.b,{className:"data-table-detail content",component:ae.a.h5},n?n.platform:"Unknown")),j.a.createElement(ne.a,null,j.a.createElement(ae.b,{className:"data-table-detail heading",component:ae.a.small},"Comments"),j.a.createElement(ae.b,{className:"data-table-detail content",component:ae.a.h5},n?n.comments:"Unknown")))))};oe.propTypes={id:q.a.string,content:q.a.object};var ie=oe,se=function(e){return e.reduce(function(e,t,n){var a=t.id,r=t.requester,o=t.created_at,i=t.updated_at,s=t.state,c=t.decision,l=t.content;return[].concat(ee()(e),[{id:a,isOpen:!1,cells:[a,r,Object(Y.d)(o),Object(Y.d)(i),s,c]},{parent:2*n,cells:[{title:j.a.createElement(ie,{id:a,content:l})}]}])},[])},ce=n(115),le=n(116),ue=[{title:"RequestId",cellFormatters:[P.b]},"Requester","Opened","Updated","Stage Status","Decision"],pe=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),y()(b()(n),"state",{filteredItems:[],isOpen:!1,filterValue:"",rows:[]}),y()(b()(n),"fetchData",function(){n.props.fetchRequests().then(function(){return n.setState({rows:se(n.props.requests)})})}),y()(b()(n),"handleOnPerPageSelect",function(e){return n.props.fetchRequests({offset:n.props.pagination.offset,limit:e}).then(function(){return n.setState({rows:se(n.props.requests)})})}),y()(b()(n),"handleSetPage",function(e,t){var a={offset:Object(Y.b)(e,n.props.pagination.limit),limit:n.props.pagination.limit},r=function(){return n.props.fetchRequests(a)};return t?Object(F.a)(r,250)():r().then(function(){return n.setState({rows:se(n.props.requests)})})}),y()(b()(n),"setOpen",function(e,t){return e.map(function(e){return e.id===t?i()({},e,{isOpen:!e.isOpen}):i()({},e)})}),y()(b()(n),"setSelected",function(e,t){return e.map(function(e){return e.id===t?i()({},e,{selected:!e.selected}):i()({},e)})}),y()(b()(n),"onFilterChange",function(e){return n.setState({filterValue:e})}),y()(b()(n),"onCollapse",function(e,t,a,r){var o=r.id;return n.setState(function(e){var t=e.rows;return{rows:n.setOpen(t,o)}})}),y()(b()(n),"selectRow",function(e,t,a){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return-1===a?n.setState(function(e){return{rows:e.rows.map(function(e){return i()({},e,{selected:t})})}}):n.setState(function(e){var t=e.rows;return{rows:n.setSelected(t,r)}})}),y()(b()(n),"actionResolver",function(e,t){return 1===t.rowIndex?null:[{title:"Comment",onClick:function(){return n.props.history.push("/requests/add_comment/".concat(e.id))}}]}),n}return w()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.fetchData(),Object(Y.c)()}},{key:"componentDidUpdate",value:function(e){C()(this.props.requests,e.requests)||this.setState({rows:se(this.props.requests)})}},{key:"renderToolbar",value:function(){return j.a.createElement(le.TableToolbar,null,j.a.createElement(S.a,{style:{flex:1}},j.a.createElement(_.a,null,j.a.createElement(L.a,null,j.a.createElement(ce.a,{onFilterChange:this.onFilterChange,searchValue:this.state.filterValue,placeholder:"Find a Request"}))),j.a.createElement(_.a,null,j.a.createElement(L.a,null,j.a.createElement(N.a,null,j.a.createElement(x.a,null,j.a.createElement(I.Pagination,{itemsPerPage:this.props.pagination.limit||50,numberOfItems:this.props.pagination.count||50,onPerPageSelect:this.handleOnPerPageSelect,page:Object(Y.a)(this.props.pagination.limit,this.props.pagination.offset),onSetPage:this.handleSetPage,direction:"down"})))))))}},{key:"render",value:function(){return j.a.createElement(E.Fragment,null,j.a.createElement(O.b,{exact:!0,path:"/requests/add_comment/:id",render:function(e){return j.a.createElement(Z,r()({},e,{actionType:"Add Comment"}))}}),j.a.createElement(O.b,{exact:!0,path:"/requests/approve/:id",render:function(e){return j.a.createElement(Z,r()({},e,{actionType:"Approve"}))}}),j.a.createElement(O.b,{exact:!0,path:"/requests/deny/:id",render:function(e){return j.a.createElement(Z,r()({},e,{actionType:"Deny"}))}}),this.renderToolbar(),j.a.createElement(W.b,{"aria-label":"Approval Requests table",onCollapse:this.onCollapse,rows:this.state.rows,cells:ue,onSelect:this.selectRow,actionResolver:this.actionResolver},j.a.createElement(D.a,null),j.a.createElement(A.a,null)))}}]),t}(E.Component);pe.propTypes={history:q.a.shape({goBack:q.a.func.isRequired,push:q.a.func.isRequired}).isRequired,filteredItems:q.a.array,requests:q.a.array,platforms:q.a.array,isLoading:q.a.bool,searchFilter:q.a.string,fetchRequests:q.a.func.isRequired,pagination:q.a.shape({limit:q.a.number.isRequired,offset:q.a.number.isRequired,count:q.a.number.isRequired})},pe.defaultProps={requests:[],pagination:{}};t.default=Object(k.connect)(function(e){var t=e.requestReducer,n=t.requests,a=t.isLoading,r=t.filterValue;return{requests:n.data,pagination:n.meta,isLoading:a,searchFilter:r}},function(e){return{fetchRequests:function(t){return e(U(t))}}})(pe)},52:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c});var a=n(5),r=n.n(a),o=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},s=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1?arguments[1]:void 0)},c=function(e){return r()(e).fromNow()}},68:function(e,t,n){"use strict";var a=n(97),r=n.n(a),o="".concat("/api","/approval/v1.0"),i="".concat("/api","/rbac/v1"),s=n(120),c=n(87);n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return v});var l=r.a.create();l.interceptors.response.use(function(e){return e.data||e});var u=new c.WorkflowApi(void 0,o,l),p=(new c.ActionApi(void 0,o,l),new c.RequestApi(void 0,o,l)),f=new c.TemplateApi(void 0,o,l),d=(new s.AccessApi(void 0,i,l),new s.PrincipalApi(void 0,i,l),new s.GroupApi(void 0,i,l));function m(){return p}function h(){return f}function b(){return u}function v(){return d}}});
//# sourceMappingURL=../sourcemaps/App.js.map