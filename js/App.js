!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)i=s[d],r[i]&&f.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/apps/approval/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([491,1]),n()}({108:function(e,t,n){"use strict";var a=n(17),r=n.n(a),o=n(130),i=n.n(o),s=n(3),c=n.n(s),l=n(0),u=n.n(l),d=n(358),f=n(339),p=n(184),m=n(185),h=n(187),b=n(186),v=n(107),w=n(495),g=n(496),y=n(355),j=n(67),E=n(171),k=n(83),R=function(e){var t=e.searchValue,n=e.onFilterChange,a=e.placeholder;return c.a.createElement(h.a,null,c.a.createElement(b.a,null,c.a.createElement("div",{className:"pf-c-input-group"},c.a.createElement(E.a,{placeholder:a,value:t,type:"text",onChange:n,"aria-label":"Find product button"}),c.a.createElement(k.c,{variant:"tertiary",id:"searchProductButton",onClick:function(){return n(t)}},c.a.createElement("i",{className:"fas fa-search","aria-hidden":"true"})))))};R.propTypes={onFilterChange:u.a.func.isRequired,placeholder:u.a.string,searchValue:u.a.string},R.defaultProps={searchValue:""};var q=R,O=n(356);n.d(t,"a",function(){return T});var T=function(e){var t=e.request,n=e.createInitialRows,a=e.columns,o=e.toolbarButtons,l=e.fetchData,u=e.data,E=e.actionResolver,k=e.routes,R=e.titlePlural,T=e.titleSingular,F=e.pagination,C=Object(s.useState)(""),_=i()(C,2),L=_[0],N=_[1],x=Object(s.useState)([]),W=i()(x,2),S=W[0],P=W[1];Object(s.useEffect)(function(){l(P),Object(j.c)()},[]);var D=function(e){return t({offset:F.offset,limit:e}).then(function(){return P(n(u))})},I=function(e,a){var r={offset:Object(j.b)(e,F.limit),limit:F.limit};return a?Object(d.a)(t,250)():t(r).then(function(e){var t=e.value.data;return P(n(t))})};return c.a.createElement(s.Fragment,null,k(),c.a.createElement(O.TableToolbar,null,c.a.createElement(f.a,{style:{flex:1}},c.a.createElement(p.a,null,c.a.createElement(m.a,null,c.a.createElement(q,{onFilterChange:function(e){return N(e)},searchValue:L,placeholder:"Find a ".concat(T)}),o())),c.a.createElement(p.a,null,c.a.createElement(m.a,null,c.a.createElement(h.a,null,c.a.createElement(b.a,null,c.a.createElement(y.Pagination,{itemsPerPage:F.limit||50,numberOfItems:F.count||50,onPerPageSelect:D,page:Object(j.a)(F.limit,F.offset),onSetPage:I,direction:"down"}))))))),c.a.createElement(v.b,{"aria-label":"Approval ".concat(R," table"),onCollapse:function(e,t,n,a){var o=a.id;return P(function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{isOpen:!e.isOpen}):r()({},e)})}(e,o)})},rows:S,cells:a,onSelect:function(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return P(-1===n?S.map(function(e){return r()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{selected:!e.selected}):r()({},e)})}(e,a)})},actionResolver:E},c.a.createElement(w.a,null),c.a.createElement(g.a,null)))};T.propTypes={createInitialRows:u.a.func.isRequired,request:u.a.func.isRequired,columns:u.a.array.isRequired,toolbarButtons:u.a.func,fetchData:u.a.func.isRequired,data:u.a.array,pagination:u.a.shape({limit:u.a.number.isRequired,offset:u.a.number.isRequired,count:u.a.number.isRequired}),titlePlural:u.a.string,titleSingular:u.a.string,routes:u.a.func,actionResolver:u.a.func},T.defaultProps={requests:[],pagination:"",toolbarButtons:function(){return null},routes:function(){return null}}},109:function(e,t,n){"use strict";var a=n(42),r=n.n(a),o=n(24),i=n.n(o),s=n(17),c=n.n(s),l=n(41),u=n.n(l),d=n(3),f=n.n(d),p=n(0),m=n.n(p),h=n(39),b=n.n(h),v=n(84),w=n(37),g=n.n(w),y=n(170),j=n(175),E=n(174),k=n(183),R=n(115),q=function(e){var t=e.input,n=e.options,a=e.isReadOnly,o=e.isDisabled,i=(e.FieldProvider,e.isRequired),s=u()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return f.a.createElement(y.a,r()({},t,s,{isDisabled:o||a}),function(e,t,n){if(t&&n)return e;var a=g()(e);return a.find(function(e){return void 0===e.value})?g()(a):[{label:n?"Please choose":"None"}].concat(g()(a))}(n,t.value,i).map(function(e){return f.a.createElement(j.a,r()({key:e.value||e.label},e,{label:e.label.toString()}))}))};q.propTypes={input:m.a.object.isRequired,options:m.a.arrayOf(m.a.shape({value:m.a.any,label:m.a.string.isRequired})).isRequired,isReadOnly:m.a.bool,isDisabled:m.a.bool,isRequired:m.a.bool,FieldProvider:m.a.any};var O=function(e){e.componentType;var t=e.label,n=e.isRequired,a=e.helperText,o=e.meta,i=e.description,s=e.hideLabel,c=u()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),l=o.error,d=o.touched&&l;return f.a.createElement(E.a,{isRequired:n,label:!s&&t,fieldId:c.id,isValid:!d,helperText:a,helperTextInvalid:o.error},i&&f.a.createElement(k.a,null,f.a.createElement(R.b,{component:R.a.small},i)),f.a.createElement(q,r()({label:t,isValid:!d,isRequired:n},c)))};O.propTypes={componentType:m.a.string,label:m.a.string,isRequired:m.a.bool,helperText:m.a.string,meta:m.a.object,description:m.a.string,hideLabel:m.a.bool};var T=O,F={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},C=function(e){var t=e.componentMapper,n=e.formContainer,a=u()(e,["componentMapper","formContainer"]);return f.a.createElement("div",{className:F[n].buttonClassName},f.a.createElement(b.a,r()({formFieldsMapper:c()({},v.formFieldsMapper,i()({componentMapper:t},h.componentTypes.SELECT,T)),layoutMapper:v.layoutMapper},F[n],a)))};C.propTypes={componentMapper:m.a.object,formContainer:m.a.oneOf(["default","modal"])},C.defaultProps={componentMapper:{},formContainer:"default"};t.a=C},20:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"c",function(){return u});var a="FETCH_REQUEST",r="FETCH_REQUESTS",o="FETCH_WORKFLOW",i="FETCH_WORKFLOWS",s="ADD_WORKFLOW",c="UPDATE_WORKFLOW",l="REMOVE_WORKFLOW",u="FETCH_RBAC_GROUPS"},426:function(e,t,n){var a={"./af":189,"./af.js":189,"./ar":190,"./ar-dz":191,"./ar-dz.js":191,"./ar-kw":192,"./ar-kw.js":192,"./ar-ly":193,"./ar-ly.js":193,"./ar-ma":194,"./ar-ma.js":194,"./ar-sa":195,"./ar-sa.js":195,"./ar-tn":196,"./ar-tn.js":196,"./ar.js":190,"./az":197,"./az.js":197,"./be":198,"./be.js":198,"./bg":199,"./bg.js":199,"./bm":200,"./bm.js":200,"./bn":201,"./bn.js":201,"./bo":202,"./bo.js":202,"./br":203,"./br.js":203,"./bs":204,"./bs.js":204,"./ca":205,"./ca.js":205,"./cs":206,"./cs.js":206,"./cv":207,"./cv.js":207,"./cy":208,"./cy.js":208,"./da":209,"./da.js":209,"./de":210,"./de-at":211,"./de-at.js":211,"./de-ch":212,"./de-ch.js":212,"./de.js":210,"./dv":213,"./dv.js":213,"./el":214,"./el.js":214,"./en-SG":215,"./en-SG.js":215,"./en-au":216,"./en-au.js":216,"./en-ca":217,"./en-ca.js":217,"./en-gb":218,"./en-gb.js":218,"./en-ie":219,"./en-ie.js":219,"./en-il":220,"./en-il.js":220,"./en-nz":221,"./en-nz.js":221,"./eo":222,"./eo.js":222,"./es":223,"./es-do":224,"./es-do.js":224,"./es-us":225,"./es-us.js":225,"./es.js":223,"./et":226,"./et.js":226,"./eu":227,"./eu.js":227,"./fa":228,"./fa.js":228,"./fi":229,"./fi.js":229,"./fo":230,"./fo.js":230,"./fr":231,"./fr-ca":232,"./fr-ca.js":232,"./fr-ch":233,"./fr-ch.js":233,"./fr.js":231,"./fy":234,"./fy.js":234,"./ga":235,"./ga.js":235,"./gd":236,"./gd.js":236,"./gl":237,"./gl.js":237,"./gom-latn":238,"./gom-latn.js":238,"./gu":239,"./gu.js":239,"./he":240,"./he.js":240,"./hi":241,"./hi.js":241,"./hr":242,"./hr.js":242,"./hu":243,"./hu.js":243,"./hy-am":244,"./hy-am.js":244,"./id":245,"./id.js":245,"./is":246,"./is.js":246,"./it":247,"./it-ch":248,"./it-ch.js":248,"./it.js":247,"./ja":249,"./ja.js":249,"./jv":250,"./jv.js":250,"./ka":251,"./ka.js":251,"./kk":252,"./kk.js":252,"./km":253,"./km.js":253,"./kn":254,"./kn.js":254,"./ko":255,"./ko.js":255,"./ku":256,"./ku.js":256,"./ky":257,"./ky.js":257,"./lb":258,"./lb.js":258,"./lo":259,"./lo.js":259,"./lt":260,"./lt.js":260,"./lv":261,"./lv.js":261,"./me":262,"./me.js":262,"./mi":263,"./mi.js":263,"./mk":264,"./mk.js":264,"./ml":265,"./ml.js":265,"./mn":266,"./mn.js":266,"./mr":267,"./mr.js":267,"./ms":268,"./ms-my":269,"./ms-my.js":269,"./ms.js":268,"./mt":270,"./mt.js":270,"./my":271,"./my.js":271,"./nb":272,"./nb.js":272,"./ne":273,"./ne.js":273,"./nl":274,"./nl-be":275,"./nl-be.js":275,"./nl.js":274,"./nn":276,"./nn.js":276,"./pa-in":277,"./pa-in.js":277,"./pl":278,"./pl.js":278,"./pt":279,"./pt-br":280,"./pt-br.js":280,"./pt.js":279,"./ro":281,"./ro.js":281,"./ru":282,"./ru.js":282,"./sd":283,"./sd.js":283,"./se":284,"./se.js":284,"./si":285,"./si.js":285,"./sk":286,"./sk.js":286,"./sl":287,"./sl.js":287,"./sq":288,"./sq.js":288,"./sr":289,"./sr-cyrl":290,"./sr-cyrl.js":290,"./sr.js":289,"./ss":291,"./ss.js":291,"./sv":292,"./sv.js":292,"./sw":293,"./sw.js":293,"./ta":294,"./ta.js":294,"./te":295,"./te.js":295,"./tet":296,"./tet.js":296,"./tg":297,"./tg.js":297,"./th":298,"./th.js":298,"./tl-ph":299,"./tl-ph.js":299,"./tlh":300,"./tlh.js":300,"./tr":301,"./tr.js":301,"./tzl":302,"./tzl.js":302,"./tzm":303,"./tzm-latn":304,"./tzm-latn.js":304,"./tzm.js":303,"./ug-cn":305,"./ug-cn.js":305,"./uk":306,"./uk.js":306,"./ur":307,"./ur.js":307,"./uz":308,"./uz-latn":309,"./uz-latn.js":309,"./uz.js":308,"./vi":310,"./vi.js":310,"./x-pseudo":311,"./x-pseudo.js":311,"./yo":312,"./yo.js":312,"./zh-cn":313,"./zh-cn.js":313,"./zh-hk":314,"./zh-hk.js":314,"./zh-tw":315,"./zh-tw.js":315};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=426},482:function(e,t,n){var a=n(483);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(332)(a,r);a.locals&&(e.exports=a.locals)},483:function(e,t,n){(t=e.exports=n(122)(!1)).i(n(484),""),t.push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\nbutton:focus {\n  outline: none; }\n\n.modal-form-right-align .pf-m-action:last-child .data-driven-forms__pf4-button-group:first-child {\n  margin-left: auto; }\n\n.data-table-detail.heading {\n  margin: 0 !important; }\n\n.data-table-detail.content {\n  margin-top: 0 !important; }\n\n.destructive-color:not(:disabled) {\n  color: #FF0000 !important; }\n",""])},490:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(32),i=n(0),s=n.n(i),c=n(65),l=n(35),u=n(187),d=n(186),f=n(83),p=n(93),m=n(20),h=n(17),b=n.n(h),v=n(21),w=n.n(v),g=n(44),y=n.n(g),j=n(66),E=Object(j.a)();function k(){return R.apply(this,arguments)}function R(){return(R=y()(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){return O.apply(this,arguments)}function O(){return(O=y()(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=y()(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getGroup(t);case 2:return n=e.sent,e.abrupt("return",n.name);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var T=Object(j.d)(),F=Object(j.c)();function C(e){return _.apply(this,arguments)}function _(){return(_=y()(w.a.mark(function e(t){var n,a,r,o,i,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,a=void 0===n?10:n,r=t.offset,o=void 0===r?0:r,e.next=3,T.listWorkflows(a,o);case 3:return i=e.sent,s=i.data,e.abrupt("return",Promise.all(s.map(function(){var e=y()(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t.group_refs);case 2:return n=e.sent,e.abrupt("return",b()({},t,{group_names:n}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return b()({},i,{data:e})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){return N.apply(this,arguments)}function N(){return(N=y()(w.a.mark(function e(t){var n,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.showWorkflow(t);case 2:return n=e.sent,e.next=5,q(n.group_refs);case 5:return a=e.sent,e.abrupt("return",b()({},n,{group_names:a}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){return W.apply(this,arguments)}function W(){return(W=y()(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.updateWorkflow(t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=y()(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.g,payload:C(e)}},I=function(e){return{type:m.f,payload:L(e)}},A=function(e){return{type:m.a,payload:(t=e,F.listTemplates().then(function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id}).then(function(e){return T.addWorkflowToTemplate(e,t,{})})),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding workflow",description:"The workflow was added successfully."},rejected:{variant:"danger",title:"Failed adding workflow",description:"The workflow was not added successfuly."}}}};var t},z=function(e){return{type:m.i,payload:x(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating workflow",description:"The workflow was updated successfully."},rejected:{variant:"danger",title:"Failed updating workflow",description:"The workflow was not updated successfuly."}}}}},G=function(e){return{type:m.h,payload:S(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing workflow",description:"The workflow was removed successfully."}}}}},M=n(24),U=n.n(M),K=n(37),B=n.n(K),V=n(41),H=n.n(V),Q=n(51),X=n(176),J=n(55),Z=n(84),Y=n(109),$=n(39),ee=function(e,t){return{fields:[{component:$.componentTypes.WIZARD,name:"workflow_wizard",fields:[{title:"Workflow information",name:"wf_step_info",stepKey:1,nextStep:"wf_step_stages",fields:[{component:$.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:!0,label:"Name",validate:[{type:$.validatorTypes.REQUIRED}]},{component:$.componentTypes.TEXTAREA_FIELD,name:"description",type:"text",label:"Description"}]},{stepKey:"wf_step_stages",title:"Set Approval Stages",name:"wf_step_stages",nextStep:"summary",fields:[{component:$.componentTypes.SELECT,name:"stage-1",isRequired:!1,label:"1st Stage",options:t},{component:$.componentTypes.SELECT,name:"stage-2",label:"2nd Stage",options:t},{component:$.componentTypes.SELECT,name:"stage-3",label:"3rd Stage",options:t}]},{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}]}]}},te=n(183),ne=n(115),ae=function(e){var t=e.values,n=t.name,o=t.description,i=H()(t,["name","description"]);return r.a.createElement(a.Fragment,null,r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.h5},"Please review the workflow details")),r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.h5},"Name"),r.a.createElement(ne.b,{className:"data-table-detail content",component:ne.a.p},n)),r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.h5},"Description"),r.a.createElement(ne.b,{className:"data-table-detail content",component:ne.a.p},o)),r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.h5},"Approval Stages"),Object.keys(i).map(function(t){return t.startsWith("stage")&&r.a.createElement(ne.b,{key:t,className:"data-table-detail content",component:ne.a.p},"".concat(t," : ").concat(e.groupOptions.find(function(e){return e.value===i[t]}).label))})))};ae.propTypes={name:s.a.string,description:s.a.string,groups:s.a.array};var re=ae,oe=function(e){var t=e.history.push,n=e.addWorkflow,o=e.addNotification,i=e.fetchWorkflow,s=e.fetchWorkflows,c=e.initialValues,l=e.updateWorkflow,u=e.initialGroups,d=e.workflowId,f=e.rbacGroups;Object(a.useEffect)(function(){d&&i(d).then(function(e){return h(e)})},[d]);var p=function(){o({variant:"warning",title:c?"Editing workflow":"Creating workflow",description:c?"Edit workflow was cancelled by the user.":"Creating workflow was cancelled by the user."}),t("/workflows")},m=[].concat(B()(f),[{value:void 0,label:"None"}]),h=function(e){return e.value.group_refs.map(function(e,t){return U()({},"stage-".concat(t+1),e)}).reduce(function(e,t){return b()({},e,t)},{})};return r.a.createElement(X.a,{title:c?"Edit workflow":"Create workflow",isOpen:!0,onClose:p,isSmall:!0},r.a.createElement("div",{style:{padding:8}},r.a.createElement(Y.a,{schema:ee(0,m),schemaType:"default",onSubmit:function(e){var a=e.name,r=e.description,o=H()(e,["name","description"]),i={name:a,description:r,group_refs:Object.values(o)};c?l(i).then(t("/workflows")).then(function(){return s()}):n(i).then(t("/workflows")).then(function(){return s()})},onCancel:p,initialValues:b()({},c,u),formFieldsMapper:b()({},Z.formFieldsMapper,{summary:function(e){return r.a.createElement(re,{values:e.formOptions.getState().values,groupOptions:m})}}),formContainer:"modal",showFormControls:!1,buttonsLabels:{submitLabel:"Confirm"}})))};oe.defaultProps={rbacGroups:[],initialGroups:[]},oe.propTypes={history:s.a.shape({goBack:s.a.func.isRequired}).isRequired,addWorkflow:s.a.func.isRequired,addNotification:s.a.func.isRequired,fetchWorkflow:s.a.func.isRequired,fetchWorkflows:s.a.func.isRequired,initialValues:s.a.object,updateWorkflow:s.a.func.isRequired,workflowId:s.a.string,initialGroups:s.a.array,rbacGroups:s.a.arrayOf(s.a.shape({value:s.a.oneOfType([s.a.number,s.a.string]).isRequired,label:s.a.string.isRequired})).isRequired};var ie=Object(c.f)(Object(o.connect)(function(e,t){var n=t.match.params.id,a=e.workflowReducer.selectedWorkflow;return{rbacGroups:e.groupReducer.groups,initialValues:n&&a,workflowId:n}},function(e){return Object(Q.bindActionCreators)({addNotification:J.addNotification,addWorkflow:A,updateWorkflow:z,fetchWorkflows:D,fetchWorkflow:I},e)})(oe)),se=n(72),ce=function(e){var t=e.history,n=t.goBack,o=t.push,i=e.removeWorkflow,s=e.fetchWorkflows,c=e.fetchWorkflow,l=e.workflowId,u=e.workflow;if(Object(a.useEffect)(function(){l&&c(l)},[l]),!u)return null;var d=function(){return n()};return r.a.createElement(X.a,{isOpen:!0,isSmall:!0,title:"",onClose:d,actions:[r.a.createElement(f.c,{key:"cancel",variant:"secondary",type:"button",onClick:d},"Cancel"),r.a.createElement(f.c,{key:"submit",variant:"primary",type:"button",onClick:function(){return i(l).then(function(){s(),o("/workflows")})}},"Confirm")]},r.a.createElement(se.a,null,r.a.createElement(te.a,null,r.a.createElement(ne.b,{component:ne.a.h1},"Removing Workflow:  ",u.name))))};ce.propTypes={history:s.a.shape({goBack:s.a.func.isRequired,push:s.a.func.isRequired}).isRequired,removeWorkflow:s.a.func.isRequired,fetchWorkflows:s.a.func.isRequired,fetchWorkflow:s.a.func.isRequired,workflowId:s.a.string,workflow:s.a.object};var le=Object(c.f)(Object(o.connect)(function(e,t){var n=e.workflowReducer,a=n.selectedWorkflow,r=n.isLoading;return{workflowId:t.match.params.id,workflow:a,isLoading:r}},function(e){return Object(Q.bindActionCreators)({fetchWorkflow:I,fetchWorkflows:D,removeWorkflow:G},e)})(ce)),ue=function(e){var t=e.description,n=e.groups;return r.a.createElement(a.Fragment,null,r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.small},"Description"),r.a.createElement(ne.b,{className:"data-table-detail content",component:ne.a.h5},t)),r.a.createElement(te.a,null,r.a.createElement(ne.b,{className:"data-table-detail heading",component:ne.a.small},"Groups"),r.a.createElement(ne.b,{className:"data-table-detail content",component:ne.a.h5},n.join(","))))};ue.propTypes={description:s.a.string,groups:s.a.array};var de=ue,fe=function(e){return e.filter(function(e){return"Always approve"!==e.name}).reduce(function(e,t,n){var a=t.id,o=t.name,i=t.description,s=t.group_names;return[].concat(B()(e),[{id:a,isOpen:!1,selected:!1,cells:[o,i,s.length]},{parent:2*n,cells:[{title:r.a.createElement(de,{description:i,groups:s})}]}])},[])},pe=n(108),me=[{title:"Name",cellFormatters:[p.b]},"Description","Groups"],he=function(e){var t=e.fetchRbacGroups,n=e.fetchWorkflows,o=e.workflows,i=e.pagination,s=e.history;return r.a.createElement(pe.a,{data:o,createInitialRows:fe,columns:me,fetchData:function(e){t(),n().then(function(t){var n=t.value.data;return e(fe(n))})},request:n,routes:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.b,{exact:!0,path:"/workflows/add-workflow",component:ie}),r.a.createElement(c.b,{exact:!0,path:"/workflows/edit/:id",component:ie}),r.a.createElement(c.b,{exact:!0,path:"/workflows/remove/:id",component:le}))},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Edit",onClick:function(e,t,n){return s.push("/workflows/edit/".concat(n.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return s.push("/workflows/remove/".concat(n.id))}}]},titlePlural:"Workflows",titleSingular:"Workflow",pagination:i,toolbarButtons:function(){return r.a.createElement(u.a,null,r.a.createElement(d.a,null,r.a.createElement(l.b,{to:"/workflows/add-workflow"},r.a.createElement(f.c,{variant:"primary","aria-label":"Create Workflow"},"Create Workflow"))))}})};he.propTypes={history:s.a.shape({goBack:s.a.func.isRequired,push:s.a.func.isRequired}).isRequired,filteredItems:s.a.array,workflows:s.a.array,platforms:s.a.array,isLoading:s.a.bool,searchFilter:s.a.string,fetchWorkflows:s.a.func.isRequired,fetchRbacGroups:s.a.func.isRequired,pagination:s.a.shape({limit:s.a.number.isRequired,offset:s.a.number.isRequired,count:s.a.number.isRequired})},he.defaultProps={workflows:[],pagination:{}};t.default=Object(o.connect)(function(e){var t=e.workflowReducer,n=t.workflows,a=t.isLoading,r=e.groupReducer,o=r.groups,i=r.filterValue;return{workflows:n.data,pagination:n.meta,rbacGroups:o,isLoading:a,searchFilter:i}},function(e){return{fetchWorkflows:function(t){return e(D(t))},fetchRbacGroups:function(t){return e({type:m.c,payload:k().then(function(e){var t=e.data;return B()(t.map(function(e){return{value:e.uuid,label:e.name}}))})})}}})(he)},491:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(3),s=n.n(i),c=n(9),l=n.n(c),u=n(35),d=n(32),f=n(359),p=n(62),m=n(55),h=n(345),b=n.n(h),v=n(346),w=n(24),g=n.n(w),y=n(17),j=n.n(y),E=n(20),k=function(e){return j()({},e,{isRequestDataLoading:!0})},R=(a={},g()(a,"".concat(E.e,"_PENDING"),k),g()(a,"".concat(E.e,"_FULFILLED"),function(e,t){var n=t.payload;return j()({},e,{requests:n,isRequestDataLoading:!1})}),g()(a,"".concat(E.d,"_PENDING"),k),g()(a,"".concat(E.d,"_FULFILLED"),function(e,t){var n=t.payload;return j()({},e,{selectedRequest:n,isRequestDataLoading:!1})}),a),q=function(e){return j()({},e,{isLoading:!0})},O=(r={},g()(r,"".concat(E.g,"_PENDING"),q),g()(r,"".concat(E.g,"_FULFILLED"),function(e,t){var n=t.payload;return j()({},e,{workflows:n,isLoading:!1})}),g()(r,"".concat(E.f,"_PENDING"),q),g()(r,"".concat(E.f,"_FULFILLED"),function(e,t){var n=t.payload;return j()({},e,{selectedWorkflow:n,isLoading:!1})}),r),T=(o={},g()(o,"".concat(E.c,"_PENDING"),function(e){return j()({},e,{isLoading:!0})}),g()(o,"".concat(E.c,"_FULFILLED"),function(e,t){var n=t.payload;return j()({},e,{groups:n,isLoading:!1})}),o),F=new p.ReducerRegistry({},[v.a,Object(f.a)(),Object(m.notificationsMiddleware)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]}),b.a]);F.register({requestReducer:Object(p.applyReducerHash)(R,{requests:[],request:{},filterValue:"",isRequestDataLoading:!1}),workflowReducer:Object(p.applyReducerHash)(O,{workflows:{data:[],meta:{count:0,limit:10,offset:0}},workflow:{},filterValue:"",isLoading:!1}),groupReducer:Object(p.applyReducerHash)(T,{groups:[],isLoading:!1}),notifications:m.notifications});var C=F.getStore(),_=n(347),L=n.n(_),N=n(348),x=n.n(N),W=n(349),S=n.n(W),P=n(350),D=n.n(P),I=n(123),A=n.n(I),z=n(351),G=n.n(z),M=n(0),U=n.n(M),K=n(65),B=n(41),V=n.n(B),H=n(128),Q=n.n(H),X=n(42),J=n.n(X),Z=n(37),Y=n.n(Z),$=n(129),ee=n(152),te=n(153),ne=n(154),ae=n(155),re=function(e){var t=e.items,n=V()(e,["items"]);return s.a.createElement(ee.a,{gutter:"md"},s.a.createElement(te.a,{sm:12,style:{padding:24}},s.a.createElement(ee.a,{gutter:"md"},Y()(Array(t)).map(function(e,t){return s.a.createElement(te.a,{sm:12,md:6,lg:3,key:t},s.a.createElement(ne.a,null,s.a.createElement(ae.a,null,s.a.createElement($.a,J()({height:160,width:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},n),s.a.createElement("rect",{x:"2",y:"99",rx:"3",ry:"3",width:"300",height:"6.4"})))))}))))};re.propTypes={items:U.a.number},re.defaultProps={items:1};var oe=function(e){return s.a.createElement("div",null,s.a.createElement($.a,J()({height:16,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#FFFFFF"},e),s.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"420",height:"10"})),s.a.createElement(re,null))},ie=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(492))})}),se=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(490))})}),ce="/requests",le="/workflows",ue=function(e){var t=e.rootClass,n=V()(e,["rootClass"]),a=document.getElementById("root");return a.removeAttribute("class"),a.classList.add("page__".concat(t),"pf-l-page__main","pf-c-page__main"),a.setAttribute("role","main"),s.a.createElement(K.b,n)};ue.propTypes={rootClass:U.a.string};var de=function(){return s.a.createElement(i.Suspense,{fallback:s.a.createElement(oe,null)},s.a.createElement(K.d,null,s.a.createElement(ue,{path:ce,component:ie,rootClass:"requests"}),s.a.createElement(ue,{path:le,component:se,rootClass:"workflows"}),s.a.createElement(K.b,{render:function(){return s.a.createElement(K.a,{to:le})}})))},fe=(n(482),n(338)),pe=n(182),me=[{eventKey:0,title:"Requests",name:"/requests"},{eventKey:1,title:"Workflows",name:"/workflows"}],he=function(e){var t=e.history.push,n=e.location.pathname,a=me.find(function(e){var t=e.name;return n.includes(t)});return s.a.createElement(fe.a,{className:"pf-u-mt-md",activeKey:a?a.eventKey:0,onSelect:function(e,n){return t(me[n].name)}},me.map(function(e){return s.a.createElement(pe.a,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})}))};he.propTypes={children:U.a.oneOfType([U.a.node,U.a.arrayOf(U.a.node)]),location:U.a.shape({pathname:U.a.string.isRequired}),history:U.a.shape({push:U.a.func.isRequired})};var be=Object(K.f)(he),ve=n(125),we=(n(486),function(e){function t(){var e,n;L()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=S()(this,(e=D()(t)).call.apply(e,[this].concat(r))),g()(A()(n),"state",{chromeNavAvailable:!0,auth:!1}),n}return G()(t,e),x()(t,[{key:"componentDidMount",value:function(){var e=this;insights.chrome.init(),insights.chrome.auth.getUser().then(function(){return e.setState({auth:!0})}),insights.chrome.identifyApp("approval")}},{key:"render",value:function(){return this.state.auth?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.NotificationsPortal,null),s.a.createElement(p.PageHeader,{style:{paddingBottom:0}},s.a.createElement(ve.a,{headingLevel:"h1",size:"2xl"},"Approval"),s.a.createElement(be,null)),s.a.createElement(p.Main,null,s.a.createElement(de,null))):s.a.createElement(oe,null)}}]),t}(i.Component));we.propTypes={history:U.a.object};var ge=Object(K.f)(Object(d.connect)()(we)),ye=window.location.pathname.split("/");ye.shift();var je="/";"beta"===ye[0]&&(je="/".concat(ye.shift(),"/")),l.a.render(s.a.createElement(d.Provider,{store:C},s.a.createElement(u.a,{basename:"".concat(je).concat(ye[0],"/").concat(ye[1])},s.a.createElement(ge,null))),document.getElementById("root"))},492:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n.n(a),o=n(3),i=n.n(o),s=n(32),c=n(0),l=n.n(c),u=n(65),d=n(93),f=n(20),p=n(66),m=Object(p.b)();var h=function(e){return function(t,n){if(!n().requestReducer.isLoading)return t(function(){var e,t,n,a,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:f.e,payload:(e=o,t=e.limit,n=void 0===t?10:t,a=e.offset,r=void 0===a?0:a,m.listRequests(void 0,void 0,void 0,n,r))}}(e))}},b=n(109),v=n(51),w=n(176),g=n(55),y=n(39),j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return{component:y.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:e,label:e?"Reason":"Comment"}}(e);return e&&(t.validate=[{type:y.validatorTypes.REQUIRED}]),{fields:[t]}},E=function(e){var t=e.history.push,n=e.actionType,a=e.addNotification,r=e.fetchRequests,o=e.requestId,s=function(){var e="Add Comment"===n?n:"".concat(n," Request");a({variant:"warning",title:e,description:"".concat(e," was cancelled by the user.")}),t("/requests")};return i.a.createElement(w.a,{isLarge:!0,title:"Add Comment"===n?"Request #".concat(o):"".concat(n," Request #").concat(o),isOpen:!0,onClose:s},i.a.createElement(b.a,{schema:j("Deny"===n),schemaType:"default",onSubmit:function(){r().then(t("/requests"))},onCancel:s,formContainer:"modal"}))};E.propTypes={history:l.a.shape({push:l.a.func.isRequired}).isRequired,addNotification:l.a.func.isRequired,fetchRequests:l.a.func.isRequired,requests:l.a.object,requestId:l.a.string,actionType:l.a.string,match:l.a.object,location:l.a.object};var k=Object(u.f)(Object(s.connect)(function(e,t){var n=t.match.params.id;return{requests:e.requestReducer.requests,requestId:n}},function(e){return Object(v.bindActionCreators)({addNotification:g.addNotification,fetchRequests:h},e)})(E)),R=n(37),q=n.n(R),O=n(35),T=n(339),F=n(184),C=n(183),_=n(115),L=n(83),N=function(e){var t=e.id,n=e.content;return i.a.createElement(o.Fragment,null,i.a.createElement(T.a,null,i.a.createElement(F.a,null,i.a.createElement(C.a,null,i.a.createElement(_.b,{className:"data-table-detail heading",component:_.a.small},"Product"),i.a.createElement(_.b,{className:"data-table-detail content",component:_.a.h5},n?n.product:"Unknown"))),i.a.createElement(F.a,null,i.a.createElement(O.b,{to:"/requests/approve/".concat(t)},i.a.createElement(L.c,{variant:"link","aria-label":"Approve Request"},"Approve")),i.a.createElement(O.b,{to:"/requests/deny/".concat(t)},i.a.createElement(L.c,{variant:"link",className:"destructive-color","aria-label":"Deny Request"},"Deny")))),i.a.createElement(T.a,null,i.a.createElement(F.a,null,i.a.createElement(C.a,null,i.a.createElement(_.b,{className:"data-table-detail heading",component:_.a.small},"Portfolio"),i.a.createElement(_.b,{className:"data-table-detail content",component:_.a.h5},n?n.portfolio:"Unknown")),i.a.createElement(C.a,null,i.a.createElement(_.b,{className:"data-table-detail heading",component:_.a.small},"Platform"),i.a.createElement(_.b,{className:"data-table-detail content",component:_.a.h5},n?n.platform:"Unknown")),i.a.createElement(C.a,null,i.a.createElement(_.b,{className:"data-table-detail heading",component:_.a.small},"Comments"),i.a.createElement(_.b,{className:"data-table-detail content",component:_.a.h5},n?n.comments:"Unknown")))))};N.propTypes={id:l.a.string,content:l.a.object};var x=N,W=n(67),S=function(e){return e.reduce(function(e,t,n){var a=t.id,r=t.requester,o=t.created_at,s=t.updated_at,c=t.state,l=t.decision,u=t.content;return[].concat(q()(e),[{id:a,isOpen:!1,selected:!1,cells:[a,r,Object(W.d)(o),Object(W.d)(s),c,l]},{parent:2*n,cells:[{title:i.a.createElement(x,{id:a,content:u})}]}])},[])},P=n(108),D=[{title:"RequestId",cellFormatters:[d.b]},"Requester","Opened","Updated","Stage Status","Decision"],I=function(e){var t=e.fetchRequests,n=e.requests,a=e.pagination,s=e.history;return i.a.createElement(P.a,{data:n,createInitialRows:S,columns:D,fetchData:function(e){t().then(function(t){var n=t.value.data;return e(S(n))})},request:t,routes:function(){return i.a.createElement(o.Fragment,null,i.a.createElement(u.b,{exact:!0,path:"/requests/add_comment/:id",render:function(e){return i.a.createElement(k,r()({},e,{actionType:"Add Comment"}))}}),i.a.createElement(u.b,{exact:!0,path:"/requests/approve/:id",render:function(e){return i.a.createElement(k,r()({},e,{actionType:"Approve"}))}}),i.a.createElement(u.b,{exact:!0,path:"/requests/deny/:id",render:function(e){return i.a.createElement(k,r()({},e,{actionType:"Deny"}))}}))},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Comment",onClick:function(){return s.push("/requests/add_comment/".concat(e.id))}}]},titlePlural:"Requests",titleSingular:"Request",pagination:a})};I.propTypes={history:l.a.shape({goBack:l.a.func.isRequired,push:l.a.func.isRequired}).isRequired,filteredItems:l.a.array,requests:l.a.array,platforms:l.a.array,isLoading:l.a.bool,searchFilter:l.a.string,fetchRequests:l.a.func.isRequired,pagination:l.a.shape({limit:l.a.number.isRequired,offset:l.a.number.isRequired,count:l.a.number.isRequired})},I.defaultProps={requests:[],pagination:{}};t.default=Object(s.connect)(function(e){var t=e.requestReducer,n=t.requests,a=t.isLoading,r=t.filterValue;return{requests:n.data,pagination:n.meta,isLoading:a,searchFilter:r}},function(e){return{fetchRequests:function(t){return e(h(t))}}})(I)},66:function(e,t,n){"use strict";var a=n(95),r=n.n(a),o="".concat("/api","/approval/v1.0"),i="".concat("/api","/rbac/v1"),s=n(110),c=n(86);n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return v});var l=r.a.create();l.interceptors.response.use(function(e){return e.data||e});var u=new c.WorkflowApi(void 0,o,l),d=(new c.ActionApi(void 0,o,l),new c.RequestApi(void 0,o,l)),f=new c.TemplateApi(void 0,o,l),p=(new s.AccessApi(void 0,i,l),new s.PrincipalApi(void 0,i,l),new s.GroupApi(void 0,i,l));function m(){return d}function h(){return f}function b(){return u}function v(){return p}},67:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c});var a=n(5),r=n.n(a),o=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},s=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1?arguments[1]:void 0)},c=function(e){return r()(e).fromNow()}}});
//# sourceMappingURL=../sourcemaps/App.js.map