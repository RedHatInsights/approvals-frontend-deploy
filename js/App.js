!function(e){function t(t){for(var a,i,l=t[0],c=t[1],s=t[2],p=0,d=[];p<l.length;p++)i=l[p],r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/beta/apps/approval/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;o.push([395,1]),n()}({118:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(0),i=n.n(o),l=n(139),c=n(140),s=n(141),u=n(70),p=function(e){var t=e.searchValue,n=e.onFilterChange,a=e.placeholder;return r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement("div",{className:"pf-c-input-group"},r.a.createElement(s.a,{placeholder:a,value:t,type:"text",onChange:n,"aria-label":"Find product button"}),r.a.createElement(u.c,{variant:"tertiary",id:"searchProductButton",onClick:function(){return n(t)}},r.a.createElement("i",{className:"fas fa-search","aria-hidden":"true"})))))};p.propTypes={onFilterChange:i.a.func.isRequired,placeholder:i.a.string,searchValue:i.a.string},p.defaultProps={searchValue:""},t.a=p},122:function(e,t,n){"use strict";var a=n(51),r=n.n(a),o=n(10),i=n.n(o),l=n(16),c=n.n(l),s=n(44),u=n.n(s),p=n(3),d=n.n(p),f=n(0),m=n.n(f),h=n(54),b=n.n(h),w=n(95),g=n(29),v=n.n(g),E=n(198),y=n(201),k=n(200),R=n(181),q=n(127),O=function(e){var t=e.input,n=e.options,a=e.isReadOnly,o=e.isDisabled,i=(e.FieldProvider,e.isRequired),l=u()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return d.a.createElement(E.a,r()({},t,l,{isDisabled:o||a}),function(e,t,n){if(t&&n)return e;var a=v()(e);return a.find(function(e){return void 0===e.value})?v()(a):[{label:n?"Please choose":"None"}].concat(v()(a))}(n,t.value,i).map(function(e){return d.a.createElement(y.a,r()({key:e.value||e.label},e,{label:e.label.toString()}))}))};O.propTypes={input:m.a.object.isRequired,options:m.a.arrayOf(m.a.shape({value:m.a.any,label:m.a.string.isRequired})).isRequired,isReadOnly:m.a.bool,isDisabled:m.a.bool,isRequired:m.a.bool,FieldProvider:m.a.any};var T=function(e){e.componentType;var t=e.label,n=e.isRequired,a=e.helperText,o=e.meta,i=e.description,l=e.hideLabel,c=u()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),s=o.error,p=o.touched&&s;return d.a.createElement(k.a,{isRequired:n,label:!l&&t,fieldId:c.id,isValid:!p,helperText:a,helperTextInvalid:o.error},i&&d.a.createElement(R.a,null,d.a.createElement(q.b,{component:q.a.small},i)),d.a.createElement(O,r()({label:t,isValid:!p,isRequired:n},c)))};T.propTypes={componentType:m.a.string,label:m.a.string,isRequired:m.a.bool,helperText:m.a.string,meta:m.a.object,description:m.a.string,hideLabel:m.a.bool};var x=T,C={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},F=function(e){var t=e.componentMapper,n=e.formContainer,a=u()(e,["componentMapper","formContainer"]);return d.a.createElement("div",{className:C[n].buttonClassName},d.a.createElement(b.a,r()({formFieldsMapper:c()({},w.formFieldsMapper,i()({componentMapper:t},h.componentTypes.SELECT,x)),layoutMapper:w.layoutMapper},C[n],a)))};F.propTypes={componentMapper:m.a.object,formContainer:m.a.oneOf(["default","modal"])},F.defaultProps={componentMapper:{},formContainer:"default"};t.a=F},24:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return s}),n.d(t,"c",function(){return u});var a="FETCH_REQUEST",r="FETCH_REQUESTS",o="FETCH_WORKFLOW",i="FETCH_WORKFLOWS",l="ADD_WORKFLOW",c="UPDATE_WORKFLOW",s="REMOVE_WORKFLOW",u="FETCH_RBAC_GROUPS"},386:function(e,t,n){var a=n(387);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(232)(a,r);a.locals&&(e.exports=a.locals)},387:function(e,t,n){(t=e.exports=n(135)(!1)).i(n(388),""),t.push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\nbutton:focus {\n  outline: none; }\n\n.modal-form-right-align .pf-m-action:last-child .data-driven-forms__pf4-button-group:first-child {\n  margin-left: auto; }\n\n.data-table-detail.heading {\n  margin: 0 !important; }\n\n.data-table-detail.content {\n  margin-top: 0 !important; }\n",""])},394:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n.n(a),o=n(147),i=n.n(o),l=n(3),c=n.n(l),s=n(36),u=n(0),p=n.n(u),d=n(41),f=n(75),m=n(255),h=n(239),b=n(209),w=n(210),g=n(139),v=n(140),E=n(70),y=n(103),k=n(121),R=n(400),q=n(401),O=n(253),T=n(24),x=n(21),C=n.n(x),F=n(39),L=n.n(F),j=n(76),W=Object(j.a)();function _(){return S.apply(this,arguments)}function S(){return(S=L()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return D.apply(this,arguments)}function D(){return(D=L()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=L()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getGroup(t);case 2:return n=e.sent,e.abrupt("return",n.name);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var P=Object(j.d)(),I=Object(j.c)();function A(e){return K.apply(this,arguments)}function K(){return(K=L()(C.a.mark(function e(t){var n,a,o,i,l,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,a=void 0===n?10:n,o=t.offset,i=void 0===o?0:o,e.next=3,P.listWorkflows(a,i);case 3:return l=e.sent,c=l.data,e.abrupt("return",Promise.all(c.map(function(){var e=L()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t.group_refs);case 2:return n=e.sent,e.abrupt("return",r()({},t,{group_names:n}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return r()({},l,{data:e})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return V.apply(this,arguments)}function V(){return(V=L()(C.a.mark(function e(t){var n,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.showWorkflow(t);case 2:return n=e.sent,e.next=5,N(n.group_refs);case 5:return a=e.sent,e.abrupt("return",r()({},n,{group_names:a}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return B.apply(this,arguments)}function B(){return(B=L()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.updateWorkflow(t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e){return U.apply(this,arguments)}function U(){return(U=L()(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:T.g,payload:A(e)}},Q=function(e){return{type:T.f,payload:M(e)}},J=function(e){return{type:T.a,payload:(t=e,I.listTemplates().then(function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id}).then(function(e){return P.addWorkflowToTemplate(e,t,{})})),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding workflow",description:"The workflow was added successfully."},rejected:{variant:"danger",title:"Failed adding workflow",description:"The workflow was not added successfuly."}}}};var t},X=function(e){return{type:T.i,payload:G(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating workflow",description:"The workflow was updated successfully."},rejected:{variant:"danger",title:"Failed updating workflow",description:"The workflow was not updated successfuly."}}}}},Z=function(e){return{type:T.h,payload:H(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing workflow",description:"The workflow was removed successfully."}}}}},Y=n(10),$=n.n(Y),ee=n(29),te=n.n(ee),ne=n(44),ae=n.n(ne),re=n(55),oe=n(202),ie=n(60),le=n(95),ce=n(122),se=n(54),ue=function(e,t){return{fields:[{component:se.componentTypes.WIZARD,name:"workflow_wizard",fields:[{title:"Workflow information",name:"wf_step_info",stepKey:1,nextStep:"wf_step_stages",fields:[{component:se.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:!0,label:"Name",validate:[{type:se.validatorTypes.REQUIRED}]},{component:se.componentTypes.TEXTAREA_FIELD,name:"description",type:"text",label:"Description"}]},{stepKey:"wf_step_stages",title:"Set Approval Stages",name:"wf_step_stages",nextStep:"summary",fields:[{component:se.componentTypes.SELECT,name:"stage-1",isRequired:!1,label:"1st Stage",options:t},{component:se.componentTypes.SELECT,name:"stage-2",label:"2nd Stage",options:t},{component:se.componentTypes.SELECT,name:"stage-3",label:"3rd Stage",options:t}]},{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}]}]}},pe=n(181),de=n(127),fe=function(e){var t=e.values,n=t.name,a=t.description,r=ae()(t,["name","description"]);return c.a.createElement(l.Fragment,null,c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Please review the workflow details")),c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Name"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.p},n)),c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Description"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.p},a)),c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Approval Stages"),Object.keys(r).map(function(t){return t.startsWith("stage")&&c.a.createElement(de.b,{key:t,className:"data-table-detail content",component:de.a.p},"".concat(t," : ").concat(e.groupOptions.find(function(e){return e.value===r[t]}).label))})))};fe.propTypes={name:p.a.string,description:p.a.string,groups:p.a.array};var me=fe,he=function(e){var t=e.history.push,n=e.addWorkflow,a=e.addNotification,o=e.fetchWorkflow,i=e.fetchWorkflows,s=e.initialValues,u=e.updateWorkflow,p=e.initialGroups,d=e.workflowId,f=e.rbacGroups;Object(l.useEffect)(function(){d&&o(d).then(function(e){return b(e)})},[d]);var m=function(){a({variant:"warning",title:s?"Editing workflow":"Creating workflow",description:s?"Edit workflow was cancelled by the user.":"Creating workflow was cancelled by the user."}),t("/workflows")},h=[].concat(te()(f),[{value:void 0,label:"None"}]),b=function(e){return e.value.group_refs.map(function(e,t){return $()({},"stage-".concat(t+1),e)}).reduce(function(e,t){return r()({},e,t)},{})};return c.a.createElement(oe.a,{title:s?"Edit workflow":"Create workflow",isOpen:!0,onClose:m,isSmall:!0},c.a.createElement("div",{style:{padding:8}},c.a.createElement(ce.a,{schema:ue(0,h),schemaType:"default",onSubmit:function(e){var a=e.name,r=e.description,o=ae()(e,["name","description"]),l={name:a,description:r,group_refs:Object.values(o)};s?u(l).then(t("/workflosws")).then(function(){return i()}):n(l).then(t("/workflows")).then(function(){return i()})},onCancel:m,initialValues:r()({},s,p),formFieldsMapper:r()({},le.formFieldsMapper,{summary:function(e){return c.a.createElement(me,{values:e.formOptions.getState().values,groupOptions:h})}}),formContainer:"modal",showFormControls:!1,buttonsLabels:{submitLabel:"Confirm"}})))};he.defaultProps={rbacGroups:[],initialGroups:[]},he.propTypes={history:p.a.shape({goBack:p.a.func.isRequired}).isRequired,addWorkflow:p.a.func.isRequired,addNotification:p.a.func.isRequired,fetchWorkflow:p.a.func.isRequired,fetchWorkflows:p.a.func.isRequired,initialValues:p.a.object,updateWorkflow:p.a.func.isRequired,workflowId:p.a.string,initialGroups:p.a.array,rbacGroups:p.a.arrayOf(p.a.shape({value:p.a.oneOfType([p.a.number,p.a.string]).isRequired,label:p.a.string.isRequired})).isRequired};var be=Object(f.f)(Object(s.connect)(function(e,t){var n=t.match.params.id,a=e.workflowReducer.selectedWorkflow;return{rbacGroups:e.groupReducer.groups,initialValues:n&&a,workflowId:n}},function(e){return Object(re.bindActionCreators)({addNotification:ie.addNotification,addWorkflow:J,updateWorkflow:X,fetchWorkflows:z,fetchWorkflow:Q},e)})(he)),we=n(82),ge=function(e){var t=e.history,n=t.goBack,a=t.push,r=e.removeWorkflow,o=e.fetchWorkflows,i=e.fetchWorkflow,s=e.workflowId,u=e.workflow;if(Object(l.useEffect)(function(){s&&i(s)},[s]),!u)return null;var p=function(){return n()};return c.a.createElement(oe.a,{isOpen:!0,isSmall:!0,title:"",onClose:p,actions:[c.a.createElement(E.c,{key:"cancel",variant:"secondary",type:"button",onClick:p},"Cancel"),c.a.createElement(E.c,{key:"submit",variant:"primary",type:"button",onClick:function(){return r(s).then(function(){o(),a("/workflows")})}},"Confirm")]},c.a.createElement(we.a,null,c.a.createElement(pe.a,null,c.a.createElement(de.b,{component:de.a.h1},"Removing Workflow:  ",u.name))))};ge.propTypes={history:p.a.shape({goBack:p.a.func.isRequired,push:p.a.func.isRequired}).isRequired,removeWorkflow:p.a.func.isRequired,fetchWorkflows:p.a.func.isRequired,fetchWorkflow:p.a.func.isRequired,workflowId:p.a.string,workflow:p.a.object};var ve=Object(f.f)(Object(s.connect)(function(e,t){var n=e.workflowReducer,a=n.selectedWorkflow,r=n.isLoading;return{workflowId:t.match.params.id,workflow:a,isLoading:r}},function(e){return Object(re.bindActionCreators)({fetchWorkflow:Q,fetchWorkflows:z,removeWorkflow:Z},e)})(ge)),Ee=n(91),ye=function(e){var t=e.description,n=e.groups;return c.a.createElement(l.Fragment,null,c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.small},"Description"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.h5},t)),c.a.createElement(pe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.small},"Groups"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.h5},n.join(","))))};ye.propTypes={description:p.a.string,groups:p.a.array};var ke=ye,Re=function(e){return e.filter(function(e){return"Always approve"!==e.name}).reduce(function(e,t,n){var a=t.id,r=t.name,o=t.description,i=t.group_names;return[].concat(te()(e),[{id:a,isOpen:!1,selected:!1,cells:[r,o,i.length]},{parent:2*n,cells:[{title:c.a.createElement(ke,{description:o,groups:i})}]}])},[])},qe=n(118),Oe=n(120),Te=[{title:"Name",cellFormatters:[y.b]},"Description","Groups"],xe=function(e){var t=e.fetchRbacGroups,n=e.fetchWorkflows,a=e.pagination,o=e.workflows,s=e.history,u=Object(l.useState)(""),p=i()(u,2),y=p[0],T=p[1],x=Object(l.useState)([]),C=i()(x,2),F=C[0],L=C[1];Object(l.useEffect)(function(){t(),n().then(function(e){var t=e.value.data;return L(Re(t))}),Object(Ee.c)()},[]);var j=function(e){return n({offset:a.offset,limit:e}).then(function(){return L(Re(o))})},W=function(e,t){var r={offset:Object(Ee.b)(e,a.limit),limit:a.limit},o=function(){return n(r)};return t?Object(m.a)(o,250)():o().then(function(e){var t=e.value.data;return L(Re(t))})};return c.a.createElement(l.Fragment,null,c.a.createElement(f.b,{exact:!0,path:"/workflows/add-workflow",component:be}),c.a.createElement(f.b,{exact:!0,path:"/workflows/edit/:id",component:be}),c.a.createElement(f.b,{exact:!0,path:"/workflows/remove/:id",component:ve}),c.a.createElement(Oe.TableToolbar,null,c.a.createElement(h.a,{style:{flex:1}},c.a.createElement(b.a,null,c.a.createElement(w.a,null,c.a.createElement(qe.a,{onFilterChange:function(e){return T(e)},searchValue:y,placeholder:"Find a Workflow"}),c.a.createElement(g.a,null,c.a.createElement(v.a,null,c.a.createElement(d.b,{to:"/workflows/add-workflow"},c.a.createElement(E.c,{variant:"primary","aria-label":"Create Workflow"},"Create Workflow")))))),c.a.createElement(b.a,null,c.a.createElement(w.a,null,c.a.createElement(g.a,null,c.a.createElement(v.a,null,c.a.createElement(O.Pagination,{itemsPerPage:a.limit||50,numberOfItems:a.count||50,onPerPageSelect:j,page:Object(Ee.a)(a.limit,a.offset),onSetPage:W,direction:"down"}))))))),c.a.createElement(k.b,{"aria-label":"Approval Workflows table",onCollapse:function(e,t,n,a){var o=a.id;return L(function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{isOpen:!e.isOpen}):r()({},e)})}(e,o)})},rows:F,cells:Te,onSelect:function(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return L(-1===n?F.map(function(e){return r()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{selected:!e.selected}):r()({},e)})}(e,a)})},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Edit",onClick:function(e,t,n){return s.push("/workflows/edit/".concat(n.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return s.push("/workflows/remove/".concat(n.id))}}]}},c.a.createElement(R.a,null),c.a.createElement(q.a,null)))};xe.propTypes={history:p.a.shape({goBack:p.a.func.isRequired,push:p.a.func.isRequired}).isRequired,filteredItems:p.a.array,workflows:p.a.array,platforms:p.a.array,isLoading:p.a.bool,searchFilter:p.a.string,fetchWorkflows:p.a.func.isRequired,fetchRbacGroups:p.a.func.isRequired,pagination:p.a.shape({limit:p.a.number.isRequired,offset:p.a.number.isRequired,count:p.a.number.isRequired})},xe.defaultProps={workflows:[],pagination:{}};t.default=Object(s.connect)(function(e){var t=e.workflowReducer,n=t.workflows,a=t.isLoading,r=e.groupReducer,o=r.groups,i=r.filterValue;return{workflows:n.data,pagination:n.meta,rbacGroups:o,isLoading:a,searchFilter:i}},function(e){return{fetchWorkflows:function(t){return e(z(t))},fetchRbacGroups:function(t){return e({type:T.c,payload:_().then(function(e){var t=e.data;return te()(t.map(function(e){return{value:e.uuid,label:e.name}}))})})}}})(xe)},395:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(3),l=n.n(i),c=n(8),s=n.n(c),u=n(41),p=n(36),d=n(256),f=n(52),m=n(60),h=n(246),b=n.n(h),w=n(247),g=n(10),v=n.n(g),E=n(16),y=n.n(E),k=n(24),R=function(e){return y()({},e,{isRequestDataLoading:!0})},q=(a={},v()(a,"".concat(k.e,"_PENDING"),R),v()(a,"".concat(k.e,"_FULFILLED"),function(e,t){var n=t.payload;return y()({},e,{requests:n,isRequestDataLoading:!1})}),v()(a,"".concat(k.d,"_PENDING"),R),v()(a,"".concat(k.d,"_FULFILLED"),function(e,t){var n=t.payload;return y()({},e,{selectedRequest:n,isRequestDataLoading:!1})}),a),O=function(e){return y()({},e,{isLoading:!0})},T=(r={},v()(r,"".concat(k.g,"_PENDING"),O),v()(r,"".concat(k.g,"_FULFILLED"),function(e,t){var n=t.payload;return y()({},e,{workflows:n,isLoading:!1})}),v()(r,"".concat(k.f,"_PENDING"),O),v()(r,"".concat(k.f,"_FULFILLED"),function(e,t){var n=t.payload;return y()({},e,{selectedWorkflow:n,isLoading:!1})}),r),x=(o={},v()(o,"".concat(k.c,"_PENDING"),function(e){return y()({},e,{isLoading:!0})}),v()(o,"".concat(k.c,"_FULFILLED"),function(e,t){var n=t.payload;return y()({},e,{groups:n,isLoading:!1})}),o),C=new f.ReducerRegistry({},[w.a,Object(d.a)(),Object(m.notificationsMiddleware)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]}),b.a]);C.register({requestReducer:Object(f.applyReducerHash)(q,{requests:[],request:{},filterValue:"",isRequestDataLoading:!1}),workflowReducer:Object(f.applyReducerHash)(T,{workflows:{data:[],meta:{count:0,limit:10,offset:0}},workflow:{},filterValue:"",isLoading:!1}),groupReducer:Object(f.applyReducerHash)(x,{groups:[],isLoading:!1}),notifications:m.notifications});var F=C.getStore(),L=n(64),j=n.n(L),W=n(65),_=n.n(W),S=n(66),N=n.n(S),D=n(67),P=n.n(D),I=n(35),A=n.n(I),K=n(68),M=n.n(K),V=n(0),G=n.n(V),B=n(75),H=n(44),U=n.n(H),z=n(145),Q=n.n(z),J=n(51),X=n.n(J),Z=n(29),Y=n.n(Z),$=n(146),ee=n(168),te=n(169),ne=n(170),ae=n(171),re=function(e){var t=e.items,n=U()(e,["items"]);return l.a.createElement(ee.a,{gutter:"md"},l.a.createElement(te.a,{sm:12,style:{padding:24}},l.a.createElement(ee.a,{gutter:"md"},Y()(Array(t)).map(function(e,t){return l.a.createElement(te.a,{sm:12,md:6,lg:3,key:t},l.a.createElement(ne.a,null,l.a.createElement(ae.a,null,l.a.createElement($.a,X()({height:160,width:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},n),l.a.createElement("rect",{x:"2",y:"99",rx:"3",ry:"3",width:"300",height:"6.4"})))))}))))};re.propTypes={items:G.a.number},re.defaultProps={items:1};var oe=function(e){return l.a.createElement("div",null,l.a.createElement($.a,X()({height:16,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#FFFFFF"},e),l.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"420",height:"10"})),l.a.createElement(re,null))},ie=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(396))})}),le=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(394))})}),ce="/requests",se="/workflows",ue=function(e){var t=e.rootClass,n=U()(e,["rootClass"]),a=document.getElementById("root");return a.removeAttribute("class"),a.classList.add("page__".concat(t),"pf-l-page__main","pf-c-page__main"),a.setAttribute("role","main"),l.a.createElement(B.b,n)};ue.propTypes={rootClass:G.a.string};var pe=function(){return l.a.createElement(i.Suspense,{fallback:l.a.createElement(oe,null)},l.a.createElement(B.d,null,l.a.createElement(ue,{path:ce,component:ie,rootClass:"requests"}),l.a.createElement(ue,{path:se,component:le,rootClass:"workflows"}),l.a.createElement(B.b,{render:function(){return l.a.createElement(B.a,{to:se})}})))},de=(n(386),n(238)),fe=n(208),me=[{eventKey:0,title:"Requests",name:"/requests"},{eventKey:1,title:"Workflows",name:"/workflows"}],he=function(e){var t=e.history.push,n=e.location.pathname,a=me.find(function(e){var t=e.name;return n.includes(t)});return l.a.createElement(de.a,{className:"pf-u-mt-md",activeKey:a?a.eventKey:0,onSelect:function(e,n){return t(me[n].name)}},me.map(function(e){return l.a.createElement(fe.a,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})}))};he.propTypes={children:G.a.oneOfType([G.a.node,G.a.arrayOf(G.a.node)]),location:G.a.shape({pathname:G.a.string.isRequired}),history:G.a.shape({push:G.a.func.isRequired})};var be=Object(B.f)(he),we=n(138),ge=(n(390),function(e){function t(){var e,n;j()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=N()(this,(e=P()(t)).call.apply(e,[this].concat(r))),v()(A()(n),"state",{chromeNavAvailable:!0,auth:!1}),n}return M()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=this;insights.chrome.init(),insights.chrome.auth.getUser().then(function(){return e.setState({auth:!0})}),insights.chrome.identifyApp("approval")}},{key:"render",value:function(){return this.state.auth?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.NotificationsPortal,null),l.a.createElement(f.PageHeader,{style:{paddingBottom:0}},l.a.createElement(we.a,{headingLevel:"h1",size:"2xl"},"Approval"),l.a.createElement(be,null)),l.a.createElement(f.Main,null,l.a.createElement(pe,null))):l.a.createElement(oe,null)}}]),t}(i.Component));ge.propTypes={history:G.a.object};var ve=Object(B.f)(Object(p.connect)()(ge)),Ee=window.location.pathname.split("/");Ee.shift();var ye="/";"beta"===Ee[0]&&(ye="/".concat(Ee.shift(),"/")),s.a.render(l.a.createElement(p.Provider,{store:F},l.a.createElement(u.a,{basename:"".concat(ye).concat(Ee[0],"/").concat(Ee[1])},l.a.createElement(ve,null))),document.getElementById("root"))},396:function(e,t,n){"use strict";n.r(t);var a=n(51),r=n.n(a),o=n(64),i=n.n(o),l=n(65),c=n.n(l),s=n(66),u=n.n(s),p=n(67),d=n.n(p),f=n(35),m=n.n(f),h=n(68),b=n.n(h),w=n(10),g=n.n(w),v=n(3),E=n.n(v),y=n(36),k=n(0),R=n.n(k),q=n(75),O=n(239),T=n(210),x=n(139),C=n(29),F=n.n(C),L=n(52),j=n(182),W=n(41),_=n(240),S=n(20),N=n(172),D=n(173),P=n(174),I=n(175),A=n(176),K=n(177),M=n(178),V=n(179),G=n(180),B=n(138),H=n(181),U=n(127),z=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),g()(m()(n),"state",{isKebabOpen:!1}),g()(m()(n),"onKebabToggle",function(e){n.setState({isKebabOpen:e})}),g()(m()(n),"onKebabSelect",function(){n.setState({isKebabOpen:!n.state.isKebabOpen})}),g()(m()(n),"buildRequestActionKebab",function(e){return E.a.createElement(_.a,{position:S.d.right,onSelect:n.onKebabSelect,toggle:E.a.createElement(N.a,{onToggle:n.onKebabToggle}),isOpen:n.state.isKebabOpen,dropdownItems:[E.a.createElement(D.a,{"aria-label":"Edit Request",key:"edit-request"},E.a.createElement(W.b,{to:"/requests/edit/".concat(e.id)},"Edit")),E.a.createElement(D.a,{component:"link","aria-label":"Remove Request",key:"remove-request"},E.a.createElement(W.b,{to:"/requests/remove/".concat(e.id)},"Delete"))],isPlain:!0})}),g()(m()(n),"fetchRequestDetails",function(e){return"Details for ".concat(e.name)}),n}return b()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props.item;return E.a.createElement(P.a,{key:"request-".concat(t.id),"aria-labelledby":"check-request-".concat(t.id),isExpanded:this.props.isExpanded("request-".concat(t.id))},E.a.createElement(I.a,{onClick:function(){return e.props.toggleExpand("request-".concat(t.id))},isExpanded:this.props.isExpanded("request-".concat(t.id)),id:"request-".concat(t.id),"aria-labelledby":"request-".concat(t.id," request-").concat(t.id),"aria-label":"Toggle details for"}),E.a.createElement(A.a,{"aria-labelledby":"check-request-".concat(t.id),name:"check-request-".concat(t.id)}),E.a.createElement(K.a,null,E.a.createElement(M.a,null,E.a.createElement("span",{id:t.id},"".concat(t.name)," ")),E.a.createElement(M.a,null,E.a.createElement("span",{id:t.description},"".concat(t.description)," "))),E.a.createElement(K.a,null,this.fetchRequestDetails(t)),E.a.createElement(V.a,{"aria-label":"Request Content Details",isHidden:!this.props.isExpanded("request-".concat(t.id))},E.a.createElement(G.a,{gutter:"md"},E.a.createElement(M.a,null,E.a.createElement(B.a,{size:"md"},"Details")),E.a.createElement(M.a,null,E.a.createElement(H.a,{component:U.a.h6},this.fetchRequestDetails(t))))))}}]),t}(v.Component);z.propTypes={isLoading:R.a.bool,item:R.a.object,isExpanded:R.a.func.isRequired,toggleExpand:R.a.func.isRequired,noItems:R.a.string};var Q=z,J=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),g()(m()(n),"state",{expanded:[]}),g()(m()(n),"toggleExpand",function(e){var t=n.state.expanded,a=t.indexOf(e),r=a>=0?[].concat(F()(t.slice(0,a)),F()(t.slice(a+1,t.length))):[].concat(F()(t),[e]);n.setState(function(){return{expanded:r}})}),g()(m()(n),"isExpanded",function(e){return n.state.expanded.includes(e)}),n}return b()(t,e),c()(t,[{key:"render",value:function(){var e=this;return this.props.isLoading||0===this.props.items.length?E.a.createElement(L.PageHeader,null,E.a.createElement(L.PageHeaderTitle,{title:this.props.noItems})):E.a.createElement(E.a.Fragment,null,this.props.items&&this.props.items.length>0&&E.a.createElement(j.a,{"aria-label":"Expandable data list"},this.props.items.map(function(t){return E.a.createElement(Q,{key:t.id,item:t,isExpanded:e.isExpanded,toggleExpand:e.toggleExpand})})))}}]),t}(v.Component);J.propTypes={isLoading:R.a.bool,items:R.a.array,noItems:R.a.string};var X=J,Z=n(118),Y=n(24),$=(n(21),n(39),n(76)),ee=Object($.b)();var te=function(){return function(e,t){if(!t().requestReducer.isRequestDataLoading)return e({type:Y.e,payload:ee.listRequests().then(function(e){var t=e.data;return F()(t)})})}},ne=n(16),ae=n.n(ne),re=n(257),oe=n(122),ie=n(55),le=n(202),ce=n(168),se=n(169),ue=n(60),pe=function(e){var t=e.history.goBack,n=e.addNotification,a=e.fetchRequests,r=e.initialValues,o=e.workflows,i=e.updateRequest,l=function(){n({variant:"warning",title:"Editing request",description:"Edit request was cancelled by the user."}),t()},c=o.map(function(e){return{value:e.id,label:e.name,id:e.id}}),s={type:"object",properties:{email:{title:r?"Email":"New Email",type:"string"},first_name:{title:"First Name",type:"string"},last_name:{title:"Last Name",type:"string"}},required:["email"]};return E.a.createElement(le.a,{isLarge:!0,title:r?"Update approver":"Create approver",isOpen:!0,onClose:l},E.a.createElement(ce.a,{gutter:"md",style:{minWidth:"800px"}},E.a.createElement(se.a,{sm:6},E.a.createElement(oe.a,{schema:s,schemaType:"mozilla",onSubmit:function(e){i(e).then(function(){return a()}).then(t)},onCancel:l,formContainer:"modal",initialValues:ae()({},r)})),E.a.createElement(se.a,{sm:6},E.a.createElement(H.a,null,E.a.createElement(U.b,{component:U.a.h6},"Select the workflows for this request.")),E.a.createElement(re.a,{isMulti:!0,placeholders:"Select workflows",options:c,onChange:function(){},closeMenuOnSelect:!1}))))};pe.propTypes={history:R.a.shape({goBack:R.a.func.isRequired}).isRequired,addNotification:R.a.func.isRequired,fetchRequests:R.a.func.isRequired,initialValues:R.a.object,workflows:R.a.array,updateRequest:R.a.func.isRequired};var de=Object(q.f)(Object(y.connect)(function(e,t){var n=t.match.params.id,a=e.requestReducer.requests;return{workflows:e.workflowReducer.workflows,initialValues:n&&a.find(function(e){return e.id===n}),requestId:n}},function(e){return Object(ie.bindActionCreators)({addNotification:ue.addNotification,fetchRequests:te},e)})(pe)),fe=n(91),me=n(120),he=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),g()(m()(n),"state",{filteredItems:[],isOpen:!1,filterValue:""}),g()(m()(n),"fetchData",function(){n.props.fetchRequests()}),g()(m()(n),"onFilterChange",function(e){return n.setState({filterValue:e})}),n}return b()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.fetchData(),Object(fe.c)()}},{key:"renderToolbar",value:function(){return E.a.createElement(me.TableToolbar,null,E.a.createElement(O.a,{style:{flex:1}},E.a.createElement(T.a,null,E.a.createElement(x.a,null,E.a.createElement(T.a,null,E.a.createElement(Z.a,{onFilterChange:this.onFilterChange,searchValue:this.state.filterValue,placeholder:"Find a Request"}))))))}},{key:"render",value:function(){var e={items:this.props.requests,isLoading:this.props.isLoading&&0===this.props.requests.length};return E.a.createElement(v.Fragment,null,E.a.createElement(q.b,{exact:!0,path:"/requests/edit/:id",component:de}),this.renderToolbar(),E.a.createElement(X,r()({},e,{noItems:"No Requests"})))}}]),t}(v.Component);he.propTypes={filteredItems:R.a.array,requests:R.a.array,isLoading:R.a.bool,searchFilter:R.a.string,fetchRequests:R.a.func.isRequired},he.defaultProps={requests:[]};t.default=Object(y.connect)(function(e){return{requests:e.requestReducer.requests,isLoading:e.requestReducer.isRequestDataLoading,workflows:e.workflowReducer.workflows,searchFilter:e.requestReducer.filterValue}},function(e){return{fetchRequests:function(t){return e(te())}}})(he)},76:function(e,t,n){"use strict";var a=n(105),r=n.n(a),o="".concat("/api","/approval/v1.0"),i="".concat("/api","/rbac/v1"),l=n(123),c=n(96);n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return w});var s=r.a.create();s.interceptors.response.use(function(e){return e.data||e});var u=new c.WorkflowApi(void 0,o,s),p=(new c.ActionApi(void 0,o,s),new c.RequestApi(void 0,o,s)),d=new c.TemplateApi(void 0,o,s),f=(new l.AccessApi(void 0,i,s),new l.PrincipalApi(void 0,i,s),new l.GroupApi(void 0,i,s));function m(){return p}function h(){return d}function b(){return u}function w(){return f}},91:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var a=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},o=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1?arguments[1]:void 0)}}});
//# sourceMappingURL=../sourcemaps/App.js.map