!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],f=0,d=[];f<s.length;f++)i=s[f],r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/apps/approval/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([491,1]),n()}({109:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(0),i=n.n(o),s=n(132),c=n(131),l=n(130),u=n(73),f=function(e){var t=e.searchValue,n=e.onFilterChange,a=e.placeholder;return r.a.createElement(s.a,null,r.a.createElement(c.a,null,r.a.createElement("div",{className:"pf-c-input-group"},r.a.createElement(l.a,{placeholder:a,value:t,type:"text",onChange:n,"aria-label":"Find product button"}),r.a.createElement(u.c,{variant:"tertiary",id:"searchProductButton",onClick:function(){return n(t)}},r.a.createElement("i",{className:"fas fa-search","aria-hidden":"true"})))))};f.propTypes={onFilterChange:i.a.func.isRequired,placeholder:i.a.string,searchValue:i.a.string},f.defaultProps={searchValue:""},t.a=f},113:function(e,t,n){"use strict";var a=n(42),r=n.n(a),o=n(24),i=n.n(o),s=n(12),c=n.n(s),l=n(41),u=n.n(l),f=n(3),d=n.n(f),p=n(0),m=n.n(p),h=n(39),b=n.n(h),v=n(85),w=n(37),y=n.n(w),g=n(175),E=n(179),j=n(178),k=n(187),R=n(119),q=function(e){var t=e.input,n=e.options,a=e.isReadOnly,o=e.isDisabled,i=(e.FieldProvider,e.isRequired),s=u()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return d.a.createElement(g.a,r()({},t,s,{isDisabled:o||a}),function(e,t,n){if(t&&n)return e;var a=y()(e);return a.find(function(e){return void 0===e.value})?y()(a):[{label:n?"Please choose":"None"}].concat(y()(a))}(n,t.value,i).map(function(e){return d.a.createElement(E.a,r()({key:e.value||e.label},e,{label:e.label.toString()}))}))};q.propTypes={input:m.a.object.isRequired,options:m.a.arrayOf(m.a.shape({value:m.a.any,label:m.a.string.isRequired})).isRequired,isReadOnly:m.a.bool,isDisabled:m.a.bool,isRequired:m.a.bool,FieldProvider:m.a.any};var O=function(e){e.componentType;var t=e.label,n=e.isRequired,a=e.helperText,o=e.meta,i=e.description,s=e.hideLabel,c=u()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),l=o.error,f=o.touched&&l;return d.a.createElement(j.a,{isRequired:n,label:!s&&t,fieldId:c.id,isValid:!f,helperText:a,helperTextInvalid:o.error},i&&d.a.createElement(k.a,null,d.a.createElement(R.b,{component:R.a.small},i)),d.a.createElement(q,r()({label:t,isValid:!f,isRequired:n},c)))};O.propTypes={componentType:m.a.string,label:m.a.string,isRequired:m.a.bool,helperText:m.a.string,meta:m.a.object,description:m.a.string,hideLabel:m.a.bool};var T=O,F={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},C=function(e){var t=e.componentMapper,n=e.formContainer,a=u()(e,["componentMapper","formContainer"]);return d.a.createElement("div",{className:F[n].buttonClassName},d.a.createElement(b.a,r()({formFieldsMapper:c()({},v.formFieldsMapper,i()({componentMapper:t},h.componentTypes.SELECT,T)),layoutMapper:v.layoutMapper},F[n],a)))};C.propTypes={componentMapper:m.a.object,formContainer:m.a.oneOf(["default","modal"])},C.defaultProps={componentMapper:{},formContainer:"default"};t.a=C},20:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"c",function(){return u});var a="FETCH_REQUEST",r="FETCH_REQUESTS",o="FETCH_WORKFLOW",i="FETCH_WORKFLOWS",s="ADD_WORKFLOW",c="UPDATE_WORKFLOW",l="REMOVE_WORKFLOW",u="FETCH_RBAC_GROUPS"},429:function(e,t,n){var a={"./af":191,"./af.js":191,"./ar":192,"./ar-dz":193,"./ar-dz.js":193,"./ar-kw":194,"./ar-kw.js":194,"./ar-ly":195,"./ar-ly.js":195,"./ar-ma":196,"./ar-ma.js":196,"./ar-sa":197,"./ar-sa.js":197,"./ar-tn":198,"./ar-tn.js":198,"./ar.js":192,"./az":199,"./az.js":199,"./be":200,"./be.js":200,"./bg":201,"./bg.js":201,"./bm":202,"./bm.js":202,"./bn":203,"./bn.js":203,"./bo":204,"./bo.js":204,"./br":205,"./br.js":205,"./bs":206,"./bs.js":206,"./ca":207,"./ca.js":207,"./cs":208,"./cs.js":208,"./cv":209,"./cv.js":209,"./cy":210,"./cy.js":210,"./da":211,"./da.js":211,"./de":212,"./de-at":213,"./de-at.js":213,"./de-ch":214,"./de-ch.js":214,"./de.js":212,"./dv":215,"./dv.js":215,"./el":216,"./el.js":216,"./en-SG":217,"./en-SG.js":217,"./en-au":218,"./en-au.js":218,"./en-ca":219,"./en-ca.js":219,"./en-gb":220,"./en-gb.js":220,"./en-ie":221,"./en-ie.js":221,"./en-il":222,"./en-il.js":222,"./en-nz":223,"./en-nz.js":223,"./eo":224,"./eo.js":224,"./es":225,"./es-do":226,"./es-do.js":226,"./es-us":227,"./es-us.js":227,"./es.js":225,"./et":228,"./et.js":228,"./eu":229,"./eu.js":229,"./fa":230,"./fa.js":230,"./fi":231,"./fi.js":231,"./fo":232,"./fo.js":232,"./fr":233,"./fr-ca":234,"./fr-ca.js":234,"./fr-ch":235,"./fr-ch.js":235,"./fr.js":233,"./fy":236,"./fy.js":236,"./ga":237,"./ga.js":237,"./gd":238,"./gd.js":238,"./gl":239,"./gl.js":239,"./gom-latn":240,"./gom-latn.js":240,"./gu":241,"./gu.js":241,"./he":242,"./he.js":242,"./hi":243,"./hi.js":243,"./hr":244,"./hr.js":244,"./hu":245,"./hu.js":245,"./hy-am":246,"./hy-am.js":246,"./id":247,"./id.js":247,"./is":248,"./is.js":248,"./it":249,"./it-ch":250,"./it-ch.js":250,"./it.js":249,"./ja":251,"./ja.js":251,"./jv":252,"./jv.js":252,"./ka":253,"./ka.js":253,"./kk":254,"./kk.js":254,"./km":255,"./km.js":255,"./kn":256,"./kn.js":256,"./ko":257,"./ko.js":257,"./ku":258,"./ku.js":258,"./ky":259,"./ky.js":259,"./lb":260,"./lb.js":260,"./lo":261,"./lo.js":261,"./lt":262,"./lt.js":262,"./lv":263,"./lv.js":263,"./me":264,"./me.js":264,"./mi":265,"./mi.js":265,"./mk":266,"./mk.js":266,"./ml":267,"./ml.js":267,"./mn":268,"./mn.js":268,"./mr":269,"./mr.js":269,"./ms":270,"./ms-my":271,"./ms-my.js":271,"./ms.js":270,"./mt":272,"./mt.js":272,"./my":273,"./my.js":273,"./nb":274,"./nb.js":274,"./ne":275,"./ne.js":275,"./nl":276,"./nl-be":277,"./nl-be.js":277,"./nl.js":276,"./nn":278,"./nn.js":278,"./pa-in":279,"./pa-in.js":279,"./pl":280,"./pl.js":280,"./pt":281,"./pt-br":282,"./pt-br.js":282,"./pt.js":281,"./ro":283,"./ro.js":283,"./ru":284,"./ru.js":284,"./sd":285,"./sd.js":285,"./se":286,"./se.js":286,"./si":287,"./si.js":287,"./sk":288,"./sk.js":288,"./sl":289,"./sl.js":289,"./sq":290,"./sq.js":290,"./sr":291,"./sr-cyrl":292,"./sr-cyrl.js":292,"./sr.js":291,"./ss":293,"./ss.js":293,"./sv":294,"./sv.js":294,"./sw":295,"./sw.js":295,"./ta":296,"./ta.js":296,"./te":297,"./te.js":297,"./tet":298,"./tet.js":298,"./tg":299,"./tg.js":299,"./th":300,"./th.js":300,"./tl-ph":301,"./tl-ph.js":301,"./tlh":302,"./tlh.js":302,"./tr":303,"./tr.js":303,"./tzl":304,"./tzl.js":304,"./tzm":305,"./tzm-latn":306,"./tzm-latn.js":306,"./tzm.js":305,"./ug-cn":307,"./ug-cn.js":307,"./uk":308,"./uk.js":308,"./ur":309,"./ur.js":309,"./uz":310,"./uz-latn":311,"./uz-latn.js":311,"./uz.js":310,"./vi":312,"./vi.js":312,"./x-pseudo":313,"./x-pseudo.js":313,"./yo":314,"./yo.js":314,"./zh-cn":315,"./zh-cn.js":315,"./zh-hk":316,"./zh-hk.js":316,"./zh-tw":317,"./zh-tw.js":317};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=429},482:function(e,t,n){var a=n(483);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(334)(a,r);a.locals&&(e.exports=a.locals)},483:function(e,t,n){(t=e.exports=n(126)(!1)).i(n(484),""),t.push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\nbutton:focus {\n  outline: none; }\n\n.modal-form-right-align .pf-m-action:last-child .data-driven-forms__pf4-button-group:first-child {\n  margin-left: auto; }\n\n.data-table-detail.heading {\n  margin: 0 !important; }\n\n.data-table-detail.content {\n  margin-top: 0 !important; }\n\n.destructive-color:not(:disabled) {\n  color: #FF0000 !important; }\n",""])},490:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a),o=n(82),i=n.n(o),s=n(3),c=n.n(s),l=n(32),u=n(0),f=n.n(u),d=n(35),p=n(66),m=n(112),h=n(341),b=n(188),v=n(189),w=n(132),y=n(131),g=n(73),E=n(94),j=n(111),k=n(495),R=n(496),q=n(106),O=n(20),T=n(21),F=n.n(T),C=n(44),_=n.n(C),L=n(67),N=Object(L.a)();function x(){return W.apply(this,arguments)}function W(){return(W=_()(F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=_()(F.a.mark(function e(t){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=_()(F.a.mark(function e(t){var n;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getGroup(t);case 2:return n=e.sent,e.abrupt("return",n.name);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var D=Object(L.d)(),A=Object(L.c)();function I(e){return z.apply(this,arguments)}function z(){return(z=_()(F.a.mark(function e(t){var n,a,o,i,s,c;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,a=void 0===n?10:n,o=t.offset,i=void 0===o?0:o,e.next=3,D.listWorkflows(a,i);case 3:return s=e.sent,c=s.data,e.abrupt("return",Promise.all(c.map(function(){var e=_()(F.a.mark(function e(t){var n;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t.group_refs);case 2:return n=e.sent,e.abrupt("return",r()({},t,{group_names:n}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return r()({},s,{data:e})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return(M=_()(F.a.mark(function e(t){var n,a;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.showWorkflow(t);case 2:return n=e.sent,e.next=5,S(n.group_refs);case 5:return a=e.sent,e.abrupt("return",r()({},n,{group_names:a}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e){return K.apply(this,arguments)}function K(){return(K=_()(F.a.mark(function e(t){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.updateWorkflow(t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return B.apply(this,arguments)}function B(){return(B=_()(F.a.mark(function e(t){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:O.g,payload:I(e)}},Q=function(e){return{type:O.f,payload:G(e)}},X=function(e){return{type:O.a,payload:(t=e,A.listTemplates().then(function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id}).then(function(e){return D.addWorkflowToTemplate(e,t,{})})),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding workflow",description:"The workflow was added successfully."},rejected:{variant:"danger",title:"Failed adding workflow",description:"The workflow was not added successfuly."}}}};var t},J=function(e){return{type:O.i,payload:U(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating workflow",description:"The workflow was updated successfully."},rejected:{variant:"danger",title:"Failed updating workflow",description:"The workflow was not updated successfuly."}}}}},Z=function(e){return{type:O.h,payload:V(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing workflow",description:"The workflow was removed successfully."}}}}},Y=n(24),$=n.n(Y),ee=n(37),te=n.n(ee),ne=n(41),ae=n.n(ne),re=n(52),oe=n(180),ie=n(56),se=n(85),ce=n(113),le=n(39),ue=function(e,t){return{fields:[{component:le.componentTypes.WIZARD,name:"workflow_wizard",fields:[{title:"Workflow information",name:"wf_step_info",stepKey:1,nextStep:"wf_step_stages",fields:[{component:le.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:!0,label:"Name",validate:[{type:le.validatorTypes.REQUIRED}]},{component:le.componentTypes.TEXTAREA_FIELD,name:"description",type:"text",label:"Description"}]},{stepKey:"wf_step_stages",title:"Set Approval Stages",name:"wf_step_stages",nextStep:"summary",fields:[{component:le.componentTypes.SELECT,name:"stage-1",isRequired:!1,label:"1st Stage",options:t},{component:le.componentTypes.SELECT,name:"stage-2",label:"2nd Stage",options:t},{component:le.componentTypes.SELECT,name:"stage-3",label:"3rd Stage",options:t}]},{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}]}]}},fe=n(187),de=n(119),pe=function(e){var t=e.values,n=t.name,a=t.description,r=ae()(t,["name","description"]);return c.a.createElement(s.Fragment,null,c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Please review the workflow details")),c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Name"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.p},n)),c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Description"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.p},a)),c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.h5},"Approval Stages"),Object.keys(r).map(function(t){return t.startsWith("stage")&&c.a.createElement(de.b,{key:t,className:"data-table-detail content",component:de.a.p},"".concat(t," : ").concat(e.groupOptions.find(function(e){return e.value===r[t]}).label))})))};pe.propTypes={name:f.a.string,description:f.a.string,groups:f.a.array};var me=pe,he=function(e){var t=e.history.push,n=e.addWorkflow,a=e.addNotification,o=e.fetchWorkflow,i=e.fetchWorkflows,l=e.initialValues,u=e.updateWorkflow,f=e.initialGroups,d=e.workflowId,p=e.rbacGroups;Object(s.useEffect)(function(){d&&o(d).then(function(e){return b(e)})},[d]);var m=function(){a({variant:"warning",title:l?"Editing workflow":"Creating workflow",description:l?"Edit workflow was cancelled by the user.":"Creating workflow was cancelled by the user."}),t("/workflows")},h=[].concat(te()(p),[{value:void 0,label:"None"}]),b=function(e){return e.value.group_refs.map(function(e,t){return $()({},"stage-".concat(t+1),e)}).reduce(function(e,t){return r()({},e,t)},{})};return c.a.createElement(oe.a,{title:l?"Edit workflow":"Create workflow",isOpen:!0,onClose:m,isSmall:!0},c.a.createElement("div",{style:{padding:8}},c.a.createElement(ce.a,{schema:ue(0,h),schemaType:"default",onSubmit:function(e){var a=e.name,r=e.description,o=ae()(e,["name","description"]),s={name:a,description:r,group_refs:Object.values(o)};l?u(s).then(t("/workflows")).then(function(){return i()}):n(s).then(t("/workflows")).then(function(){return i()})},onCancel:m,initialValues:r()({},l,f),formFieldsMapper:r()({},se.formFieldsMapper,{summary:function(e){return c.a.createElement(me,{values:e.formOptions.getState().values,groupOptions:h})}}),formContainer:"modal",showFormControls:!1,buttonsLabels:{submitLabel:"Confirm"}})))};he.defaultProps={rbacGroups:[],initialGroups:[]},he.propTypes={history:f.a.shape({goBack:f.a.func.isRequired}).isRequired,addWorkflow:f.a.func.isRequired,addNotification:f.a.func.isRequired,fetchWorkflow:f.a.func.isRequired,fetchWorkflows:f.a.func.isRequired,initialValues:f.a.object,updateWorkflow:f.a.func.isRequired,workflowId:f.a.string,initialGroups:f.a.array,rbacGroups:f.a.arrayOf(f.a.shape({value:f.a.oneOfType([f.a.number,f.a.string]).isRequired,label:f.a.string.isRequired})).isRequired};var be=Object(p.f)(Object(l.connect)(function(e,t){var n=t.match.params.id,a=e.workflowReducer.selectedWorkflow;return{rbacGroups:e.groupReducer.groups,initialValues:n&&a,workflowId:n}},function(e){return Object(re.bindActionCreators)({addNotification:ie.addNotification,addWorkflow:X,updateWorkflow:J,fetchWorkflows:H,fetchWorkflow:Q},e)})(he)),ve=n(72),we=function(e){var t=e.history,n=t.goBack,a=t.push,r=e.removeWorkflow,o=e.fetchWorkflows,i=e.fetchWorkflow,l=e.workflowId,u=e.workflow;if(Object(s.useEffect)(function(){l&&i(l)},[l]),!u)return null;var f=function(){return n()};return c.a.createElement(oe.a,{isOpen:!0,isSmall:!0,title:"",onClose:f,actions:[c.a.createElement(g.c,{key:"cancel",variant:"secondary",type:"button",onClick:f},"Cancel"),c.a.createElement(g.c,{key:"submit",variant:"primary",type:"button",onClick:function(){return r(l).then(function(){o(),a("/workflows")})}},"Confirm")]},c.a.createElement(ve.a,null,c.a.createElement(fe.a,null,c.a.createElement(de.b,{component:de.a.h1},"Removing Workflow:  ",u.name))))};we.propTypes={history:f.a.shape({goBack:f.a.func.isRequired,push:f.a.func.isRequired}).isRequired,removeWorkflow:f.a.func.isRequired,fetchWorkflows:f.a.func.isRequired,fetchWorkflow:f.a.func.isRequired,workflowId:f.a.string,workflow:f.a.object};var ye=Object(p.f)(Object(l.connect)(function(e,t){var n=e.workflowReducer,a=n.selectedWorkflow,r=n.isLoading;return{workflowId:t.match.params.id,workflow:a,isLoading:r}},function(e){return Object(re.bindActionCreators)({fetchWorkflow:Q,fetchWorkflows:H,removeWorkflow:Z},e)})(we)),ge=n(51),Ee=function(e){var t=e.description,n=e.groups;return c.a.createElement(s.Fragment,null,c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.small},"Description"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.h5},t)),c.a.createElement(fe.a,null,c.a.createElement(de.b,{className:"data-table-detail heading",component:de.a.small},"Groups"),c.a.createElement(de.b,{className:"data-table-detail content",component:de.a.h5},n.join(","))))};Ee.propTypes={description:f.a.string,groups:f.a.array};var je=Ee,ke=function(e){return e.filter(function(e){return"Always approve"!==e.name}).reduce(function(e,t,n){var a=t.id,r=t.name,o=t.description,i=t.group_names;return[].concat(te()(e),[{id:a,isOpen:!1,selected:!1,cells:[r,o,i.length]},{parent:2*n,cells:[{title:c.a.createElement(je,{description:o,groups:i})}]}])},[])},Re=n(109),qe=n(110),Oe=[{title:"Name",cellFormatters:[E.b]},"Description","Groups"],Te=function(e){var t=e.fetchRbacGroups,n=e.fetchWorkflows,a=e.pagination,o=e.workflows,l=e.history,u=Object(s.useState)(""),f=i()(u,2),E=f[0],O=f[1],T=Object(s.useState)([]),F=i()(T,2),C=F[0],_=F[1];Object(s.useEffect)(function(){t(),n().then(function(e){var t=e.value.data;return _(ke(t))}),Object(ge.c)()},[]);var L=function(e){return n({offset:a.offset,limit:e}).then(function(){return _(ke(o))})},N=function(e,t){var r={offset:Object(ge.b)(e,a.limit),limit:a.limit},o=function(){return n(r)};return t?Object(m.a)(o,250)():o().then(function(e){var t=e.value.data;return _(ke(t))})};return c.a.createElement(s.Fragment,null,c.a.createElement(p.b,{exact:!0,path:"/workflows/add-workflow",component:be}),c.a.createElement(p.b,{exact:!0,path:"/workflows/edit/:id",component:be}),c.a.createElement(p.b,{exact:!0,path:"/workflows/remove/:id",component:ye}),c.a.createElement(qe.TableToolbar,null,c.a.createElement(h.a,{style:{flex:1}},c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(Re.a,{onFilterChange:function(e){return O(e)},searchValue:E,placeholder:"Find a Workflow"}),c.a.createElement(w.a,null,c.a.createElement(y.a,null,c.a.createElement(d.b,{to:"/workflows/add-workflow"},c.a.createElement(g.c,{variant:"primary","aria-label":"Create Workflow"},"Create Workflow")))))),c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,null,c.a.createElement(y.a,null,c.a.createElement(q.Pagination,{itemsPerPage:a.limit||50,numberOfItems:a.count||50,onPerPageSelect:L,page:Object(ge.a)(a.limit,a.offset),onSetPage:N,direction:"down"}))))))),c.a.createElement(j.b,{"aria-label":"Approval Workflows table",onCollapse:function(e,t,n,a){var o=a.id;return _(function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{isOpen:!e.isOpen}):r()({},e)})}(e,o)})},rows:C,cells:Oe,onSelect:function(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return _(-1===n?C.map(function(e){return r()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{selected:!e.selected}):r()({},e)})}(e,a)})},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Edit",onClick:function(e,t,n){return l.push("/workflows/edit/".concat(n.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,n){return l.push("/workflows/remove/".concat(n.id))}}]}},c.a.createElement(k.a,null),c.a.createElement(R.a,null)))};Te.propTypes={history:f.a.shape({goBack:f.a.func.isRequired,push:f.a.func.isRequired}).isRequired,filteredItems:f.a.array,workflows:f.a.array,platforms:f.a.array,isLoading:f.a.bool,searchFilter:f.a.string,fetchWorkflows:f.a.func.isRequired,fetchRbacGroups:f.a.func.isRequired,pagination:f.a.shape({limit:f.a.number.isRequired,offset:f.a.number.isRequired,count:f.a.number.isRequired})},Te.defaultProps={workflows:[],pagination:{}};t.default=Object(l.connect)(function(e){var t=e.workflowReducer,n=t.workflows,a=t.isLoading,r=e.groupReducer,o=r.groups,i=r.filterValue;return{workflows:n.data,pagination:n.meta,rbacGroups:o,isLoading:a,searchFilter:i}},function(e){return{fetchWorkflows:function(t){return e(H(t))},fetchRbacGroups:function(t){return e({type:O.c,payload:x().then(function(e){var t=e.data;return te()(t.map(function(e){return{value:e.uuid,label:e.name}}))})})}}})(Te)},491:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(3),s=n.n(i),c=n(9),l=n.n(c),u=n(35),f=n(32),d=n(358),p=n(63),m=n(56),h=n(347),b=n.n(h),v=n(348),w=n(24),y=n.n(w),g=n(12),E=n.n(g),j=n(20),k=function(e){return E()({},e,{isRequestDataLoading:!0})},R=(a={},y()(a,"".concat(j.e,"_PENDING"),k),y()(a,"".concat(j.e,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{requests:n,isRequestDataLoading:!1})}),y()(a,"".concat(j.d,"_PENDING"),k),y()(a,"".concat(j.d,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{selectedRequest:n,isRequestDataLoading:!1})}),a),q=function(e){return E()({},e,{isLoading:!0})},O=(r={},y()(r,"".concat(j.g,"_PENDING"),q),y()(r,"".concat(j.g,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{workflows:n,isLoading:!1})}),y()(r,"".concat(j.f,"_PENDING"),q),y()(r,"".concat(j.f,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{selectedWorkflow:n,isLoading:!1})}),r),T=(o={},y()(o,"".concat(j.c,"_PENDING"),function(e){return E()({},e,{isLoading:!0})}),y()(o,"".concat(j.c,"_FULFILLED"),function(e,t){var n=t.payload;return E()({},e,{groups:n,isLoading:!1})}),o),F=new p.ReducerRegistry({},[v.a,Object(d.a)(),Object(m.notificationsMiddleware)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]}),b.a]);F.register({requestReducer:Object(p.applyReducerHash)(R,{requests:[],request:{},filterValue:"",isRequestDataLoading:!1}),workflowReducer:Object(p.applyReducerHash)(O,{workflows:{data:[],meta:{count:0,limit:10,offset:0}},workflow:{},filterValue:"",isLoading:!1}),groupReducer:Object(p.applyReducerHash)(T,{groups:[],isLoading:!1}),notifications:m.notifications});var C=F.getStore(),_=n(349),L=n.n(_),N=n(350),x=n.n(N),W=n(351),S=n.n(W),P=n(352),D=n.n(P),A=n(127),I=n.n(A),z=n(353),G=n.n(z),M=n(0),U=n.n(M),K=n(66),V=n(41),B=n.n(V),H=n(135),Q=n.n(H),X=n(42),J=n.n(X),Z=n(37),Y=n.n(Z),$=n(136),ee=n(157),te=n(158),ne=n(159),ae=n(160),re=function(e){var t=e.items,n=B()(e,["items"]);return s.a.createElement(ee.a,{gutter:"md"},s.a.createElement(te.a,{sm:12,style:{padding:24}},s.a.createElement(ee.a,{gutter:"md"},Y()(Array(t)).map(function(e,t){return s.a.createElement(te.a,{sm:12,md:6,lg:3,key:t},s.a.createElement(ne.a,null,s.a.createElement(ae.a,null,s.a.createElement($.a,J()({height:160,width:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},n),s.a.createElement("rect",{x:"2",y:"99",rx:"3",ry:"3",width:"300",height:"6.4"})))))}))))};re.propTypes={items:U.a.number},re.defaultProps={items:1};var oe=function(e){return s.a.createElement("div",null,s.a.createElement($.a,J()({height:16,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#FFFFFF"},e),s.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"420",height:"10"})),s.a.createElement(re,null))},ie=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(492))})}),se=Object(i.lazy)(function(){return Promise.resolve().then(function(){return Q()(n(490))})}),ce="/requests",le="/workflows",ue=function(e){var t=e.rootClass,n=B()(e,["rootClass"]),a=document.getElementById("root");return a.removeAttribute("class"),a.classList.add("page__".concat(t),"pf-l-page__main","pf-c-page__main"),a.setAttribute("role","main"),s.a.createElement(K.b,n)};ue.propTypes={rootClass:U.a.string};var fe=function(){return s.a.createElement(i.Suspense,{fallback:s.a.createElement(oe,null)},s.a.createElement(K.d,null,s.a.createElement(ue,{path:ce,component:ie,rootClass:"requests"}),s.a.createElement(ue,{path:le,component:se,rootClass:"workflows"}),s.a.createElement(K.b,{render:function(){return s.a.createElement(K.a,{to:le})}})))},de=(n(482),n(340)),pe=n(186),me=[{eventKey:0,title:"Requests",name:"/requests"},{eventKey:1,title:"Workflows",name:"/workflows"}],he=function(e){var t=e.history.push,n=e.location.pathname,a=me.find(function(e){var t=e.name;return n.includes(t)});return s.a.createElement(de.a,{className:"pf-u-mt-md",activeKey:a?a.eventKey:0,onSelect:function(e,n){return t(me[n].name)}},me.map(function(e){return s.a.createElement(pe.a,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})}))};he.propTypes={children:U.a.oneOfType([U.a.node,U.a.arrayOf(U.a.node)]),location:U.a.shape({pathname:U.a.string.isRequired}),history:U.a.shape({push:U.a.func.isRequired})};var be=Object(K.f)(he),ve=n(129),we=(n(486),function(e){function t(){var e,n;L()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=S()(this,(e=D()(t)).call.apply(e,[this].concat(r))),y()(I()(n),"state",{chromeNavAvailable:!0,auth:!1}),n}return G()(t,e),x()(t,[{key:"componentDidMount",value:function(){var e=this;insights.chrome.init(),insights.chrome.auth.getUser().then(function(){return e.setState({auth:!0})}),insights.chrome.identifyApp("approval")}},{key:"render",value:function(){return this.state.auth?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.NotificationsPortal,null),s.a.createElement(p.PageHeader,{style:{paddingBottom:0}},s.a.createElement(ve.a,{headingLevel:"h1",size:"2xl"},"Approval"),s.a.createElement(be,null)),s.a.createElement(p.Main,null,s.a.createElement(fe,null))):s.a.createElement(oe,null)}}]),t}(i.Component));we.propTypes={history:U.a.object};var ye=Object(K.f)(Object(f.connect)()(we)),ge=window.location.pathname.split("/");ge.shift();var Ee="/";"beta"===ge[0]&&(Ee="/".concat(ge.shift(),"/")),l.a.render(s.a.createElement(f.Provider,{store:C},s.a.createElement(u.a,{basename:"".concat(Ee).concat(ge[0],"/").concat(ge[1])},s.a.createElement(ye,null))),document.getElementById("root"))},492:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n.n(a),o=n(12),i=n.n(o),s=n(82),c=n.n(s),l=n(3),u=n.n(l),f=n(32),d=n(0),p=n.n(d),m=n(66),h=n(112),b=n(341),v=n(188),w=n(189),y=n(132),g=n(131),E=n(94),j=n(111),k=n(495),R=n(496),q=n(106),O=n(20),T=n(67),F=Object(T.b)();var C=function(e){return function(t,n){if(!n().requestReducer.isLoading)return t(function(){var e,t,n,a,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:O.e,payload:(e=o,t=e.limit,n=void 0===t?10:t,a=e.offset,r=void 0===a?0:a,F.listRequests(void 0,void 0,void 0,n,r))}}(e))}},_=n(113),L=n(52),N=n(180),x=n(56),W=n(39),S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return{component:W.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:e,label:e?"Reason":"Comment"}}(e);return e&&(t.validate=[{type:W.validatorTypes.REQUIRED}]),{fields:[t]}},P=function(e){var t=e.history.push,n=e.actionType,a=e.addNotification,r=e.fetchRequests,o=e.requestId,i=function(){var e="Add Comment"===n?n:"".concat(n," Request");a({variant:"warning",title:e,description:"".concat(e," was cancelled by the user.")}),t("/requests")};return u.a.createElement(N.a,{isLarge:!0,title:"Add Comment"===n?"Request #".concat(o):"".concat(n," Request #").concat(o),isOpen:!0,onClose:i},u.a.createElement(_.a,{schema:S("Deny"===n),schemaType:"default",onSubmit:function(){r().then(t("/requests"))},onCancel:i,formContainer:"modal"}))};P.propTypes={history:p.a.shape({push:p.a.func.isRequired}).isRequired,addNotification:p.a.func.isRequired,fetchRequests:p.a.func.isRequired,requests:p.a.object,requestId:p.a.string,actionType:p.a.string,match:p.a.object,location:p.a.object};var D=Object(m.f)(Object(f.connect)(function(e,t){var n=t.match.params.id;return{requests:e.requestReducer.requests,requestId:n}},function(e){return Object(L.bindActionCreators)({addNotification:x.addNotification,fetchRequests:C},e)})(P)),A=n(51),I=n(37),z=n.n(I),G=n(35),M=n(187),U=n(119),K=n(73),V=function(e){var t=e.id,n=e.content;return u.a.createElement(l.Fragment,null,u.a.createElement(b.a,null,u.a.createElement(v.a,null,u.a.createElement(M.a,null,u.a.createElement(U.b,{className:"data-table-detail heading",component:U.a.small},"Product"),u.a.createElement(U.b,{className:"data-table-detail content",component:U.a.h5},n?n.product:"Unknown"))),u.a.createElement(v.a,null,u.a.createElement(G.b,{to:"/requests/approve/".concat(t)},u.a.createElement(K.c,{variant:"link","aria-label":"Approve Request"},"Approve")),u.a.createElement(G.b,{to:"/requests/deny/".concat(t)},u.a.createElement(K.c,{variant:"link",className:"destructive-color","aria-label":"Deny Request"},"Deny")))),u.a.createElement(b.a,null,u.a.createElement(v.a,null,u.a.createElement(M.a,null,u.a.createElement(U.b,{className:"data-table-detail heading",component:U.a.small},"Portfolio"),u.a.createElement(U.b,{className:"data-table-detail content",component:U.a.h5},n?n.portfolio:"Unknown")),u.a.createElement(M.a,null,u.a.createElement(U.b,{className:"data-table-detail heading",component:U.a.small},"Platform"),u.a.createElement(U.b,{className:"data-table-detail content",component:U.a.h5},n?n.platform:"Unknown")),u.a.createElement(M.a,null,u.a.createElement(U.b,{className:"data-table-detail heading",component:U.a.small},"Comments"),u.a.createElement(U.b,{className:"data-table-detail content",component:U.a.h5},n?n.comments:"Unknown")))))};V.propTypes={id:p.a.string,content:p.a.object};var B=V,H=function(e){return e.reduce(function(e,t,n){var a=t.id,r=t.requester,o=t.created_at,i=t.updated_at,s=t.state,c=t.decision,l=t.content;return[].concat(z()(e),[{id:a,isOpen:!1,selected:!1,cells:[a,r,Object(A.d)(o),Object(A.d)(i),s,c]},{parent:2*n,cells:[{title:u.a.createElement(B,{id:a,content:l})}]}])},[])},Q=n(109),X=n(110),J=[{title:"RequestId",cellFormatters:[E.b]},"Requester","Opened","Updated","Stage Status","Decision"],Z=function(e){var t=e.fetchRequests,n=e.requests,a=e.pagination,o=e.history,s=Object(l.useState)([]),f=c()(s,2),d=f[0],p=f[1],E=Object(l.useState)([]),O=c()(E,2),T=O[0],F=O[1];Object(l.useEffect)(function(){t().then(function(e){var t=e.value.data;return F(H(t))}),Object(A.c)()},[]);var C=function(e){return t({offset:a.offset,limit:e}).then(function(){return F(H(n))})},_=function(e,n){var r={offset:Object(A.b)(e,a.limit),limit:a.limit},o=function(){return t(r)};return n?Object(h.a)(o,250)():o().then(function(e){var t=e.value.data;return F(H(t))})};return u.a.createElement(l.Fragment,null,u.a.createElement(m.b,{exact:!0,path:"/requests/add_comment/:id",render:function(e){return u.a.createElement(D,r()({},e,{actionType:"Add Comment"}))}}),u.a.createElement(m.b,{exact:!0,path:"/requests/approve/:id",render:function(e){return u.a.createElement(D,r()({},e,{actionType:"Approve"}))}}),u.a.createElement(m.b,{exact:!0,path:"/requests/deny/:id",render:function(e){return u.a.createElement(D,r()({},e,{actionType:"Deny"}))}}),u.a.createElement(X.TableToolbar,null,u.a.createElement(b.a,{style:{flex:1}},u.a.createElement(v.a,null,u.a.createElement(w.a,null,u.a.createElement(Q.a,{onFilterChange:function(e){return p(e)},searchValue:d,placeholder:"Find a Request"}))),u.a.createElement(v.a,null,u.a.createElement(w.a,null,u.a.createElement(y.a,null,u.a.createElement(g.a,null,u.a.createElement(q.Pagination,{itemsPerPage:a.limit||50,numberOfItems:a.count||50,onPerPageSelect:C,page:Object(A.a)(a.limit,a.offset),onSetPage:_,direction:"down"}))))))),u.a.createElement(j.b,{"aria-label":"Approval Requests table",onCollapse:function(e,t,n,a){var r=a.id;return F(function(e){return function(e,t){return e.map(function(e){return e.id===t?i()({},e,{isOpen:!e.isOpen}):i()({},e)})}(e,r)})},rows:T,cells:J,onSelect:function(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return F(-1===n?T.map(function(e){return i()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?i()({},e,{selected:!e.selected}):i()({},e)})}(e,a)})},actionResolver:function(e,t){return 1===t.rowIndex?null:[{title:"Comment",onClick:function(){return o.push("/requests/add_comment/".concat(e.id))}}]}},u.a.createElement(k.a,null),u.a.createElement(R.a,null)))};Z.propTypes={history:p.a.shape({goBack:p.a.func.isRequired,push:p.a.func.isRequired}).isRequired,filteredItems:p.a.array,requests:p.a.array,platforms:p.a.array,isLoading:p.a.bool,searchFilter:p.a.string,fetchRequests:p.a.func.isRequired,pagination:p.a.shape({limit:p.a.number.isRequired,offset:p.a.number.isRequired,count:p.a.number.isRequired})},Z.defaultProps={requests:[],pagination:{}};t.default=Object(f.connect)(function(e){var t=e.requestReducer,n=t.requests,a=t.isLoading,r=t.filterValue;return{requests:n.data,pagination:n.meta,isLoading:a,searchFilter:r}},function(e){return{fetchRequests:function(t){return e(C(t))}}})(Z)},51:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c});var a=n(5),r=n.n(a),o=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},s=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1?arguments[1]:void 0)},c=function(e){return r()(e).fromNow()}},67:function(e,t,n){"use strict";var a=n(96),r=n.n(a),o="".concat("/api","/approval/v1.0"),i="".concat("/api","/rbac/v1"),s=n(114),c=n(87);n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return v});var l=r.a.create();l.interceptors.response.use(function(e){return e.data||e});var u=new c.WorkflowApi(void 0,o,l),f=(new c.ActionApi(void 0,o,l),new c.RequestApi(void 0,o,l)),d=new c.TemplateApi(void 0,o,l),p=(new s.AccessApi(void 0,i,l),new s.PrincipalApi(void 0,i,l),new s.GroupApi(void 0,i,l));function m(){return f}function h(){return d}function b(){return u}function v(){return p}}});
//# sourceMappingURL=../sourcemaps/App.js.map