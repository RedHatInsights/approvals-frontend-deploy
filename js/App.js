!function(e){function t(t){for(var n,c,i=t[0],s=t[1],l=t[2],d=0,p=[];d<i.length;d++)c=i[d],r[c]&&p.push(r[c][0]),r[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={0:0},o=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/apps/approval/";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([533,1]),a()}({124:function(e,t,a){"use strict";var n=a(9),r=a.n(n),o=a(63),c=a.n(o),i=a(2),s=a.n(i),l=a(1),u=a.n(l),d=a(341),p=a(325),m=a(159),f=a(162),h=a(164),b=a(163),E=a(123),g=a(541),y=a(542),v=a(338),w=a(34),j=a(151),k=a(66),q=function(e){var t=e.searchValue,a=e.onFilterChange,n=e.placeholder;return s.a.createElement(h.a,null,s.a.createElement(b.a,null,s.a.createElement("div",{className:"pf-c-input-group"},s.a.createElement(j.a,{placeholder:n,value:t,type:"text",onChange:a,"aria-label":"Find product button"}),s.a.createElement(k.c,{variant:"tertiary",id:"searchProductButton",onClick:function(){return a(t)}},s.a.createElement("i",{className:"fas fa-search","aria-hidden":"true"})))))};q.propTypes={onFilterChange:u.a.func.isRequired,placeholder:u.a.string,searchValue:u.a.string},q.defaultProps={searchValue:""};var R=q,x=a(47),O=a(339),T=a(89),F=a(67),S=a(138),C=a(110),L=[{eventKey:0,title:"Requests",name:"/requests"},{eventKey:1,title:"Workflows",name:"/workflows"}],N=function(e){var t=e.history.push,a=e.location.pathname,n=L.find(function(e){var t=e.name;return a.includes(t)});return s.a.createElement(S.b,{className:"pf-u-mt-md",activeKey:n?n.eventKey:0,onSelect:function(e,a){return t(L[a].name)}},L.map(function(e){return s.a.createElement(C.a,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})}))};N.propTypes={children:u.a.oneOfType([u.a.node,u.a.arrayOf(u.a.node)]),location:u.a.shape({pathname:u.a.string.isRequired}),history:u.a.shape({push:u.a.func.isRequired})};var _=Object(F.k)(N),A=a(44);a.d(t,"a",function(){return D});var D=function(e){var t=e.request,a=e.isSelectable,n=e.createInitialRows,o=e.columns,l=e.toolbarButtons,u=e.fetchData,j=e.data,k=e.actionResolver,q=e.routes,F=e.titlePlural,S=e.titleSingular,C=e.pagination,L=Object(i.useState)(""),N=c()(L,2),D=N[0],P=N[1],W=Object(i.useState)([]),I=c()(W,2),M=I[0],K=I[1],z=Object(i.useState)(!1),U=c()(z,1)[0];Object(i.useEffect)(function(){u(K),Object(w.d)()},[]);var B=function(e){return t({offset:C.offset,limit:e}).then(function(){return K(n(j))})},G=function(e,a){var r={offset:Object(w.b)(e,C.limit),limit:C.limit};return a?Object(d.a)(t,250)():t(r).then(function(e){var t=e.value.data;return K(n(t))})};return U?s.a.createElement(A.b,null):s.a.createElement(i.Fragment,null,s.a.createElement(T.b,null,s.a.createElement(T.a,{title:"Approval"}),s.a.createElement(_,null)),s.a.createElement(x.Section,{className:"data-table-pane"},q(),s.a.createElement(O.TableToolbar,null,s.a.createElement(p.a,{style:{flex:1}},s.a.createElement(m.a,null,s.a.createElement(f.a,null,s.a.createElement(R,{onFilterChange:function(e){return P(e)},searchValue:D,placeholder:"Find a ".concat(S)}),l())),s.a.createElement(m.a,null,s.a.createElement(f.a,null,s.a.createElement(h.a,null,s.a.createElement(b.a,null,s.a.createElement(v.Pagination,{itemsPerPage:C.limit||50,numberOfItems:C.count||50,onPerPageSelect:B,page:Object(w.a)(C.limit,C.offset),onSetPage:G,direction:"down"}))))))),s.a.createElement(E.b,{"aria-label":"Approval ".concat(F," table"),onCollapse:function(e,t,a,n){var o=n.id;return K(function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{isOpen:!e.isOpen}):r()({},e)})}(e,o)})},rows:M,cells:o,onSelect:a&&function(e,t,a){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).id;return K(-1===a?M.map(function(e){return r()({},e,{selected:t})}):function(e){return function(e,t){return e.map(function(e){return e.id===t?r()({},e,{selected:!e.selected}):r()({},e)})}(e,n)})},actionResolver:k,className:"table-fix"},s.a.createElement(g.a,null),s.a.createElement(y.a,null))))};D.propTypes={isSelectable:u.a.bool,isDataLoading:u.a.func.isRequired,createInitialRows:u.a.func.isRequired,request:u.a.func.isRequired,columns:u.a.array.isRequired,toolbarButtons:u.a.func,fetchData:u.a.func.isRequired,data:u.a.array,pagination:u.a.shape({limit:u.a.number.isRequired,offset:u.a.number.isRequired,count:u.a.number.isRequired}),titlePlural:u.a.string,titleSingular:u.a.string,routes:u.a.func,actionResolver:u.a.func},D.defaultProps={requests:[],pagination:"",toolbarButtons:function(){return null},isSelectable:null,routes:function(){return null}}},125:function(e,t,a){"use strict";var n=a(27),r=a.n(n),o=a(15),c=a.n(o),i=a(9),s=a.n(i),l=a(37),u=a.n(l),d=a(2),p=a.n(d),m=a(1),f=a.n(m),h=a(38),b=a.n(h),E=a(95),g=a(29),y=a.n(g),v=a(150),w=a(156),j=a(155),k=a(158),q=a(127),R=function(e){var t=e.input,a=e.options,n=e.isReadOnly,o=e.isDisabled,c=(e.FieldProvider,e.isRequired),i=u()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return p.a.createElement(v.a,r()({},t,i,{isDisabled:o||n}),function(e,t,a){if(t&&a)return e;var n=y()(e);return n.find(function(e){return void 0===e.value})?y()(n):[{label:a?"Please choose":"None"}].concat(y()(n))}(a,t.value,c).map(function(e){return p.a.createElement(w.a,r()({key:e.value||e.label},e,{label:e.label.toString()}))}))};R.propTypes={input:f.a.object.isRequired,options:f.a.arrayOf(f.a.shape({value:f.a.any,label:f.a.string.isRequired})).isRequired,isReadOnly:f.a.bool,isDisabled:f.a.bool,isRequired:f.a.bool,FieldProvider:f.a.any};var x=function(e){e.componentType;var t=e.label,a=e.isRequired,n=e.helperText,o=e.meta,c=e.description,i=e.hideLabel,s=u()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),l=o.error,d=o.touched&&l;return p.a.createElement(j.a,{isRequired:a,label:!i&&t,fieldId:s.id,isValid:!d,helperText:n,helperTextInvalid:o.error},c&&p.a.createElement(k.a,null,p.a.createElement(q.b,{component:q.a.small},c)),p.a.createElement(R,r()({label:t,isValid:!d,isRequired:a},s)))};x.propTypes={componentType:f.a.string,label:f.a.string,isRequired:f.a.bool,helperText:f.a.string,meta:f.a.object,description:f.a.string,hideLabel:f.a.bool};var O=x,T={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},F=function(e){var t=e.componentMapper,a=e.formContainer,n=u()(e,["componentMapper","formContainer"]);return p.a.createElement("div",{className:T[a].buttonClassName},p.a.createElement(b.a,r()({formFieldsMapper:s()({},E.formFieldsMapper,c()({componentMapper:t},h.componentTypes.SELECT,O)),layoutMapper:E.layoutMapper},T[a],n)))};F.propTypes={componentMapper:f.a.object,formContainer:f.a.oneOf(["default","modal"])},F.defaultProps={componentMapper:{},formContainer:"default"};t.a=F},129:function(e,t,a){},19:function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"f",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"h",function(){return c}),a.d(t,"i",function(){return i}),a.d(t,"a",function(){return s}),a.d(t,"k",function(){return l}),a.d(t,"j",function(){return u}),a.d(t,"d",function(){return d});var n="FETCH_REQUEST",r="FETCH_REQUESTS",o="CREATE_STAGE_ACTION",c="FETCH_WORKFLOW",i="FETCH_WORKFLOWS",s="ADD_WORKFLOW",l="UPDATE_WORKFLOW",u="REMOVE_WORKFLOW",d="FETCH_RBAC_GROUPS"},335:function(e,t){},34:function(e,t,a){"use strict";a.d(t,"d",function(){return c}),a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"e",function(){return l}),a.d(t,"c",function(){return u});var n=a(4),r=a.n(n),o=["notified","pending"],c=function(){return document.getElementById("root").scrollTo({behavior:"smooth",top:0,left:0})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t/e)+1},s=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1?arguments[1]:void 0)},l=function(e){return r()(e).fromNow()},u=function(e){return o.includes(e)}},429:function(e,t){},435:function(e,t){},44:function(e,t,a){"use strict";a.d(t,"c",function(){return k}),a.d(t,"a",function(){return q}),a.d(t,"b",function(){return R});var n=a(27),r=a.n(n),o=a(29),c=a.n(o),i=a(37),s=a.n(i),l=a(2),u=a.n(l),d=a(1),p=a.n(d),m=a(140),f=a(122),h=a(115),b=a(117),E=a(119),g=a(118),y=a(116),v=a(47),w=a(96),j=function(){return u.a.createElement(w.a,{height:500,width:200,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},u.a.createElement("rect",{x:"10",y:"15",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"65",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"115",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"165",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"215",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"265",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"315",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"365",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"415",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"465",rx:"0",ry:"0",width:"174",height:"26"}),u.a.createElement("rect",{x:"10",y:"515",rx:"0",ry:"0",width:"174",height:"26"}))},k=function(e){var t=e.items,a=s()(e,["items"]);return u.a.createElement(l.Fragment,null,u.a.createElement(v.Section,{className:"data-table-pane"},u.a.createElement(m.a,{gutter:"md"},u.a.createElement(f.a,{md:2,className:"detail-pane"},u.a.createElement(j,null)),u.a.createElement(f.a,{md:10,className:"detail-pane"},u.a.createElement(h.a,{"aria-label":"datalist-placeholder",style:{margin:32}},c()(Array(t)).map(function(e,t){return u.a.createElement(b.a,{key:t,"aria-label":"datalist-item-placeholder"},u.a.createElement(E.a,null,u.a.createElement(g.a,{dataListCells:[u.a.createElement(y.a,{key:"1"},u.a.createElement(w.a,r()({height:12,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#ecebeb"},a),u.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"300",height:"12"})))]})))}))))))};k.propTypes={items:p.a.number},k.defaultProps={items:5};var q=function(e){return u.a.createElement("div",null,u.a.createElement(w.a,r()({height:16,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#FFFFFF"},e),u.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"420",height:"10"})),u.a.createElement(k,null))},R=function(e){var t=e.items,a=s()(e,["items"]);return u.a.createElement(l.Fragment,null,u.a.createElement(h.a,{"aria-label":"datalist-placeholder",style:{margin:32}},c()(Array(t)).map(function(e,t){return u.a.createElement(b.a,{key:t,"aria-label":"datalist-item-placeholder"},u.a.createElement(E.a,null,u.a.createElement(g.a,{dataListCells:[u.a.createElement(y.a,{key:"1"},u.a.createElement(w.a,r()({height:12,width:300,speed:2,primaryColor:"#FFFFFF",secondaryColor:"#ecebeb"},a),u.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"300",height:"12"})))]})))})))};R.propTypes={items:p.a.number},R.defaultProps={items:5}},444:function(e,t,a){var n={"./af":172,"./af.js":172,"./ar":173,"./ar-dz":174,"./ar-dz.js":174,"./ar-kw":175,"./ar-kw.js":175,"./ar-ly":176,"./ar-ly.js":176,"./ar-ma":177,"./ar-ma.js":177,"./ar-sa":178,"./ar-sa.js":178,"./ar-tn":179,"./ar-tn.js":179,"./ar.js":173,"./az":180,"./az.js":180,"./be":181,"./be.js":181,"./bg":182,"./bg.js":182,"./bm":183,"./bm.js":183,"./bn":184,"./bn.js":184,"./bo":185,"./bo.js":185,"./br":186,"./br.js":186,"./bs":187,"./bs.js":187,"./ca":188,"./ca.js":188,"./cs":189,"./cs.js":189,"./cv":190,"./cv.js":190,"./cy":191,"./cy.js":191,"./da":192,"./da.js":192,"./de":193,"./de-at":194,"./de-at.js":194,"./de-ch":195,"./de-ch.js":195,"./de.js":193,"./dv":196,"./dv.js":196,"./el":197,"./el.js":197,"./en-SG":198,"./en-SG.js":198,"./en-au":199,"./en-au.js":199,"./en-ca":200,"./en-ca.js":200,"./en-gb":201,"./en-gb.js":201,"./en-ie":202,"./en-ie.js":202,"./en-il":203,"./en-il.js":203,"./en-nz":204,"./en-nz.js":204,"./eo":205,"./eo.js":205,"./es":206,"./es-do":207,"./es-do.js":207,"./es-us":208,"./es-us.js":208,"./es.js":206,"./et":209,"./et.js":209,"./eu":210,"./eu.js":210,"./fa":211,"./fa.js":211,"./fi":212,"./fi.js":212,"./fo":213,"./fo.js":213,"./fr":214,"./fr-ca":215,"./fr-ca.js":215,"./fr-ch":216,"./fr-ch.js":216,"./fr.js":214,"./fy":217,"./fy.js":217,"./ga":218,"./ga.js":218,"./gd":219,"./gd.js":219,"./gl":220,"./gl.js":220,"./gom-latn":221,"./gom-latn.js":221,"./gu":222,"./gu.js":222,"./he":223,"./he.js":223,"./hi":224,"./hi.js":224,"./hr":225,"./hr.js":225,"./hu":226,"./hu.js":226,"./hy-am":227,"./hy-am.js":227,"./id":228,"./id.js":228,"./is":229,"./is.js":229,"./it":230,"./it-ch":231,"./it-ch.js":231,"./it.js":230,"./ja":232,"./ja.js":232,"./jv":233,"./jv.js":233,"./ka":234,"./ka.js":234,"./kk":235,"./kk.js":235,"./km":236,"./km.js":236,"./kn":237,"./kn.js":237,"./ko":238,"./ko.js":238,"./ku":239,"./ku.js":239,"./ky":240,"./ky.js":240,"./lb":241,"./lb.js":241,"./lo":242,"./lo.js":242,"./lt":243,"./lt.js":243,"./lv":244,"./lv.js":244,"./me":245,"./me.js":245,"./mi":246,"./mi.js":246,"./mk":247,"./mk.js":247,"./ml":248,"./ml.js":248,"./mn":249,"./mn.js":249,"./mr":250,"./mr.js":250,"./ms":251,"./ms-my":252,"./ms-my.js":252,"./ms.js":251,"./mt":253,"./mt.js":253,"./my":254,"./my.js":254,"./nb":255,"./nb.js":255,"./ne":256,"./ne.js":256,"./nl":257,"./nl-be":258,"./nl-be.js":258,"./nl.js":257,"./nn":259,"./nn.js":259,"./pa-in":260,"./pa-in.js":260,"./pl":261,"./pl.js":261,"./pt":262,"./pt-br":263,"./pt-br.js":263,"./pt.js":262,"./ro":264,"./ro.js":264,"./ru":265,"./ru.js":265,"./sd":266,"./sd.js":266,"./se":267,"./se.js":267,"./si":268,"./si.js":268,"./sk":269,"./sk.js":269,"./sl":270,"./sl.js":270,"./sq":271,"./sq.js":271,"./sr":272,"./sr-cyrl":273,"./sr-cyrl.js":273,"./sr.js":272,"./ss":274,"./ss.js":274,"./sv":275,"./sv.js":275,"./sw":276,"./sw.js":276,"./ta":277,"./ta.js":277,"./te":278,"./te.js":278,"./tet":279,"./tet.js":279,"./tg":280,"./tg.js":280,"./th":281,"./th.js":281,"./tl-ph":282,"./tl-ph.js":282,"./tlh":283,"./tlh.js":283,"./tr":284,"./tr.js":284,"./tzl":285,"./tzl.js":285,"./tzm":286,"./tzm-latn":287,"./tzm-latn.js":287,"./tzm.js":286,"./ug-cn":288,"./ug-cn.js":288,"./uk":289,"./uk.js":289,"./ur":290,"./ur.js":290,"./uz":291,"./uz-latn":292,"./uz-latn.js":292,"./uz.js":291,"./vi":293,"./vi.js":293,"./x-pseudo":294,"./x-pseudo.js":294,"./yo":295,"./yo.js":295,"./zh-cn":296,"./zh-cn.js":296,"./zh-hk":297,"./zh-hk.js":297,"./zh-tw":298,"./zh-tw.js":298};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=444},477:function(e,t,a){},531:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a.n(n),o=a(2),c=a.n(o),i=a(31),s=a(1),l=a.n(s),u=a(67),d=a(102),p=a(19),m=a(9),f=a.n(m),h=a(7),b=a.n(h),E=a(26),g=a.n(E),y=a(57),v=Object(y.c)(),w=Object(y.d)(),j=Object(y.a)();function k(e){return q.apply(this,arguments)}function q(){return(q=g()(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.showRequest(t);case 2:return a=e.sent,e.next=5,R(t);case 5:return n=e.sent,e.abrupt("return",f()({},a,{stages:n.data}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){return x.apply(this,arguments)}function x(){return(x=g()(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.listStagesByRequest(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",Promise.all(n.map(function(){var e=g()(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.listActionsByStage(t.id);case 2:return a=e.sent,e.abrupt("return",f()({},t,{stageActions:a}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return f()({},a,{data:e})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return T.apply(this,arguments)}function T(){return(T=g()(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.createAction(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F=function(e){return{type:p.e,payload:k(e)}},S=function(e,t,a){return{type:p.b,payload:O(t,a),meta:{notifications:{fulfilled:{variant:"success",title:"Success",description:"The ".concat(e," was successful.")},rejected:{variant:"danger",title:"".concat(e," error"),description:"The ".concat(e," action failed.")}}}}},C=a(63),L=a.n(C),N=a(125),_=a(52),A=a(157),D=a(55),P=a(38),W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return{component:P.componentTypes.TEXTAREA_FIELD,name:"comments",type:"text",isRequired:e,label:e?"Reason":"Comment"}}(e);return e&&(t.validate=[{type:P.validatorTypes.REQUIRED}]),{fields:[t]}},I=function(e){var t=e.history.push,a=e.match.params.id,n=e.actionType,r=e.addNotification,i=e.createStageAction,s=e.closeUrl,l=e.postMethod,u=Object(o.useState)({}),d=L()(u,2),p=d[0],m=d[1];Object(o.useEffect)(function(){var e;e=m,F(a).payload.then(function(t){return e(t)})},[]);var h=function(){var e=g()(b.a.mark(function e(a){var r,o,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={"Add Comment":"memo",Approve:"approve",Deny:"deny"},o=p.stages[p.active_stage-1],c="Add Comment"===n?n:"".concat(n," Request"),o&&i(c,o.id,f()({operation:r[n],processed_by:"User"},a)).then(l?l().then(t(s)):t(s));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e="Add Comment"===n?n:"".concat(n," Request");r({variant:"warning",title:e,description:"".concat(e," was cancelled by the user.")}),t(s)};return c.a.createElement(A.a,{isLarge:!0,title:"Add Comment"===n?"Request #".concat(a):"".concat(n," Request #").concat(a),isOpen:!0,onClose:E},c.a.createElement(N.a,{schema:W("Deny"===n),schemaType:"default",onSubmit:h,onCancel:E,formContainer:"modal"}))};I.defaultProps={closeUrl:"/requests",fetchData:!0},I.propTypes={history:l.a.shape({push:l.a.func.isRequired}).isRequired,addNotification:l.a.func.isRequired,fetchData:l.a.bool,createStageAction:l.a.func.isRequired,fetchRequest:l.a.func,postMethod:l.a.func,selectedRequest:l.a.object,id:l.a.string,actionType:l.a.string,closeUrl:l.a.string,match:l.a.object,location:l.a.object};var M=Object(u.k)(Object(i.connect)(function(e){return{isLoading:e.requestReducer.isRequestDataLoading}},function(e){return Object(_.a)({addNotification:D.addNotification,fetchRequest:F,createStageAction:S},e)})(I)),K=a(29),z=a.n(K),U=a(21),B=a(66),G=a(325),H=a(159),V=a(158),Q=a(127),X=a(34),J=function(e){var t=e.id,a=e.content,n=e.state,r=Object(X.c)(n);return c.a.createElement(o.Fragment,null,c.a.createElement(G.a,null,c.a.createElement(H.a,null,c.a.createElement(V.a,null,c.a.createElement(Q.b,{className:"data-table-detail heading",component:Q.a.small},"Product"),c.a.createElement(Q.b,{className:"data-table-detail content",component:Q.a.h5},a?a.product:"Unknown"))),r&&c.a.createElement(H.a,null,c.a.createElement(U.Link,{to:"/requests/approve/".concat(t),className:"pf-u-mr-md"},c.a.createElement(B.c,{variant:"primary","aria-label":"Approve Request",isDisabled:!r},"Approve")),c.a.createElement(U.Link,{to:"/requests/deny/".concat(t)},c.a.createElement(B.c,{variant:"danger","aria-label":"Deny Request"},"Deny")))),c.a.createElement(G.a,null,c.a.createElement(H.a,null,c.a.createElement(V.a,null,c.a.createElement(Q.b,{className:"data-table-detail heading",component:Q.a.small},"Portfolio"),c.a.createElement(Q.b,{className:"data-table-detail content",component:Q.a.h5},a?a.portfolio:"Unknown")),c.a.createElement(V.a,null,c.a.createElement(Q.b,{className:"data-table-detail heading",component:Q.a.small},"Platform"),c.a.createElement(Q.b,{className:"data-table-detail content",component:Q.a.h5},a?a.platform:"Unknown")),c.a.createElement(V.a,null,c.a.createElement(Q.b,{className:"data-table-detail heading",component:Q.a.small},"Comments"),c.a.createElement(Q.b,{className:"data-table-detail content",component:Q.a.h5},a?a.comments:"Unknown")))))};J.propTypes={id:l.a.string,content:l.a.obuidt,uname:l.a.string,state:l.a.string};var Z=J,Y=function(e){return e.reduce(function(e,t,a){var n=t.id,r=t.requester,i=t.created_at,s=t.updated_at,l=t.active_stage,u=t.total_stages,d=t.state,p=t.decision,m=t.content;return[].concat(z()(e),[{id:n,isOpen:!1,state:d,cells:[c.a.createElement(o.Fragment,{key:n},c.a.createElement(U.Link,{to:"/requests/detail/".concat(n)},c.a.createElement(B.c,{variant:"link"}," ",n," "))),r,Object(X.e)(i),Object(X.e)(s),"".concat(l," of ").concat(u),p]},{parent:2*a,fullWidth:!0,cells:[{title:c.a.createElement(Z,{id:n,content:m,state:d})}]}])},[])},$=a(124),ee=a(122),te=a(140),ae=a(47),ne=(a(129),function(e){var t=e.request;return c.a.createElement(V.a,null,c.a.createElement(Q.b,{component:Q.a.small},"Product: ",c.a.createElement("br",null)),c.a.createElement(Q.b,null,t.content?t.content.product:"Unknown"),c.a.createElement(Q.b,{component:Q.a.small},"Portfolio:",c.a.createElement("br",null)),c.a.createElement(Q.b,null,t.content?t.content.portfolio:""),c.a.createElement(Q.b,{component:Q.a.small},"Platform: ",c.a.createElement("br",null)),c.a.createElement(Q.b,null,t.content?t.content.platform:""),c.a.createElement(Q.b,{component:Q.a.small},"Project: ",c.a.createElement("br",null)),c.a.createElement(Q.b,null,t.content?t.content.project:""),c.a.createElement(Q.b,{component:Q.a.small},"Order Parameters: "),c.a.createElement(Q.b,{component:Q.a.h6},"Requester: ",c.a.createElement("br",null),t.requester),c.a.createElement(Q.b,{component:Q.a.h6},"Project: ",c.a.createElement("br",null)," "),t.content.params&&Object.keys(t.content.params).map(function(e){return t.content.params[e]&&c.a.createElement(Q.b,{key:e,component:Q.a.small},"".concat(e,": ").concat(t.content.params[e]))}))});ne.propTypes={request:l.a.shape({content:l.a.object}).isRequired};var re=ne,oe=a(139),ce=a(81),ie=a.n(ce),se=a(82),le=a.n(se),ue=a(83),de=a.n(ue),pe=a(84),me=a.n(pe),fe=a(40),he=a.n(fe),be=a(85),Ee=a.n(be),ge=a(15),ye=a.n(ge),ve=a(115),we=a(160),je=a(168),ke=a(167),qe=a(170),Re=a(169),xe=a(166),Oe={memo:"Comment from",approve:"Approved By",deny:"Denied by",notify:"Notified By",skip:"Skipped by"},Te={memo:c.a.createElement(je.a,null),approve:c.a.createElement(ke.a,{style:{color:"var(--pf-global--success-color--100)"}}),deny:c.a.createElement(qe.a,{style:{color:"var(--pf-global--danger-color--100)"}}),notify:c.a.createElement(Re.a,null),skip:c.a.createElement(xe.a,null)},Fe=function(e){return c.a.createElement(we.a,null,e.actionList.map(function(e){return c.a.createElement("div",{key:"".concat(e.id,"-action")},c.a.createElement(V.a,null,c.a.createElement(Q.b,{style:{marginBottom:0},className:"data-table-detail content",component:Q.a.small},"".concat(Object(X.e)(e.created_at))),c.a.createElement(Q.b,{style:{marginBottom:0},className:"data-table-detail content"},Te[e.operation]," ","".concat(Oe[e.operation],"  ").concat(e.processed_by)),e.comments&&c.a.createElement(Q.b,{style:{marginBottom:0},className:"data-table-detail content",component:Q.a.h6},"".concat(e.comments))," "),c.a.createElement("br",null))}))},Se=a(324),Ce=a(17),Le=a(323),Ne=a(154),_e=a(117),Ae=a(119),De=a(152),Pe=a(118),We=a(116),Ie=a(153),Me=a(161),Ke=function(e){function t(){var e,a;ie()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=de()(this,(e=me()(t)).call.apply(e,[this].concat(r))),ye()(he()(a),"state",{isKebabOpen:!1}),ye()(he()(a),"onKebabToggle",function(e){a.setState({isKebabOpen:e})}),ye()(he()(a),"onKebabSelect",function(){a.setState({isKebabOpen:!a.state.isKebabOpen})}),ye()(he()(a),"buildStageActionKebab",function(e){return c.a.createElement(Se.a,{position:Ce.d.right,onSelect:a.onKebabSelect,toggle:c.a.createElement(Le.a,{onToggle:a.onKebabToggle}),isOpen:a.state.isKebabOpen,dropdownItems:[c.a.createElement(Ne.a,{"aria-label":"Add Comment",key:"add_comment_".concat(e.id)},c.a.createElement(U.Link,{to:"/requests/detail/".concat(e.request_id,"/add_comment"),className:"pf-c-dropdown__menu-item"},"Comment"))],isPlain:!0})}),ye()(he()(a),"fetchStageDetails",function(e){return c.a.createElement(Fe,{actionList:e.stageActions.data})}),a}return Ee()(t,e),le()(t,[{key:"render",value:function(){var e=this,t=this.props.item,a=Object(X.c)(t.state);return c.a.createElement(_e.a,{key:"stage-".concat(t.id),"aria-labelledby":"check-stage-".concat(t.id),isExpanded:this.props.isExpanded("stage-".concat(t.id))},c.a.createElement(Ae.a,null,c.a.createElement(De.a,{onClick:function(){return e.props.toggleExpand("stage-".concat(t.id))},isExpanded:this.props.isExpanded("stage-".concat(t.id)),id:"stage-".concat(t.id),"aria-labelledby":"stage-".concat(t.id," stage-").concat(t.id),"aria-label":"Toggle details for"}),c.a.createElement(Pe.a,{dataListCells:[c.a.createElement(We.a,{key:t.id},c.a.createElement("span",{id:t.id},"".concat(this.props.idx+1,". ").concat(t.name)," ")),c.a.createElement(We.a,{key:"".concat(t.id,"-state")},c.a.createElement("span",{style:{textTransform:"capitalize"},id:"".concat(t.id,"-state")},"".concat(t.state)," ")),c.a.createElement(We.a,{key:"".concat(t.id,"-action")},c.a.createElement(G.a,null,c.a.createElement(H.a,null,a&&this.props.isActive&&c.a.createElement("div",null,c.a.createElement(U.Link,{to:"/requests/detail/".concat(t.request_id,"/approve")},c.a.createElement(B.c,{variant:"link","aria-label":"Approve Request"},"Approve")),c.a.createElement(U.Link,{to:"/requests/detail/".concat(t.request_id,"/deny")},c.a.createElement(B.c,{variant:"link",className:"destructive-color","aria-label":"Deny Request"},"Deny")))))),c.a.createElement(We.a,{key:"request-".concat(t.id),className:"pf-c-data-list__action","aria-labelledby":"request-".concat(t.id," check-request-action").concat(t.id),id:"workflow-".concat(t.id),"aria-label":"Actions"},a&&this.props.isActive&&this.buildStageActionKebab(t))]})),c.a.createElement(Ie.a,{"aria-label":"Stage Content Details",isHidden:!this.props.isExpanded("stage-".concat(t.id))},c.a.createElement(we.a,{gutter:"md"},c.a.createElement(Me.a,null,c.a.createElement(V.a,{component:Q.a.h6},this.fetchStageDetails(t))))))}}]),t}(o.Component);Ke.propTypes={isLoading:l.a.bool,isActive:l.a.bool,item:l.a.object,idx:l.a.number,isExpanded:l.a.func.isRequired,toggleExpand:l.a.func.isRequired,noItems:l.a.string};var ze=Ke,Ue=a(44),Be=function(e){function t(){var e,a;ie()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=de()(this,(e=me()(t)).call.apply(e,[this].concat(r))),ye()(he()(a),"state",{expanded:[]}),ye()(he()(a),"toggleExpand",function(e){var t=a.state.expanded,n=t.indexOf(e),r=n>=0?[].concat(z()(t.slice(0,n)),z()(t.slice(n+1,t.length))):[].concat(z()(t),[e]);a.setState(function(){return{expanded:r}})}),ye()(he()(a),"isExpanded",function(e){return a.state.expanded.includes(e)}),a}return Ee()(t,e),le()(t,[{key:"render",value:function(){var e=this;return this.props.isLoading?c.a.createElement(ae.PageHeader,null,c.a.createElement(ae.PageHeaderTitle,{title:this.props.noItems})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,this.props.isLoading&&c.a.createElement(Ue.b,null)),this.props.items&&this.props.items.length>0&&c.a.createElement(ve.a,{"aria-label":"Expandable data list"},this.props.items.map(function(t,a){return c.a.createElement(ze,{key:t.id,item:t,idx:a,isActive:a+1===e.props.active_stage,isExpanded:e.isExpanded,toggleExpand:e.toggleExpand})})))}}]),t}(o.Component);Be.propTypes={isLoading:l.a.bool,items:l.a.array,noItems:l.a.string,active_stage:l.a.number};var Ge=Be,He=function(e){var t=e.request;return c.a.createElement(o.Fragment,null,c.a.createElement(oe.a,{size:"sm",style:{paddingLeft:"32px"}}," Stage(s) transcript "),c.a.createElement(Ge,{items:t?t.stages:[],noItems:"No Stages",active_stage:t.active_stage}))};He.propTypes={request:l.a.shape({content:l.a.object}).isRequired};var Ve=He,Qe=a(89),Xe=function(e){var t=e.match.url,a=e.isLoading,n=e.fetchRequest,i=e.requestId,s=e.selectedRequest;Object(o.useEffect)(function(){i&&n(i)},[i]);return c.a.createElement(o.Fragment,null,c.a.createElement(u.d,{exact:!0,path:"/requests/detail/:id/add_comment",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Add Comment",closeUrl:t}))}}),c.a.createElement(u.d,{exact:!0,path:"/requests/detail/:id/approve",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Approve",closeUrl:t}))}}),c.a.createElement(u.d,{exact:!0,path:"/requests/detail/:id/deny",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Deny",closeUrl:t}))}}),c.a.createElement(Qe.b,{breadcrumbs:[{title:"Request Queue",to:"/requests"},{title:i,isActive:!0}],paddingBottom:!0},c.a.createElement(Qe.a,{title:"Request ".concat(i)})),c.a.createElement(ae.Section,{className:"data-table-pane"},c.a.createElement(te.a,{gutter:"md"},a||0===Object.keys(s).length?c.a.createElement(ae.Section,{style:{backgroundColor:"white",minHeight:"100%"}},c.a.createElement(Ue.c,null)):c.a.createElement(o.Fragment,null,c.a.createElement(ee.a,{md:2,className:"detail-pane"},c.a.createElement(re,{request:s})),c.a.createElement(ee.a,{md:10,className:"detail-pane"},c.a.createElement(Ve,{request:s,url:t}))))))};Xe.propTypes={match:l.a.shape({path:l.a.string.isRequired}).isRequired,selectedRequest:l.a.shape({id:l.a.string}).isRequired,history:l.a.shape({push:l.a.func.isRequired}).isRequired,isLoading:l.a.bool,requestId:l.a.string,fetchRequest:l.a.func.isRequired};var Je=Object(u.k)(Object(i.connect)(function(e,t){var a=t.match.params.id;return{selectedRequest:e.requestReducer.selectedRequest,isLoading:e.requestReducer.isRequestDataLoading,requestId:a}},function(e){return Object(_.a)({fetchRequest:F},e)})(Xe)),Ze=[{title:"RequestId",cellFormatters:[d.b]},"Requester","Opened","Updated","Stage Status","Decision"],Ye=function(e){var t=e.fetchRequests,a=e.requests,n=e.pagination,i=e.history,s=function(e){t().then(function(t){var a=t.value.data;return e(Y(a))})},l=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(u.d,{exact:!0,path:"/requests/add_comment/:id",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Add Comment",postMethod:t}))}}),c.a.createElement(u.d,{exact:!0,path:"/requests/approve/:id",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Approve",postMethod:t}))}}),c.a.createElement(u.d,{exact:!0,path:"/requests/deny/:id",render:function(e){return c.a.createElement(M,r()({},e,{actionType:"Deny",postMethod:t}))}}))},d=function(e){return!Object(X.c)(e.state)},p=function(e,t){return 1===t.rowIndex||d(e)?null:[{title:"Comment",onClick:function(){return i.push("/requests/add_comment/".concat(e.id))}}]};return c.a.createElement(u.g,null,c.a.createElement(u.d,{path:"/requests/detail/:id",render:function(e){return c.a.createElement(Je,e)}}),c.a.createElement(u.d,{path:"/requests",render:function(){return c.a.createElement(o.Fragment,null,c.a.createElement($.a,{data:a,createInitialRows:Y,columns:Ze,fetchData:s,request:t,routes:l,actionResolver:p,areActionsDisabled:d,titlePlural:"Requests",titleSingular:"Request",pagination:n}))}}))};Ye.propTypes={history:l.a.shape({goBack:l.a.func.isRequired,push:l.a.func.isRequired}).isRequired,filteredItems:l.a.array,requests:l.a.array,platforms:l.a.array,isLoading:l.a.bool,searchFilter:l.a.string,fetchRequests:l.a.func.isRequired,pagination:l.a.shape({limit:l.a.number.isRequired,offset:l.a.number.isRequired,count:l.a.number.isRequired})},Ye.defaultProps={requests:[],pagination:{}};t.default=Object(i.connect)(function(e){var t=e.requestReducer,a=t.requests,n=t.isRequestDataLoading,r=t.filterValue;return{requests:a.data,pagination:a.meta,isLoading:n,searchFilter:r}},function(e){return{fetchRequests:function(t){return e(function(){var e,t,a,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:p.f,payload:(e=o,t=e.limit,a=void 0===t?10:t,n=e.offset,r=void 0===n?0:n,v.listRequests(void 0,void 0,void 0,a,r))}}(t))}}})(Ye)},532:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a.n(n),o=a(2),c=a.n(o),i=a(31),s=a(1),l=a.n(s),u=a(67),d=a(21),p=a(164),m=a(163),f=a(66),h=a(102),b=a(19),E=a(9),g=a.n(E),y=a(7),v=a.n(y),w=a(26),j=a.n(w),k=a(57),q=Object(k.b)();function R(){return x.apply(this,arguments)}function x(){return(x=j()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.listGroups();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return T.apply(this,arguments)}function T(){return(T=j()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Promise.all(t.map(function(){var e=j()(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getGroup(t);case 2:return a=e.sent,e.abrupt("return",a.name);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F=Object(k.f)(),S=Object(k.e)();function C(e){return L.apply(this,arguments)}function L(){return(L=j()(v.a.mark(function e(t){var a,n,r,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,n=void 0===a?10:a,r=t.offset,o=void 0===r?0:r,e.next=3,F.listWorkflows(n,o);case 3:return c=e.sent,i=c.data,e.abrupt("return",Promise.all(i.map(function(){var e=j()(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,O(t.group_refs);case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),e.t0.response&&404===e.t0.response.status){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",g()({},t,{group_names:a}));case 12:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}())).then(function(e){return g()({},c,{data:e})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return _.apply(this,arguments)}function _(){return(_=j()(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.showWorkflow(t);case 2:return a=e.sent,n=[],e.prev=4,e.next=7,O(a.group_refs);case 7:n=e.sent,e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(4),e.t0.response&&404===e.t0.response.status){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",g()({},a,{group_names:n}));case 15:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return(D=j()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.updateWorkflow(t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return W.apply(this,arguments)}function W(){return(W=j()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:b.i,payload:C(e)}},M=function(e){return{type:b.h,payload:N(e)}},K=function(e){return{type:b.a,payload:(t=e,S.listTemplates().then(function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id}).then(function(e){return F.addWorkflowToTemplate(e,t,{})})),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding workflow",description:"The workflow was added successfully."},rejected:{variant:"danger",title:"Failed adding workflow",description:"The workflow was not added successfuly."}}}};var t},z=function(e){return{type:b.k,payload:A(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating workflow",description:"The workflow was updated successfully."},rejected:{variant:"danger",title:"Failed updating workflow",description:"The workflow was not updated successfuly."}}}}},U=function(e){return{type:b.j,payload:P(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing workflow",description:"The workflow was removed successfully."}}}}},B=a(29),G=a.n(B),H=a(37),V=a.n(H),Q=a(63),X=a.n(Q),J=a(52),Z=a(157),Y=a(55),$=a(95),ee=a(125),te=a(38),ae=function(e,t){return{fields:[{component:te.componentTypes.WIZARD,name:"workflow_wizard",fields:[{title:"Workflow information",name:"wf_step_info",stepKey:1,nextStep:"wf_step_stages",fields:[{component:te.componentTypes.TEXTAREA_FIELD,name:"name",type:"text",isRequired:!0,label:"Name",validate:[{type:te.validatorTypes.REQUIRED}]},{component:te.componentTypes.TEXTAREA_FIELD,name:"description",type:"text",label:"Description"}]},{stepKey:"wf_step_stages",title:"Set Approval Stages",name:"wf_step_stages",nextStep:"summary",fields:[{component:te.componentTypes.SELECT,name:"stage-1",isRequired:!1,label:"1st Stage",options:t},{component:te.componentTypes.SELECT,name:"stage-2",label:"2nd Stage",options:t},{component:te.componentTypes.SELECT,name:"stage-3",label:"3rd Stage",options:t}]},{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}]}]}},ne=a(158),re=a(127),oe=function(e){var t=e.values,a=t.name,n=t.description,r=V()(t,["name","description"]);return c.a.createElement(o.Fragment,null,c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.h5},"Please review the workflow details")),c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.h5},"Name"),c.a.createElement(re.b,{className:"data-table-detail content",component:re.a.p},a)),c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.h5},"Description"),c.a.createElement(re.b,{className:"data-table-detail content",component:re.a.p},n)),c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.h5},"Approval Stages"),Object.keys(r).map(function(t){return t.startsWith("stage")&&c.a.createElement(re.b,{key:t,className:"data-table-detail content",component:re.a.p},"".concat(t," : ").concat(e.groupOptions.find(function(e){return e.value===r[t]}).label))})))};oe.propTypes={name:l.a.string,description:l.a.string,groups:l.a.array};var ce=oe,ie=function(e){var t=e.history.push,a=e.match.params.id,n=e.addWorkflow,r=e.addNotification,i=e.fetchWorkflow,s=e.updateWorkflow,l=e.postMethod,u=e.rbacGroups,d=Object(o.useState)([]),p=X()(d,2),m=p[0],f=p[1];Object(o.useEffect)(function(){a&&h(f)},[]);var h=function(e){i(a).then(function(t){var a=t.value;t.value.group_refs.forEach(function(e,t){u.find(function(t){return t.value===e})?a["stage-".concat(t+1)]=e:r({variant:"warning",title:"Editing workflow",description:"Stage-".concat(t+1," group with id: ").concat(e," no longer accessible")})}),e(a)})},b=function(){r({variant:"warning",title:a?"Editing workflow":"Creating workflow",description:a?"Edit workflow was cancelled by the user.":"Creating workflow was cancelled by the user."}),l?l().then(t("/workflows")):t("/workflows")},E=[].concat(G()(u),[{value:void 0,label:"None"}]);return c.a.createElement(Z.a,{title:a?"Edit workflow":"Create workflow",isOpen:!0,onClose:b,isSmall:!0},c.a.createElement("div",{style:{padding:8}},c.a.createElement(ee.a,{schema:ae(0,E),schemaType:"default",onSubmit:function(e){var r=e.name,o=e.description,c=V()(e,["name","description"]),i={name:r,description:o,group_refs:Object.values(c)};a?s(g()({id:a},i)).then(l?l().then(t("/workflows")):t("/workflows")):n(i).then(l?l().then(t("/workflows")):t("/workflows"))},onCancel:b,initialValues:g()({},m),formFieldsMapper:g()({},$.formFieldsMapper,{summary:function(e){return c.a.createElement(ce,{values:e.formOptions.getState().values,groupOptions:E})}}),formContainer:"modal",showFormControls:!1,buttonsLabels:{submitLabel:"Confirm"}})))};ie.defaultProps={rbacGroups:[],initialValues:{}},ie.propTypes={history:l.a.shape({goBack:l.a.func.isRequired}).isRequired,addWorkflow:l.a.func.isRequired,match:l.a.object,addNotification:l.a.func.isRequired,fetchWorkflow:l.a.func.isRequired,postMethod:l.a.func.isRequired,initialValues:l.a.object,updateWorkflow:l.a.func.isRequired,id:l.a.string,rbacGroups:l.a.arrayOf(l.a.shape({value:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string.isRequired})).isRequired};var se=Object(u.k)(Object(i.connect)(function(e){return{rbacGroups:e.groupReducer.groups}},function(e){return Object(J.a)({addNotification:Y.addNotification,addWorkflow:K,updateWorkflow:z,fetchWorkflow:M},e)})(ie)),le=a(74),ue=function(e){var t=e.history,a=t.goBack,n=t.push,r=e.removeWorkflow,i=e.fetchWorkflows,s=e.fetchWorkflow,l=e.workflowId,u=e.workflow;if(Object(o.useEffect)(function(){l&&s(l)},[l]),!u)return null;var d=function(){return a()};return c.a.createElement(Z.a,{isOpen:!0,isSmall:!0,title:"",onClose:d,actions:[c.a.createElement(f.c,{key:"cancel",variant:"secondary",type:"button",onClick:d},"Cancel"),c.a.createElement(f.c,{key:"submit",variant:"primary",type:"button",onClick:function(){return r(l).then(function(){i(),n("/workflows")})}},"Confirm")]},c.a.createElement(le.a,null,c.a.createElement(ne.a,null,c.a.createElement(re.b,{component:re.a.h1},"Removing Workflow:  ",u.name))))};ue.propTypes={history:l.a.shape({goBack:l.a.func.isRequired,push:l.a.func.isRequired}).isRequired,removeWorkflow:l.a.func.isRequired,fetchWorkflows:l.a.func.isRequired,fetchWorkflow:l.a.func.isRequired,workflowId:l.a.string,workflow:l.a.object};var de=Object(u.k)(Object(i.connect)(function(e,t){var a=e.workflowReducer,n=a.selectedWorkflow,r=a.isLoading;return{workflowId:t.match.params.id,workflow:n,isLoading:r}},function(e){return Object(J.a)({fetchWorkflow:M,fetchWorkflows:I,removeWorkflow:U},e)})(ue)),pe=function(e){var t=e.description,a=e.groupRefs,n=e.groupNames;return c.a.createElement(o.Fragment,null,c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.small},"Description"),c.a.createElement(re.b,{className:"data-table-detail content",component:re.a.h5},t)),c.a.createElement(ne.a,null,c.a.createElement(re.b,{className:"data-table-detail heading",component:re.a.small},"Groups"),c.a.createElement(re.b,{className:"data-table-detail content",component:re.a.h5},a.reduce(function(e,t,a){return e.concat("".concat(a>0?",":""," ").concat(n[a]||t))},""))))};pe.propTypes={description:l.a.string,groupRefs:l.a.array.required,groupNames:l.a.array.required};var me=pe,fe=function(e){return e.filter(function(e){return"Always approve"!==e.name}).reduce(function(e,t,a){var n=t.id,r=t.name,o=t.description,i=t.group_refs,s=t.group_names;return[].concat(G()(e),[{id:n,isOpen:!1,selected:!1,cells:[r,o,i.length]},{parent:2*a,cells:[{title:c.a.createElement(me,{description:o,groupRefs:i,groupNames:s})}]}])},[])},he=a(124),be=[{title:"Name",cellFormatters:[h.b]},"Description","Groups"],Ee=function(e){var t=e.fetchRbacGroups,a=e.fetchWorkflows,n=e.workflows,i=e.pagination,s=e.history;return c.a.createElement(o.Fragment,null,c.a.createElement(he.a,{data:n,isSelectable:!0,createInitialRows:fe,columns:be,fetchData:function(e){t(),a().then(function(t){var a=t.value.data;return e(fe(a))})},request:a,routes:function(){return c.a.createElement(o.Fragment,null,c.a.createElement(u.d,{exact:!0,path:"/workflows/add-workflow",render:function(e){return c.a.createElement(se,r()({},e,{postMethod:a}))}}),c.a.createElement(u.d,{exact:!0,path:"/workflows/edit/:id",render:function(e){return c.a.createElement(se,r()({},e,{postMethod:a}))}}),c.a.createElement(u.d,{exact:!0,path:"/workflows/remove/:id",render:function(e){return c.a.createElement(de,e)}}))},actionResolver:function(e,t){return t.rowIndex%2==1?null:[{title:"Edit",onClick:function(e,t,a){return s.push("/workflows/edit/".concat(a.id))}},{title:"Delete",style:{color:"var(--pf-global--danger-color--100)"},onClick:function(e,t,a){return s.push("/workflows/remove/".concat(a.id))}}]},titlePlural:"Workflows",titleSingular:"Workflow",pagination:i,toolbarButtons:function(){return c.a.createElement(p.a,null,c.a.createElement(m.a,null,c.a.createElement(d.Link,{to:"/workflows/add-workflow"},c.a.createElement(f.c,{variant:"primary","aria-label":"Create Workflow"},"Create Workflow"))))}}))};Ee.propTypes={history:l.a.shape({goBack:l.a.func.isRequired,push:l.a.func.isRequired}).isRequired,filteredItems:l.a.array,workflows:l.a.array,platforms:l.a.array,isLoading:l.a.bool,searchFilter:l.a.string,fetchWorkflows:l.a.func.isRequired,fetchRbacGroups:l.a.func.isRequired,pagination:l.a.shape({limit:l.a.number.isRequired,offset:l.a.number.isRequired,count:l.a.number.isRequired})},Ee.defaultProps={workflows:[],pagination:{}};t.default=Object(i.connect)(function(e){var t=e.workflowReducer,a=t.workflows,n=t.isLoading,r=e.groupReducer,o=r.groups,c=r.filterValue;return{workflows:a.data,pagination:a.meta,rbacGroups:o,isLoading:n,searchFilter:c}},function(e){return{fetchWorkflows:function(t){return e(I(t))},fetchRbacGroups:function(t){return e({type:b.d,payload:R().then(function(e){var t=e.data;return G()(t.map(function(e){return{value:e.uuid,label:e.name}}))})})}}})(Ee)},533:function(e,t,a){"use strict";a.r(t);var n,r,o,c=a(2),i=a.n(c),s=a(12),l=a.n(s),u=a(21),d=a(31),p=a(342),m=a(90),f=a.n(m),h=a(55),b=a(330),E=a.n(b),g=a(331),y=a(15),v=a.n(y),w=a(9),j=a.n(w),k=a(19),q=function(e){return j()({},e,{isRequestDataLoading:!0})},R=(n={},v()(n,"".concat(k.f,"_PENDING"),q),v()(n,"".concat(k.f,"_FULFILLED"),function(e,t){var a=t.payload;return j()({},e,{requests:a,isRequestDataLoading:!1})}),v()(n,"".concat(k.e,"_PENDING"),q),v()(n,"".concat(k.e,"_FULFILLED"),function(e,t){var a=t.payload;return j()({},e,{selectedRequest:a,isRequestDataLoading:!1})}),n),x=function(e){return j()({},e,{isLoading:!0})},O=(r={},v()(r,"".concat(k.i,"_PENDING"),x),v()(r,"".concat(k.i,"_FULFILLED"),function(e,t){var a=t.payload;return j()({},e,{workflows:a,isLoading:!1})}),v()(r,"".concat(k.h,"_PENDING"),x),v()(r,"".concat(k.h,"_FULFILLED"),function(e,t){var a=t.payload;return j()({},e,{selectedWorkflow:a,isLoading:!1})}),r),T=(o={},v()(o,"".concat(k.d,"_PENDING"),function(e){return j()({},e,{isLoading:!0})}),v()(o,"".concat(k.d,"_FULFILLED"),function(e,t){var a=t.payload;return j()({},e,{groups:a,isLoading:!1})}),o),F=new f.a({},[g.a,Object(p.a)(),Object(h.notificationsMiddleware)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]}),E.a]);F.register({requestReducer:Object(m.applyReducerHash)(R,{requests:[],selectedRequest:{},filterValue:"",isRequestDataLoading:!1}),workflowReducer:Object(m.applyReducerHash)(O,{workflows:{data:[],meta:{count:0,limit:10,offset:0}},workflow:{},filterValue:"",isLoading:!1}),groupReducer:Object(m.applyReducerHash)(T,{groups:[],isLoading:!1}),notifications:Object(m.applyReducerHash)(h.notifications,[])});var S=F.getStore(),C=a(81),L=a.n(C),N=a(82),_=a.n(N),A=a(83),D=a.n(A),P=a(84),W=a.n(P),I=a(40),M=a.n(I),K=a(85),z=a.n(K),U=a(1),B=a.n(U),G=a(67),H=a(37),V=a.n(H),Q=a(143),X=a.n(Q),J=a(44),Z=Object(c.lazy)(function(){return Promise.resolve().then(function(){return X()(a(531))})}),Y=Object(c.lazy)(function(){return Promise.resolve().then(function(){return X()(a(532))})}),$="/requests",ee="/workflows",te=function(e){var t=e.rootClass,a=V()(e,["rootClass"]),n=document.getElementById("root");return n.removeAttribute("class"),n.classList.add("page__".concat(t),"pf-l-page__main","pf-c-page__main"),n.setAttribute("role","main"),i.a.createElement(G.d,a)};te.propTypes={rootClass:B.a.string};var ae=function(){return i.a.createElement(c.Suspense,{fallback:i.a.createElement(J.c,null)},i.a.createElement(G.g,null,i.a.createElement(te,{path:$,component:Z,rootClass:"requests"}),i.a.createElement(te,{path:ee,component:Y,rootClass:"workflows"}),i.a.createElement(G.d,{render:function(){return i.a.createElement(G.c,{to:$})}})))},ne=(a(129),a(47)),re=a(334),oe=(a(438),function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=W()(t)).call.apply(e,[this].concat(r))),v()(M()(a),"state",{chromeNavAvailable:!0,auth:!1}),a}return z()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=this;insights.chrome.init(),insights.chrome.auth.getUser().then(function(){return e.setState({auth:!0})}),insights.chrome.identifyApp("approval")}},{key:"render",value:function(){return this.state.auth?i.a.createElement(re.a,{locale:"en"},i.a.createElement(i.a.Fragment,null,i.a.createElement(h.NotificationsPortal,null),i.a.createElement(ne.Main,{style:{marginLeft:0,padding:0}},i.a.createElement(ae,null)))):i.a.createElement(J.a,null)}}]),t}(c.Component));oe.propTypes={history:B.a.object};var ce=Object(G.k)(Object(d.connect)()(oe)),ie=window.location.pathname.split("/");ie.shift();var se="/";"beta"===ie[0]&&(se="/".concat(ie.shift(),"/")),l.a.render(i.a.createElement(d.Provider,{store:S},i.a.createElement(u.BrowserRouter,{basename:"".concat(se).concat(ie[0],"/").concat(ie[1],"/").concat(ie[2])},i.a.createElement(ce,null))),document.getElementById("root"))},57:function(e,t,a){"use strict";var n=a(112),r=a.n(n),o="".concat("/api","/approval/v1.0"),c="".concat("/api","/rbac/v1"),i=a(126),s=a(92);a.d(t,"c",function(){return b}),a.d(t,"e",function(){return E}),a.d(t,"d",function(){return g}),a.d(t,"f",function(){return y}),a.d(t,"a",function(){return v}),a.d(t,"b",function(){return w});var l=r.a.create();l.interceptors.response.use(function(e){return e.data||e});var u=new s.WorkflowApi(void 0,o,l),d=new s.ActionApi(void 0,o,l),p=new s.RequestApi(void 0,o,l),m=new s.TemplateApi(void 0,o,l),f=new s.StageApi(void 0,o,l),h=(new i.AccessApi(void 0,c,l),new i.PrincipalApi(void 0,c,l),new i.GroupApi(void 0,c,l));function b(){return p}function E(){return m}function g(){return f}function y(){return u}function v(){return d}function w(){return h}},89:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(1),c=a.n(o),i=a(325),s=a(159),l=a(158),u=a(127),d=a(44),p=a(21),m=a(148),f=a(149),h=function(e){return e?r.a.createElement(m.a,{style:{minHeight:18}},Object.keys(e).map(function(t){return r.a.createElement(f.a,{key:e[t].title,isActive:e[t].isActive},e[t].to&&r.a.createElement(p.NavLink,{exact:!0,to:e[t].to},e[t].title)||e[t].title)})):null};h.propTypes={breadcrumbs:c.a.array};var b=h;a(477);a.d(t,"a",function(){return g});var E=function(e){var t=e.children,a=e.breadcrumbs,n=e.paddingBottom;return r.a.createElement("div",{className:"pf-u-pt-xl pf-u-pr-xl pf-u-pl-xl ".concat(n?"pf-u-pb-xl":""," top-toolbar")},r.a.createElement(i.a,{className:"pf-u-mb-md"},r.a.createElement(b,a)),t)};E.propTypes={children:c.a.oneOfType([c.a.arrayOf(c.a.node),c.a.node]).isRequired,breadcrumbs:c.a.array,paddingBottom:c.a.bool},E.defaultProps={paddingBottom:!1};t.b=E;var g=function(e){var t=e.title,a=e.children;return r.a.createElement(n.Fragment,null,r.a.createElement(i.a,{className:"pf-u-mb-xl"},r.a.createElement(s.a,null,r.a.createElement(l.a,{className:"top-toolbar-title"},r.a.createElement(u.b,{component:u.a.h2},t||r.a.createElement(d.ToolbarTitlePlaceholder,null)))),a))};g.propTypes={title:c.a.string.isRequired,children:c.a.oneOfType([c.a.node,c.a.arrayOf(c.a.node)])}}});
//# sourceMappingURL=../sourcemaps/App.js.map