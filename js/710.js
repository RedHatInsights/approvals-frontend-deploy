(self.webpackChunkapproval=self.webpackChunkapproval||[]).push([[710],{10792:(e,t,n)=>{"use strict";t.__esModule=!0,n(70347),t.default={backdrop:"pf-c-backdrop",backdropOpen:"pf-c-backdrop__open"}},11997:(e,t,n)=>{"use strict";t.__esModule=!0,n(25238),t.default={button:"pf-c-button",modalBox:"pf-c-modal-box",modalBoxBody:"pf-c-modal-box__body",modalBoxDescription:"pf-c-modal-box__description",modalBoxFooter:"pf-c-modal-box__footer",modalBoxHeader:"pf-c-modal-box__header",modalBoxHeaderMain:"pf-c-modal-box__header-main",modalBoxTitle:"pf-c-modal-box__title",modalBoxTitleIcon:"pf-c-modal-box__title-icon",modalBoxTitleText:"pf-c-modal-box__title-text",modifiers:{sm:"pf-m-sm",md:"pf-m-md",lg:"pf-m-lg",alignTop:"pf-m-align-top",danger:"pf-m-danger",warning:"pf-m-warning",success:"pf-m-success",default:"pf-m-default",info:"pf-m-info",help:"pf-m-help",icon:"pf-m-icon"}}},73755:(e,t,n)=>{"use strict";t.__esModule=!0,n(314),t.default={modifiers:{"4xl":"pf-m-4xl","3xl":"pf-m-3xl","2xl":"pf-m-2xl",xl:"pf-m-xl",lg:"pf-m-lg",md:"pf-m-md",overpassFont:"pf-m-overpass-font"},title:"pf-c-title"}},65611:(e,t,n)=>{"use strict";t.__esModule=!0,n(87234),t.default={bullseye:"pf-l-bullseye"}},15486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(86244).defineMessages)({requestActionDescription:{id:"actionModal.requestDescription",defaultMessage:"{actionMessage} {id}"},actionName:{id:"actionModal.actionName",defaultMessage:"{actionType} Request"},fulfilledAction:{id:"actionModal.fullfiledAction",defaultMessage:"The {actionName} was successful."},failedAction:{id:"actionModal.failedAction",defaultMessage:"The {actionName} action failed."},successTitle:{id:"actionModal.successTitle",defaultMessage:"Success"},failedTitle:{id:"actionModal.failedTitle",defaultMessage:"{actionName} error"}})},49214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(86244).defineMessages)({myRequests:{id:"tabs.myRequests",defaultMessage:"My requests"},allRequests:{id:"tabs.allRequests",defaultMessage:"All requests"},approvalProccess:{id:"tabs.approvalProcess",defaultMessage:"Approval processes"}})},7248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(86244).defineMessages)({approvalTitle:{id:"commonMessages.approvalTitle",defaultMessage:"Approval"},product:{id:"commonMessages.product",defaultMessage:"Product"},portfolio:{id:"commonMessages.portfolio",defaultMessage:"Portfolio"},platform:{id:"commonMessages.platform",defaultMessage:"Platform"},order:{id:"commonMessages.order",defaultMessage:"Order"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"},actions:{id:"commonMessages.actions",defaultMessage:"Actions"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},delete:{id:"commonMessages.delete",defaultMessage:"Delete"},deleting:{id:"commonMessages.deleting",defaultMessage:"Deleting"},cancel:{id:"commonMessages.cancel",defaultMessage:"Cancel"},save:{id:"commonMessages.save",defaultMessage:"Save"}})},38106:(e,t,n)=>{"use strict";n.d(t,{Ox:()=>D,kw:()=>P,t5:()=>q,YQ:()=>T,po:()=>j,ex:()=>k,fs:()=>w,jW:()=>E});var r=n(36580),a=n(4942),o=n(15861),s=n(87757),c=n.n(s),i=n(23468),l=n(84866),u=n(61338),p=n(11107);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(0,i.mY)(),g=(0,i.Qu)(),b=function(e){return{"request-id":"id",opened:"created_at",requester:"requester_name",status:"state"}[e]||e},y=function(e){var t=[];return e.name&&t.push("filter[name][contains_i]=".concat(e.name)),e.requester&&t.push("filter[requester_name][contains_i]=".concat(e.requester)),e.decision&&e.decision.forEach((function(e){t.push("filter[decision][eq][]=".concat(e))})),t.join("&")};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.he,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),o="&sort_by=".concat(b(r.property),":").concat(r.direction),s="".concat(l._R,"/requests/?").concat(y(e)).concat(a).concat(o),c=n?{"x-rh-persona":n}:void 0;return(0,i.Hx)()({method:"get",url:s,headers:c})}var h=function(e,t){var n,r=t&&t!==p.pS?{"x-rh-persona":t}:{"x-rh-persona":p.B1};return g({method:"post",url:"".concat(l._R,"/graphql"),headers:r,data:{query:(n=e,'query {\n  requests(id: "'.concat(n,'") {\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    state\n    requester_name\n    actions {\n      id\n      operation\n      comments\n      created_at\n      processed_by\n    }\n    requests {\n      id\n      name\n      number_of_children\n      decision\n      description\n      group_name\n      number_of_finished_children\n      state\n      workflow_id\n      parent_id\n      actions {\n        id\n        operation\n        comments\n        created_at\n        processed_by\n      }\n    }\n  }\n}'))}}).then((function(e){return e.data.requests}))},M=function(e,t){var n="".concat(l._R,"/requests/").concat(e).concat(t?"/requests":""),r={"x-rh-persona":p.B1};return(0,i.Hx)()({method:"get",url:n,headers:r})};function O(e,t){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)(c().mark((function e(t,n){var r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:if((r=e.sent)&&0!==r.length){e.next=5;break}return e.abrupt("return",{});case 5:if(n!==p.pS){e.next=17;break}if(!(r&&r.length>0&&r[0].number_of_children>0)){e.next=13;break}return e.next=9,M(t,!0);case 9:(a=e.sent)&&a.data&&(r[0].requests=r[0].requests.map((function(e){return f(f({},a.data.find((function(t){return t.id===e.id&&t.metadata}))),e)}))),e.next=17;break;case 13:return e.next=15,M(t,!1);case 15:(o=e.sent)&&(r[0]=f(f({},r[0]),{},{metadata:o.metadata}));case 17:return e.abrupt("return",r[0]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e,t){return m.createAction(e,t)},x=n(15486),j=function(e,t){return function(n,a){var o=a().requestReducer,s=o.sortBy,c=o.requests,i=o.filterValue,l=t||u.he;if(!t&&c){var p=c.meta;l={limit:p.limit,offset:p.offset}}return n({type:r.gN,payload:v(i,l,e,s)})}},q=function(e,t){return{type:r.Eo,payload:O(e,t)}},T=function(e,t){return{type:r.iZ,payload:(n=e,a="".concat(l._R,"/requests/").concat(n,"/content"),o={"x-rh-persona":p.B1},(0,i.Hx)()({method:"get",url:a,headers:o}))};var n,a,o},P=function(e,t,n,a){return{type:r.KA,payload:Z(t,n),meta:{notifications:{fulfilled:{variant:"success",title:a.formatMessage(x.Z.successTitle),description:a.formatMessage(x.Z.fulfilledAction,{actionName:e})},rejected:{variant:"danger",title:a.formatMessage(x.Z.failedTitle,{actionName:e}),description:a.formatMessage(x.Z.failedAction,{actionName:e})}}}}},E=function(e){return{type:r.YT,payload:e}},w=function(e,t){return{type:r.bp,payload:{filterValue:e,type:t}}},D=function(){return{type:r.m_}},k=function(){return{type:r.Lb}}},18393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n(87462),a=n(4942),o=n(45987),s=n(30624),c=n.n(s),i=n(45697),l=n.n(i),u=n(78267),p=n(46182),d=n(26196),f=n(80345),m=n(94851),g=n(72969),b=n(56485),y=n(38089),v=n(90222),h=n(23811),M=n(77789);const O=function(e){var t=e.name,n=e.label,r=(0,M.default)({name:t}).input,a=r.value,o=r.onChange,s=function(e){if(o(a.filter((function(t){return t.value!==e}))),0===(null==a?void 0:a.length))return null};return a&&a.length?c().createElement(h.FormGroup,{fieldId:t,label:n},c().createElement(v.ChipGroup,null,a.map((function(e){var t=e.label,n=e.value;return c().createElement(y.Chip,{key:n.value,onClick:function(){return s(n)}},t)})))):""};var _=function(e){var t,n=e.templateProps,s=(0,o.Z)(e,["templateProps"]);return c().createElement("div",null,c().createElement(u.Z,(0,r.Z)({componentMapper:(t={},(0,a.Z)(t,p.default.SELECT,f.ZP),(0,a.Z)(t,p.default.TEXTAREA,m.Z),(0,a.Z)(t,p.default.TEXT_FIELD,g.Z),(0,a.Z)(t,p.default.SUB_FORM,b.Z),(0,a.Z)(t,"initial-chips",O),t),FormTemplate:function(e){return c().createElement(d.ZP,(0,r.Z)({},e,n))}},s)))};_.propTypes={templateProps:l().object,schema:l().object};const Z=_},42026:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var r=n(4942),a=n(70885),o=n(30624),s=n.n(o),c=n(45697),i=n.n(c),l=n(18393),u=n(334),p=n(37703),d=n(14890),f=n(78826),m=n(81159),g=n(63540),b=n(20018),y=n(34348),v=n(38106),h=n(46182),M=n(94330),O=n(27121);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return{fields:[Z({component:h.default.TEXTAREA,name:"comments",isRequired:e,label:e?t.formatMessage(O.Z.reasonTitle):t.formatMessage(O.Z.commentTitle)},e&&{validate:[{type:M.default.REQUIRED}]})]}},j=n(1054),q=n(50409),T=n(86896),P=n(15486),E=n(19694);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){switch(e){case"Approve":return O.Z.approveDescription;case"Deny":return O.Z.denyDescription;default:return O.Z.commentDescription}},A=function(e){switch(e){case"Approve":return O.Z.approveTitle;case"Deny":return O.Z.denyTitle;default:return O.Z.commentTitle}},R=function(e){switch(e){case"Approve":return O.Z.approveLabel;case"Deny":return O.Z.denyLabel;default:return O.Z.addCommentLabel}},L=function(e){var t=e.actionType,n=e.createRequestAction,r=e.closeUrl,o=e.postMethod,c=(0,T.Z)(),i=(0,u.useHistory)().push,p=(0,j.Z)(["request"]),d=(0,a.Z)(p,1)[0].request,v=function(){return i(r)};return s().createElement(f.u_,{variant:"small",header:s().createElement(y.Title,{size:"xl",headingLevel:"h4"},"Deny"===t&&s().createElement(E.default,{size:"sm",fill:"#f0ab00",className:"pf-u-mr-sm"}),c.formatMessage(A(t))),isOpen:!0,onClose:v},s().createElement(m.K,{hasGutter:!0},s().createElement(b.TextContent,null,s().createElement(g.Text,{component:g.TextVariants.p},c.formatMessage(P.Z.requestActionDescription,{id:s().createElement("b",null,d),actionMessage:c.formatMessage(k(t))}))),s().createElement(l.Z,{schema:x("Deny"===t||"Comment"===t,c),onSubmit:function(e){var a={Comment:"memo",Approve:"approve",Deny:"deny"},s="Comment"===t?c.formatMessage(O.Z.commentTitle):c.formatMessage(P.Z.actionName,{actionType:c.formatMessage(A(t))});return o?n(s,d,D({operation:a[t]},e),c).then((function(){return o()})).then((function(){return i(r)})):n(s,d,D({operation:a[t]},e),c).then((function(){return i(r)}))},onCancel:v,templateProps:{submitLabel:c.formatMessage(R(t))}})))};L.defaultProps={closeUrl:q.Z.requests.index},L.propTypes={createRequestAction:i().func.isRequired,postMethod:i().func,actionType:i().string,closeUrl:i().oneOfType([i().string,i().shape({patname:i().string,search:i().string})])};const B=(0,p.$j)(null,(function(e){return(0,d.DE)({createRequestAction:v.kw},e)}))(L)},47239:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(30624),a=n.n(r),o=n(45697),s=n.n(o),c=n(86896),i=n(6202),l=n(334),u=n(27121),p=n(11107),d=function(e){var t=e.denyLink,n=e.approveLink,r=e.commentLink,o=e.request,s=e.canApproveDeny,d=e.canComment,f=(0,c.Z)(),m=o.id,g=o.state,b=(0,p.mG)(g)&&s,y=d;return a().createElement("div",{style:{display:"flex"}},b&&a().createElement(a().Fragment,null,a().createElement(l.Link,{to:{pathname:n,search:"request=".concat(m)},className:"pf-u-mr-sm",id:"approve-".concat(o.id)},a().createElement(i.Button,{ouiaId:"approve-request-".concat(m),variant:"primary","aria-label":f.formatMessage(u.Z.approveRequest)},f.formatMessage(u.Z.approveTitle))),a().createElement(l.Link,{to:{pathname:t,search:"request=".concat(m)},className:"pf-u-mr-sm",id:"deny-".concat(o.id)},a().createElement(i.Button,{ouiaId:"deny-request-".concat(m),variant:"danger","aria-label":f.formatMessage(u.Z.denyTitle)},f.formatMessage(u.Z.denyTitle)))),y&&a().createElement(l.Link,{to:{pathname:r,search:"request=".concat(m)},id:"comment-".concat(o.id)},a().createElement(i.Button,{ouiaId:"comment-request-".concat(m),variant:"secondary","aria-label":f.formatMessage(u.Z.commentTitle)},f.formatMessage(u.Z.commentTitle))))};d.propTypes={denyLink:s().string,approveLink:s().string,commentLink:s().string,request:s().object.isRequired,canApproveDeny:s().bool,canComment:s().bool},d.defaultProps={canApproveDeny:!0,canComment:!0};const f=d},1054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4942),a=n(334);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.useLocation)(),n=t.search,o=new URLSearchParams(n);return[e.reduce((function(e,t){return s(s({},e),{},(0,r.Z)({},t,o.get(t)))}),{}),n,o]}},70347:()=>{},25238:()=>{},314:()=>{},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/710.789c088147057db0c782160d580c83db.js.map