(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{766:function(e,t,r){"use strict";var a=(0,r(252).defineMessages)({createApprovalTitle:{id:"formMessages.createApprovalTitle",defaultMessage:"Create approval process"},generalInformation:{id:"formMessages.generalInformation",defaultMessage:"General information"},setGroups:{id:"formMessages.setGroups",defaultMessage:"Add groups"},enterInfo:{id:"formMessages.enterInfo",defaultMessage:"Enter your information"},approvalProcessName:{id:"formMessages.approvalProcessName",defaultMessage:"Name"},enterApprovalName:{id:"formMessages.enterApprovalName",defaultMessage:"Enter a name for the approval process"},description:{id:"formMessages.description",defaultMessage:"Description"},nameTaken:{id:"formMessages.nameTaken",defaultMessage:"Name has already been taken"},selectPlaceholder:{id:"formMessages.selectPlaceholder",defaultMessage:"Select..."},summary:{id:"formMessages.summary",defaultMessage:"Summary"},groups:{id:"formMessages.groups",defaultMessage:"Groups"},create:{id:"formMessages.create",defaultMessage:"Create"},existingGroupsMessage:{id:"formMessages.existingGroups",defaultMessage:"Current groups"}});t.a=a},896:function(e,t,r){"use strict";r.r(t),r.d(t,"workflowsListState",(function(){return mt}));var a=r(106),s=r.n(a),n=r(133),o=r.n(n),c=r(76),i=r.n(c),l=r(11),u=r.n(l),f=r(0),p=r.n(f),d=r(132),m=r(24),g=r(94),w=r(263),v=r(262),b=r(412),y=r(707),h=r(713),k=r.n(h),O=r(709),M=r.n(O),P=r(112),j=r(109),E=r(20),S=r(142),D=r.n(S),T=r(217),A=r.n(T),F=r(259),x=r(254),C=r(135),W=Object(F.f)(),_=Object(F.e)();function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.b,r="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),a="&filter[name][contains_i]=".concat(e);return Object(F.b)().get("".concat(C.a,"/workflows/?").concat(a).concat(r))}var V=function(e){return W.showWorkflow(e)};function q(e){return I.apply(this,arguments)}function I(){return(I=A()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=A()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=A()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.destroyWorkflow(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=(0,r(252).defineMessages)({edit:{id:"worfklowMessages.edit",defaultMessage:"Edit"},editInformation:{id:"worfklowMessages.editInformation",defaultMessage:"Edit information"},deleteApprovalTitle:{id:"worfklowMessages.deleteApprovalTitle",defaultMessage:"Delete approval process"},approvalProcess:{id:"worfklowMessages.approvalProcess",defaultMessage:"approval process"},approvalProcesses:{id:"worfklowMessages.approvalProcesses",defaultMessage:"approval processes"},noApprovalProcesses:{id:"worfklowMessages.noApprovalProcesses",defaultMessage:"No approval processes"},sequence:{id:"workflowMessages.sequence",defaultMessage:"Sequence"},enterSequence:{id:"workflowMessages.enterSequence",defaultMessage:"Enter sequence"},removeProcessTitle:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}}?"},removeProcessAriaLabel:{id:"workflowMessages.removeProcessTitle",defaultMessage:"Delete {count, plural, one {approval process} other {approval processes}} modal"},removeProcessDescription:{id:"workflowMessages.removeProcessDescription",defaultMessage:"{name} will be removed."},removeProcessDescriptionWithDeps:{id:"workflowMessages.removeProcessDescriptionWithDeps",defaultMessage:"{name} will be removed from the following applications: {dependenciesList}"},editProcessTitle:{id:"workflowMessages.editProcessTitle",defaultMessage:"Make any changes to approval process {name}"},addProcessSuccessTitle:{id:"workflowMessages.addProcessSuccessTitle",defaultMessage:"Success adding approval process"},addProcessSuccessDescription:{id:"workflowMessages.addProcessSuccessDescription",defaultMessage:"The approval process was added successfully."},updateProcessSuccessTitle:{id:"workflowMessages.updateProcessSuccessTitle",defaultMessage:"Success updating approval process"},updateProcessSuccessDescription:{id:"workflowMessages.updateProcessSuccessDescription",defaultMessage:"The approval process was updated successfully."},repositionProcessSuccessTitle:{id:"workflowMessages.repositionProcessSuccessTitle",defaultMessage:"Success updating approval process sequence"},repositionProcessSuccessDescription:{id:"workflowMessages.repositionProcessSuccessDescription",defaultMessage:"The approval process' sequence was updated successfully."},removeProcessSuccessTitle:{id:"workflowMessages.removeProcessSuccessTitle",defaultMessage:"Success removing approval process"},removeProcessSuccessDescription:{id:"workflowMessages.removeProcessSuccessDescription",defaultMessage:"The approval process was removed successfully."},removeProcessesSuccessTitle:{id:"workflowMessages.removeProcessesSuccessTitle",defaultMessage:"Success removing approval processes"},removeProcessesSuccessDescription:{id:"workflowMessages.removeProcessesSuccessDescription",defaultMessage:"The selected approval processes were removed successfully."},up:{id:"workflowMessages.up",defaultMessage:"up"},down:{id:"workflowMessages.down",defaultMessage:"down"}}),B=function(e){return function(t,r){var a=r().workflowReducer,s=a.workflows,n=a.filterValue,o=e;if(!e&&s){var c=s.meta;o={limit:c.limit,offset:c.offset}}return t({type:E.k,payload:R(n,o)})}},U=function(e){return{type:E.r,payload:e}},z=r(153),J=r.n(z),X=r(306),Q=r(708),H=r(795),K=r.n(H),Y=r(75),Z=r(802),$=r(768),ee=r.n($),te=r(782),re=r.n(te),ae=r(775),se=r(766),ne=Object(ae.a)((function(e,t,r){return function(e){return R(e)}(e).then((function(a){var s=a.data;if(t?s.find((function(r){return e===r.name&&t!==r.id})):s.find((function(t){return e===t.name})))throw r.formatMessage(se.a.nameTaken)}))})),oe=function(e,t){return[{component:ee.a.TEXT_FIELD,name:"name",isRequired:!0,id:"workflow-name",label:e.formatMessage(se.a.approvalProcessName),validate:[function(r){return ne(r,t,e)},{type:re.a.REQUIRED,message:e.formatMessage(se.a.enterApprovalName)}]},{component:ee.a.TEXTAREA,name:"description",id:"workflow-description",label:e.formatMessage(se.a.description)}]},ce=Object(ae.a)((function(e){var t="&name=".concat(e);return Object(F.b)().get("".concat(C.c,'/groups/?role_names=",Approval Administrator,Approval Approver,"\n  ').concat(e&&e.length>0?t:"")).then((function(e){var t=e.data;return t&&t.length>0?t.map((function(e){var t=e.uuid;return{label:e.name,value:t}})):void 0}))}));function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=function(e,t,r){var a=r.getState().values.current_groups||[];return{key:a.length,loadOptions:function(){return e.loadOptions.apply(e,arguments).then((function(e){return e.map((function(e){return le(le({},e),a.find((function(t){return t.value===e.value}))?{isDisabled:!0}:{})}))}))}}},fe=function(e){return{component:ee.a.SELECT,name:"group_refs",label:e.formatMessage(se.a.setGroups),loadOptions:ce,initialValue:[],clearedValue:[],noValueUpdates:!0,isMulti:!0,isSearchable:!0,simpleValue:!1,menuIsPortal:!0,isClearable:!0,placeholder:e.formatMessage(se.a.selectPlaceholder),resolveProps:ue}},pe=function(e){return{component:"initial-chips",name:"current_groups",label:e.formatMessage(se.a.existingGroupsMessage),initialValues:[]}},de=function(e,t){return{fields:[].concat(i()(oe(e,t)),[fe(e),pe(e)])}};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we=function(){var e=Object(d.useDispatch)(),t=Object(m.g)().push,r=Object(X.a)(),a=function(){return t(Y.a.workflows.index)};return p.a.createElement(Q.Modal,{isOpen:!0,onClose:a,title:r.formatMessage(se.a.createApprovalTitle),variant:"small"},p.a.createElement(Z.a,{onSubmit:function(a){var s=a.group_refs,n=void 0===s?[]:s,o=J()(a,["group_refs"]);return t(Y.a.workflows.index),e(function(e,t){return{type:E.a,payload:(r=e,_.listTemplates().then((function(e){var t=e.data;if(!t[0])throw new Error("No template exists");return t[0].id})).then((function(e){return W.addWorkflowToTemplate(e,r,{})}))),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(G.addProcessSuccessTitle),description:t.formatMessage(G.addProcessSuccessDescription)}}}};var r}(ge(ge({},o),{},{group_refs:n.length>0?n.map((function(e){return{name:e.label,uuid:e.value}})):[]}),r)).then((function(){return e(B())}))},onCancel:a,schema:de(r),FormTemplate:function(e){return p.a.createElement(K.a,s()({},e,{buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))},ve=r(7),be=r.n(ve),ye=r(104),he=r(204),ke=r(424),Oe=r(706),Me=r(717),Pe=r.n(Me),je=r(769),Ee=function(e){var t=Object(d.useSelector)((function(e){return{workflows:e.workflowReducer.workflows}}),d.shallowEqual).workflows;return t&&t.data&&t.data.find((function(t){return t.id===e}))},Se=r(136),De=r(764),Te=r(787),Ae=r.n(Te);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce=function(e){var t=e.ids,r=void 0===t?[]:t,a=e.fetchData,s=e.pagination,n=void 0===s?x.b:s,c=e.resetSelectedWorkflows,l=Object(d.useDispatch)(),u=Object(f.useState)(),g=o()(u,2),w=g[0],v=g[1],y=Object(f.useState)(!1),h=o()(y,2),k=h[0],O=h[1],M=Object(m.g)().push,P=Object(je.a)(["workflow"]),j=o()(P,1)[0].workflow||1===r.length&&r[0],S=Object(X.a)(),D=Ee(j);if(Object(f.useEffect)((function(){var e;j&&!D&&l((e=j,{type:E.j,payload:V(e)})).then((function(e){var t=e.value;return v(t)})).catch((function(){return M(Y.a.workflows.index)}))}),[]),!j&&0===r.length)return null;var T=function(){return l(j?function(e,t){return{type:E.m,payload:q(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(G.removeProcessSuccessTitle),description:t.formatMessage(G.removeProcessSuccessDescription)}}}}}(j,S):function(e,t){return{type:E.n,payload:N(e),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(G.removeProcessesSuccessTitle),description:t.formatMessage(G.removeProcessesSuccessDescription)}}}}}(r,S)).catch((function(){return O(!1)})).then((function(){return M(Y.a.workflows.index)})).then((function(){return c()})).then((function(){return a(xe(xe({},n),{},{offset:Object(x.a)(n,j?1:r.length)}))}))},A=function(){return M(Y.a.workflows.index)},F=function(){var e=D||w;return e&&!Ae()(e)&&e.metadata&&e.metadata.object_dependencies&&!Ae()(e.metadata.object_dependencies)?Object.keys(e.metadata.object_dependencies).reduce((function(e,t){return[].concat(i()(e),["".concat(C.b[t]||t)])}),[]):[]},W=p.a.createElement("b",{key:"remove-key"},j?w&&w.name||D&&D.name:p.a.createElement(p.a.Fragment,null,r.length," ",S.formatMessage(G.approvalProcesses))),_=j&&!D&&!w;return p.a.createElement(Q.Modal,{isOpen:!0,variant:"small","aria-label":S.formatMessage(G.removeProcessAriaLabel,{count:j?1:r.length}),header:p.a.createElement(Oe.Title,{size:"2xl",headingLevel:"h1"},p.a.createElement(Pe.a,{size:"sm",fill:"#f0ab00",className:"pf-u-mr-sm"}),S.formatMessage(G.removeProcessTitle,{count:j?1:r.length})),onClose:A,actions:[p.a.createElement(b.Button,{id:"submit-remove-workflow",ouiaId:"submit-remove-workflow",key:"submit",variant:"danger",type:"button",isDisabled:k,onClick:function(){return O(!0),T()}},k?p.a.createElement(p.a.Fragment,null,p.a.createElement(ke.Spinner,{size:"sm",className:"pf-u-mr-md"}),S.formatMessage(De.a.deleting)):S.formatMessage(De.a.delete)),p.a.createElement(b.Button,{id:"cancel-remove-workflow",ouiaId:"cancel-remove-workflow",key:"cancel",variant:"link",type:"button",isDisabled:k,onClick:A},S.formatMessage(De.a.cancel))]},p.a.createElement(he.TextContent,null,p.a.createElement(ye.Text,{component:ye.TextVariants.p},_?p.a.createElement(Se.c,null):Ae()(F())?S.formatMessage(G.removeProcessDescription,{name:W}):S.formatMessage(G.removeProcessDescriptionWithDeps,{name:W,dependenciesList:p.a.createElement("span",{key:"span",className:"pf-u-mt-lg span-block"},F().map((function(e){return p.a.createElement("li",{key:e},e)})))}))))};Ce.propTypes={fetchData:be.a.func.isRequired,ids:be.a.array,resetSelectedWorkflows:be.a.func.isRequired,pagination:be.a.shape({limit:be.a.number,offset:be.a.number,count:be.a.number})};var We=Ce,_e=r(723),Re=r(750),Ve=r(751),qe=r(256),Ie=r(261),Ne=r(748),Le=r.n(Ne),Ge=r(749),Be=r.n(Ge),Ue=Object(f.createContext)({selectedWorkflows:[]}),ze=function(e,t){return e[t]||(e[t]=Object(ae.a)((function(e,t,r){return t(function(e,t){return{type:E.o,payload:(r=e,W.reposition(r.id,r.sequence)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(G.repositionProcessSuccessTitle),description:t.formatMessage(G.repositionProcessSuccessDescription)}}}};var r}(e,r)).then((function(){return t(B())}))}),1500)),e[t]},Je=function(e){var t=e.id,r=Object(f.useContext)(Ue).cache,a=Object(d.useDispatch)(),s=Object(X.a)(),n=Object(d.useSelector)((function(e){var t=e.workflowReducer,r=t.isUpdating,a=t.isLoading;return{isUpdating:r>0||a,property:c}})),o=n.isUpdating,c=n.property,i=function(e){var n;return a((n={id:t,sequence:e},{type:E.l,payload:n})),ze(r,t)({id:t,sequence:e},a,s)};return p.a.createElement(qe.Stack,null,p.a.createElement(Ie.StackItem,null,p.a.createElement(b.Button,{ouiaId:"up-".concat(t),variant:"plain","aria-label":s.formatMessage(G.up),id:"up-".concat(t),onClick:function(){return i({increment:-1})},isDisabled:o},p.a.createElement(Le.a,null))),p.a.createElement(Ie.StackItem,null,p.a.createElement(b.Button,{variant:"plain","aria-label":s.formatMessage(G.down),id:"down-".concat(t),onClick:function(){return i({increment:1})},isDisabled:o,ouiaId:"down-".concat(t)},p.a.createElement(Be.a,null))))};Je.propTypes={id:be.a.string.isRequired};var Xe=function(e){var t=e.group_refs,r=e.id;return p.a.createElement(Re.Flex,{key:r,className:"pf-u-mt-sm"},t.map((function(e){var t=e.name,r=e.uuid;return p.a.createElement(Ve.FlexItem,{key:r},p.a.createElement(_e.Label,{className:"group-label pf-u-mb-sm"},t))})))};Xe.propTypes={id:be.a.string,group_refs:be.a.arrayOf(be.a.shape({name:be.a.string.isRequired,uuid:be.a.string.isRequired}))};var Qe=function(e){var t=e.id,r=Object(f.useContext)(Ue),a=r.selectedWorkflows,s=r.setSelectedWorkflows;return p.a.createElement(y.Checkbox,{id:"select-".concat(t),isChecked:a.includes(t),onChange:function(){return s(t)}})};Qe.propTypes={id:be.a.string.isRequired};var He=function(e){return e.map((function(e){var t=e.id,r=e.name,a=e.description,s=e.sequence,n=e.group_refs;return{id:t,cells:[p.a.createElement(p.a.Fragment,{key:"".concat(t,"-buttons")},p.a.createElement(Je,{id:t,ouiaId:"".concat(t,"-buttons"),sequence:s})),p.a.createElement(p.a.Fragment,{key:"".concat(t,"-checkbox")},p.a.createElement(Qe,{id:t})),r,a,p.a.createElement(p.a.Fragment,{key:t},p.a.createElement(Xe,{key:t,group_refs:n,id:t}))]}}))},Ke=r(818),Ye=r(210),Ze=r(785),$e=r(59),et=r(829),tt=r(777);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var st=function(e,t){var r=t.type,a=t.initialValues,s=t.schema;switch(r){case"loaded":return at(at({},e),{},{initialValues:a,schema:s,isLoading:!1});default:return e}},nt=function(e){var t=e.group_refs.map((function(e){return{label:e.name,value:e.uuid}}));return at(at({},e),{},{group_refs:[],current_groups:t})},ot=function(){var e=Object(d.useDispatch)(),t=Object(m.g)().push,r=Object(X.a)(),a=Object(je.a)(["workflow"]),n=o()(a,1)[0].workflow,c=Ee(n),i=Object(f.useReducer)(st,{isLoading:!0}),l=o()(i,2),u=l[0],g=u.initialValues,w=u.schema,v=u.isLoading,b=l[1];Object(f.useEffect)((function(){c?b({type:"loaded",initialValues:nt(c),schema:de(r,c.id)}):V(n).then((function(e){return b({type:"loaded",initialValues:nt(e),schema:de(r,e.id)})}))}),[]);var y=function(){return t(Y.a.workflows.index)};return p.a.createElement(Q.Modal,{isOpen:!0,onClose:y,title:r.formatMessage(G.editInformation),description:!v&&r.formatMessage(G.editProcessTitle,{name:g.name}),variant:"small"},v&&p.a.createElement(Se.f,null),!v&&p.a.createElement(Z.a,{onSubmit:function(t){var a=t.group_refs,s=void 0===a?[]:a,n=t.description,o=void 0===n?"":n,c=J()(t,["group_refs","description"]);y();var i=c.current_groups?c.current_groups.concat(null==s?void 0:s.filter((function(e){return c.current_groups.indexOf(e)<0}))):s,l=at(at({},c),{},{description:o,group_refs:i.map((function(e){return{name:e.label,uuid:e.value}}))});return delete l.current_groups,e(function(e,t){return{type:E.u,payload:(r=e,W.updateWorkflow(r.id,r)),meta:{notifications:{fulfilled:{variant:"success",title:t.formatMessage(G.updateProcessSuccessTitle),description:t.formatMessage(G.updateProcessSuccessDescription)}}}};var r}(l,r)).then((function(){return e(B())}))},onCancel:y,schema:w,initialValues:g,FormTemplate:function(e){return p.a.createElement(K.a,s()({},e,{submitLabel:r.formatMessage(De.a.save),buttonClassName:"pf-u-mt-0",disableSubmit:["validating","pristine"]}))}}))};function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lt=function(e,t,r){return[{title:"",transforms:[Object(P.a)(1)]},{title:p.a.createElement(y.Checkbox,{onChange:r,isChecked:t,id:"select-all"}),transforms:[Object(P.a)(1)]},{title:e.formatMessage(tt.a.name)},{title:e.formatMessage(se.a.description),transforms:[Object(P.a)(35)],cellTransforms:[j.d]},{title:e.formatMessage(se.a.groups)}]},ut=Object(ae.a)((function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.b;return r(!0),t(U(e)),t(B(a)).then((function(){return r(!1)}))}),1e3),ft=function(e,t){return e?[{category:t.formatMessage(tt.a.name),key:"name",chips:[{name:e,value:e}]}]:[]},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){return t.includes(e.id)}))},dt=function(e,t,r){return r.indexOf(e)===t},mt=function(e,t){switch(t.type){case"setRows":return it(it({},e),{},{rows:t.payload,selectedAll:pt(t.payload,e.selectedWorkflows)});case"setFetching":return it(it({},e),{},{isFetching:t.payload});case"setFilterValue":return it(it({},e),{},{filterValue:t.payload});case"select":return it(it({},e),{},{selectedAll:!1,selectedWorkflows:e.selectedWorkflows.includes(t.payload)?e.selectedWorkflows.filter((function(e){return e!==t.payload})):[].concat(i()(e.selectedWorkflows),[t.payload])});case"selectAll":return it(it({},e),{},{selectedWorkflows:[].concat(i()(e.selectedWorkflows),i()(t.payload)).filter(dt),selectedAll:!0});case"unselectAll":return it(it({},e),{},{selectedWorkflows:e.selectedWorkflows.filter((function(e){return!t.payload.includes(e)})),selectedAll:!1});case"resetSelected":return it(it({},e),{},{selectedWorkflows:[],selectedAll:!1});case"setFilteringFlag":return it(it({},e),{},{isFiltering:t.payload});case"clearFilters":return it(it({},e),{},{filterValue:"",isFetching:!0});default:return e}};t.default=function(){var e=Object(f.useRef)({}),t=Object(d.useSelector)((function(e){var t=e.workflowReducer;return{workflows:t.workflows,filterValueRedux:t.filterValue}}),d.shallowEqual),r=t.workflows,a=r.data,n=r.meta,c=t.filterValueRedux,i=Object(f.useReducer)(mt,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{filterValue:e,isFetching:!0,isFiltering:!1,selectedWorkflows:[],selectedAll:!1,rows:[]}}(c)),l=o()(i,2),u=l[0],y=u.filterValue,h=u.isFetching,O=u.isFiltering,P=u.selectedWorkflows,j=u.selectedAll,S=u.rows,D=l[1],T=Object(d.useDispatch)(),A=Object(m.g)(),F=Object(X.a)(),C=function(e){return D({type:"setFetching",payload:!0}),T(B(e)).then((function(){return D({type:"setFetching",payload:!1})})).catch((function(){return D({type:"setFetching",payload:!1})}))};Object(f.useEffect)((function(){C(x.b),Object($e.g)()}),[]),Object(f.useEffect)((function(){D({type:"setRows",payload:He(a)})}),[a]);var W=function(){return D({type:"clearFilters"}),T({type:E.c}),C(n)},_=function(e){e&&""!==e?D({type:"setFilterValue",payload:e}):W(),ut(e,T,(function(e){return D({type:"setFilteringFlag",payload:e})}),it(it({},n),{},{offset:0}))},R=P.length>0;return p.a.createElement(f.Fragment,null,p.a.createElement(Ye.a,null,p.a.createElement(Ye.b,{title:F.formatMessage(De.a.approvalTitle)}),p.a.createElement(Ze.a,null)),p.a.createElement(Ue.Provider,{value:{selectedWorkflows:P,setSelectedWorkflows:function(e){return D({type:"select",payload:e})},cache:e.current}},p.a.createElement(Ke.a,{ouiaId:"approval-process-table",rows:S,columns:lt(F,j,(function(){return D(j?{type:"unselectAll",payload:a.map((function(e){return e.id}))}:{type:"selectAll",payload:a.map((function(e){return e.id}))})})),fetchData:C,routes:function(){return p.a.createElement(f.Fragment,null,p.a.createElement(m.b,{exact:!0,path:Y.a.workflows.add,render:function(e){return p.a.createElement(we,s()({},e,{postMethod:C}))}}),p.a.createElement(m.b,{exact:!0,path:Y.a.workflows.edit,component:ot}),p.a.createElement(m.b,{exact:!0,path:Y.a.workflows.remove,render:function(e){return p.a.createElement(We,s()({},e,{ids:P,fetchData:C,pagination:n,resetSelectedWorkflows:function(){return D({type:"resetSelected"})}}))}}))},actionResolver:function(){return[{title:F.formatMessage(G.edit),component:"button",onClick:function(e,t,r){return A.push({pathname:Y.a.workflows.edit,search:"?workflow=".concat(r.id)})}},{title:F.formatMessage(De.a.delete),component:"button",onClick:function(e,t,r){return A.push({pathname:Y.a.workflows.remove,search:"?workflow=".concat(r.id)})}}]},titlePlural:F.formatMessage(G.approvalProcesses),titleSingular:F.formatMessage(G.approvalProcess),pagination:n,toolbarButtons:function(){return p.a.createElement(w.ToolbarGroup,{className:"pf-u-pl-lg top-toolbar"},p.a.createElement(v.ToolbarItem,null,p.a.createElement(g.b,{id:"add-workflow-link",to:{pathname:Y.a.workflows.add}},p.a.createElement(b.Button,{ouiaId:"add-workflow-link",variant:"primary","aria-label":F.formatMessage(se.a.create)},F.formatMessage(se.a.create)))),p.a.createElement(v.ToolbarItem,null,p.a.createElement(g.b,{id:"remove-multiple-workflows",className:R?"":"disabled-link",to:{pathname:Y.a.workflows.remove}},p.a.createElement(b.Button,{variant:"secondary",isDisabled:!R,"aria-label":F.formatMessage(G.deleteApprovalTitle)},F.formatMessage(De.a.delete)))))},filterValue:y,onFilterChange:_,isLoading:h||O,renderEmptyState:function(){return p.a.createElement(et.a,{title:""===y?F.formatMessage(G.noApprovalProcesses):F.formatMessage(tt.a.noResultsFound),icon:Ae()(y)?k.a:M.a,PrimaryAction:function(){return""!==y?p.a.createElement(b.Button,{onClick:function(){return W()},variant:"link"},F.formatMessage(tt.a.clearAllFilters)):null},description:""===y?F.formatMessage(G.noApprovalProcesses):F.formatMessage(tt.a.clearAllFiltersDescription),isSearch:!Ae()(y)})},activeFiltersConfig:{filters:ft(y,F),onDelete:function(){return _("")}}})))}}}]);
//# sourceMappingURL=../sourcemaps/workflows~5a4d8549.js.map