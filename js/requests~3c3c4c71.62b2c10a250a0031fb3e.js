(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{828:function(e,t,a){"use strict";var r=a(107),n=a.n(r),s=a(106),o=a.n(s),i=a(11),c=a.n(i),l=a(0),u=a.n(l),m=a(7),f=a.n(m),p=a(133),d=a(413),g=a(97),y=a(113),b=a(110),h=a(307),v=a(714),O=a.n(v),j=a(708),q=a.n(j),E=a(787),M=a.n(E),F=a(802),C=a(67),w=a.n(C),R=a(95),V=a(59),x=a(76),T=a(722),k=a(135),D=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},P=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.a.request,r=arguments.length>3?arguments[3]:void 0;return t.reduce((function(t,n){var s,o,i;return[].concat(w()(t),[{id:n.id,state:n.state,number_of_children:n.number_of_children,cells:[u.a.createElement(l.Fragment,{key:n.id},u.a.createElement(R.b,{to:{pathname:a.index,search:"?request=".concat(n.id)}},n.id)),n.name,n.requester_name,n.finished_at?Object(V.h)(n.finished_at):n.notified_at?Object(V.h)(n.notified_at):Object(V.h)(n.created_at),u.a.createElement(l.Fragment,{key:"decision-".concat(n.id)},e(n)||u.a.createElement(T.Label,{variant:"outline",icon:null===(s=k.d[n.decision])||void 0===s?void 0:s.icon,color:null===(o=k.d[n.decision])||void 0===o?void 0:o.color},D(r.formatMessage((null===(i=k.d[n.decision])||void 0===i?void 0:i.displayName)||Object(k.e)()))))]}])}),[])},S=a(818),_=a(210),B=a(785),L=a(775),A=a(829),I=a(77),N=a(777),J=a(105),U=function(e,t){var a=e.name,r=e.requester,n=e.decision;return[].concat(w()(a?[{category:t.formatMessage(N.a.name),key:"name",chips:[{name:a,value:a}]}]:[]),w()(r?[{category:t.formatMessage(J.a.requesterColumn),key:"requester",chips:[{name:r,value:r}]}]:[]),w()(n&&n.length>0?[{category:t.formatMessage(J.a.statusColumn),key:"decision",chips:n.map((function(e){return{name:e,value:e}}))}]:[]))},z=a(764),G=a(24),H=a(830);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){return[{title:e.formatMessage(J.a.requestsIdColumn),transforms:[g.a,Object(y.a)(10)]},{title:e.formatMessage(N.a.name),transforms:[g.a,b.e,Object(y.a)(25)],cellTransforms:[b.a]},{title:e.formatMessage(J.a.requesterColumn),transforms:[g.a,b.e,Object(y.a)(25)]},{title:e.formatMessage(J.a.updatedColumn),transforms:[Object(y.a)(15)]},{title:e.formatMessage(J.a.statusColumn),transforms:[g.a,Object(y.a)(25)]}]},X=Object(L.a)((function(e,t,a,r){return t(!0),r&&r(),e(Object(F.e)(a)).then((function(){return t(!1)}))}),1e3),Y=function(e,t){switch(t.type){case"setFetching":return Q(Q({},e),{},{isFetching:t.payload});case"setNameValue":return Q(Q({},e),{},{nameValue:t.payload});case"setRequesterValue":return Q(Q({},e),{},{requesterValue:t.payload});case"clearFilters":return Q(Q({},e),{},{requesterValue:"",nameValue:"",isFetching:!0});case"setFilteringFlag":return Q(Q({},e),{},{isFiltering:t.payload});case"setRows":return Q(Q({},e),{},{rows:t.payload});default:return e}},Z=function(e){var t=e.persona,a=e.indexpath,r=e.actionResolver,s=Object(p.useSelector)((function(e){var t=e.requestReducer;return{requests:t.requests,sortBy:t.sortBy,filterValue:t.filterValue}}),p.shallowEqual),i=s.requests,c=i.data,m=i.meta,f=s.sortBy,g=s.filterValue,y=Object(l.useReducer)(Y,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{nameValue:e,requesterValue:t,isOpen:!1,isFetching:!0,isFiltering:!1,rows:[]}}(g.name,g.requester)),b=o()(y,2),v=b[0],j=v.nameValue,E=v.isFetching,C=v.isFiltering,w=v.requesterValue,R=v.rows,T=b[1],k=Object(l.useContext)(I.a).userRoles,D=Object(p.useDispatch)(),L=Object(h.a)(),K=Object(V.i)(k),Q=Object(V.j)(k),Z=function(e){if(Q||t!==V.b)return T({type:"setFetching",payload:!0}),D(Object(F.e)(t,e)).then((function(){return T({type:"setFetching",payload:!1})})).catch((function(){return T({type:"setFetching",payload:!1})}));T({type:"setFetching",payload:!1})};Object(l.useEffect)((function(){T({type:"clearFilters"}),D(Object(F.a)()),D(Object(F.f)()),Z(),Object(V.g)()}),[t]),Object(l.useEffect)((function(){T({type:"setRows",payload:P(r,c,a,L)})}),[c]);var $=function(e,a){var r=!1;return"name"===a?(T({type:"setNameValue",payload:e}),r=!0):"requester"===a&&(T({type:"setRequesterValue",payload:e}),r=!0),r||D(Object(F.g)(e,a)),X(D,(function(e){return T({type:"setFilteringFlag",payload:e})}),t,r&&function(){return D(Object(F.g)(e,a))})},ee=function(){return T({type:"clearFilters"}),D(Object(F.a)()),Z()};return u.a.createElement(l.Fragment,null,u.a.createElement(_.a,null,u.a.createElement(_.b,{title:L.formatMessage(z.a.approvalTitle)}),K&&u.a.createElement(B.a,null)),u.a.createElement(S.a,{ouiaId:"requests-table",sortBy:f,onSort:function(e,t,a,r){var n=r.property;return T({type:"setFetching",payload:!0}),D(Object(F.h)({index:t,direction:a,property:n})),Z()},rows:R,columns:W(L),fetchData:Z,routes:function(){return u.a.createElement(l.Fragment,null,u.a.createElement(G.b,{exact:!0,path:x.a.requests.comment,render:function(e){return u.a.createElement(H.a,n()({},e,{actionType:"Comment",postMethod:function(){return Z(m)}}))}}),u.a.createElement(G.b,{exact:!0,path:x.a.requests.approve,render:function(e){return u.a.createElement(H.a,n()({},e,{actionType:"Approve",postMethod:function(){return Z(m)}}))}}),u.a.createElement(G.b,{exact:!0,path:x.a.requests.deny,render:function(e){return u.a.createElement(H.a,n()({},e,{actionType:"Deny",postMethod:function(){return Z(m)}}))}}))},titlePlural:L.formatMessage(J.a.requests),titleSingular:L.formatMessage(J.a.request),pagination:m,handlePagination:Z,filterValue:j,onFilterChange:function(e){return $(e,"name")},isLoading:E||C,renderEmptyState:function(){return u.a.createElement(A.a,{title:M()(g)?L.formatMessage(J.a.emptyRequestsTitle):L.formatMessage(N.a.noResultsFound),icon:M()(g)?O.a:q.a,PrimaryAction:function(){return M()(g)?a===x.a.allrequest?L.formatMessage(J.a.emptyAllRequestsDescription):L.formatMessage(J.a.emptyRequestsDescription):u.a.createElement(d.Button,{onClick:ee,variant:"link",ouiaId:"clear-filter-requests"},L.formatMessage(N.a.clearAllFilters))},description:M()(g)?"":L.formatMessage(N.a.clearAllFiltersDescription),isSearch:!M()(g)})},activeFiltersConfig:{filters:U({name:j,requester:w,decision:g.decision},L),onDelete:function(e,t,a){return a?ee():(r=t,n=o()(r,1)[0],s=n.key,i=o()(n.chips,1)[0].value,c=["name","requester"].includes(s)?"":g[s].filter((function(e){return i!==e})),void $(c,s));var r,n,s,i,c}},filterConfig:[{label:L.formatMessage(J.a.requesterColumn),filterValues:{placeholder:L.formatMessage(N.a.filterByTitle,{title:L.formatMessage(J.a.requesterColumn).toLowerCase()}),"aria-label":L.formatMessage(N.a.filterByTitle,{title:L.formatMessage(J.a.requesterColumn).toLowerCase()}),onChange:function(e,t){return $(t,"requester")},value:w}},{label:L.formatMessage(J.a.statusColumn),type:"checkbox",filterValues:{placeholder:L.formatMessage(N.a.filterByTitle,{title:L.formatMessage(J.a.statusColumn).toLowerCase()}),"aria-label":L.formatMessage(N.a.filterByTitle,{title:L.formatMessage(J.a.statusColumn).toLowerCase()}),onChange:function(e,t){return $(t,"decision")},value:g.decision,items:["approved","canceled","denied","error","undecided"].map((function(e){return{label:L.formatMessage(J.a[e]),value:e}}))}}]}))};Z.propTypes={routes:f.a.func,persona:f.a.string,indexpath:f.a.shape({index:f.a.string}),actionResolver:f.a.func},Z.defaultProps={indexpath:x.a.request,actionResolver:function(){return!1}};t.a=Z},895:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(59),o=a(828),i=a(76);t.default=function(){return n.a.createElement(o.a,{persona:s.a,indexpath:i.a.allrequest})}},897:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(59),o=a(77),i=a(76),c=a(828),l=a(210),u=a(785),m=a(710),f=a(712),p=a(711),d=a(715),g=a(104),y=a(204),b=a(307),h=a(105),v=a(764),O=a(714),j=a.n(O),q=function(){var e=Object(r.useContext)(o.a).userRoles,t=Object(s.i)(e),a=Object(b.a)();return n.a.createElement(r.Fragment,null,n.a.createElement(l.a,null,n.a.createElement(l.b,{title:a.formatMessage(v.a.approvalTitle)}),t&&n.a.createElement(u.a,null)),n.a.createElement(m.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},n.a.createElement(p.EmptyStateIcon,{icon:j.a}),n.a.createElement(y.TextContent,null,n.a.createElement(g.Text,{component:g.TextVariants.h1},a.formatMessage(h.a.emptyRequestsTitle))),n.a.createElement(f.EmptyStateBody,null,a.formatMessage(h.a.emptyRequestsDescription))),n.a.createElement(d.EmptyStateSecondaryActions,null))},E=a(803);t.default=function(){var e=Object(r.useContext)(o.a).userRoles,t=Object(s.i)(e),a=Object(s.j)(e);return a?n.a.createElement(c.a,{persona:s.b,actionResolver:function(e){return e&&e.id&&(!(r=e)||!r.state||!Object(s.f)(r.state)||r.number_of_children>0||!a&&!t)?null:n.a.createElement(E.a,{commentLink:i.a.requests.comment,approveLink:i.a.requests.approve,denyLink:i.a.requests.deny,request:e});var r}}):n.a.createElement(q,null)}}}]);
//# sourceMappingURL=../sourcemaps/requests~3c3c4c71.js.map