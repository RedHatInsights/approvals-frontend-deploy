(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{765:function(e,t,n){"use strict";n.d(t,"f",(function(){return P})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return D})),n.d(t,"b",(function(){return E})),n.d(t,"i",(function(){return k})),n.d(t,"h",(function(){return x})),n.d(t,"a",(function(){return N})),n.d(t,"g",(function(){return R}));var r=n(15),a=n(101),o=n.n(a),c=n(10),i=n.n(c),s=n(170),u=n.n(s),l=n(204),d=n(91),f=n(200),p=n(38);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(l.a)(),g=Object(l.c)(),h=function(e){return{"request-id":"id",opened:"created_at",requester:"requester_name",status:"state"}[e]||e},O=function(e){var t=[];return e.name&&t.push("filter[name][contains_i]=".concat(e.name)),e.requester&&t.push("filter[requester_name][contains_i]=".concat(e.requester)),e.decision&&e.decision.forEach((function(e){t.push("filter[decision][eq][]=".concat(e))})),t.join("&")};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),o="&sort_by=".concat(h(r.property),":").concat(r.direction),c="".concat(d.a,"/requests/?").concat(O(e)).concat(a).concat(o),i=n?{"x-rh-persona":n}:void 0;return Object(l.b)()({method:"get",url:c,headers:i})}var j=function(e,t){var n,r=t&&t!==p.b?{"x-rh-persona":t}:{"x-rh-persona":p.c};return g({method:"post",url:"".concat(d.a,"/graphql"),headers:r,data:{query:(n=e,'query {\n  requests(id: "'.concat(n,'") {\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    state\n    requester_name\n    actions {\n      id\n      operation\n      comments\n      created_at\n      processed_by\n    }\n    requests {\n      id\n      name\n      number_of_children\n      decision\n      description\n      group_name\n      number_of_finished_children\n      state\n      workflow_id\n      parent_id\n      actions {\n        id\n        operation\n        comments\n        created_at\n        processed_by\n      }\n    }\n  }\n}'))}}).then((function(e){return e.data.requests}))},q=function(e,t){var n="".concat(d.a,"/requests/").concat(e).concat(t?"/requests":""),r={"x-rh-persona":p.c};return Object(l.b)()({method:"get",url:n,headers:r})};function M(e,t){return T.apply(this,arguments)}function T(){return(T=u()(o.a.mark((function e(t,n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t,n);case 2:if((r=e.sent)&&0!==r.length){e.next=5;break}return e.abrupt("return",{});case 5:if(n!==p.b){e.next=17;break}if(!(r&&r.length>0&&r[0].number_of_children>0)){e.next=13;break}return e.next=9,q(t,!0);case 9:(a=e.sent)&&a.data&&(r[0].requests=r[0].requests.map((function(e){return b(b({},a.data.find((function(t){return t.id===e.id&&t.metadata}))),e)}))),e.next=17;break;case 13:return e.next=15,q(t,!1);case 15:(c=e.sent)&&(r[0]=b(b({},r[0]),{},{metadata:c.metadata}));case 17:return e.abrupt("return",r[0]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t){return y.createAction(e,t)},_=n(774),P=function(e,t){return function(n,a){var o=a().requestReducer,c=o.sortBy,i=o.requests,s=o.filterValue,u=t||f.a;if(!t&&i){var l=i.meta;u={limit:l.limit,offset:l.offset}}return n({type:r.h,payload:v(s,u,e,c)})}},A=function(e,t){return{type:r.g,payload:M(e,t)}},D=function(e,t){return{type:r.i,payload:(n=e,a="".concat(d.a,"/requests/").concat(n,"/content"),o={"x-rh-persona":p.c},Object(l.b)()({method:"get",url:a,headers:o}))};var n,a,o},E=function(e,t,n,a){return{type:r.c,payload:w(t,n),meta:{notifications:{fulfilled:{variant:"success",title:a.formatMessage(_.a.successTitle),description:a.formatMessage(_.a.fulfilledAction,{actionName:e})},rejected:{variant:"danger",title:a.formatMessage(_.a.failedTitle,{actionName:e}),description:a.formatMessage(_.a.failedAction,{actionName:e})}}}}},k=function(e){return{type:r.q,payload:e}},x=function(e,t){return{type:r.o,payload:{filterValue:e,type:t}}},N=function(){return{type:r.b}},R=function(){return{type:r.n}}},774:function(e,t,n){"use strict";var r=(0,n(195).defineMessages)({requestTitle:{id:"actionModal.requestTitle",defaultMessage:"Request #{id}"},requestActionTitle:{id:"actionModal.requestTitle",defaultMessage:"{actionType} Request #{id}"},actionName:{id:"actionModal.actionName",defaultMessage:"{actionType} Request"},fulfilledAction:{id:"actionModal.fullfiledAction",defaultMessage:"The {actionName} was successful."},failedAction:{id:"actionModal.failedAction",defaultMessage:"The {actionName} action failed."},successTitle:{id:"actionModal.successTitle",defaultMessage:"Success"},failedTitle:{id:"actionModal.failedTitle",defaultMessage:"{actionName} error"}});t.a=r},779:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(8),c=n.n(o),i=n(265),s=n(196),u=n(66),l=n(70),d=n(38),f=function(e){var t=e.children,n=e.className;return a.a.createElement("span",{className:n},t)};f.propTypes={children:c.a.node,className:c.a.string};var p=function(e){var t=e.denyLink,n=e.approveLink,r=e.commentLink,o=e.request,c=e.canApproveDeny,p=e.canComment,m=Object(i.a)(),b=o.id,y=o.state,g=Object(d.f)(y)&&c,h=Object(d.f)(y)&&p,O=g?u.b:f,v=h?u.b:f;return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(O,{to:{pathname:n,search:"request=".concat(b)},className:"pf-u-mr-sm",id:"approve-".concat(o.id)},a.a.createElement(s.Button,{variant:"primary","aria-label":m.formatMessage(l.a.approveRequest),isDisabled:!g},m.formatMessage(l.a.approveTitle))),a.a.createElement(O,{to:{pathname:t,search:"request=".concat(b)},className:"pf-u-mr-sm",id:"deny-".concat(o.id)},a.a.createElement(s.Button,{variant:"danger",isDisabled:!g,"aria-label":m.formatMessage(l.a.denyTitle)},m.formatMessage(l.a.denyTitle))),a.a.createElement(v,{to:{pathname:r,search:"request=".concat(b)},id:"comment-".concat(o.id)},a.a.createElement(s.Button,{variant:"secondary",isDisabled:!h,"aria-label":m.formatMessage(l.a.commentTitle)},m.formatMessage(l.a.commentTitle))))};p.propTypes={denyLink:c.a.string,approveLink:c.a.string,commentLink:c.a.string,request:c.a.object.isRequired,canApproveDeny:c.a.bool,canComment:c.a.bool},p.defaultProps={canApproveDeny:!0,canComment:!0},t.a=p},786:function(e,t,n){"use strict";var r=n(10),a=n.n(r),o=n(89),c=n.n(o),i=n(0),s=n.n(i),u=n(8),l=n.n(u),d=n(764),f=n(16),p=n(109),m=n(203),b=n(685),y=n(765),g=n(747),h=n.n(g),O=n(755),v=n.n(O),j=n(70);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return{fields:[M({component:h.a.TEXTAREA,name:"comments",isRequired:e,label:e?t.formatMessage(j.a.reasonTitle):t.formatMessage(j.a.commentTitle)},e&&{validate:[{type:v.a.REQUIRED}]})]}},w=n(751),_=n(52),P=n(265),A=n(774);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={Approve:j.a.approveTitle,Deny:j.a.denyTitle},x=function(e){var t=e.actionType,n=e.createRequestAction,r=e.closeUrl,a=e.postMethod,o=Object(P.a)(),i=Object(f.g)().push,u=Object(w.a)(["request"]),l=c()(u,1)[0].request,p=function(){return i(r)};return s.a.createElement(b.Modal,{variant:"large",title:"Add Comment"===t?o.formatMessage(A.a.requestTitle,{id:l}):o.formatMessage(A.a.requestActionTitle,{id:l,actionType:o.formatMessage(k[t])}),isOpen:!0,onClose:p},s.a.createElement(d.a,{schema:T("Deny"===t,o),onSubmit:function(e){var c={"Add Comment":"memo",Approve:"approve",Deny:"deny"},s="Add Comment"===t?o.formatMessage(j.a.addCommentTitle):o.formatMessage(A.a.actionName,{actionName:o.formatMessage(k[t])});return a?n(s,l,E({operation:c[t]},e),o).then((function(){return a()})).then((function(){return i(r)})):n(s,l,E({operation:c[t]},e),o).then((function(){return i(r)}))},onCancel:p,formContainer:"modal"}))};x.defaultProps={closeUrl:_.a.requests.index},x.propTypes={createRequestAction:l.a.func.isRequired,postMethod:l.a.func,actionType:l.a.string,closeUrl:l.a.oneOfType([l.a.string,l.a.shape({patname:l.a.string,search:l.a.string})])};t.a=Object(p.connect)(null,(function(e){return Object(m.a)({createRequestAction:y.b},e)}))(x)}}]);
//# sourceMappingURL=../sourcemaps/lib~all-request-detail~request-detail~requests~5a4d8549.js.map