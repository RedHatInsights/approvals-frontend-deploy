(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2204:function(e,t,n){"use strict";n.r(t);var a=n(82),r=n.n(a),c=n(50),o=n.n(c),i=n(3),l=n.n(i),s=n(0),u=n.n(s),m=n(1),p=n.n(m),d=n(40),f=n(19),b=n(77),y=n(378),E=n(422),h=n(4),g=n(36),v=n.n(g),O=n(57),q=n.n(O),j=n(91),x=n(25),T=n(81),w=n(43);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=Object(j.a)(),R=Object(j.c)(),S=function(e){return{opened:"created_at",requester:"requester_name",status:"state"}[e]||e};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r="filter[name][contains_i]=".concat(e),c="&limit=".concat(t.limit,"&offset=").concat(t.offset),o="&sort_by=".concat(S(a.property),":").concat(a.direction),i="".concat(x.a,"/requests/?").concat(r).concat(c).concat(o),l=n?{"x-rh-persona":n}:void 0;return Object(j.b)()({method:"get",url:i,headers:l})}var _=function(e,t){var n,a=t&&t!==w.a?{"x-rh-persona":t}:{"x-rh-persona":w.b};return R({method:"post",url:"".concat(x.a,"/graphql"),headers:a,data:{query:(n=e,'query {\n  requests(id: "'.concat(n,'") {\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    state\n    actions {\n      id\n      operation\n      comments\n      created_at\n      processed_by\n    }\n    requests {\n      id\n      name\n      number_of_children\n      decision\n      description\n      group_name\n      number_of_finished_children\n      state\n      workflow_id\n      parent_id\n      actions {\n        id\n        operation\n        comments\n        created_at\n        processed_by\n      }\n    }\n  }\n}'))}}).then((function(e){return e.data.requests}))},N=function(e){var t="".concat(x.a,"/requests/").concat(e,"/content"),n={"x-rh-persona":w.b};return Object(j.b)()({method:"get",url:t,headers:n})},F=function(e,t){var n="".concat(x.a,"/requests/").concat(e).concat(t?"/requests":""),a={"x-rh-persona":w.b};return Object(j.b)()({method:"get",url:n,headers:a})};function L(e,t){return I.apply(this,arguments)}function I(){return(I=q()(v.a.mark((function e(t,n){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,n);case 2:if((a=e.sent)&&0!==a.length){e.next=5;break}return e.abrupt("return",{});case 5:if(n!==w.a){e.next=17;break}if(!(a&&a.length>0&&a[0].number_of_children>0)){e.next=13;break}return e.next=9,F(t,!0);case 9:(r=e.sent)&&r.data&&(a[0].requests=a[0].requests.map((function(e){return k({},r.data.find((function(t){return t.id===e.id&&t.metadata})),{},e)}))),e.next=17;break;case 13:return e.next=15,F(t,!1);case 15:(c=e.sent)&&(a[0]=k({},a[0],{metadata:c.metadata}));case 17:return e.abrupt("return",k({},a[0]));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return V.apply(this,arguments)}function V(){return(V=q()(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.createAction(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e,t,n){return function(a,r){var c=r().requestReducer,o=c.sortBy,i=c.requests,l=n||T.a;if(!n&&i){var s=i.meta;l={limit:s.limit,offset:s.offset}}return a({type:h.h,payload:D(e,l,t,o)})}},M=function(e,t){return{type:h.i,payload:N(e)}},U=function(e,t,n){return{type:h.b,payload:A(t,n),meta:{notifications:{fulfilled:{variant:"success",title:"Success",description:"The ".concat(e," was successful.")},rejected:{variant:"danger",title:"".concat(e," error"),description:"The ".concat(e," action failed.")}}}}},K=n(88),G=n.n(K),H=n(403),z=n.n(H),J=n(509),Q=n(29),W=n.n(Q),X=n(522),Y=n(523),Z=n(52),$=n(41),ee=n(21),te=function(e){var t=e.input,n=e.options,a=e.isReadOnly,c=e.isDisabled,o=(e.FieldProvider,e.isRequired),i=G()(e,["input","options","isReadOnly","isDisabled","FieldProvider","isRequired"]);return u.a.createElement(X.FormSelect,r()({},t,i,{isDisabled:c||a}),function(e,t,n){if(t&&n)return e;var a=W()(e);return a.find((function(e){return void 0===e.value}))?W()(a):[{label:n?"Please choose":"None"}].concat(W()(a))}(n,t.value,o).map((function(e){return u.a.createElement(Y.FormSelectOption,r()({key:e.value||e.label},e,{label:e.label.toString()}))})))};te.propTypes={input:p.a.object.isRequired,options:p.a.arrayOf(p.a.shape({value:p.a.any,label:p.a.string.isRequired})).isRequired,isReadOnly:p.a.bool,isDisabled:p.a.bool,isRequired:p.a.bool,FieldProvider:p.a.any};var ne=function(e){e.componentType;var t=e.label,n=e.isRequired,a=e.helperText,c=e.meta,o=e.description,i=e.hideLabel,l=G()(e,["componentType","label","isRequired","helperText","meta","description","hideLabel"]),s=c.error,m=c.touched&&s;return u.a.createElement(Z.FormGroup,{isRequired:n,label:!i&&t,fieldId:l.id,isValid:!m,helperText:a,helperTextInvalid:c.error},o&&u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{component:ee.TextVariants.small},o)),u.a.createElement(te,r()({label:t,isValid:!m,isRequired:n},l)))};ne.propTypes={componentType:p.a.string,label:p.a.string,isRequired:p.a.bool,helperText:p.a.string,meta:p.a.object,description:p.a.string,hideLabel:p.a.bool};var ae=ne;function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},ie=function(e){var t=e.componentMapper,n=e.formContainer,a=G()(e,["componentMapper","formContainer"]);return u.a.createElement("div",{className:oe[n].buttonClassName},u.a.createElement(z.a,r()({formFieldsMapper:ce({},J.formFieldsMapper,l()({componentMapper:t},H.componentTypes.SELECT,ae)),layoutMapper:J.layoutMapper},oe[n],a)))};ie.propTypes={componentMapper:p.a.object,formContainer:p.a.oneOf(["default","modal"])},ie.defaultProps={componentMapper:{},formContainer:"default"};var le=ie,se=n(89),ue=n(372),me=n(34),pe=function(e){return{component:H.componentTypes.TEXTAREA_FIELD,name:"comments",type:"text",isRequired:e,label:e?"Reason":"Comment"}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=pe(e);return e&&(t.validate=[{type:H.validatorTypes.REQUIRED}]),{fields:[t]}},fe=n(362),be=n(360);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){var t=e.actionType,n=e.addNotification,a=e.createRequestAction,r=e.closeUrl,c=e.postMethod,i=Object(f.k)().push,l=Object(fe.a)(["request"]),s=o()(l,1)[0].request,m=function(){var e="Add Comment"===t?t:"".concat(t," Request");n({variant:"warning",title:e,dismissable:!0,description:"".concat(e," was cancelled by the user.")}),i(r)};return u.a.createElement(ue.Modal,{isLarge:!0,title:"Add Comment"===t?"Request #".concat(s):"".concat(t," Request #").concat(s),isOpen:!0,onClose:m},u.a.createElement(le,{schema:de("Deny"===t),schemaType:"default",onSubmit:function(e){var n={"Add Comment":"memo",Approve:"approve",Deny:"deny"},o="Add Comment"===t?t:"".concat(t," Request");return c?a(o,s,Ee({operation:n[t]},e)).then((function(){return c()})).then((function(){return i(r)})):a(o,s,Ee({operation:n[t]},e)).then((function(){return i(r)}))},onCancel:m,formContainer:"modal"}))};he.defaultProps={closeUrl:be.a.requests.index},he.propTypes={addNotification:p.a.func.isRequired,createRequestAction:p.a.func.isRequired,postMethod:p.a.func,id:p.a.string,actionType:p.a.string,closeUrl:p.a.string,match:p.a.object,location:p.a.object};var ge=Object(d.connect)(null,(function(e){return Object(se.a)({addNotification:me.addNotification,createRequestAction:U},e)}))(he),ve=n(16),Oe=n(45),qe=n(53),je=n(95),xe=n(415),Te=n(46),we=function(e){var t=e.title,n=void 0===t?"":t,a=e.detail,r=void 0===a?"":a;return u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"data-table-detail heading",component:ee.TextVariants.small},n),u.a.createElement(ee.Text,{className:"data-table-detail content",component:ee.TextVariants.h5},r))};we.propTypes={title:p.a.node,detail:p.a.node};var Pe=function(e){var t=e.id,n=e.number_of_children,a=e.state,r=e.reason,c=Object(w.f)(a)&&!n,i=Object(s.useState)([]),l=o()(i,2),m=l[0],p=l[1],f=Object(s.useState)(!0),y=o()(f,2),E=y[0],h=y[1],g=Object(s.useState)(!1),v=o()(g,2),O=v[0],q=v[1],j=Object(s.useContext)(Te.a).userPersona,x=Object(d.useSelector)((function(e){return e.requestReducer.expandedRequests}));return Object(s.useEffect)((function(){!O&&E&&x.includes(t)&&(q(!0),N(t).then((function(e){p(e),h(!1)})).catch((function(){return h(!1)})))}),[x]),E?u.a.createElement(je.Bullseye,null,u.a.createElement(xe.Spinner,null)):u.a.createElement(s.Fragment,null,u.a.createElement(Oe.Level,null,u.a.createElement(qe.LevelItem,null,u.a.createElement(we,{title:"Product",detail:m?m.product:"Unknown"})),c&&Object(w.e)(j)&&u.a.createElement(qe.LevelItem,null,u.a.createElement(ve.Link,{to:"/requests/approve/".concat(t),className:"pf-u-mr-md"},u.a.createElement(b.Button,{variant:"primary","aria-label":"Approve Request",isDisabled:!c},"Approve")),u.a.createElement(ve.Link,{to:"/requests/deny/".concat(t)},u.a.createElement(b.Button,{variant:"danger","aria-label":"Deny Request"},"Deny")))),u.a.createElement(Oe.Level,null,u.a.createElement(qe.LevelItem,null,u.a.createElement(we,{title:"Portfolio",detail:m?m.portfolio:"Unknown"}),u.a.createElement(we,{title:"Platform",detail:m?m.platform:"Unknown"}),u.a.createElement(we,{title:"Reason",detail:r||""}))))};Pe.propTypes={id:p.a.string,content:p.a.object,number_of_children:p.a.number,uname:p.a.string,state:p.a.string,reason:p.a.string};var ke=Pe,Ce=function(e){return e.reduce((function(e,t,n){var a=t.id,r=t.name,c=t.requester_name,o=t.created_at,i=t.notified_at,l=t.finished_at,m=t.state,p=t.decision,d=t.reason,f=t.number_of_children;return[].concat(W()(e),[{id:a,isOpen:!1,state:m,number_of_children:f,cells:[u.a.createElement(s.Fragment,{key:a},u.a.createElement(ve.Link,{to:{pathname:be.a.requests.index,search:"?request=".concat(a)}},r)),c,Object(w.h)(o),l?Object(w.h)(l):i?Object(w.h)(i):Object(w.h)(o),m,p]},{parent:2*n,fullWidth:!0,cells:[{title:u.a.createElement(ke,{id:a,number_of_children:f,state:m,reason:d})}]}])}),[])},Re=n(418),Se=n(93),De=n(60),_e=n(153),Ne=(n(386),n(63)),Fe=n(64),Le=n(2183),Ie=n(78),Ae=n(80),Ve=n(79),Be=function(e){var t=e.request,n=e.requestContent;return u.a.createElement(Ie.Stack,{gutter:"md"},u.a.createElement(Ae.StackItem,{key:"request-detail-panel"},u.a.createElement(Ne.Card,null,u.a.createElement(Fe.CardBody,null,u.a.createElement(Ie.Stack,{gutter:"md"},u.a.createElement(Ae.StackItem,{key:"request-summary"},u.a.createElement(Ve.Title,{headingLevel:"h5",size:"lg"},"Summary")),u.a.createElement(Ae.StackItem,{key:"request-product"},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"font-14"},"Product"),u.a.createElement(ee.Text,{id:"portfolio-item-name",component:ee.TextVariants.p},n?n.product:""))),u.a.createElement(Ae.StackItem,{key:"request-portfolio"},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"font-14"},"Portfolio"),u.a.createElement(ee.Text,{id:"portfolio-name",component:ee.TextVariants.p},n?n.portfolio:""))),u.a.createElement(Ae.StackItem,{key:"request-platform"},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"font-14"},"Platform"),u.a.createElement(ee.Text,{id:"source-name",component:ee.TextVariants.p},n?n.platform:" "))),u.a.createElement(Ae.StackItem,{key:"request-requester"},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"font-14"},"Requester "),u.a.createElement(ee.Text,{id:"requester_name",component:ee.TextVariants.p},t.requester_name))),u.a.createElement(Ae.StackItem,{key:"request-order"},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{className:"font-14"},"Order# "),u.a.createElement(ee.Text,{id:"requester_name",component:ee.TextVariants.p},n?n.order_id:""))))))),u.a.createElement(Ae.StackItem,{key:"request-parameters"},u.a.createElement(Ne.Card,null,u.a.createElement(Le.CardHeader,null,u.a.createElement(Ve.Title,{headingLevel:"h5",size:"lg"},"Parameters")),u.a.createElement(Fe.CardBody,null,u.a.createElement(Ie.Stack,{gutter:"md"},n.params&&Object.keys(n.params).map((function(e){return n.params[e]&&u.a.createElement(Ae.StackItem,{key:"request-".concat(n.params[e])},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{key:e,className:"font-14"},"".concat(e)),u.a.createElement(ee.Text,{id:e,component:ee.TextVariants.p},"".concat(n.params[e]))))})))))))};Be.propTypes={request:p.a.shape({requester_name:p.a.string,order_id:p.a.string}).isRequired,requestContent:p.a.object};var Me=Be,Ue=n(2184),Ke=n.n(Ue),Ge=n(2185),He=n.n(Ge),ze=n(2186),Je=n.n(ze),Qe=n(2188),We=n.n(Qe),Xe=n(469),Ye=n.n(Xe),Ze=n(2189),$e=n.n(Ze),et=n(2191),tt=n(69),nt=n(170),at=n.n(nt),rt=n(463),ct=n.n(rt),ot=n(464),it=n.n(ot),lt=n(465),st=n.n(lt),ut=n(168),mt=n.n(ut),pt=n(468),dt=n.n(pt),ft=n(467),bt=n.n(ft),yt=n(165),Et=n.n(yt),ht=n(375),gt={memo:{displayName:"Comment from",icon:u.a.createElement(ct.a,null)},approve:{displayName:"Approved by",icon:u.a.createElement(at.a,{className:"pf-u-mr-sm icon-success-fill"})},deny:{displayName:"Denied by",icon:u.a.createElement(st.a,{className:"pf-u-mr-sm icon-danger-fill"})},notify:{displayName:"Notified by",icon:u.a.createElement(it.a,null)},skip:{displayName:"Skipped by",icon:u.a.createElement(mt.a,null)},start:{displayName:"Started by",icon:u.a.createElement(dt.a,null)},cancel:{displayName:"Canceled by",icon:u.a.createElement(bt.a,{className:"pf-u-mr-sm icon-danger-fill"})},error:{displayName:"Error",icon:u.a.createElement(Et.a,{className:"pf-u-mr-sm icon-danger-fill"})}},vt=function(e){var t=e.actionList;return t?u.a.createElement(Ie.Stack,null,t.map((function(e){return u.a.createElement("div",{key:"".concat(e.id,"-action")},u.a.createElement($.TextContent,null,u.a.createElement(ee.Text,{key:"".concat(e.id,"-action-created_at"),style:{marginBottom:0},className:"data-table-detail content",component:ee.TextVariants.small},Object(w.h)(e.created_at)),u.a.createElement(ee.Text,{key:"".concat(e.id,"-action-operation"),style:{marginBottom:0},className:"data-table-detail content"},(t=e.operation,gt[t]?gt[t].icon:"")," ","".concat(function(e){return gt[e]?gt[e].displayName:""}(e.operation),"  ").concat(e.processed_by)),e.comments&&u.a.createElement(ee.Text,{key:"".concat(e.id,"-action-comments"),style:{marginBottom:0},className:"data-table-detail content",component:ee.TextVariants.h6},"".concat(e.comments))," "),u.a.createElement("br",null));var t}))):u.a.createElement(ht.EmptyTable,{centered:!0,"aria-label":"No records"})},Ot=n(142),qt=n(145),jt=n(147),xt=n(2192),Tt=n(146),wt=n(2193),Pt=n(173),kt=n(172),Ct=n(13),Rt=n(174),St=function(e){var t,n=e.item,a=e.isExpanded,r=e.toggleExpand,c=Object(s.useState)(!1),i=o()(c,2),l=i[0],m=i[1],p=Object(s.useContext)(Te.a).userPersona,d=function(e){m(e)},f=function(){m((function(e){return!e}))},y=function(e,t){return!!Object(w.d)(p)||e.metadata&&e.metadata.user_capabilities&&e.metadata.user_capabilities[t]};return u.a.createElement(Ot.DataListItem,{key:"request-".concat(n.id),"aria-labelledby":"check-request-".concat(n.id),isExpanded:a},u.a.createElement(qt.DataListItemRow,null,u.a.createElement(xt.DataListToggle,{onClick:function(){return r("request-".concat(n.id))},isExpanded:a,id:"request-".concat(n.id),"aria-labelledby":"request-".concat(n.id," request-").concat(n.id),"aria-label":"Toggle details for"}),u.a.createElement(Tt.DataListItemCells,{dataListCells:[u.a.createElement(jt.DataListCell,{key:n.id},u.a.createElement("span",{id:"".concat(n.id,"-name")},"".concat(n.group_name?n.group_name:n.name)," ")),u.a.createElement(jt.DataListCell,{key:"".concat(n.id,"-state")},u.a.createElement("span",{style:{textTransform:"capitalize"},id:"".concat(n.id,"-state")},"".concat(n.state)," ")),u.a.createElement(jt.DataListCell,{key:"".concat(n.id,"-action")},u.a.createElement(Oe.Level,null,u.a.createElement(qe.LevelItem,null,Object(w.f)(n.state)&&y(n,"approve")&&u.a.createElement("div",null,u.a.createElement(ve.Link,{id:"approve-".concat(n.id),to:{pathname:be.a.requests.approve,search:"?request=".concat(n.id)}},u.a.createElement(b.Button,{variant:"link","aria-label":"Approve Request"},"Approve")),u.a.createElement(ve.Link,{id:"deny-".concat(n.id),to:{pathname:be.a.requests.deny,search:"?request=".concat(n.id)}},u.a.createElement(b.Button,{variant:"link",className:"destructive-color","aria-label":"Deny Request"},"Deny")))))),u.a.createElement(jt.DataListCell,{key:"request-".concat(n.id),className:"pf-c-data-list__action","aria-labelledby":"request-".concat(n.id," check-request-action").concat(n.id),id:"workflow-".concat(n.id),"aria-label":"Actions"},Object(w.f)(n.state)&&y(n,"memo")&&(t=n,u.a.createElement(kt.Dropdown,{position:Ct.DropdownPosition.right,onSelect:f,toggle:u.a.createElement(Rt.KebabToggle,{id:"request-request-dropdown-".concat(t.id),onToggle:d}),isOpen:l,dropdownItems:[u.a.createElement(Pt.DropdownItem,{"aria-label":"Add Comment",key:"add_comment_".concat(t.id)},u.a.createElement(ve.Link,{id:"request-".concat(t.id,"-request-comment"),to:{pathname:be.a.requests.addComment,search:"?request=".concat(t.id)},className:"pf-c-dropdown__menu-item"},"Comment"))],isPlain:!0})))]})),u.a.createElement(wt.DataListContent,{"aria-label":"Request Content Details",isHidden:!a},u.a.createElement(Ie.Stack,{gutter:"md"},u.a.createElement(Ae.StackItem,null,u.a.createElement($.TextContent,{component:ee.TextVariants.h6},function(e){return u.a.createElement(vt,{actionList:e.actions})}(n))))))};St.propTypes={isLoading:p.a.bool,item:p.a.shape({id:p.a.string,name:p.a.string,state:p.a.string,group_name:p.a.string.isRequired,requestActions:p.a.shape({data:p.a.array}),metadata:p.a.shape({user_capabilities:p.a.array})}).isRequired,idx:p.a.number,isExpanded:p.a.bool.isRequired,toggleExpand:p.a.func.isRequired,noItems:p.a.string};var Dt=n(32),_t=function(e){function t(){var e,n;Ke()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return n=Je()(this,(e=We()(t)).call.apply(e,[this].concat(r))),l()(Ye()(n),"state",{expanded:[]}),l()(Ye()(n),"toggleExpand",(function(e){return n.setState((function(t){var n=t.expanded,a=n.indexOf(e);return{expanded:a>=0?[].concat(W()(n.slice(0,a)),W()(n.slice(a+1,n.length))):[].concat(W()(n),[e])}}))})),l()(Ye()(n),"isExpanded",(function(e){return n.state.expanded.includes(e)})),n}return $e()(t,e),He()(t,[{key:"render",value:function(){var e=this;return u.a.createElement(s.Fragment,null,u.a.createElement("div",null,this.props.isLoading&&u.a.createElement(s.Fragment,null,u.a.createElement(et.PageHeader,null,u.a.createElement(et.PageHeaderTitle,{title:this.props.noItems})),u.a.createElement(Dt.b,null))),this.props.items.length>0&&u.a.createElement(tt.DataList,{"aria-label":"Expandable data list"},this.props.items.map((function(t,n){return u.a.createElement(St,{key:t.id,item:t,idx:n,isActive:0===n,isExpanded:e.isExpanded("request-".concat(t.id)),toggleExpand:e.toggleExpand})}))))}}]),t}(s.Component);_t.propTypes={isLoading:p.a.bool,items:p.a.array,noItems:p.a.string,active_request:p.a.number},_t.defaultProps={items:[]};var Nt=_t,Ft=function(e){var t=e.request;return u.a.createElement(s.Fragment,null,u.a.createElement(Ve.Title,{size:"sm",style:{paddingLeft:"32px"}}," Request transcript "),u.a.createElement(Nt,{items:t.requests&&t.requests.length>0?t.requests:[t]}))};Ft.propTypes={request:p.a.shape({content:p.a.object,requests:p.a.array}).isRequired};var Lt=Ft,It=n(61);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Vt={isFetching:!0},Bt=function(e,t){switch(t.type){case"setFetching":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isFetching:t.payload});default:return e}},Mt=function(){var e=Object(s.useReducer)(Bt,Vt),t=o()(e,2),n=t[0].isFetching,a=t[1],c=Object(d.useSelector)((function(e){var t=e.requestReducer,n=t.requestContent;return{selectedRequest:t.selectedRequest,requestContent:n}})),i=c.selectedRequest,l=c.requestContent,m=Object(fe.a)(["request"]),p=o()(m,2),b=p[0].request,y=p[1],E=Object(f.l)(),g=Object(d.useDispatch)(),v=Object(s.useContext)(Te.a).userPersona;Object(s.useEffect)((function(){var e,t;Promise.all([g((e=b,t=v,{type:h.g,payload:L(e,t)})),g(M(b))]).then((function(){return a({type:"setFetching",payload:!1})}))}),[]);return u.a.createElement(s.Fragment,null,u.a.createElement(f.d,{exact:!0,path:be.a.requests.addComment,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Add Comment",closeUrl:{pathname:be.a.requests.index,search:y}}))}}),u.a.createElement(f.d,{exact:!0,path:be.a.requests.approve,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Approve",closeUrl:{pathname:be.a.requests.index,search:y}}))}}),u.a.createElement(f.d,{exact:!0,path:be.a.requests.deny,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Deny",closeUrl:{pathname:be.a.requests.index,search:y}}))}}),u.a.createElement(It.a,{breadcrumbs:[{title:"Request queue",to:be.a.requests.index,id:"requests"},{title:"Request ".concat(b),id:b}],paddingBottom:!0},u.a.createElement(It.b,{title:"Request ".concat(b)})),u.a.createElement(_e.Section,{type:"content"},u.a.createElement(Se.Grid,{gutter:"md"},n||!i||0===Object.keys(i).length?u.a.createElement(_e.Section,{style:{backgroundColor:"white",minHeight:"100%"}},u.a.createElement(Dt.c,null)):u.a.createElement(s.Fragment,null,u.a.createElement(De.GridItem,{md:4,lg:3,className:"info-bar"},u.a.createElement(Me,{request:i,requestContent:l})),u.a.createElement(De.GridItem,{md:8,lg:9,className:"detail-pane"},u.a.createElement(Lt,{request:i,url:E.url}))))))},Ut=n(407),Kt=n(371),Gt=n(561),Ht=n(416);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt=[{title:"Name",cellFormatters:[y.b],transforms:[E.a]},{title:"Requester",transforms:[E.a]},{title:"Opened",transforms:[E.a]},{title:"Updated"},{title:"Status",transforms:[E.a]},{title:"Decision",transforms:[E.a]}],Wt=Object(Kt.a)((function(e,t,n,a){n(!0),t(B(e,a)).then((function(){return n(!1)}))}),1e3),Xt={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},Yt=function(e,t){switch(t.type){case"setFetching":return Jt({},e,{isFetching:t.payload});case"setFilterValue":return Jt({},e,{filterValue:t.payload});case"setFilteringFlag":return Jt({},e,{isFiltering:t.payload});default:return e}},Zt=function(){var e=Object(s.useReducer)(Yt,Xt),t=o()(e,2),n=t[0],a=n.filterValue,c=n.isFetching,i=n.isFiltering,l=t[1],m=Object(d.useSelector)((function(e){var t=e.requestReducer;return{requests:t.requests,sortBy:t.sortBy}}),d.shallowEqual),p=m.requests,y=p.data,E=p.meta,g=m.sortBy,v=Object(s.useContext)(Te.a).userPersona,O=Object(d.useDispatch)(),q=Object(f.k)(),j=Object(fe.a)(["request"]),x=o()(j,1)[0].request;Object(s.useEffect)((function(){O(B(a,v)).then((function(){return l({type:"setFetching",payload:!1})})),Object(w.g)()}),[]);var T=function(e){l({type:"setFilterValue",payload:e}),Wt(e,O,(function(e){return l({type:"setFilteringFlag",payload:e})}),v)},P=[{eventKey:0,title:"Request queue",name:"/requests"},{eventKey:1,title:"Approval processes",name:"/workflows"}],k=function(){return u.a.createElement(s.Fragment,null,u.a.createElement(f.d,{exact:!0,path:be.a.requests.addComment,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Add Comment",postMethod:B}))}}),u.a.createElement(f.d,{exact:!0,path:be.a.requests.approve,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Approve",postMethod:B}))}}),u.a.createElement(f.d,{exact:!0,path:be.a.requests.deny,render:function(e){return u.a.createElement(ge,r()({},e,{actionType:"Deny",postMethod:B}))}}))},C=function(e){return e&&e.id&&function(e){return!e||!e.state||(!Object(w.f)(e.state)||e.number_of_children>0||!Object(w.e)(v))}(e)?null:[{title:"Comment",onClick:function(){return q.push({pathname:be.a.requests.addComment,search:"?request=".concat(e.id)})}}]},R=function(e,t){l({type:"setFetching",payload:!0}),O(B(a,v,t)).then((function(){return l({type:"setFetching",payload:!1})})).catch((function(){return l({type:"setFetching",payload:!1})}))},S=function(e,t,n){O(function(e){return{type:h.c,payload:e}}(e)),t((function(t){return n(t,e)}))},D=function(e,t,n,r){var c=r.property;return l({type:"setFetching",payload:!0}),O(function(e){return{type:h.n,payload:e}}({index:t,direction:n,property:c})),O(B(a,v)).then((function(){return l({type:"setFetching",payload:!1})})).catch((function(){return l({type:"setFetching",payload:!1})}))};return x?u.a.createElement(Mt,null):u.a.createElement(s.Fragment,null,u.a.createElement(It.a,null,u.a.createElement(It.b,{title:"Approval"}),Object(w.d)(v)&&u.a.createElement(Ut.a,{tabItems:P})),u.a.createElement(Re.a,{sortBy:g,onSort:D,data:y,createRows:Ce,columns:Qt,fetchData:R,routes:k,actionResolver:C,titlePlural:"requests",titleSingular:"request",pagination:E,handlePagination:R,filterValue:a,onFilterChange:T,isLoading:c||i,onCollapse:S,renderEmptyState:function(){return u.a.createElement(Ht.a,{title:""===a?"No requests":"No results found",Icon:Gt.SearchIcon,PrimaryAction:function(){return""!==a?u.a.createElement(b.Button,{onClick:function(){return T("")},variant:"link"},"Clear all filters"):null},description:""===a?"":"No results match the filter criteria. Remove all filters or clear all filters to show results."})}}))};Zt.propTypes={requests:p.a.array,isLoading:p.a.bool},Zt.defaultProps={requests:[],isLoading:!1};t.default=Zt},360:function(e,t,n){"use strict";t.a={requests:{index:"/requests",addComment:"/requests/add-comment",approve:"/requests/approve",deny:"/requests/deny"},workflows:{index:"/workflows",add:"/workflows/add-workflow",remove:"/workflows/remove",editInfo:"/workflows/edit-info",editGroups:"/workflows/edit-groups",editSequence:"/workflows/edit-sequence"}}},362:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(19);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.l)(),n=t.search,a=new URLSearchParams(n);return[e.reduce((function(e,t){return i({},e,r()({},t,a.get(t)))}),{}),n,a]}},371:function(e,t,n){"use strict";var a=n(387);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(a.a)(e,t,n)}},386:function(e,t,n){},407:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(1),o=n.n(c),i=n(19),l=n(405),s=n(404),u=function(e){var t=e.history.push,n=e.location.pathname,a=e.tabItems,c=a.find((function(e){var t=e.name;return n.includes(t)}));return r.a.createElement(l.Tabs,{className:"pf-u-mt-sm",activeKey:c?c.eventKey:0,onSelect:function(e,n){return t(a[n].name)}},a.map((function(e){return r.a.createElement(s.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};u.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}),history:o.a.shape({push:o.a.func.isRequired}),tabItems:o.a.array.isRequired},t.a=Object(i.o)(u)},416:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(1),o=n.n(c),i=(n(77),n(96)),l=n(105),s=n(97),u=n(462),m=n(21),p=n(41),d=n(375),f=(n(16),function(e){var t=e.title,n=e.Icon,a=e.description,c=e.PrimaryAction,o=e.renderDescription;return r.a.createElement(d.EmptyTable,{centered:!0,"aria-label":"No records"},r.a.createElement(i.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},r.a.createElement(l.EmptyStateIcon,{icon:n}),r.a.createElement(p.TextContent,null,r.a.createElement(m.Text,{component:m.TextVariants.h1},t)),r.a.createElement(s.EmptyStateBody,null,a,o()),r.a.createElement(u.EmptyStateSecondaryActions,null,c&&r.a.createElement(c,null))))});f.defaultProps={renderDescription:function(){return null}},f.propTypes={title:o.a.string.isRequired,Icon:o.a.any.isRequired,description:o.a.string.isRequired,PrimaryAction:o.a.any,renderDescription:o.a.func},t.a=f;o.a.string.isRequired,o.a.string.isRequired},418:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(50),o=n.n(c),i=n(0),l=n.n(i),s=n(1),u=n.n(s),m=n(408),p=n(410),d=n(373),f=n(45),b=n(53),y=n(365),E=n(474),h=n(473),g=n(81),v=n(374),O=n.n(v),q=n(164),j=n.n(q),x=n(366),T=function(e){var t=e.searchValue,n=e.onFilterChange,a=e.placeholder,r=e.isClearable;return l.a.createElement(d.ToolbarItem,null,l.a.createElement("div",{className:"toolbar-filter-input-group"},l.a.createElement(x.TextInput,{placeholder:a,value:t,type:"text",onChange:n,"aria-label":a}),l.a.createElement("span",{className:"filter-icons-container"},r&&t&&l.a.createElement(j.a,{className:"clear-filter",width:"16",height:"16",onClick:function(){return n("")}})||l.a.createElement(O.a,null))))};T.propTypes={onFilterChange:u.a.func.isRequired,placeholder:u.a.string,searchValue:u.a.string,isClearable:u.a.bool},T.defaultProps={searchValue:"",isClearable:!1};var w=T,P=n(375),k=n(32),C=n(82),R=n.n(C),S=n(88),D=n.n(S),_=n(387),N=n(166),F=function(e){var t=e.meta,n=t.limit,a=t.count,r=t.offset,c=e.apiProps,o=e.apiRequest,i=e.className,s=e.isCompact,u=D()(e,["meta","apiProps","apiRequest","className","isCompact"]);return l.a.createElement("div",{className:i},l.a.createElement(N.Pagination,R()({perPage:n||50,itemCount:a||0,onPerPageSelect:function(e,t){return o(c,{offset:r,limit:t})},page:Object(g.b)(n,r),onSetPage:function(e,t,a){var r={offset:Object(g.c)(t,n),limit:n},i=function(){return o(c,r)};return a?Object(_.a)(i,250)():i()},direction:"down",isCompact:s},u)))};F.propTypes={meta:u.a.shape({count:u.a.number,limit:u.a.number.isRequired,offset:u.a.number.isRequired}),apiRequest:u.a.func.isRequired,apiProps:u.a.any,className:u.a.string,isCompact:u.a.bool},F.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1};var L=F,I=function(e){var t=e.children;return l.a.createElement("div",{className:"pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto"},t)};I.propTypes={children:u.a.oneOfType([u.a.node,u.a.arrayOf(u.a.node)])};var A=I;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return M}));var M=function(e){var t=e.isSelectable,n=e.createRows,a=e.columns,r=e.fetchData,c=e.toolbarButtons,s=e.data,u=e.actionResolver,g=e.routes,v=e.titlePlural,O=e.titleSingular,q=e.pagination,j=e.setCheckedItems,x=e.filterValue,T=e.onFilterChange,C=e.isLoading,R=e.onCollapse,S=e.renderEmptyState,D=e.sortBy,_=e.onSort,N=Object(i.useState)([]),F=o()(N,2),I=F[0],V=F[1];Object(i.useEffect)((function(){V(n(s))}),[s]);var M=function(e,t){return e.map((function(e){return e.id===t?B({},e,{isOpen:!e.isOpen}):B({},e)}))},U=function(e,t){var n=e.map((function(e){return e.id===t?B({},e,{selected:!e.selected}):B({},e)})),a=n.filter((function(e){return e.id&&e.selected}));return j(a),n};return l.a.createElement(P.Section,{type:"content","page-type":"tab-".concat(v),id:"tab-".concat(v)},g(),function(e){return l.a.createElement(m.Toolbar,{className:"pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg pf-u-pb-lg top-toolbar"},l.a.createElement(f.Level,{style:{flex:1}},l.a.createElement(b.LevelItem,null,l.a.createElement(m.Toolbar,null,l.a.createElement(w,{onFilterChange:T,searchValue:x,isClearable:!0,placeholder:"Filter by ".concat(O)}),c())),l.a.createElement(b.LevelItem,null,l.a.createElement(m.Toolbar,null,l.a.createElement(p.ToolbarGroup,null,l.a.createElement(d.ToolbarItem,null,l.a.createElement(L,{apiRequest:r,isDisabled:e,meta:q,isCompact:!0})))))))}(C),C&&l.a.createElement(k.b,null),C||0!==I.length?l.a.createElement(i.Fragment,null,!C&&l.a.createElement(y.b,{"aria-label":"".concat(v," table"),onCollapse:function(e,t,n,a){var r=a.id;return R?R(r,V,M):V((function(e){return M(e,r)}))},rows:I,cells:a,onSelect:t&&function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.id;return V(-1===n?I.map((function(e){return B({},e,{selected:t})})):function(e){return U(e,r)})},actionResolver:u,className:"table-fix",sortBy:D,onSort:_},l.a.createElement(E.a,null),l.a.createElement(h.a,null)),q.count>0&&l.a.createElement(A,null,l.a.createElement(L,{dropDirection:"up",meta:q,apiRequest:r}))):S())};M.propTypes={isSelectable:u.a.bool,createRows:u.a.func.isRequired,columns:u.a.array.isRequired,toolbarButtons:u.a.func,fetchData:u.a.func.isRequired,data:u.a.array,pagination:u.a.shape({limit:u.a.number,offset:u.a.number,count:u.a.number}),titlePlural:u.a.string,titleSingular:u.a.string,routes:u.a.func,actionResolver:u.a.func,setCheckedItems:u.a.func,filterValue:u.a.string,onFilterChange:u.a.func,isLoading:u.a.bool,onCollapse:u.a.func,renderEmptyState:u.a.func,sortBy:u.a.object,onSort:u.a.func},M.defaultProps={requests:[],isLoading:!1,pagination:g.a,toolbarButtons:function(){return null},isSelectable:null,routes:function(){return null},renderEmptyState:function(){return null},onSort:function(){return null}}}}]);
//# sourceMappingURL=../sourcemaps/requests.js.map