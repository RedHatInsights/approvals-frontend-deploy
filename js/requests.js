(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{2288:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n(532);t.default=function(){return a.a.createElement(o.a,{persona:c.a,actionsDisabled:function(){return!0}})}},2292:function(e,t,n){"use strict";n.r(t);var r=n(93),a=n.n(r),c=n(0),o=n.n(c),i=n(29),s=n(409),u=n(488),l=n(18),f=n(26),p=n(34),m=n(532),d=n(505),b=n(64),y=n(437),g=n(421),h=n(423),O=n(422),v=n(468),j=n(31),E=n(48),q=function(){var e=Object(c.useContext)(f.a).userRoles,t=Object(l.i)(e);return o.a.createElement(c.Fragment,null,o.a.createElement(b.a,null,o.a.createElement(b.b,{title:"Approval"}),t&&o.a.createElement(y.a,null)),o.a.createElement("div",{className:"pf-u-mt-xl"},o.a.createElement(g.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},o.a.createElement(O.EmptyStateIcon,{icon:d.SearchIcon}),o.a.createElement(E.TextContent,null,o.a.createElement(j.Text,{component:j.TextVariants.h1},"No requests yet")),o.a.createElement(h.EmptyStateBody,null,"Requests that need your attention will appear here.")),o.a.createElement(v.EmptyStateSecondaryActions,null)))};t.default=function(){var e=Object(c.useContext)(f.a).userRoles,t=Object(i.g)(),n=Object(l.i)(e),r=Object(l.j)(e),d=function(e){return!e||!e.state||(!Object(l.f)(e.state)||e.number_of_children>0||!r&&!n)};return r?o.a.createElement(m.a,{routes:function(){return o.a.createElement(c.Fragment,null,o.a.createElement(i.b,{exact:!0,path:p.a.requests.addComment,render:function(e){return o.a.createElement(u.a,a()({},e,{actionType:"Add Comment",postMethod:s.f}))}}),o.a.createElement(i.b,{exact:!0,path:p.a.requests.approve,render:function(e){return o.a.createElement(u.a,a()({},e,{actionType:"Approve",postMethod:s.f}))}}),o.a.createElement(i.b,{exact:!0,path:p.a.requests.deny,render:function(e){return o.a.createElement(u.a,a()({},e,{actionType:"Deny",postMethod:s.f}))}}))},persona:l.b,actionsDisabled:d,actionResolver:function(e){return e&&e.id&&d(e)?null:[{title:"Comment",component:"button",onClick:function(){return t.push({pathname:p.a.requests.addComment,search:"?request=".concat(e.id)})}}]}}):o.a.createElement(q,null)}},399:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(29);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.h)(),n=t.search,r=new URLSearchParams(n);return[e.reduce((function(e,t){return i({},e,a()({},t,r.get(t)))}),{}),n,r]}},403:function(e,t,n){"use strict";var r=n(93),a=n.n(r),c=n(107),o=n.n(c),i=n(3),s=n.n(i),u=n(0),l=n.n(u),f=n(1),p=n.n(f),m=n(445),d=n.n(m),b=n(449),y=n.n(b),g=n(420),h=n.n(g),O=n(94),v=n(59),j=n(100),E=n(102),q=n(31),P=n(48),w=n(391),S=n(395),x=n.n(S),R=function(){var e=(0,x()().getState)().values,t=e.name,n=e.description,r=e.wfGroups;return l.a.createElement(u.Fragment,null,l.a.createElement(j.Stack,{gutter:"md"},l.a.createElement(E.StackItem,null,l.a.createElement(w.Title,{size:"xl"}," Review ")),l.a.createElement(E.StackItem,null,l.a.createElement(j.Stack,{gutter:"md"},l.a.createElement(E.StackItem,null,l.a.createElement(P.TextContent,null,l.a.createElement(q.Text,{className:"data-table-detail heading",component:q.TextVariants.h5},"Review and confirm your inputs. If there is anything incorrect, click Back and revise."))),l.a.createElement(E.StackItem,null,l.a.createElement(O.Grid,{gutter:"md"},l.a.createElement(v.GridItem,{span:2},l.a.createElement(q.Text,{className:"data-table-detail heading",component:q.TextVariants.h5},"Name")),l.a.createElement(v.GridItem,{span:10},l.a.createElement(q.Text,{className:"data-table-detail content",component:q.TextVariants.p},t))),l.a.createElement(O.Grid,{gutter:"md"},l.a.createElement(v.GridItem,{span:2},l.a.createElement(q.Text,{className:"data-table-detail heading",component:q.TextVariants.h5},"Description")),l.a.createElement(v.GridItem,{span:10},l.a.createElement(q.Text,{className:"data-table-detail content",component:q.TextVariants.p},n))),r&&r.length>0&&r.map((function(e,t){return l.a.createElement(u.Fragment,{key:e.value},l.a.createElement(O.Grid,{gutter:"md"},l.a.createElement(v.GridItem,{span:2},l.a.createElement(q.Text,{className:"data-table-detail heading",component:q.TextVariants.h5},0===t?"Groups":"")),l.a.createElement(v.GridItem,{span:10},l.a.createElement(q.Text,{className:"data-table-detail content",component:q.TextVariants.p},e.label))))})))))))};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var T={default:{},modal:{buttonOrder:["cancel","reset","save"],buttonClassName:"modal-form-right-align"}},_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y.a,{summary:R}),D=function(e){var t=e.formContainer,n=o()(e,["formContainer"]);return l.a.createElement("div",{className:T[t].buttonClassName},l.a.createElement(d.a,a()({componentMapper:_,FormTemplate:function(e){return l.a.createElement(h.a,a()({},e,T[t]))}},n)))};D.propTypes={formContainer:p.a.oneOf(["default","modal"])},D.defaultProps={formContainer:"default"};t.a=D},409:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return d}));var r=n(7),a=n(436),c=n(95),o=function(e,t){return function(n,o){var i=o().requestReducer,s=i.sortBy,u=i.requests,l=i.filterValue,f=t||c.a;if(!t&&u){var p=u.meta;f={limit:p.limit,offset:p.offset}}return n({type:r.i,payload:a.d(l,f,e,s)})}},i=function(e,t){return{type:r.h,payload:a.c(e,t)}},s=function(e,t){return{type:r.j,payload:a.b(e,t)}},u=function(e,t,n){return{type:r.c,payload:a.a(t,n),meta:{notifications:{fulfilled:{variant:"success",title:"Success",description:"The ".concat(e," was successful.")},rejected:{variant:"danger",title:"".concat(e," error"),description:"The ".concat(e," action failed.")}}}}},l=function(e){return{type:r.d,payload:e}},f=function(e){return{type:r.r,payload:e}},p=function(e,t){return{type:r.p,payload:{filterValue:e,type:t}}},m=function(){return{type:r.b}},d=function(){return{type:r.o}}},424:function(e,t,n){"use strict";var r=n(533);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,n)}},436:function(e,t,n){"use strict";n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return q})),n.d(t,"a",(function(){return w}));var r=n(45),a=n.n(r),c=n(3),o=n.n(c),i=n(70),s=n.n(i),u=n(106),l=n(43),f=n(95),p=n(18);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=Object(u.a)(),y=Object(u.c)(),g=function(e){return{"request-id":"id",opened:"created_at",requester:"requester_name",status:"state"}[e]||e},h=function(e){var t=[];return e.name&&t.push("filter[name][contains_i]=".concat(e.name)),e.requester&&t.push("filter[requester_name][contains_i]=".concat(e.requester)),e.status&&e.status.forEach((function(e){t.push("filter[state][eq][]=".concat(e))})),e.decision&&e.decision.forEach((function(e){t.push("filter[decision][eq][]=".concat(e))})),t.join("&")};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a="&limit=".concat(Math.max(t.limit,10),"&offset=").concat(t.offset),c="&sort_by=".concat(g(r.property),":").concat(r.direction),o="".concat(l.a,"/requests/?").concat(h(e)).concat(a).concat(c),i=n?{"x-rh-persona":n}:void 0;return Object(u.b)()({method:"get",url:o,headers:i})}var v=function(e,t){var n,r=t&&t!==p.b?{"x-rh-persona":t}:{"x-rh-persona":p.c};return y({method:"post",url:"".concat(l.a,"/graphql"),headers:r,data:{query:(n=e,'query {\n  requests(id: "'.concat(n,'") {\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    state\n    actions {\n      id\n      operation\n      comments\n      created_at\n      processed_by\n    }\n    requests {\n      id\n      name\n      number_of_children\n      decision\n      description\n      group_name\n      number_of_finished_children\n      state\n      workflow_id\n      parent_id\n      actions {\n        id\n        operation\n        comments\n        created_at\n        processed_by\n      }\n    }\n  }\n}'))}}).then((function(e){return e.data.requests}))},j=function(e){var t="".concat(l.a,"/requests/").concat(e,"/content"),n={"x-rh-persona":p.c};return Object(u.b)()({method:"get",url:t,headers:n})},E=function(e,t){var n="".concat(l.a,"/requests/").concat(e).concat(t?"/requests":""),r={"x-rh-persona":p.c};return Object(u.b)()({method:"get",url:n,headers:r})};function q(e,t){return P.apply(this,arguments)}function P(){return(P=s()(a.a.mark((function e(t,n){var r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,n);case 2:if((r=e.sent)&&0!==r.length){e.next=5;break}return e.abrupt("return",{});case 5:if(n!==p.b){e.next=17;break}if(!(r&&r.length>0&&r[0].number_of_children>0)){e.next=13;break}return e.next=9,E(t,!0);case 9:(c=e.sent)&&c.data&&(r[0].requests=r[0].requests.map((function(e){return d({},c.data.find((function(t){return t.id===e.id&&t.metadata})),{},e)}))),e.next=17;break;case 13:return e.next=15,E(t,!1);case 15:(o=e.sent)&&(r[0]=d({},r[0],{metadata:o.metadata}));case 17:return e.abrupt("return",r[0]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t){return b.createAction(e,t)}},437:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n.n(r),c=n(1),o=n.n(c),i=n(29),s=n(430),u=n(429),l=[{eventKey:0,title:"Request queue",name:"/requests"},{eventKey:1,title:"All requests",name:"/allrequests"},{eventKey:2,title:"Approval processes",name:"/workflows"}],f=function(e){var t=e.tabItems,n=void 0===t?l:t,r=Object(i.g)(),c=Object(i.h)(),o=c.pathname,f=c.search,p=n.find((function(e){var t=e.name;return o.includes(t)}));return a.a.createElement(s.Tabs,{className:"pf-u-mt-sm",activeKey:p?p.eventKey:0,onSelect:function(e,t){return r.push({pathname:n[t].name,search:f})}},n.map((function(e){return a.a.createElement(u.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};f.propTypes={tabItems:o.a.array}},480:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(93),a=n.n(r),c=n(25),o=n.n(c),i=n(3),s=n.n(i),u=n(39),l=n.n(u),f=n(0),p=n.n(f),m=n(1),d=n.n(m),b=n(410),y=n(534),g=n(531),h=n(95),O=n(41),v=n(2287),j=n(112),E=n(522);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.isSelectable,n=e.createRows,r=e.columns,c=e.fetchData,i=e.toolbarButtons,s=e.data,u=e.actionResolver,m=e.routes,d=e.titlePlural,q=e.titleSingular,w=e.pagination,S=e.setCheckedItems,x=e.filterValue,R=e.onFilterChange,C=e.isLoading,T=e.onCollapse,_=e.renderEmptyState,D=e.sortBy,k=e.onSort,F=e.activeFiltersConfig,N=e.filterConfig,V=Object(v.a)(),M=Object(f.useState)([]),I=l()(M,2),A=I[0],B=I[1];Object(f.useEffect)((function(){B(n(s))}),[s]);var L=function(e,t){return e.map((function(e){return e.id===t?P({},e,{isOpen:!e.isOpen}):P({},e)}))},G={itemCount:w.count,page:Object(h.b)(w.limit,w.offset),perPage:w.limit,onSetPage:function(e,t){return c(P({},w,{offset:Object(h.c)(t,w.limit)}))},onPerPageSelect:function(e,t){return c(P({},w,{limit:t}))},isDisabled:C};return p.a.createElement(j.Section,{type:"content","page-type":"tab-".concat(d),id:"tab-".concat(d)},m(),p.a.createElement(E.PrimaryToolbar,a()({className:"pf-u-p-lg ins__approval__primary_toolbar",pagination:G},i&&{actionsConfig:{actions:[i()]}},{filterConfig:{items:[{label:V.formatMessage({id:"name",defaultMessage:"Name"}),filterValues:{id:"filter-by-name",placeholder:V.formatMessage({id:"filter-by-name",defaultMessage:"Filter by {title}"},{title:q}),"aria-label":V.formatMessage({id:"filter-by-name",defaultMessage:"Filter by {title}"},{title:q}),onChange:function(e,t){return R(t)},value:x}}].concat(o()(N))},activeFiltersConfig:F})),C&&p.a.createElement(O.b,null),C||0!==A.length?p.a.createElement(f.Fragment,null,!C&&p.a.createElement(b.b,{"aria-label":"".concat(d," table"),onCollapse:function(e,t,n,r){var a=r.id;return T?T(a,B,L):B(L(A,a))},rows:A,cells:r,onSelect:t&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.id,c=A.map((function(e){return e.id===a||-1===n?P({},e,{selected:-1===n?t:!e.selected}):P({},e)})),o=c.filter((function(e){return e.id&&e.selected}));return S(o),B(c)},actionResolver:u,className:"table-fix",sortBy:D,onSort:k},p.a.createElement(y.a,null),p.a.createElement(g.a,null)),w.count>0&&p.a.createElement(E.PrimaryToolbar,{className:"pf-u-pl-lg pf-u-pr-lg ins__approval__primary_toolbar",pagination:P({},G,{dropDirection:"up",variant:"bottom",isCompact:!1})})):_())};w.propTypes={isSelectable:d.a.bool,createRows:d.a.func.isRequired,columns:d.a.array.isRequired,toolbarButtons:d.a.func,fetchData:d.a.func.isRequired,data:d.a.array,pagination:d.a.shape({limit:d.a.number,offset:d.a.number,count:d.a.number}),titlePlural:d.a.string,titleSingular:d.a.string,routes:d.a.func,actionResolver:d.a.func,setCheckedItems:d.a.func,filterValue:d.a.string,onFilterChange:d.a.func,isLoading:d.a.bool,onCollapse:d.a.func,renderEmptyState:d.a.func,sortBy:d.a.object,onSort:d.a.func,activeFiltersConfig:d.a.object,filterConfig:d.a.array},w.defaultProps={requests:[],isLoading:!1,pagination:h.a,isSelectable:null,routes:function(){return null},renderEmptyState:function(){return null},filterConfig:[]}},485:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1),o=n.n(c),i=n(421),s=n(422),u=n(423),l=n(468),f=n(31),p=n(48),m=n(486),d=function(e){var t=e.title,n=e.Icon,r=e.description,c=e.PrimaryAction,o=e.renderDescription;return a.a.createElement(m.EmptyTable,{centered:!0,"aria-label":"No records"},a.a.createElement(i.EmptyState,{className:"pf-u-ml-auto pf-u-mr-auto"},a.a.createElement(s.EmptyStateIcon,{icon:n}),a.a.createElement(p.TextContent,null,a.a.createElement(f.Text,{component:f.TextVariants.h1},t)),a.a.createElement(u.EmptyStateBody,null,r,o&&o()),a.a.createElement(l.EmptyStateSecondaryActions,null,c&&a.a.createElement(c,null))))};d.propTypes={title:o.a.string.isRequired,Icon:o.a.any.isRequired,description:o.a.string.isRequired,PrimaryAction:o.a.any,renderDescription:o.a.func},t.a=d},488:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(39),o=n.n(c),i=n(0),s=n.n(i),u=n(1),l=n.n(u),f=n(403),p=n(29),m=n(49),d=n(103),b=n(412),y=n(98),g=n(409),h=n(396),O=n.n(h),v=n(405),j=n.n(v);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{fields:[q({component:O.a.TEXTAREA,name:"comments",isRequired:e,label:e?"Reason":"Comment"},e&&{validate:[{type:j.a.REQUIRED}]})]}},w=n(399),S=n(34);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.actionType,n=e.addNotification,r=e.createRequestAction,a=e.closeUrl,c=e.postMethod,i=Object(p.g)().push,u=Object(w.a)(["request"]),l=o()(u,1)[0].request,m=function(){var e="Add Comment"===t?t:"".concat(t," Request");n({variant:"warning",title:e,dismissable:!0,description:"".concat(e," was cancelled by the user.")}),i(a)};return s.a.createElement(b.Modal,{isLarge:!0,title:"Add Comment"===t?"Request #".concat(l):"".concat(t," Request #").concat(l),isOpen:!0,onClose:m},s.a.createElement(f.a,{schema:P("Deny"===t),onSubmit:function(e){var n={"Add Comment":"memo",Approve:"approve",Deny:"deny"},o="Add Comment"===t?t:"".concat(t," Request");return c?r(o,l,R({operation:n[t]},e)).then((function(){return c()})).then((function(){return i(a)})):r(o,l,R({operation:n[t]},e)).then((function(){return i(a)}))},onCancel:m,formContainer:"modal"}))};C.defaultProps={closeUrl:S.a.requests.index},C.propTypes={addNotification:l.a.func.isRequired,createRequestAction:l.a.func.isRequired,postMethod:l.a.func,actionType:l.a.string,closeUrl:l.a.oneOfType([l.a.string,l.a.shape({patname:l.a.string,search:l.a.string})])};t.a=Object(m.connect)(null,(function(e){return Object(d.a)({addNotification:y.addNotification,createRequestAction:g.b},e)}))(C)},532:function(e,t,n){"use strict";var r=n(39),a=n.n(r),c=n(3),o=n.n(c),i=n(0),s=n.n(i),u=n(1),l=n.n(u),f=n(49),p=n(92),m=n(438),d=n(515),b=n(520),y=n(521),g=n(2287),h=n(505),O=n(2227),v=n.n(O),j=n(409),E=n(25),q=n.n(E),P=n(32),w=n(48),S=n(31),x=n(53),R=n(69),C=n(418),T=n(527),_=n(18),D=n(436),k=n(26),F=n(34),N=function(e){var t=e.title,n=void 0===t?"":t,r=e.detail,a=void 0===r?"":r;return s.a.createElement(w.TextContent,null,s.a.createElement(S.Text,{className:"data-table-detail heading",component:S.TextVariants.small},n),s.a.createElement(S.Text,{className:"data-table-detail content",component:S.TextVariants.h5},a))};N.propTypes={title:l.a.node,detail:l.a.node};var V=function(e){var t=e.id,n=e.number_of_children,r=e.state,c=e.reason,o=Object(_.f)(r)&&!n,u=Object(i.useState)([]),l=a()(u,2),m=l[0],d=l[1],b=Object(i.useState)(!0),y=a()(b,2),g=y[0],h=y[1],O=Object(i.useState)(!1),v=a()(O,2),j=v[0],E=v[1],q=Object(i.useContext)(k.a).userRoles,w=Object(f.useSelector)((function(e){return e.requestReducer.expandedRequests})),S=Object(_.i)(q),V=Object(_.j)(q);return Object(i.useEffect)((function(){!j&&g&&w.includes(t)&&(E(!0),Object(D.b)(t).then((function(e){d(e),h(!1)})).catch((function(){return h(!1)})))}),[w]),g?s.a.createElement(C.Bullseye,null,s.a.createElement(T.Spinner,null)):s.a.createElement(i.Fragment,null,s.a.createElement(x.Level,null,s.a.createElement(R.LevelItem,null,s.a.createElement(N,{title:"Product",detail:m?m.product:"Unknown"})),o&&(V||S)&&s.a.createElement(R.LevelItem,null,s.a.createElement(P.b,{to:{pathname:F.a.requests.approve,search:"request=".concat(t)},className:"pf-u-mr-md"},s.a.createElement(p.Button,{variant:"primary","aria-label":"Approve Request",isDisabled:!o},"Approve")),s.a.createElement(P.b,{to:{pathname:F.a.requests.deny,search:"request=".concat(t)}},s.a.createElement(p.Button,{variant:"danger","aria-label":"Deny Request"},"Deny")))),s.a.createElement(x.Level,null,s.a.createElement(R.LevelItem,null,s.a.createElement(N,{title:"Portfolio",detail:m?m.portfolio:"Unknown"}),s.a.createElement(N,{title:"Platform",detail:m?m.platform:"Unknown"}),s.a.createElement(N,{title:"Reason",detail:c||""}))))};V.propTypes={id:l.a.string,content:l.a.object,number_of_children:l.a.number,uname:l.a.string,state:l.a.string,reason:l.a.string};var M=V,I=n(43),A=function(e){return I.c[e]?I.c[e].icon:""},B=function(e){return I.c[e]?I.c[e].displayName:""},L=function(e){return e.reduce((function(e,t,n){var r=t.id,a=t.name,c=t.requester_name,o=t.created_at,u=t.notified_at,l=t.finished_at,f=t.state,p=t.decision,m=t.reason,d=t.number_of_children;return[].concat(q()(e),[{id:r,isOpen:!1,state:f,number_of_children:d,cells:[s.a.createElement(i.Fragment,{key:r},s.a.createElement(P.b,{to:{pathname:F.a.request.index,search:"?request=".concat(r)}},r)),a,c,Object(_.h)(o),l?Object(_.h)(l):u?Object(_.h)(u):Object(_.h)(o),f,s.a.createElement(i.Fragment,{key:"decision-".concat(r)},s.a.createElement(S.Text,{key:"".concat(p,"-$(id}"),style:{marginBottom:0},className:"data-table-detail content"},A(p)," ","".concat(B(p))))]},{parent:2*n,fullWidth:!0,cells:[{title:s.a.createElement(M,{id:r,number_of_children:d,state:f,reason:m})}]}])}),[])},G=n(480),U=n(64),K=n(437),J=n(424),z=n(485),Q=function(e){var t=e.name,n=e.requester,r=e.status,a=e.decision;return[].concat(q()(t?[{category:"Name",key:"name",chips:[{name:t,value:t}]}]:[]),q()(n?[{category:"Requester",key:"requester",chips:[{name:n,value:n}]}]:[]),q()(r&&r.length>0?[{category:"Status",key:"status",chips:r.map((function(e){return{name:e,value:e}}))}]:[]),q()(a&&a.length>0?[{category:"Decision",key:"decision",chips:a.map((function(e){return{name:e,value:e}}))}]:[]))};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=[{title:"Request ID",cellFormatters:[m.b],transforms:[d.a,Object(b.a)(5)]},{title:"Name",transforms:[d.a,y.a,Object(b.a)(25)]},{title:"Requester",transforms:[d.a,y.a,Object(b.a)(20)]},{title:"Opened   ",transforms:[d.a,Object(b.a)(10)]},{title:"Updated  ",transforms:[Object(b.a)(10)]},{title:"Status   ",transforms:[d.a,Object(b.a)(15)]},{title:"Decision ",transforms:[d.a,Object(b.a)(15)]}],H=Object(J.a)((function(e,t,n,r){return t(!0),r&&r(),e(Object(j.f)(n)).then((function(){return t(!1)}))}),1e3),Y=function(e,t){switch(t.type){case"setFetching":return X({},e,{isFetching:t.payload});case"setNameValue":return X({},e,{nameValue:t.payload});case"setRequesterValue":return X({},e,{requesterValue:t.payload});case"clearFilters":return X({},e,{requesterValue:"",nameValue:"",isFetching:!0});case"setFilteringFlag":return X({},e,{isFiltering:t.payload});default:return e}},Z=function(e){var t=e.routes,n=e.persona,r=e.actionResolver,c=Object(f.useSelector)((function(e){var t=e.requestReducer;return{requests:t.requests,sortBy:t.sortBy,filterValue:t.filterValue}}),f.shallowEqual),o=c.requests,u=o.data,l=o.meta,m=c.sortBy,d=c.filterValue,b=Object(i.useReducer)(Y,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{nameValue:e,requesterValue:t,isOpen:!1,isFetching:!0,isFiltering:!1}}(d.name,d.requester)),y=a()(b,2),O=y[0],E=O.nameValue,q=O.isFetching,P=O.isFiltering,w=O.requesterValue,S=y[1],x=Object(i.useContext)(k.a).userRoles,R=Object(f.useDispatch)(),C=Object(g.a)(),T=Object(_.i)(x),D=Object(_.j)(x),F=function(e){if(D||n!==_.b)return S({type:"setFetching",payload:!0}),R(Object(j.f)(n,e)).then((function(){return S({type:"setFetching",payload:!1})})).catch((function(){return S({type:"setFetching",payload:!1})}));S({type:"setFetching",payload:!1})};Object(i.useEffect)((function(){R(Object(j.g)()),F(),Object(_.g)()}),[n]);var N=function(e,t){var r=!1;return"name"===t?(S({type:"setNameValue",payload:e}),r=!0):"requester"===t&&(S({type:"setRequesterValue",payload:e}),r=!0),r||R(Object(j.h)(e,t)),H(R,(function(e){return S({type:"setFilteringFlag",payload:e})}),n,r&&function(){return R(Object(j.h)(e,t))})},V=function(){return S({type:"clearFilters"}),R(Object(j.a)()),F()};return s.a.createElement(i.Fragment,null,s.a.createElement(U.a,null,s.a.createElement(U.b,{title:"Approval"}),T&&s.a.createElement(K.a,null)),s.a.createElement(G.a,{sortBy:m,onSort:function(e,t,n,r){var a=r.property;return S({type:"setFetching",payload:!0}),R(Object(j.i)({index:t,direction:n,property:a})),F()},data:u,createRows:L,columns:$,fetchData:F,routes:t,actionResolver:r,titlePlural:"requests",titleSingular:"request",pagination:l,handlePagination:F,filterValue:E,onFilterChange:function(e){return N(e,"name")},isLoading:q||P,onCollapse:function(e,t,n){R(Object(j.c)(e)),t((function(t){return n(t,e)}))},renderEmptyState:function(){return s.a.createElement(z.a,{title:v()(d)?"No requests":"No results found",Icon:h.SearchIcon,PrimaryAction:function(){return v()(d)?null:s.a.createElement(p.Button,{onClick:V,variant:"link"},"Clear all filters")},description:v()(d)?"":"No results match the filter criteria. Remove all filters or clear all filters to show results."})},activeFiltersConfig:{filters:Q({name:E,requester:w,status:d.status,decision:d.decision}),onDelete:function(e,t,n){return n?V():(r=t,c=a()(r,1)[0],o=c.key,i=a()(c.chips,1)[0].value,s=["name","requester"].includes(o)?"":d[o].filter((function(e){return i!==e})),void N(s,o));var r,c,o,i,s}},filterConfig:[{label:C.formatMessage({id:"requester",defaultMessage:"Requester"}),filterValues:{placeholder:C.formatMessage({id:"filter-by-requester",defaultMessage:"Filter by requester"}),"aria-label":C.formatMessage({id:"filter-by-requester",defaultMessage:"Filter by requester"}),onChange:function(e,t){return N(t,"requester")},value:w}},{label:C.formatMessage({id:"status",defaultMessage:"Status"}),type:"checkbox",filterValues:{placeholder:C.formatMessage({id:"filter-by-status",defaultMessage:"Filter by status"}),"aria-label":C.formatMessage({id:"filter-by-status",defaultMessage:"Filter by status"}),onChange:function(e,t){return N(t,"status")},value:d.status,items:["canceled","completed","failed","notified","pending","skipped","started"].map((function(e){return{label:e,value:e}}))}},{label:C.formatMessage({id:"decision",defaultMessage:"Decision"}),type:"checkbox",filterValues:{placeholder:C.formatMessage({id:"filter-by-decision",defaultMessage:"Filter by decision"}),"aria-label":C.formatMessage({id:"filter-by-decision",defaultMessage:"Filter by decision"}),onChange:function(e,t){return N(t,"decision")},value:d.decision,items:["approved","canceled","denied","error","undecided"].map((function(e){return{label:e,value:e}}))}}]}))};Z.propTypes={routes:l.a.func,actionResolver:l.a.func,persona:l.a.string};t.a=Z}}]);
//# sourceMappingURL=../sourcemaps/requests.js.map