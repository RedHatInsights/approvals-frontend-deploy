(self.webpackChunkapproval=self.webpackChunkapproval||[]).push([[216],{96733:(e,t,r)=>{"use strict";t.Z1={name:"CubesIcon",height:512,width:512,svgPath:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z",yOffset:0,xOffset:0},t.TF=r(35183).createIcon(t.Z1),t.ZP=t.TF},31004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(86244).defineMessages)({name:{id:"tableToolbar.name",defaultMessage:"Name"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},clearAllFilters:{id:"tableToolbar.clearAllFilters",defaultMessage:"Clear all filters"},clearAllFiltersDescription:{id:"tableToolbar.clearAllFiltersDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},ariaLabel:{id:"tableToolbar.ariaLabel",defaultMessage:"{title} table"}})},51403:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(30624),a=r.n(n),l=r(45697),i=r.n(l),s=r(92223),o=r(219),u=r(86728),c=r(74183),m=r(97446),f=r(63540),p=r(20018),d=function(e){var t=e.title,r=e.icon,n=e.description,l=e.PrimaryAction,i=e.renderDescription;return a().createElement(o.ub,{className:"pf-u-ml-auto pf-u-mr-auto"},a().createElement(u.k,{icon:r}),a().createElement(p.TextContent,null,a().createElement(f.Text,{component:f.TextVariants.h1},t)),a().createElement(c.B,null,n,i&&i()),a().createElement(m.i,null,l&&a().createElement(l,null)))};d.propTypes={title:i().string.isRequired,icon:i().any.isRequired,isSearch:i().bool,description:i().string.isRequired,PrimaryAction:i().any,renderDescription:i().func};const g=d;var y=function(e){var t=e.title,r=e.icon,n=e.isSearch,l=e.description,i=e.PrimaryAction,o=e.renderDescription;return n?a().createElement(s.Z,{centered:!0,"aria-label":"No records"},a().createElement(g,{title:t,icon:r,description:l,PrimaryAction:i,renderDescription:o})):a().createElement(g,{title:t,icon:r,description:l,PrimaryAction:i,renderDescription:o})};y.propTypes={title:i().string.isRequired,icon:i().any.isRequired,isSearch:i().bool,description:i().string.isRequired,PrimaryAction:i().any,renderDescription:i().func};const v=y},30060:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var n=r(87462),a=r(93433),l=r(4942),i=r(30624),s=r.n(i),o=r(45697),u=r.n(o),c=r(41436),m=r(61338),f=r(76690),p=r(86896),d=r(54213),g=r(40227),y=r(31004);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){var t,r=e.columns,l=e.fetchData,o=e.toolbarButtons,u=e.actionResolver,v=e.routes,b=e.titlePlural,Z=e.titleSingular,E=e.pagination,q=e.filterValue,M=e.onFilterChange,C=e.isLoading,F=e.renderEmptyState,O=e.sortBy,R=e.onSort,P=e.activeFiltersConfig,T=e.filterConfig,w=e.rows,j=e.ouiaId,S=(0,p.Z)(),D={itemCount:E.count,page:(0,m.FZ)(E.limit,E.offset),perPage:E.limit,onSetPage:function(e,t){return l(h(h({},E),{},{offset:(0,m.SJ)(t,E.limit)}))},onPerPageSelect:function(e,t){return l(h(h({},E),{},{limit:t}))},isDisabled:C};return s().createElement(d.Z,{type:"content","page-type":"tab-".concat(b),id:"tab-".concat(b)},v(),(0!==w.length||(null==P||null===(t=P.filters)||void 0===t?void 0:t.length)>0)&&s().createElement(g.Z,(0,n.Z)({className:"pf-u-p-lg ins__approval__primary_toolbar",pagination:D},o&&{actionsConfig:{dropdownProps:{position:"right"},actions:[o()]}},{filterConfig:{items:[{label:S.formatMessage(y.Z.name),filterValues:{id:"filter-by-name",placeholder:S.formatMessage(y.Z.filterByTitle,{title:Z}),"aria-label":S.formatMessage(y.Z.filterByTitle,{title:Z}),onChange:function(e,t){return M(t)},value:q}}].concat((0,a.Z)(T))},activeFiltersConfig:P})),C&&s().createElement(f.Eo,null),C||0!==w.length?s().createElement(i.Fragment,null,!C&&s().createElement(c.Table,{"aria-label":S.formatMessage(y.Z.ariaLabel,{title:b}),rows:w,cells:r,actionResolver:u,className:"pf-u-pt-0 vertical-align-inherit",sortBy:O,onSort:R,ouiaId:j},s().createElement(c.TableHeader,null),s().createElement(c.TableBody,null)),E.count>0&&s().createElement(g.Z,{className:"pf-u-pl-lg pf-u-pr-lg ins__approval__primary_toolbar",pagination:h(h({},D),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"pf-u-pr-0"})})):F())};b.propTypes={columns:u().array.isRequired,toolbarButtons:u().func,fetchData:u().func.isRequired,pagination:u().shape({limit:u().number,offset:u().number,count:u().number}),titlePlural:u().string,titleSingular:u().string,routes:u().func,actionResolver:u().func,filterValue:u().string,onFilterChange:u().func,isLoading:u().bool,renderEmptyState:u().func,sortBy:u().object,onSort:u().func,activeFiltersConfig:u().object,filterConfig:u().array,rows:u().array,ouiaId:u().string},b.defaultProps={requests:[],isLoading:!1,pagination:m.he,routes:function(){return null},renderEmptyState:function(){return null},filterConfig:[]}},12824:(e,t,r)=>{"use strict";r.d(t,{H:()=>d});var n=r(30624),a=r.n(n),l=r(45697),i=r.n(l),s=r(334),o=r(98378),u=r(82819),c=r(18061),m=r(49214),f=r(86896),p=[{eventKey:0,message:m.Z.myRequests,name:"/requests"},{eventKey:1,message:m.Z.allRequests,name:"/allrequests"},{eventKey:2,message:m.Z.approvalProccess,name:"/workflows"}],d=function(e){var t=e.tabItems,r=void 0===t?p:t,n=(0,f.Z)(),l=(0,s.useHistory)(),i=(0,s.useLocation)(),m=i.pathname,d=i.search,g=r.find((function(e){var t=e.name;return m.includes(t)}));return a().createElement(o.mQ,{className:"pf-u-mt-sm",activeKey:g?g.eventKey:0,onSelect:function(e,t){return l.push({pathname:r[t].name,search:d})}},r.map((function(e){return a().createElement(u.O,{title:a().createElement(c.T,null,n.formatMessage(e.message)),key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};d.propTypes={tabItems:i().array}},8307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(30624),a=r.n(n),l=r(11107),i=r(69739),s=r(50409);const o=function(){return a().createElement(i.Z,{persona:l.Fr,indexpath:s.Z.allrequest})}},69739:(e,t,r)=>{"use strict";r.d(t,{Z:()=>z});var n=r(87462),a=r(29439),l=r(4942),i=r(30624),s=r.n(i),o=r(45697),u=r.n(o),c=r(37703),m=r(6202),f=r(41436),p=r(86896),d=r(96733),g=r(48794),y=r(41609),v=r.n(y),h=r(38106),b=r(93433),Z=r(334),E=r(11107),q=r(50409),M=r(23218),C=r(84866),F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q.Z.request,n=arguments.length>3?arguments[3]:void 0;return t.reduce((function(t,a){var l,o,u;return[].concat((0,b.Z)(t),[{id:a.id,state:a.state,number_of_children:a.number_of_children,cells:[s().createElement(i.Fragment,{key:a.id},s().createElement(Z.Link,{to:{pathname:r.index,search:"?request=".concat(a.id)}},a.id)),a.name,a.requester_name,a.finished_at?(0,E.Sy)(a.finished_at):a.notified_at?(0,E.Sy)(a.notified_at):(0,E.Sy)(a.created_at),s().createElement(i.Fragment,{key:"decision-".concat(a.id)},e(a)||s().createElement(M._,{variant:"outline",icon:null===(l=C.Oj[a.decision])||void 0===l?void 0:l.icon,color:null===(o=C.Oj[a.decision])||void 0===o?void 0:o.color},F(n.formatMessage((null===(u=C.Oj[a.decision])||void 0===u?void 0:u.displayName)||(0,C.ZC)()))))]}])}),[])},R=r(30060),P=r(37412),T=r(12824),w=r(57666),j=r(51403),S=r(5469),D=r(31004),V=r(27121),k=function(e,t){var r=e.name,n=e.requester,a=e.decision;return[].concat((0,b.Z)(r?[{category:t.formatMessage(D.Z.name),key:"name",chips:[{name:r,value:r}]}]:[]),(0,b.Z)(n?[{category:t.formatMessage(V.Z.requesterColumn),key:"requester",chips:[{name:n,value:n}]}]:[]),(0,b.Z)(a&&a.length>0?[{category:t.formatMessage(V.Z.statusColumn),key:"decision",chips:a.map((function(e){return{name:e,value:e}}))}]:[]))},x=r(7248),_=r(42026);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(e){return[{title:e.formatMessage(V.Z.requestsIdColumn),transforms:[f.sortable,(0,f.cellWidth)(10)]},{title:e.formatMessage(D.Z.name),transforms:[f.sortable,f.wrappable,(0,f.cellWidth)(25)],cellTransforms:[f.breakWord]},{title:e.formatMessage(V.Z.requesterColumn),transforms:[f.sortable,f.wrappable,(0,f.cellWidth)(25)]},{title:e.formatMessage(V.Z.updatedColumn),transforms:[(0,f.cellWidth)(15)]},{title:e.formatMessage(V.Z.statusColumn),transforms:[f.sortable,(0,f.cellWidth)(25)]}]},N=(0,w.Z)((function(e,t,r,n){return t(!0),n&&n(),e((0,h.po)(r)).then((function(){return t(!1)}))}),1e3),I=function(e,t){switch(t.type){case"setFetching":return B(B({},e),{},{isFetching:t.payload});case"setNameValue":return B(B({},e),{},{nameValue:t.payload});case"setRequesterValue":return B(B({},e),{},{requesterValue:t.payload});case"clearFilters":return B(B({},e),{},{requesterValue:"",nameValue:"",isFetching:!0});case"setFilteringFlag":return B(B({},e),{},{isFiltering:t.payload});case"setRows":return B(B({},e),{},{rows:t.payload});default:return e}},K=function(e){var t=e.persona,r=e.indexpath,l=e.actionResolver,o=(0,c.v9)((function(e){var t=e.requestReducer;return{requests:t.requests,sortBy:t.sortBy,filterValue:t.filterValue}}),c.wU),u=o.requests,f=u.data,y=u.meta,b=o.sortBy,M=o.filterValue,C=(0,i.useReducer)(I,function(){return{nameValue:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",requesterValue:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isOpen:!1,isFetching:!0,isFiltering:!1,rows:[]}}(M.name,M.requester)),F=(0,a.Z)(C,2),w=F[0],L=w.nameValue,B=w.isFetching,K=w.isFiltering,z=w.requesterValue,W=w.rows,H=F[1],Q=(0,i.useContext)(S.Z).userRoles,U=(0,c.I0)(),G=(0,p.Z)(),J=(0,E.wM)(Q),X=(0,E.LL)(Q),Y=function(e){if(X||t!==E.pS)return H({type:"setFetching",payload:!0}),U((0,h.po)(t,e)).then((function(){return H({type:"setFetching",payload:!1})})).catch((function(){return H({type:"setFetching",payload:!1})}));H({type:"setFetching",payload:!1})};(0,i.useEffect)((function(){H({type:"clearFilters"}),U((0,h.Ox)()),U((0,h.ex)()),Y()}),[t]),(0,i.useEffect)((function(){H({type:"setRows",payload:O(l,f,r,G)})}),[f]);var $=function(e,r){var n=!1;return"name"===r?(H({type:"setNameValue",payload:e}),n=!0):"requester"===r&&(H({type:"setRequesterValue",payload:e}),n=!0),n||U((0,h.fs)(e,r)),N(U,(function(e){return H({type:"setFilteringFlag",payload:e})}),t,n&&function(){return U((0,h.fs)(e,r))})},ee=function(){return H({type:"clearFilters"}),U((0,h.Ox)()),Y()};return s().createElement(i.Fragment,null,s().createElement(P.Q,null,s().createElement(P.y,{title:G.formatMessage(x.Z.approvalTitle)}),J&&s().createElement(T.H,null)),s().createElement(R.M,{ouiaId:"requests-table",sortBy:b,onSort:function(e,t,r,n){var a=n.property;return H({type:"setFetching",payload:!0}),U((0,h.jW)({index:t,direction:r,property:a})),Y()},rows:W,columns:A(G),fetchData:Y,routes:function(){return s().createElement(i.Fragment,null,s().createElement(Z.Route,{exact:!0,path:q.Z.requests.comment,render:function(e){return s().createElement(_.Z,(0,n.Z)({},e,{actionType:"Comment",postMethod:function(){return Y(y)}}))}}),s().createElement(Z.Route,{exact:!0,path:q.Z.requests.approve,render:function(e){return s().createElement(_.Z,(0,n.Z)({},e,{actionType:"Approve",postMethod:function(){return Y(y)}}))}}),s().createElement(Z.Route,{exact:!0,path:q.Z.requests.deny,render:function(e){return s().createElement(_.Z,(0,n.Z)({},e,{actionType:"Deny",postMethod:function(){return Y(y)}}))}}))},titlePlural:G.formatMessage(V.Z.requests),titleSingular:G.formatMessage(V.Z.request),pagination:y,handlePagination:Y,filterValue:L,onFilterChange:function(e){return $(e,"name")},isLoading:B||K,renderEmptyState:function(){return s().createElement(j.Z,{title:v()(M)?G.formatMessage(V.Z.emptyRequestsTitle):G.formatMessage(D.Z.noResultsFound),icon:v()(M)?d.ZP:g.ZP,PrimaryAction:function(){return v()(M)?r===q.Z.allrequest?G.formatMessage(V.Z.emptyAllRequestsDescription):G.formatMessage(V.Z.emptyRequestsDescription):s().createElement(m.Button,{onClick:ee,variant:"link",ouiaId:"clear-filter-requests"},G.formatMessage(D.Z.clearAllFilters))},description:v()(M)?"":G.formatMessage(D.Z.clearAllFiltersDescription),isSearch:!v()(M)})},activeFiltersConfig:{filters:k({name:L,requester:z,decision:M.decision},G),onDelete:function(e,t,r){return r?ee():(n=t,i=(l=(0,a.Z)(n,1)[0]).key,s=(0,a.Z)(l.chips,1)[0].value,o=["name","requester"].includes(i)?"":M[i].filter((function(e){return s!==e})),void $(o,i));var n,l,i,s,o}},filterConfig:[{label:G.formatMessage(V.Z.requesterColumn),filterValues:{placeholder:G.formatMessage(D.Z.filterByTitle,{title:G.formatMessage(V.Z.requesterColumn).toLowerCase()}),"aria-label":G.formatMessage(D.Z.filterByTitle,{title:G.formatMessage(V.Z.requesterColumn).toLowerCase()}),onChange:function(e,t){return $(t,"requester")},value:z}},{label:G.formatMessage(V.Z.statusColumn),type:"checkbox",filterValues:{placeholder:G.formatMessage(D.Z.filterByTitle,{title:G.formatMessage(V.Z.statusColumn).toLowerCase()}),"aria-label":G.formatMessage(D.Z.filterByTitle,{title:G.formatMessage(V.Z.statusColumn).toLowerCase()}),onChange:function(e,t){return $(t,"decision")},value:M.decision,items:["approved","canceled","denied","error","undecided"].map((function(e){return{label:G.formatMessage(V.Z[e]),value:e}}))}}]}))};K.propTypes={routes:u().func,persona:u().string,indexpath:u().shape({index:u().string}),actionResolver:u().func},K.defaultProps={indexpath:q.Z.request,actionResolver:function(){return!1}};const z=K},51321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(30624),a=r.n(n),l=r(11107),i=r(5469),s=r(50409),o=r(69739),u=r(37412),c=r(12824),m=r(219),f=r(74183),p=r(86728),d=r(97446),g=r(63540),y=r(20018),v=r(86896),h=r(27121),b=r(7248),Z=r(96733);const E=function(){var e=(0,n.useContext)(i.Z).userRoles,t=(0,l.wM)(e),r=(0,v.Z)();return a().createElement(n.Fragment,null,a().createElement(u.Q,null,a().createElement(u.y,{title:r.formatMessage(b.Z.approvalTitle)}),t&&a().createElement(c.H,null)),a().createElement(m.ub,{className:"pf-u-ml-auto pf-u-mr-auto"},a().createElement(p.k,{icon:Z.ZP}),a().createElement(y.TextContent,null,a().createElement(g.Text,{component:g.TextVariants.h1},r.formatMessage(h.Z.emptyRequestsTitle))),a().createElement(f.B,null,r.formatMessage(h.Z.emptyRequestsDescription))),a().createElement(d.i,null))};var q=r(47239);const M=function(){var e=(0,n.useContext)(i.Z).userRoles,t=(0,l.wM)(e),r=(0,l.LL)(e);return r?a().createElement(o.Z,{persona:l.pS,actionResolver:function(e){return e&&e.id&&(!(n=e)||!n.state||!(0,l.mG)(n.state)||n.number_of_children>0||!r&&!t)?null:a().createElement(q.Z,{commentLink:s.Z.requests.comment,approveLink:s.Z.requests.approve,denyLink:s.Z.requests.deny,request:e});var n}}):a().createElement(E,null)}},57666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(99166);const a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return(0,n.Z)(e,t,r)}},81320:()=>{},21626:()=>{},21064:()=>{},82014:()=>{},8572:()=>{},98379:()=>{},99624:()=>{},56024:()=>{},43390:()=>{},97236:()=>{},38024:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/requests.b84fbb01d8df663be9dedc21c91443a5.js.map