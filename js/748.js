"use strict";(self.webpackChunkapproval=self.webpackChunkapproval||[]).push([[748],{39748:(e,t,n)=>{n.d(t,{Z:()=>ye});var a=n(87462),r=n(29439),c=n(4942),s=n(30624),l=n.n(s),o=n(334),i=n(58126),m=n(49287),u=n(18038),p=n(54213),d=n(42026),E=n(45697),f=n.n(E),y=n(2095),g=n(85962),h=n(36104),x=n(81159),Z=n(34023),q=n(63540),b=n(20018),v=n(34348),T=n(86896),k=n(27121),C=n(7248),N=n(87388),j=function(e){var t=e.request,n=e.requestContent,a=(0,T.Z)();return l().createElement(x.K,{hasGutter:!0},l().createElement(Z.v,{key:"request-detail-panel"},l().createElement(y.Zb,null,l().createElement(g.e,null,l().createElement(x.K,{hasGutter:!0},l().createElement(Z.v,{key:"request-summary"},l().createElement(v.Title,{headingLevel:"h5",size:"lg"},a.formatMessage(N.Z.summary))),l().createElement(Z.v,{key:"request-product"},l().createElement(b.TextContent,null,l().createElement(q.Text,{className:"font-14"},a.formatMessage(C.Z.product)),l().createElement(q.Text,{id:"portfolio-item-name",component:q.TextVariants.p},n?n.product:""))),l().createElement(Z.v,{key:"request-portfolio"},l().createElement(b.TextContent,null,l().createElement(q.Text,{className:"font-14"},a.formatMessage(C.Z.portfolio)),l().createElement(q.Text,{id:"portfolio-name",component:q.TextVariants.p},n?n.portfolio:""))),l().createElement(Z.v,{key:"request-platform"},l().createElement(b.TextContent,null,l().createElement(q.Text,{className:"font-14"},a.formatMessage(C.Z.platform)),l().createElement(q.Text,{id:"source-name",component:q.TextVariants.p},n?n.platform:" "))),l().createElement(Z.v,{key:"request-requester"},l().createElement(b.TextContent,null,l().createElement(q.Text,{className:"font-14"},a.formatMessage(k.Z.requesterColumn)),l().createElement(q.Text,{id:"requester_name",component:q.TextVariants.p},t.requester_name))),l().createElement(Z.v,{key:"request-order"},l().createElement(b.TextContent,null,l().createElement(q.Text,{className:"font-14"},a.formatMessage(k.Z.orderNumber)),l().createElement(q.Text,{id:"order_id",component:q.TextVariants.p},n?n.order_id:""))))))),l().createElement(Z.v,{key:"request-parameters"},l().createElement(y.Zb,null,l().createElement(h.l,null,l().createElement(v.Title,{headingLevel:"h5",size:"lg"},a.formatMessage(k.Z.parameters))),l().createElement(g.e,null,l().createElement(x.K,{hasGutter:!0},n.params&&Object.keys(n.params).map((function(e){return n.params[e]&&l().createElement(Z.v,{key:"request-".concat(n.params[e])},l().createElement(b.TextContent,null,l().createElement(q.Text,{key:e,className:"font-14"},"".concat(e)),l().createElement(q.Text,{id:e,component:q.TextVariants.p},"".concat(n.params[e]))))})))))))};j.propTypes={request:f().shape({requester_name:f().string,order_id:f().string}).isRequired,requestContent:f().object};const O=j;var M=n(93433),P=n(48716),R=n(39173),L=n(26940),_=n(11107),F=n(35451),w=n(67002),D=n(96893),B=n(85316),V=n(6569),G=n(41418),K=n(3235),S=n(84564),z=n(92223),A=n(84866),I={memo:{displayName:k.Z.commentFrom,icon:l().createElement(w.ZP,null)},approve:{displayName:k.Z.approvedBy,icon:l().createElement(F.ZP,{className:"pf-u-mr-0 icon-success-fill"})},deny:{displayName:k.Z.deniedBy,icon:l().createElement(B.ZP,{className:"pf-u-mr-sm icon-danger-fill"})},notify:{displayName:k.Z.notifiedBy,icon:l().createElement(D.ZP,null)},skip:{displayName:k.Z.skippedBy,icon:l().createElement(V.ZP,null)},start:{displayName:k.Z.startedBy,icon:l().createElement(G.ZP,null)},cancel:{displayName:k.Z.canceledBy,icon:l().createElement(K.ZP,{className:"pf-u-mr-sm icon-danger-fill"})},error:{displayName:k.Z.errorBy,icon:l().createElement(S.ZP,{className:"pf-u-mr-0 icon-danger-fill"})}},Q=function(e){var t=e.actionList,n=(0,T.Z)();return t?l().createElement(x.K,null,t.map((function(e){return l().createElement("div",{key:"".concat(e.id,"-action")},l().createElement(b.TextContent,null,l().createElement(q.Text,{key:"".concat(e.id,"-action-created_at"),className:"pf-u-mb-0",component:q.TextVariants.small},(0,_.Sy)(e.created_at)),l().createElement(q.Text,{key:"".concat(e.id,"-action-operation"),className:"pf-u-mb-md"},(t=e.operation,I[t]?I[t].icon:""),"Â ",n.formatMessage(function(e){return I[e]?I[e].displayName:(0,A.ZC)()}(e.operation),{by:e.processed_by})),e.comments&&l().createElement(q.Text,{key:"".concat(e.id,"-action-comments"),className:"pf-u-pt-0",component:q.TextVariants.p},e.comments)));var t}))):l().createElement(z.Z,{centered:!0,"aria-label":n.formatMessage(C.Z.noRecords)})};Q.propTypes={actionList:f().array};var U=n(48826),H=n(82224),Y=n(38243),J=n(76332),W=n(4867),X=n(21543),$=n(5469),ee=n(50409),te=n(47239),ne=function(e){var t=e.item,n=e.isExpanded,a=e.toggleExpand,r=e.indexpath,c=(0,s.useContext)($.Z).userRoles,o=(0,_.wM)(c),i=(0,T.Z)(),m=function(e,t){return!!o||e.metadata&&e.metadata.user_capabilities&&e.metadata.user_capabilities[t]};return l().createElement(U.L,{key:"request-".concat(t.id),"aria-labelledby":"check-request-".concat(t.id),isExpanded:n},l().createElement(H.V,null,l().createElement(J.p,{onClick:function(){return a("request-".concat(t.id))},isExpanded:n,id:"request-".concat(t.id),"aria-labelledby":"request-".concat(t.id," request-").concat(t.id),"aria-label":i.formatMessage(k.Z.toggleDetailsFor)}),l().createElement(W.p,{dataListCells:[l().createElement(Y.K,{key:t.id},l().createElement("span",{id:"".concat(t.id,"-name")},t.group_name?t.group_name:t.name)),l().createElement(Y.K,{key:"".concat(t.id,"-state")},l().createElement("span",{style:{textTransform:"capitalize"},id:"".concat(t.id,"-state")},i.formatMessage(k.Z[t.state]||(0,A.ZC)(t.state)))),l().createElement(Y.K,{key:"".concat(t.id,"-action")},l().createElement(te.Z,{approveLink:r.approve,denyLink:r.deny,commentLink:r.comment,request:t,canApproveDeny:m(t,"approve"),canComment:m(t,"memo")}))]})),l().createElement(X.m,{"aria-label":i.formatMessage(k.Z.requestContentDetails),isHidden:!n},l().createElement(x.K,{hasGutter:!0},l().createElement(Z.v,null,l().createElement(b.TextContent,{component:q.TextVariants.h6},l().createElement(Q,{actionList:t.actions}))))))};ne.propTypes={item:f().shape({id:f().string,name:f().string,state:f().string,actions:f().array,group_name:f().string.isRequired,requestActions:f().shape({data:f().array}),metadata:f().shape({user_capabilities:f().object})}).isRequired,isExpanded:f().bool.isRequired,toggleExpand:f().func.isRequired,indexpath:f().object},ne.defaultProps={indexpath:ee.Z.request};var ae=n(76690),re=function(e){var t=e.isLoading,n=e.items,a=e.noItems,c=e.indexpath,o=(0,s.useState)([]),i=(0,r.Z)(o,2),m=i[0],u=i[1],p=(0,T.Z)(),d=function(e){var t=m.indexOf(e),n=t>=0?[].concat((0,M.Z)(m.slice(0,t)),(0,M.Z)(m.slice(t+1,m.length))):[].concat((0,M.Z)(m),[e]);u(n)};return l().createElement(s.Fragment,null,l().createElement("div",null,t&&l().createElement(s.Fragment,null,l().createElement(P.Z,null,l().createElement(R.Z,{title:a})),l().createElement(ae.Eo,null))),n.length>0&&l().createElement(L.DataList,{"aria-label":p.formatMessage(k.Z.expandableDataList)},n.map((function(e,t){return l().createElement(ne,{key:e.id,item:e,idx:t,isActive:0===t,isExpanded:(n="request-".concat(e.id),m.includes(n)),toggleExpand:d,indexpath:c});var n}))))};re.propTypes={isLoading:f().bool,items:f().array,noItems:f().string,active_request:f().number,indexpath:f().object},re.defaultProps={items:[]};const ce=re;var se=function(e){var t=e.request,n=e.indexpath,a=(0,T.Z)();return l().createElement(s.Fragment,null,l().createElement(v.Title,{headingLevel:"h5",size:"lg",className:"pf-u-pl-lg pf-u-pb-lg"},a.formatMessage(k.Z.requestTranscript)),l().createElement(ce,{items:t.requests&&t.requests.length>0?t.requests:[t],indexpath:n}))};se.propTypes={request:f().shape({content:f().object,requests:f().array}).isRequired,indexpath:f().object};const le=se;var oe=n(38106),ie=n(37412),me=n(1054);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de={isFetching:!0},Ee=function(e,t){return"setFetching"===t.type?pe(pe({},e),{},{isFetching:t.payload}):e},fe=function(e){var t=e.requestBreadcrumbs,n=e.indexpath,c=(0,s.useReducer)(Ee,de),E=(0,r.Z)(c,2),f=E[0].isFetching,y=E[1],g=(0,i.useSelector)((function(e){var t=e.requestReducer,n=t.requestContent;return{selectedRequest:t.selectedRequest,requestContent:n}})),h=g.selectedRequest,x=g.requestContent,Z=(0,me.Z)(["request"]),q=(0,r.Z)(Z,1)[0].request,b=(0,o.useLocation)(),v=(0,i.useDispatch)(),C=(0,s.useContext)($.Z).userRoles,N=(0,T.Z)();(0,s.useEffect)((function(){Promise.all([v((0,oe.t5)(q,(0,_.pu)(C))),v((0,oe.YQ)(q,(0,_.pu)(C)))]).then((function(){return y({type:"setFetching",payload:!1})}))}),[]);var j=function(e){return y({type:"setFetching",payload:!0}),v((0,oe.t5)(e,(0,_.pu)(C))),v((0,oe.YQ)(e,(0,_.pu)(C))).then((function(){return y({type:"setFetching",payload:!1})})).catch((function(){return y({type:"setFetching",payload:!1})}))};return l().createElement(s.Fragment,null,l().createElement(o.Switch,null,l().createElement(o.Route,{exact:!0,path:n.comment},l().createElement(d.Z,{actionType:"Comment",postMethod:function(){return j(h.id)},closeUrl:{pathname:n.index,search:"?request=".concat(h.id)}})),l().createElement(o.Route,{exact:!0,path:n.approve,render:function(e){return l().createElement(d.Z,(0,a.Z)({},e,{actionType:"Approve",postMethod:function(){return j(h.id)},closeUrl:{pathname:n.index,search:"?request=".concat(h.id)}}))}}),l().createElement(o.Route,{exact:!0,path:n.deny,render:function(e){return l().createElement(d.Z,(0,a.Z)({},e,{actionType:"Deny",postMethod:function(){return j(h.id)},closeUrl:{pathname:n.index,search:"?request=".concat(h.id)}}))}})),l().createElement(ie.Q,{breadcrumbs:t,paddingBottom:!0},l().createElement(ie.y,{title:N.formatMessage(k.Z.requestTitle,{id:q})})),l().createElement(p.Z,{type:"content"},l().createElement(m.Grid,{hasGutter:!0},f||!h||0===Object.keys(h).length?l().createElement(p.Z,{style:{backgroundColor:"white",minHeight:"100%"}},l().createElement(ae.vr,null)):l().createElement(s.Fragment,null,l().createElement(u.GridItem,{md:4,lg:3,className:"info-bar pf-u-p-0"},l().createElement(O,{request:h,requestContent:x})),l().createElement(u.GridItem,{md:8,lg:9,className:"detail-pane pf-u-p-lg"},l().createElement(le,{request:h,url:b.url,indexpath:n}))))))};fe.propTypes={requestBreadcrumbs:f().array,indexpath:f().object};const ye=fe}}]);
//# sourceMappingURL=../sourcemaps/748.3daeb10e7e2206039a7eadf61111bc74.js.map