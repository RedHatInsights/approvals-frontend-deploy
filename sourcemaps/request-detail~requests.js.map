{"version":3,"sources":["webpack:///./src/constants/routes.js","webpack:///./src/forms/request-comment-form.schema.js","webpack:///./src/helpers/request/request-helper.js","webpack:///./src/presentational-components/shared/pf4-select-wrapper.js","webpack:///./src/redux/actions/request-actions.js","webpack:///./src/smart-components/common/form-renderer.js","webpack:///./src/smart-components/request/action-modal.js","webpack:///./src/utilities/use-query.js"],"names":["routes","requests","index","addComment","approve","deny","request","workflows","add","remove","editInfo","editGroups","editSequence","schemaFields","isDeny","component","componentTypes","TEXTAREA_FIELD","name","type","isRequired","label","createRequestCommentSchema","schema","validate","validatorTypes","REQUIRED","fields","actionApi","getActionApi","graphqlInstance","getGraphqlInstance","sortPropertiesMapper","property","opened","requester","status","filterQuery","filterValue","query","push","forEach","state","decision","dec","join","fetchRequests","filter","pagination","defaultSettings","persona","undefined","sortBy","paginationQuery","Math","max","limit","offset","sortQuery","direction","fetchUrl","APPROVAL_API_BASE","fetchHeaders","getAxiosInstance","method","url","headers","requestTranscriptQuery","parent_id","fetchRequestTranscript","requestId","APPROVAL_APPROVER_PERSONA","APPROVAL_REQUESTER_PERSONA","data","then","fetchRequestContent","id","fetchRequestCapabilities","isParent","fetchRequestWithSubrequests","requestData","length","number_of_children","result","map","find","item","metadata","createRequestAction","actionIn","createAction","createOptions","options","inputValue","selectOptions","value","Select","input","isReadOnly","isDisabled","FieldProvider","rest","props","toString","propTypes","PropTypes","object","arrayOf","shape","any","string","bool","Pf4SelectWrapper","componentType","helperText","meta","description","hideLabel","error","touched","showError","TextVariants","small","dispatch","getState","requestReducer","finalPagination","ActionTypes","payload","RequestHelper","fetchRequest","apiProps","actionName","notifications","fulfilled","variant","title","rejected","expandRequest","sortRequests","setFilterValueRequests","clearFilterValueRequests","CLEAR_FILTER_REQUESTS","buttonPositioning","modal","buttonOrder","buttonClassName","FormRenderer","componentMapper","formContainer","formFieldsMapper","SELECT","layoutMapper","oneOf","defaultProps","ActionModal","actionType","addNotification","closeUrl","postMethod","useHistory","useQuery","onSubmit","operationType","Approve","Deny","operation","onCancel","dismissable","func","match","location","mapDispatchToProps","bindActionCreators","connect","requiredParams","useLocation","search","URLSearchParams","reduce","acc","curr","get"],"mappings":"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","file":"js/request-detail~requests.js","sourcesContent":["const routes = {\n  requests: {\n    index: '/requests',\n    addComment: '/requests/add-comment',\n    approve: '/requests/approve',\n    deny: '/requests/deny'\n  },\n  request: {\n    index: '/request',\n    addComment: '/request/add-comment',\n    approve: '/request/approve',\n    deny: '/request/deny'\n  },\n  workflows: {\n    index: '/workflows',\n    add: '/workflows/add-workflow',\n    remove: '/workflows/remove',\n    editInfo: '/workflows/edit-info',\n    editGroups: '/workflows/edit-groups',\n    editSequence: '/workflows/edit-sequence'\n  }\n};\n\nexport default routes;\n","import { componentTypes, validatorTypes } from '@data-driven-forms/react-form-renderer';\n\nconst schemaFields = (isDeny) =>({\n  component: componentTypes.TEXTAREA_FIELD,\n  name: 'comments',\n  type: 'text',\n  isRequired: isDeny,\n  label: isDeny ? 'Reason' : 'Comment'\n});\n\nexport const createRequestCommentSchema = (isDeny = false) => {\n  const schema = schemaFields(isDeny);\n  if (isDeny) {\n    schema.validate = [{\n      type: validatorTypes.REQUIRED\n    }];\n  }\n\n  return { fields: [ schema ]};\n};\n","import { getActionApi, getAxiosInstance, getGraphqlInstance } from '../shared/user-login';\nimport { APPROVAL_API_BASE } from '../../utilities/constants';\nimport { defaultSettings } from '../shared/pagination';\nimport { APPROVAL_REQUESTER_PERSONA, APPROVAL_APPROVER_PERSONA } from '../shared/helpers';\n\nconst actionApi = getActionApi();\nconst graphqlInstance = getGraphqlInstance();\n\nconst sortPropertiesMapper = (property) => ({\n  opened: 'created_at',\n  requester: 'requester_name',\n  status: 'state'\n}[property] || property);\n\nconst filterQuery = (filterValue) => {\n  const query = [];\n  if (filterValue.name) {\n    query.push(`filter[name][contains_i]=${filterValue.name}`);\n  }\n\n  if (filterValue.requester) {\n    query.push(`filter[requester_name][contains_i]=${filterValue.requester}`);\n  }\n\n  if (filterValue.status) {\n    filterValue.status.forEach(state => {\n      query.push(`filter[state][eq][]=${state}`);\n    });\n  }\n\n  if (filterValue.decision) {\n    filterValue.decision.forEach(dec => {\n      query.push(`filter[decision][eq][]=${dec}`);\n    });\n  }\n\n  return query.join('&');\n};\n\nexport function fetchRequests(filter = {}, pagination = defaultSettings, persona = undefined, sortBy) {\n  const paginationQuery = `&limit=${Math.max(pagination.limit, 10)}&offset=${pagination.offset}`;\n  const sortQuery = `&sort_by=${sortPropertiesMapper(sortBy.property)}:${sortBy.direction}`;\n  const fetchUrl = `${APPROVAL_API_BASE}/requests/?${filterQuery(filter)}${paginationQuery}${sortQuery}`;\n  const fetchHeaders = persona ? { 'x-rh-persona': persona } : undefined;\n  return getAxiosInstance()({ method: 'get', url: fetchUrl, headers: fetchHeaders });\n}\n\nconst requestTranscriptQuery = (parent_id) => `query {\n  requests(id: \"${parent_id}\") {\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    state\n    actions {\n      id\n      operation\n      comments\n      created_at\n      processed_by\n    }\n    requests {\n      id\n      name\n      number_of_children\n      decision\n      description\n      group_name\n      number_of_finished_children\n      state\n      workflow_id\n      parent_id\n      actions {\n        id\n        operation\n        comments\n        created_at\n        processed_by\n      }\n    }\n  }\n}`;\n\nexport const fetchRequestTranscript = (requestId, persona) => {\n  const fetchHeaders = (persona && persona !== APPROVAL_APPROVER_PERSONA) ? { 'x-rh-persona': persona }\n    : { 'x-rh-persona': APPROVAL_REQUESTER_PERSONA };\n  return graphqlInstance({ method: 'post', url: `${APPROVAL_API_BASE}/graphql`,\n    headers: fetchHeaders, data: { query: requestTranscriptQuery(requestId) }})\n  .then(({ data: { requests }}) => requests);\n};\n\nexport const fetchRequestContent = (id) => {\n  const fetchUrl = `${APPROVAL_API_BASE}/requests/${id}/content`;\n  const fetchHeaders = { 'x-rh-persona': APPROVAL_REQUESTER_PERSONA };\n  return getAxiosInstance()({ method: 'get', url: fetchUrl, headers: fetchHeaders });\n};\n\nexport const fetchRequestCapabilities = (id, isParent) => {\n  const fetchUrl = `${APPROVAL_API_BASE}/requests/${id}${isParent ? '/requests' : ''}`;\n  const fetchHeaders = { 'x-rh-persona': APPROVAL_REQUESTER_PERSONA };\n  return getAxiosInstance()({ method: 'get', url: fetchUrl, headers: fetchHeaders });\n};\n\nexport async function fetchRequestWithSubrequests(id, persona) {\n  const requestData = await fetchRequestTranscript(id, persona);\n\n  if (!requestData || requestData.length === 0) { return {}; }\n\n  if (persona === APPROVAL_APPROVER_PERSONA) {\n    if (requestData && requestData.length > 0 && requestData[0].number_of_children > 0) {\n      const result = await fetchRequestCapabilities(id, true);\n\n      if (result && result.data) {\n        requestData[0].requests = requestData[0].requests.map(request => {\n          return { ...result.data.find((item) => (item.id === request.id) && item.metadata),\n            ...request };\n        });\n      }\n    }\n    else {\n      const request = await fetchRequestCapabilities(id, false);\n      if (request) {\n        requestData[0] = { ...requestData[0], metadata: request.metadata };\n      }\n    }\n  }\n\n  return  { ...requestData[0] };\n}\n\nexport async function createRequestAction (requestId, actionIn) {\n  return await actionApi.createAction(requestId, actionIn);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormSelect, FormSelectOption, FormGroup, TextContent, Text, TextVariants } from '@patternfly/react-core';\n\nconst createOptions = (options, inputValue, isRequired) => {\n  if (inputValue && isRequired) {\n    return options;\n  }\n\n  const selectOptions = [ ...options ];\n  return selectOptions.find(({ value }) => value === undefined)\n    ? [ ...selectOptions ]\n    : [{ label: isRequired ? 'Please choose' : 'None' }, ...selectOptions ];\n};\n\nconst Select = ({\n  input,\n  options,\n  isReadOnly,\n  isDisabled,\n  FieldProvider,\n  isRequired,\n  ...rest\n}) => (\n  <FormSelect { ...input } { ...rest } isDisabled={ isDisabled || isReadOnly }>\n    { createOptions(options, input.value, isRequired).map((props) => (\n      <FormSelectOption key={ props.value || props.label } { ...props } label={ props.label.toString() }/> // eslint-disable-line react/prop-types\n    )) }\n  </FormSelect>\n);\n\nSelect.propTypes = {\n  input: PropTypes.object.isRequired,\n  options: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.any,\n    label: PropTypes.string.isRequired\n  })).isRequired,\n  isReadOnly: PropTypes.bool,\n  isDisabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  FieldProvider: PropTypes.any\n};\n\nconst Pf4SelectWrapper = ({\n  componentType,\n  label,\n  isRequired,\n  helperText,\n  meta,\n  description,\n  hideLabel,\n  ...rest\n}) => {\n  const { error, touched } = meta;\n  const showError = touched && error;\n\n  return (\n    <FormGroup\n      isRequired={ isRequired }\n      label={ !hideLabel && label }\n      fieldId={ rest.id }\n      isValid={ !showError }\n      helperText={ helperText }\n      helperTextInvalid={ meta.error }\n    >\n      { description && <TextContent><Text component={ TextVariants.small }>{ description }</Text></TextContent> }\n      <Select label={ label } isValid={ !showError } isRequired={ isRequired } { ...rest }/>\n    </FormGroup>\n  );\n};\n\nPf4SelectWrapper.propTypes = {\n  componentType: PropTypes.string,\n  label: PropTypes.string,\n  isRequired: PropTypes.bool,\n  helperText: PropTypes.string,\n  meta: PropTypes.object,\n  description: PropTypes.string,\n  hideLabel: PropTypes.bool\n};\n\nexport default Pf4SelectWrapper;\n","import * as ActionTypes from '../action-types';\nimport * as RequestHelper from '../../helpers/request/request-helper';\nimport { defaultSettings } from '../../helpers/shared/pagination';\n\nexport const fetchRequests = (persona, pagination) => (dispatch, getState) => {\n  const { sortBy, requests, filterValue } = getState().requestReducer;\n\n  let finalPagination = pagination || defaultSettings;\n\n  if (!pagination && requests) {\n    const { limit, offset } = requests.meta;\n    finalPagination = { limit, offset };\n  }\n\n  return dispatch({\n    type: ActionTypes.FETCH_REQUESTS,\n    payload: RequestHelper.fetchRequests(filterValue, finalPagination, persona, sortBy)\n  });\n};\n\nexport const fetchRequest = (apiProps, persona) => ({\n  type: ActionTypes.FETCH_REQUEST,\n  payload: RequestHelper.fetchRequestWithSubrequests(apiProps, persona)\n});\n\nexport const fetchRequestContent = (apiProps, persona) => ({\n  type: ActionTypes.FETCH_REQUEST_CONTENT,\n  payload: RequestHelper.fetchRequestContent(apiProps, persona)\n});\n\nexport const createRequestAction = (actionName, requestId, actionIn) => ({\n  type: ActionTypes.CREATE_REQUEST_ACTION,\n  payload: RequestHelper.createRequestAction(requestId, actionIn),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success',\n        description: `The ${actionName} was successful.`\n      },\n      rejected: {\n        variant: 'danger',\n        title: `${actionName} error`,\n        description: `The ${actionName} action failed.`\n      }\n    }\n  }\n});\n\nexport const expandRequest = (id) => ({\n  type: ActionTypes.EXPAND_REQUEST,\n  payload: id\n});\n\nexport const sortRequests = (sortBy) => ({\n  type: ActionTypes.SORT_REQUESTS,\n  payload: sortBy\n});\n\nexport const setFilterValueRequests = (filterValue, type) => ({\n  type: ActionTypes.SET_FILTER_REQUESTS,\n  payload: { filterValue, type }\n});\n\nexport const clearFilterValueRequests = () => ({\n  type: ActionTypes.CLEAR_FILTER_REQUESTS\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactFormRender, { componentTypes } from '@data-driven-forms/react-form-renderer';\nimport { layoutMapper, formFieldsMapper } from '@data-driven-forms/pf4-component-mapper';\nimport Pf4SelectWrapper from '../../presentational-components/shared/pf4-select-wrapper';\n\nconst buttonPositioning = {\n  default: {},\n  modal: {\n    buttonOrder: [ 'cancel', 'reset', 'save' ],\n    buttonClassName: 'modal-form-right-align'\n  }\n};\n\nconst FormRenderer = ({ componentMapper, formContainer, ...rest }) => (\n  <div className={ buttonPositioning[formContainer].buttonClassName }>\n    <ReactFormRender\n      formFieldsMapper={ {\n        ...formFieldsMapper,\n        componentMapper,\n        [componentTypes.SELECT]: Pf4SelectWrapper\n      } }\n      layoutMapper={ layoutMapper }\n      { ...buttonPositioning[formContainer] }\n      { ...rest }\n    />\n  </div>\n);\n\nFormRenderer.propTypes = {\n  componentMapper: PropTypes.object,\n  formContainer: PropTypes.oneOf([ 'default', 'modal' ])\n};\n\nFormRenderer.defaultProps = {\n  componentMapper: {},\n  formContainer: 'default'\n};\n\nexport default FormRenderer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FormRenderer from '../common/form-renderer';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Modal } from '@patternfly/react-core';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport { createRequestAction } from '../../redux/actions/request-actions';\nimport { createRequestCommentSchema } from '../../forms/request-comment-form.schema';\nimport useQuery from '../../utilities/use-query';\nimport routes from '../../constants/routes';\n\nconst ActionModal = ({\n  actionType,\n  addNotification,\n  createRequestAction,\n  closeUrl,\n  postMethod\n}) => {\n  const { push } = useHistory();\n  const [{ request: id }] = useQuery([ 'request' ]);\n\n  const onSubmit = (data) => {\n    const operationType = { 'Add Comment': 'memo', Approve: 'approve', Deny: 'deny' };\n    const actionName = actionType === 'Add Comment' ? actionType : `${actionType} Request`;\n    return postMethod ?\n      createRequestAction(\n        actionName,\n        id,\n        { operation: operationType[actionType], ...data }\n      ).then(() => postMethod()).then(() => push(closeUrl))\n      : createRequestAction(\n        actionName,\n        id,\n        { operation: operationType[actionType], ...data }\n      ).then(() => push(closeUrl));\n  };\n\n  const onCancel = () => {\n    const actionName = actionType === 'Add Comment' ? actionType : `${actionType} Request`;\n    addNotification({\n      variant: 'warning',\n      title: actionName,\n      dismissable: true,\n      description: `${actionName} was cancelled by the user.`\n    });\n    push(closeUrl);\n  };\n\n  return (\n    <Modal\n      isLarge\n      title={ actionType === 'Add Comment' ? `Request #${id}` : `${actionType} Request #${id}` }\n      isOpen\n      onClose={ onCancel }\n    >\n      <FormRenderer\n        schema={ createRequestCommentSchema (actionType === 'Deny') }\n        schemaType=\"default\"\n        onSubmit={ onSubmit }\n        onCancel={ onCancel }\n        formContainer=\"modal\"\n      />\n    </Modal>\n  );\n};\n\nActionModal.defaultProps = {\n  closeUrl: routes.requests.index\n};\n\nActionModal.propTypes = {\n  addNotification: PropTypes.func.isRequired,\n  createRequestAction: PropTypes.func.isRequired,\n  postMethod: PropTypes.func,\n  id: PropTypes.string,\n  actionType: PropTypes.string,\n  closeUrl: PropTypes.string,\n  match: PropTypes.object,\n  location: PropTypes.object\n};\n\nconst mapDispatchToProps = (dispatch) => bindActionCreators({\n  addNotification,\n  createRequestAction\n}, dispatch);\n\nexport default connect(null, mapDispatchToProps)(ActionModal);\n","import { useLocation } from 'react-router-dom';\n\nconst useQuery = (requiredParams = []) => {\n  const { search } = useLocation();\n  const query = new URLSearchParams(search);\n  return [\n    requiredParams.reduce(\n      (acc, curr) => ({\n        ...acc,\n        [curr]: query.get(curr)\n      }),\n      {}\n    ),\n    search,\n    query\n  ];\n};\n\nexport default useQuery;\n"],"sourceRoot":""}