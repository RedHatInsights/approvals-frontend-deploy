{"version":3,"sources":["webpack:///./src/smart-components/request/request-table-helpers.js","webpack:///./src/smart-components/request/chips-helpers.js","webpack:///./src/smart-components/request/requests-list.js","webpack:///./src/smart-components/request/allrequests.js","webpack:///./src/smart-components/request/EmptyRequestList.js","webpack:///./src/smart-components/request/requests.js"],"names":["capitlize","str","charAt","toUpperCase","slice","createRows","actionResolver","data","actionsDisabled","indexpath","routes","request","intl","reduce","acc","id","state","number_of_children","cells","key","to","pathname","index","search","name","requester_name","finished_at","timeAgo","notified_at","created_at","Label","variant","icon","decisionValues","decision","color","formatMessage","displayName","untranslatedMessage","prepareChips","requester","category","tableToolbarMessages","chips","value","requestsMessages","requesterColumn","length","statusColumn","map","dec","columns","title","requestsIdColumn","transforms","sortable","cellWidth","wrappable","updatedColumn","debouncedFilter","asyncDebounce","dispatch","filteringCallback","persona","updateFilter","fetchRequests","then","requestsListState","action","type","isFetching","payload","nameValue","requesterValue","isFiltering","RequestsList","useSelector","requestReducer","requests","sortBy","filterValue","shallowEqual","meta","useReducer","isOpen","initialState","stateDispatch","userRoles","useContext","UserContext","useDispatch","useIntl","isApprovalAdmin","useIsApprovalAdmin","isApprovalApprover","useIsApprovalApprover","updateRequests","pagination","APPROVAL_APPROVER_PERSONA","useEffect","resetRequestList","scrollToTop","handleFilterChange","debouncedValue","setFilterValueRequests","clearFilters","clearFilterValueRequests","commonMessages","approvalTitle","onSort","_e","direction","property","sortRequests","fetchData","titlePlural","titleSingular","handlePagination","onFilterChange","isLoading","onCollapse","setRows","setOpen","expandRequest","rows","renderEmptyState","isEmpty","noResultsFound","results","Icon","SearchIcon","PrimaryAction","Button","onClick","clearAllFilters","description","clearAllFiltersDescription","activeFiltersConfig","filters","onDelete","chip","deleteAll","newValue","includes","filter","val","filterConfig","label","filterValues","placeholder","filterByTitle","toLowerCase","onChange","_event","items","propTypes","PropTypes","func","string","shape","defaultProps","AllRequests","APPROVAL_ADMIN_PERSONA","allrequest","EmptyRequestList","className","EmptyState","EmptyStateIcon","TextContent","Text","component","TextVariants","h1","emptyRequestsTitle","EmptyStateBody","emptyRequestsDescription","EmptyStateSecondaryActions","Requests","exact","path","routesLinks","addComment","render","props","actionType","postMethod","approve","deny","requestData","isRequestStateActive","commentLink","approveLink","denyLink"],"mappings":"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","file":"js/requests~3c3c4c71.bf679bbcf40741668f34.js","sourcesContent":["import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\nimport { timeAgo }  from '../../helpers/shared/helpers';\nimport routes from '../../constants/routes';\nimport { Label } from '@patternfly/react-core';\nimport { decisionValues, untranslatedMessage } from '../../utilities/constants';\n\nexport const capitlize = (str) => str.charAt(0).toUpperCase() + str.slice(1);\n\nexport const createRows = (actionResolver) => (data, actionsDisabled, indexpath = routes.request, intl) => data.reduce((acc, request) => ([\n  ...acc, {\n    id: request.id,\n    state: request.state,\n    number_of_children: request.number_of_children,\n    cells: [\n      <Fragment key={ request.id }>\n        <Link to={\n          { pathname: indexpath.index, search: `?request=${request.id}` } }>\n          { request.id }\n        </Link>\n      </Fragment>,\n      request.name,\n      request.requester_name,\n      request.finished_at ? timeAgo(request.finished_at) : (request.notified_at ? timeAgo(request.notified_at) : timeAgo(request.created_at)),\n      <Fragment key={ `decision-${request.id}` }>\n        { actionResolver(request) || (<Label\n          variant=\"outline\"\n          icon={ decisionValues[request.decision]?.icon }\n          color={ decisionValues[request.decision]?.color }\n        >\n          { capitlize(intl.formatMessage(\n              decisionValues[request.decision]?.displayName || untranslatedMessage()\n          )) }\n        </Label>) }\n      </Fragment>\n    ]\n  }\n]), []);\n","import tableToolbarMessages from '../../messages/table-toolbar.messages';\nimport requestsMessages from '../../messages/requests.messages';\n\nexport const prepareChips = ({ name, requester, decision }, intl) => ([\n  ...(name ? [{\n    category: intl.formatMessage(tableToolbarMessages.name),\n    key: 'name',\n    chips: [{ name, value: name }]\n  }] : []),\n  ...(requester ? [{\n    category: intl.formatMessage(requestsMessages.requesterColumn),\n    key: 'requester',\n    chips: [{ name: requester, value: requester }]\n  }] : []),\n  ...(decision && decision.length > 0 ? [{\n    category: intl.formatMessage(requestsMessages.statusColumn),\n    key: 'decision',\n    chips: decision.map(dec => ({ name: dec, value: dec }))\n  }] : [])\n]);\n","\nimport React, { Fragment, useEffect, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { Button } from '@patternfly/react-core';\nimport { sortable, wrappable, cellWidth } from '@patternfly/react-table';\nimport { useIntl } from 'react-intl';\nimport { SearchIcon } from '@patternfly/react-icons';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { fetchRequests,\n  expandRequest,\n  sortRequests,\n  setFilterValueRequests,\n  clearFilterValueRequests,\n  resetRequestList } from '../../redux/actions/request-actions';\nimport { createRows } from './request-table-helpers';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { APPROVAL_APPROVER_PERSONA, useIsApprovalAdmin, useIsApprovalApprover } from '../../helpers/shared/helpers';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport { AppTabs } from '../../smart-components/app-tabs/app-tabs';\nimport asyncDebounce from '../../utilities/async-debounce';\nimport { scrollToTop } from '../../helpers/shared/helpers';\nimport TableEmptyState from '../../presentational-components/shared/table-empty-state';\nimport UserContext from '../../user-context';\nimport { prepareChips } from './chips-helpers';\nimport routes from '../../constants/routes';\nimport tableToolbarMessages from '../../messages/table-toolbar.messages';\nimport requestsMessages from '../../messages/requests.messages';\nimport commonMessages from '../../messages/common.message';\n\nconst columns = (intl) => [{\n  title: intl.formatMessage(requestsMessages.requestsIdColumn),\n  transforms: [ sortable, cellWidth(5) ]\n},\n{ title: intl.formatMessage(tableToolbarMessages.name), transforms: [ sortable, wrappable, cellWidth(25) ]},\n{ title: intl.formatMessage(requestsMessages.requesterColumn), transforms: [ sortable, wrappable, cellWidth(20) ]},\n{ title: intl.formatMessage(requestsMessages.updatedColumn), transforms: [ cellWidth(10) ]},\n{ title: intl.formatMessage(requestsMessages.statusColumn), transforms: [ sortable, cellWidth(15) ]}\n];\n\nconst debouncedFilter = asyncDebounce(\n  (dispatch, filteringCallback, persona, updateFilter) => {\n    filteringCallback(true);\n    updateFilter && updateFilter();\n    return dispatch(fetchRequests(persona)).then(() =>\n      filteringCallback(false)\n    );\n  },\n  1000\n);\n\nconst initialState = (nameValue = '', requesterValue = '') => ({\n  nameValue,\n  requesterValue,\n  isOpen: false,\n  isFetching: true,\n  isFiltering: false\n});\n\nconst requestsListState = (state, action) => {\n  switch (action.type) {\n    case 'setFetching':\n      return { ...state, isFetching: action.payload };\n    case 'setNameValue':\n      return { ...state, nameValue: action.payload };\n    case 'setRequesterValue':\n      return { ...state, requesterValue: action.payload };\n    case 'clearFilters':\n      return { ...state, requesterValue: '', nameValue: '', isFetching: true };\n    case 'setFilteringFlag':\n      return { ...state, isFiltering: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst RequestsList = ({ routes, persona, indexpath, actionResolver }) => {\n  const { requests: { data, meta }, sortBy, filterValue } = useSelector(\n    ({ requestReducer: { requests, sortBy, filterValue }}) => ({ requests, sortBy, filterValue }),\n    shallowEqual\n  );\n  const [{ nameValue, isFetching, isFiltering, requesterValue }, stateDispatch ] = useReducer(\n    requestsListState,\n    initialState(filterValue.name, filterValue.requester)\n  );\n\n  const { userRoles: userRoles } = useContext(UserContext);\n\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const isApprovalAdmin = useIsApprovalAdmin(userRoles);\n  const isApprovalApprover = useIsApprovalApprover(userRoles);\n\n  const updateRequests = (pagination) => {\n    if (!isApprovalApprover && persona === APPROVAL_APPROVER_PERSONA) {\n      stateDispatch({ type: 'setFetching', payload: false });\n      return;\n    }\n\n    stateDispatch({ type: 'setFetching', payload: true });\n    return dispatch(fetchRequests(persona, pagination))\n    .then(() => stateDispatch({ type: 'setFetching', payload: false }))\n    .catch(() => stateDispatch({ type: 'setFetching', payload: false }));\n  };\n\n  const resetList = () => {\n    dispatch(resetRequestList());\n  };\n\n  useEffect(() => {\n    resetList();\n    updateRequests();\n    scrollToTop();\n  }, [ persona ]);\n\n  const handleFilterChange = (value, type) => {\n    const updateFilter = () => dispatch(setFilterValueRequests(value, type));\n\n    let debouncedValue = false;\n\n    if (type === 'name') {\n      stateDispatch({ type: 'setNameValue', payload: value });\n      debouncedValue = true;\n    } else if (type === 'requester') {\n      stateDispatch({ type: 'setRequesterValue', payload: value });\n      debouncedValue = true;\n    }\n\n    if (!debouncedValue) {\n      dispatch(setFilterValueRequests(value, type));\n    }\n\n    return debouncedFilter(\n      dispatch,\n      (isFiltering) =>\n        stateDispatch({ type: 'setFilteringFlag', payload: isFiltering }),\n      persona,\n      debouncedValue && updateFilter\n    );\n  };\n\n  const onCollapse = (id, setRows, setOpen) => {\n    dispatch(expandRequest(id));\n    setRows((rows) => setOpen(rows, id));\n  };\n\n  const onSort = (_e, index, direction, { property }) => {\n    stateDispatch({ type: 'setFetching', payload: true });\n    dispatch(sortRequests({ index, direction, property }));\n    return updateRequests();\n  };\n\n  const clearFilters = () => {\n    stateDispatch({ type: 'clearFilters' });\n    dispatch(clearFilterValueRequests());\n    return updateRequests();\n  };\n\n  const onDeleteChip = ([{ key, chips: [{ value }] }]) => {\n    const newValue = [ 'name', 'requester' ].includes(key) ? '' : filterValue[key].filter(val => value !== val);\n    handleFilterChange(newValue, key);\n  };\n\n  return (\n    <Fragment>\n      <TopToolbar>\n        <TopToolbarTitle title={ intl.formatMessage(commonMessages.approvalTitle) }/>\n        { isApprovalAdmin && <AppTabs/> }\n      </TopToolbar>\n      <TableToolbarView\n        sortBy={ sortBy }\n        onSort={ onSort }\n        data={ data }\n        createRows={ createRows(actionResolver) }\n        indexpath={ indexpath }\n        columns={ columns(intl) }\n        fetchData={ updateRequests }\n        routes={ routes }\n        titlePlural={ intl.formatMessage(requestsMessages.requests) }\n        titleSingular={ intl.formatMessage(requestsMessages.request) }\n        pagination={ meta }\n        handlePagination={ updateRequests }\n        filterValue={ nameValue }\n        onFilterChange={ (value) => handleFilterChange(value, 'name') }\n        isLoading={ isFetching || isFiltering }\n        onCollapse={ onCollapse }\n        renderEmptyState={ () => (\n          <TableEmptyState\n            title={ isEmpty(filterValue)\n              ? intl.formatMessage(tableToolbarMessages.noResultsFound, { results: intl.formatMessage(requestsMessages.requests) })\n              : intl.formatMessage(tableToolbarMessages.noResultsFound)\n            }\n            Icon={ SearchIcon }\n            PrimaryAction={ () =>\n              isEmpty(filterValue) ? null : (\n                <Button onClick={ clearFilters } variant=\"link\">\n                  { intl.formatMessage(tableToolbarMessages.clearAllFilters) }\n                </Button>\n              )\n            }\n            description={\n              isEmpty(filterValue)\n                ? ''\n                : intl.formatMessage(tableToolbarMessages.clearAllFiltersDescription)\n            }\n          />\n        ) }\n        activeFiltersConfig={ {\n          filters: prepareChips({ name: nameValue, requester: requesterValue, decision: filterValue.decision }, intl),\n          onDelete: (_e, chip, deleteAll) => deleteAll ? clearFilters() : onDeleteChip(chip)\n        } }\n        filterConfig={ [\n          {\n            label: intl.formatMessage(requestsMessages.requesterColumn),\n            filterValues: {\n              placeholder: intl.formatMessage(\n                tableToolbarMessages.filterByTitle,\n                { title: intl.formatMessage(requestsMessages.requesterColumn).toLowerCase() }\n              ),\n              'aria-label': intl.formatMessage(\n                tableToolbarMessages.filterByTitle,\n                { title: intl.formatMessage(requestsMessages.requesterColumn).toLowerCase() }\n              ),\n              onChange: (_event, value) => handleFilterChange(value, 'requester'),\n              value: requesterValue\n            }\n          }, {\n            label: intl.formatMessage(requestsMessages.statusColumn),\n            type: 'checkbox',\n            filterValues: {\n              placeholder: intl.formatMessage(\n                tableToolbarMessages.filterByTitle,\n                { title: intl.formatMessage(requestsMessages.statusColumn).toLowerCase() }\n              ),\n              'aria-label': intl.formatMessage(\n                tableToolbarMessages.filterByTitle,\n                { title: intl.formatMessage(requestsMessages.statusColumn).toLowerCase() }\n              ),\n              onChange: (_event, value) => handleFilterChange(value, 'decision'),\n              value: filterValue.decision,\n              items: [ 'approved', 'canceled', 'denied', 'error', 'undecided' ].map((state) => ({\n                label: intl.formatMessage(requestsMessages[state]),\n                value: state\n              }))\n            }\n          }\n        ] }\n      />\n    </Fragment>);\n};\n\nRequestsList.propTypes = {\n  routes: PropTypes.func,\n  persona: PropTypes.string,\n  indexpath: PropTypes.shape ({ index: PropTypes.string }),\n  actionResolver: PropTypes.func\n};\n\nRequestsList.defaultProps = {\n  indexpath: routes.request,\n  actionResolver: () => false\n};\n\nexport default RequestsList;\n","import React from 'react';\nimport { APPROVAL_ADMIN_PERSONA } from '../../helpers/shared/helpers';\nimport RequestsList from './requests-list';\nimport routes from '../../constants/routes';\n\nconst AllRequests = () => (\n  <RequestsList\n    persona={ APPROVAL_ADMIN_PERSONA }\n    indexpath={ routes.allrequest }\n  />\n);\n\nexport default AllRequests;\n","import React, { Fragment, useContext } from 'react';\nimport { SearchIcon } from '@patternfly/react-icons';\nimport { useIsApprovalAdmin } from '../../helpers/shared/helpers';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport { AppTabs } from '../../smart-components/app-tabs/app-tabs';\nimport UserContext from '../../user-context';\nimport {\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  EmptyStateSecondaryActions,\n  Text,\n  TextContent,\n  TextVariants\n} from '@patternfly/react-core';\nimport { useIntl } from 'react-intl';\nimport requestsMessages from '../../messages/requests.messages';\nimport commonMessages from '../../messages/common.message';\n\nconst EmptyRequestList = () => {\n  const { userRoles: userRoles } = useContext(UserContext);\n  const isApprovalAdmin = useIsApprovalAdmin(userRoles);\n  const intl = useIntl();\n\n  return (\n    <Fragment>\n      <TopToolbar>\n        <TopToolbarTitle title={ intl.formatMessage(commonMessages.approvalTitle) }/>\n        { isApprovalAdmin && <AppTabs/> }\n      </TopToolbar>\n      <div className=\"pf-u-mt-xl\">\n        <EmptyState className=\"pf-u-ml-auto pf-u-mr-auto\">\n          <EmptyStateIcon icon={ SearchIcon } />\n          <TextContent>\n            <Text component={ TextVariants.h1 }>\n              { intl.formatMessage(requestsMessages.emptyRequestsTitle) }\n            </Text>\n          </TextContent>\n          <EmptyStateBody>\n            { intl.formatMessage(requestsMessages.emptyRequestsDescription) }\n          </EmptyStateBody>\n        </EmptyState>\n        <EmptyStateSecondaryActions>\n        </EmptyStateSecondaryActions>\n      </div>\n    </Fragment>);\n};\n\nexport default EmptyRequestList;\n","import React, { Fragment, useContext } from 'react';\nimport { Route } from 'react-router-dom';\nimport { fetchRequests } from '../../redux/actions/request-actions';\nimport ActionModal from './action-modal';\nimport {\n  APPROVAL_APPROVER_PERSONA, useIsApprovalAdmin,\n  useIsApprovalApprover,\n  isRequestStateActive\n} from '../../helpers/shared/helpers';\nimport UserContext from '../../user-context';\nimport routesLinks from '../../constants/routes';\nimport RequestsList from './requests-list';\nimport EmptyRequestList from './EmptyRequestList';\n\nimport RequestActions from './request-actions';\n\nconst Requests = () => {\n  const { userRoles: userRoles } = useContext(UserContext);\n  const isApprovalAdmin = useIsApprovalAdmin(userRoles);\n  const isApprovalApprover = useIsApprovalApprover(userRoles);\n\n  const routes = () => <Fragment>\n    <Route exact path={ routesLinks.requests.addComment } render={ props => <ActionModal { ...props }\n      actionType={ 'Add Comment' }\n      postMethod={ fetchRequests } /> }/>\n    <Route exact path={ routesLinks.requests.approve } render={ props => <ActionModal { ...props } actionType={ 'Approve' }\n      postMethod={ fetchRequests }/> } />\n    <Route exact path={ routesLinks.requests.deny } render={ props => <ActionModal { ...props } actionType={ 'Deny' }\n      postMethod={ fetchRequests }/> } />\n  </Fragment>;\n\n  const actionsDisabled = (requestData) => requestData &&\n    requestData.state ?\n    !isRequestStateActive(requestData.state) || requestData.number_of_children > 0 ||\n      (!isApprovalApprover && !isApprovalAdmin) : true;\n\n  const actionResolver = (request) => (\n    request && request.id && actionsDisabled(request)\n      ? null\n      : <RequestActions\n        commentLink={ routesLinks.requests.addComment }\n        approveLink={ routesLinks.requests.approve }\n        denyLink={ routesLinks.requests.deny }\n        request={ request }\n      />\n  );\n\n  return !isApprovalApprover ?\n    <EmptyRequestList/>\n    : <RequestsList\n      routes={ routes }\n      persona={ APPROVAL_APPROVER_PERSONA }\n      actionResolver={ actionResolver }\n    />;\n};\n\nexport default Requests;\n"],"sourceRoot":""}