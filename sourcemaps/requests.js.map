{"version":3,"sources":["webpack:///./src/helpers/request/request-helper.js","webpack:///./src/redux/actions/request-actions.js","webpack:///./src/presentational-components/shared/pf4-select-wrapper.js","webpack:///./src/smart-components/common/form-renderer.js","webpack:///./src/forms/request-comment-form.schema.js","webpack:///./src/smart-components/request/action-modal.js","webpack:///./src/smart-components/request/expandable-content.js","webpack:///./src/smart-components/request/request-table-helpers.js","webpack:///./src/smart-components/request/request-detail/request-info-bar.js","webpack:///./src/smart-components/request/request-detail/action-transcript.js","webpack:///./src/smart-components/request/request-detail/request.js","webpack:///./src/smart-components/request/request-detail/request-list.js","webpack:///./src/smart-components/request/request-detail/request-transcript.js","webpack:///./src/smart-components/request/request-detail/request-detail.js","webpack:///./src/smart-components/request/requests.js","webpack:///./src/utilities/async-debounce.js","webpack:///./src/presentational-components/shared/breadcrubms.js","webpack:///./src/presentational-components/shared/top-toolbar.js","webpack:///./src/smart-components/app-tabs/app-tabs.js","webpack:///./src/presentational-components/shared/table-empty-state.js","webpack:///./src/presentational-components/shared/filter-toolbar-item.js","webpack:///./src/smart-components/common/async-pagination.js","webpack:///./src/presentational-components/shared/bottom-pagination-container.js","webpack:///./src/presentational-components/shared/table-toolbar-view.js"],"names":["requestApi","getRequestApi","actionApi","getActionApi","graphqlInstance","getGraphqlInstance","fetchRequests","filter","pagination","defaultSettings","persona","undefined","paginationQuery","limit","offset","filterQuery","fetchUrl","APPROVAL_API_BASE","fetchHeaders","getAxiosInstance","method","url","headers","fetchRequestTranscript","requestId","parent_id","data","query","then","requests","fetchRequestActions","id","listActionsByRequest","fetchRequestContent","fetchRequestWithSubrequests","a","showRequest","xRhPersona","requestData","number_of_children","subRequests","children","requestActions","actions","createRequestAction","actionIn","createAction","type","ActionTypes","payload","RequestHelper","fetchRequest","apiProps","actionName","meta","notifications","fulfilled","variant","title","description","rejected","Select","input","options","isReadOnly","isDisabled","isRequired","FieldProvider","rest","FormSelect","inputValue","selectOptions","find","value","label","createOptions","map","props","FormSelectOption","key","toString","propTypes","PropTypes","object","arrayOf","shape","any","string","bool","Pf4SelectWrapper","componentType","helperText","hideLabel","error","showError","touched","FormGroup","fieldId","isValid","helperTextInvalid","TextContent","Text","component","TextVariants","small","buttonPositioning","default","modal","buttonOrder","buttonClassName","FormRenderer","componentMapper","formContainer","className","formFieldsMapper","componentTypes","SELECT","layoutMapper","oneOf","defaultProps","schemaFields","isDeny","TEXTAREA_FIELD","name","createRequestCommentSchema","schema","validate","validatorTypes","REQUIRED","fields","ActionModal","push","history","match","params","actionType","addNotification","closeUrl","postMethod","onCancel","dismissable","Modal","isLarge","isOpen","onClose","schemaType","onSubmit","operationType","Approve","Deny","operation","func","location","withRouter","connect","dispatch","bindActionCreators","ExpandedItem","detail","h5","node","ExpandableContent","state","reason","requestActive","isRequestStateActive","useState","requestContent","setRequestContent","isLoading","setIsLoading","fetchStarted","setIsFetching","expandedRequests","useSelector","requestReducer","useEffect","includes","Bullseye","Spinner","Level","LevelItem","product","to","Button","aria-label","portfolio","platform","content","number","uname","createRows","reduce","acc","requester_name","created_at","notified_at","finished_at","decision","cells","timeAgo","parent","fullWidth","RequestInfoBar","request","Stack","gutter","StackItem","Card","CardBody","Title","headingLevel","size","p","order_id","CardHeader","Object","keys","param","operationInfo","memo","displayName","icon","approve","deny","notify","skip","start","cancel","ActionTranscript","actionList","actionItem","style","marginBottom","operationDisplayName","processed_by","comments","h6","centered","Request","isKebabOpen","setState","Dropdown","position","DropdownPosition","right","onSelect","onKebabSelect","toggle","KebabToggle","onToggle","onKebabToggle","dropdownItems","DropdownItem","isPlain","this","item","isExpanded","DataListItem","aria-labelledby","DataListItemRow","DataListToggle","onClick","toggleExpand","DataListItemCells","dataListCells","DataListCell","group_name","textTransform","buildRequestActionKebab","DataListContent","isHidden","fetchRequestDetails","Component","array","idx","noItems","RequestList","expanded","index","indexOf","slice","length","PageHeader","items","DataList","isActive","active_request","RequestTranscript","paddingLeft","initialState","isFetching","requestState","action","RequestDetail","useReducer","stateDispatch","selectedRequest","useParams","useLocation","useDispatch","userRoles","useContext","UserContext","roles","approvalPersona","Promise","all","exact","path","render","breadcrumbs","paddingBottom","Section","Grid","backgroundColor","minHeight","GridItem","span","md","columns","cellFormatters","expandable","debouncedFilter","asyncDebounce","filteringCallback","filterValue","isFiltering","requestsListState","Requests","useHistory","scrollToTop","handleFilterChange","tabItems","eventKey","routes","actionResolver","areActionsDisabled","handlePagination","_apiProps","onCollapse","setRows","setOpen","expandRequest","rows","isApprovalAdmin","fetchData","titlePlural","titleSingular","onFilterChange","renderEmptyState","Icon","SearchIcon","PrimaryAction","asyncFunction","debounceTime","onlyResolvesLast","awesomeDebouncePromise","ApprovalBreadcrumbs","Breadcrumb","values","BreadcrumbItem","TopToolbar","oneOfType","TopToolbarTitle","h1","AppTabs","pathname","activeTab","activeKey","_event","tabIndex","TableEmptyState","renderDescription","FilterToolbarItem","searchValue","placeholder","isClearable","ToolbarItem","TextInput","onChange","width","height","AsyncPagination","count","apiRequest","isCompact","Pagination","perPage","itemCount","onPerPageSelect","page","getCurrentPage","onSetPage","debounce","getNewPage","debouncePromise","direction","BottomPaginationContainer","TableToolbarView","isSelectable","toolbarButtons","setCheckedItems","row","setSelected","newData","selected","checkedItems","page-type","Toolbar","flex","ToolbarGroup","renderToolbar","Table","_index","_isOpen","dropDirection"],"mappings":"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","file":"js/requests.js","sourcesContent":["import { getActionApi, getRequestApi, getAxiosInstance, getGraphqlInstance } from '../shared/user-login';\nimport { APPROVAL_API_BASE } from '../../utilities/constants';\nimport { defaultSettings } from '../shared/pagination';\n\nconst requestApi = getRequestApi();\nconst actionApi = getActionApi();\nconst graphqlInstance = getGraphqlInstance();\n\nexport function fetchRequests(filter = '', pagination = defaultSettings, persona = undefined) {\n  const paginationQuery = `&limit=${pagination.limit}&offset=${pagination.offset}`;\n  const filterQuery = `filter[name][contains_i]=${filter}`;\n  const fetchUrl = `${APPROVAL_API_BASE}/requests/?${filterQuery}${paginationQuery}`;\n  const fetchHeaders = persona ? { 'x-rh-persona': persona } : undefined;\n  return getAxiosInstance()({ method: 'get', url: fetchUrl, headers: fetchHeaders });\n}\n\nconst requestTranscriptQuery = (parent_id) => `query {\n  requests (filter: { parent_id: \"${parent_id}\" } ) {\n    actions {\n      id\n      operation \n      comments \n      created_at \n      processed_by\n    }\n    id\n    name\n    number_of_children\n    decision\n    description\n    group_name\n    number_of_finished_children\n    parent_id\n    state\n    workflow_id\n  }\n}`;\n\nexport const fetchRequestTranscript = (requestId, persona) => {\n  const fetchHeaders = persona ? { 'x-rh-persona': persona } : undefined;\n  return graphqlInstance({ method: 'post', url: `${APPROVAL_API_BASE}/graphql`,\n    headers: fetchHeaders, data: { query: requestTranscriptQuery(requestId) }})\n  .then(({ data: { requests }}) => requests);\n};\n\nexport async function fetchRequest(id) {\n  return await requestApi.showRequest(id);\n}\n\nexport const fetchRequestActions = (id, persona) => {\n  return actionApi.listActionsByRequest(id, persona);\n};\n\nexport const fetchRequestContent = (id, persona) => {\n  const fetchUrl = `${APPROVAL_API_BASE}/requests/${id}/content`;\n  const fetchHeaders = persona ? { 'x-rh-persona': persona } : undefined;\n  return getAxiosInstance()({ method: 'get', url: fetchUrl, headers: fetchHeaders });\n};\n\nexport async function fetchRequestWithActions(id, persona = undefined) {\n  let requestData = await requestApi.showRequest(id, { xRhPersona: persona });\n  const requestActions = await fetchRequestActions(id);\n\n  if (requestData.number_of_children > 0) {\n    const subRequests = await requestApi.listRequestsByRequest(id, persona);\n    const promises = subRequests.data.map(request => fetchRequestWithActions(request.id, persona));\n    const subRequestsWithActions = await Promise.all(promises);\n    requestData = { ...requestData, children: subRequestsWithActions };\n  }\n\n  return  { ...requestData, actions: requestActions };\n}\n\nexport async function fetchRequestWithSubrequests(id, persona) {\n  let requestData = await requestApi.showRequest(id, { xRhPersona: persona });\n\n  if (requestData.number_of_children > 0) {\n    const subRequests = await fetchRequestTranscript(id, persona);\n    requestData = { ...requestData, children: subRequests };\n  } else {\n    const requestActions = await fetchRequestActions(id, persona);\n    requestData = { ...requestData, actions: requestActions ? requestActions.data : []};\n  }\n\n  return  { ...requestData };\n}\n\nexport async function createRequestAction (requestId, actionIn) {\n  return await actionApi.createAction(requestId, actionIn);\n}\n","import * as ActionTypes from '../action-types';\nimport * as RequestHelper from '../../helpers/request/request-helper';\n\nexport const fetchRequests = (filter, pagination, persona) => ({\n  type: ActionTypes.FETCH_REQUESTS,\n  payload: RequestHelper.fetchRequests(filter, pagination, persona)\n});\n\nexport const fetchRequest = (apiProps, persona) => ({\n  type: ActionTypes.FETCH_REQUEST,\n  payload: RequestHelper.fetchRequestWithSubrequests(apiProps, persona)\n});\n\nexport const fetchRequestContent = (apiProps, persona) => ({\n  type: ActionTypes.FETCH_REQUEST_CONTENT,\n  payload: RequestHelper.fetchRequestContent(apiProps, persona)\n});\n\nexport const createRequestAction = (actionName, requestId, actionIn) => ({\n  type: ActionTypes.CREATE_REQUEST_ACTION,\n  payload: RequestHelper.createRequestAction(requestId, actionIn),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success',\n        description: `The ${actionName} was successful.`\n      },\n      rejected: {\n        variant: 'danger',\n        title: `${actionName} error`,\n        description: `The ${actionName} action failed.`\n      }\n    }\n  }\n});\n\nexport const expandRequest = (id) => ({\n  type: ActionTypes.EXPAND_REQUEST,\n  payload: id\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormSelect, FormSelectOption, FormGroup, TextContent, Text, TextVariants } from '@patternfly/react-core';\n\nconst createOptions = (options, inputValue, isRequired) => {\n  if (inputValue && isRequired) {\n    return options;\n  }\n\n  const selectOptions = [ ...options ];\n  return selectOptions.find(({ value }) => value === undefined)\n    ? [ ...selectOptions ]\n    : [{ label: isRequired ? 'Please choose' : 'None' }, ...selectOptions ];\n};\n\nconst Select = ({\n  input,\n  options,\n  isReadOnly,\n  isDisabled,\n  FieldProvider,\n  isRequired,\n  ...rest\n}) => (\n  <FormSelect { ...input } { ...rest } isDisabled={ isDisabled || isReadOnly }>\n    { createOptions(options, input.value, isRequired).map((props) => (\n      <FormSelectOption key={ props.value || props.label } { ...props } label={ props.label.toString() }/> // eslint-disable-line react/prop-types\n    )) }\n  </FormSelect>\n);\n\nSelect.propTypes = {\n  input: PropTypes.object.isRequired,\n  options: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.any,\n    label: PropTypes.string.isRequired\n  })).isRequired,\n  isReadOnly: PropTypes.bool,\n  isDisabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  FieldProvider: PropTypes.any\n};\n\nconst Pf4SelectWrapper = ({\n  componentType,\n  label,\n  isRequired,\n  helperText,\n  meta,\n  description,\n  hideLabel,\n  ...rest\n}) => {\n  const { error, touched } = meta;\n  const showError = touched && error;\n\n  return (\n    <FormGroup\n      isRequired={ isRequired }\n      label={ !hideLabel && label }\n      fieldId={ rest.id }\n      isValid={ !showError }\n      helperText={ helperText }\n      helperTextInvalid={ meta.error }\n    >\n      { description && <TextContent><Text component={ TextVariants.small }>{ description }</Text></TextContent> }\n      <Select label={ label } isValid={ !showError } isRequired={ isRequired } { ...rest }/>\n    </FormGroup>\n  );\n};\n\nPf4SelectWrapper.propTypes = {\n  componentType: PropTypes.string,\n  label: PropTypes.string,\n  isRequired: PropTypes.bool,\n  helperText: PropTypes.string,\n  meta: PropTypes.object,\n  description: PropTypes.string,\n  hideLabel: PropTypes.bool\n};\n\nexport default Pf4SelectWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactFormRender, { componentTypes } from '@data-driven-forms/react-form-renderer';\nimport { layoutMapper, formFieldsMapper } from '@data-driven-forms/pf4-component-mapper';\nimport Pf4SelectWrapper from '../../presentational-components/shared/pf4-select-wrapper';\n\nconst buttonPositioning = {\n  default: {},\n  modal: {\n    buttonOrder: [ 'cancel', 'reset', 'save' ],\n    buttonClassName: 'modal-form-right-align'\n  }\n};\n\nconst FormRenderer = ({ componentMapper, formContainer, ...rest }) => (\n  <div className={ buttonPositioning[formContainer].buttonClassName }>\n    <ReactFormRender\n      formFieldsMapper={ {\n        ...formFieldsMapper,\n        componentMapper,\n        [componentTypes.SELECT]: Pf4SelectWrapper\n      } }\n      layoutMapper={ layoutMapper }\n      { ...buttonPositioning[formContainer] }\n      { ...rest }\n    />\n  </div>\n);\n\nFormRenderer.propTypes = {\n  componentMapper: PropTypes.object,\n  formContainer: PropTypes.oneOf([ 'default', 'modal' ])\n};\n\nFormRenderer.defaultProps = {\n  componentMapper: {},\n  formContainer: 'default'\n};\n\nexport default FormRenderer;\n","import { componentTypes, validatorTypes } from '@data-driven-forms/react-form-renderer';\n\nconst schemaFields = (isDeny) =>({\n  component: componentTypes.TEXTAREA_FIELD,\n  name: 'comments',\n  type: 'text',\n  isRequired: isDeny,\n  label: isDeny ? 'Reason' : 'Comment'\n});\n\nexport const createRequestCommentSchema = (isDeny = false) => {\n  const schema = schemaFields(isDeny);\n  if (isDeny) {\n    schema.validate = [{\n      type: validatorTypes.REQUIRED\n    }];\n  }\n\n  return { fields: [ schema ]};\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FormRenderer from '../common/form-renderer';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Modal } from '@patternfly/react-core';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport { createRequestAction } from '../../redux/actions/request-actions';\nimport { createRequestCommentSchema } from '../../forms/request-comment-form.schema';\n\nconst ActionModal = ({\n  history: { push },\n  match: { params: { id }},\n  actionType,\n  addNotification,\n  createRequestAction,\n  closeUrl,\n  postMethod\n}) => {\n  const onSubmit = (data) => {\n    const operationType = { 'Add Comment': 'memo', Approve: 'approve', Deny: 'deny' };\n    const actionName = actionType === 'Add Comment' ? actionType : `${actionType} Request`;\n    return postMethod ?\n      createRequestAction(\n        actionName,\n        id,\n        { operation: operationType[actionType], ...data }\n      ).then(() => postMethod()).then(() => push(closeUrl))\n      : createRequestAction(\n        actionName,\n        id,\n        { operation: operationType[actionType], ...data }\n      ).then(() => push(closeUrl));\n  };\n\n  const onCancel = () => {\n    const actionName = actionType === 'Add Comment' ? actionType : `${actionType} Request`;\n    addNotification({\n      variant: 'warning',\n      title: actionName,\n      dismissable: true,\n      description: `${actionName} was cancelled by the user.`\n    });\n    push(closeUrl);\n  };\n\n  return (\n    <Modal\n      isLarge\n      title={ actionType === 'Add Comment' ? `Request #${id}` : `${actionType} Request #${id}` }\n      isOpen\n      onClose={ onCancel }\n    >\n      <FormRenderer\n        schema={ createRequestCommentSchema (actionType === 'Deny') }\n        schemaType=\"default\"\n        onSubmit={ onSubmit }\n        onCancel={ onCancel }\n        formContainer=\"modal\"\n      />\n    </Modal>\n  );\n};\n\nActionModal.defaultProps = {\n  closeUrl: '/requests'\n};\n\nActionModal.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired,\n  addNotification: PropTypes.func.isRequired,\n  createRequestAction: PropTypes.func.isRequired,\n  postMethod: PropTypes.func,\n  id: PropTypes.string,\n  actionType: PropTypes.string,\n  closeUrl: PropTypes.string,\n  match: PropTypes.object,\n  location: PropTypes.object\n};\n\nconst mapDispatchToProps = (dispatch) => bindActionCreators({\n  addNotification,\n  createRequestAction\n}, dispatch);\n\nexport default withRouter(connect(null, mapDispatchToProps)(ActionModal));\n","import React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { TextContent, Text, TextVariants, Level, LevelItem, Button, Bullseye } from '@patternfly/react-core';\nimport { isRequestStateActive } from '../../helpers/shared/helpers';\nimport { fetchRequestContent } from '../../helpers/request/request-helper';\nimport { Spinner } from '@redhat-cloud-services/frontend-components/components/Spinner';\n\nexport const ExpandedItem = ({ title = '', detail = '' }) => (\n  <TextContent>\n    <Text className=\"data-table-detail heading\" component={ TextVariants.small }>{ title }</Text>\n    <Text className=\"data-table-detail content\" component={ TextVariants.h5 }>{ detail }</Text>\n  </TextContent>\n);\n\nExpandedItem.propTypes = {\n  title: PropTypes.node,\n  detail: PropTypes.node\n};\n\nconst ExpandableContent = ({ id, number_of_children, state, reason }) => {\n  const requestActive = isRequestStateActive(state) && !number_of_children;\n  const [ requestContent, setRequestContent ] = useState([]);\n  const [ isLoading, setIsLoading ] = useState(true);\n  const [ fetchStarted, setIsFetching ] = useState(false);\n\n  const expandedRequests = useSelector(({ requestReducer: { expandedRequests }}) => expandedRequests);\n\n  useEffect(() => {\n    if (!fetchStarted && isLoading && expandedRequests.includes(id)) {\n      setIsFetching(true);\n      fetchRequestContent(id).then((data) => { setRequestContent(data); setIsLoading(false); }).catch(() => setIsLoading(false));\n    }\n  }, [ expandedRequests ]);\n\n  if (isLoading) {\n    return (<Bullseye>\n      <Spinner/>\n    </Bullseye>);\n  }\n\n  return (\n    <Fragment>\n      <Level>\n        <LevelItem>\n          <ExpandedItem title=\"Product\" detail={ requestContent ? requestContent.product : 'Unknown' } />\n        </LevelItem>\n        { requestActive && <LevelItem>\n          <Link to={ `/requests/approve/${id}` }  className=\"pf-u-mr-md\">\n            <Button variant=\"primary\" aria-label=\"Approve Request\" isDisabled={ !requestActive }>\n              Approve\n            </Button>\n          </Link>\n          <Link to={ `/requests/deny/${id}` }>\n            <Button variant=\"danger\" aria-label=\"Deny Request\">\n              Deny\n            </Button>\n          </Link>\n        </LevelItem>\n        }</Level>\n      <Level>\n        <LevelItem>\n          <ExpandedItem title=\"Portfolio\" detail={ requestContent ? requestContent.portfolio : 'Unknown' }/>\n          <ExpandedItem title=\"Platform\" detail={ requestContent ? requestContent.platform : 'Unknown' }/>\n          <ExpandedItem title=\"Reason\" detail={ reason ? reason : '' }/>\n        </LevelItem>\n      </Level>\n    </Fragment>\n  );\n};\n\nExpandableContent.propTypes = {\n  id: PropTypes.string,\n  content: PropTypes.object,\n  number_of_children: PropTypes.number,\n  uname: PropTypes.string,\n  state: PropTypes.string,\n  reason: PropTypes.string\n};\n\nexport default ExpandableContent;\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\n\nimport ExpandableContent from './expandable-content';\nimport { timeAgo }  from '../../helpers/shared/helpers';\n\nexport const createRows = (data) =>\n  data.reduce((acc, { id,\n    name,\n    requester_name,\n    created_at,\n    notified_at,\n    finished_at,\n    state,\n    decision,\n    reason,\n    number_of_children\n  }, key) => ([\n    ...acc, {\n      id,\n      isOpen: false,\n      state,\n      number_of_children,\n      cells: [\n        <Fragment key={ id }><Link to={ `/requests/detail/${id}` }><Button variant=\"link\"> { name } </Button></Link></Fragment>,\n        requester_name,\n        timeAgo(created_at),\n        finished_at ? timeAgo(finished_at) : (notified_at ? timeAgo(notified_at) : timeAgo(created_at)),\n        state,\n        decision\n      ]\n    }, {\n      parent: key * 2,\n      fullWidth: true,\n      cells: [{\n        title: <ExpandableContent id={ id }\n          number_of_children={ number_of_children }\n          state={ state }\n          reason={ reason }/>\n      }]\n    }\n  ]), []);\n\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Card, CardBody, CardHeader,\n  Stack,\n  StackItem,\n  Text,\n  TextContent,\n  TextVariants,\n  Title\n} from '@patternfly/react-core';\n\nconst RequestInfoBar = ({ request, requestContent }) => {\n  return (\n    <Fragment>\n      <Stack gutter=\"md\">\n        <StackItem>\n          <Card>\n            <CardBody>\n              <Stack gutter=\"md\">\n                <StackItem>\n                  <Title headingLevel=\"h5\" size=\"lg\">\n                    Summary\n                  </Title>\n                </StackItem>\n                <StackItem>\n                  <TextContent>\n                    <Text className={ 'font-14' }>\n                      Product\n                    </Text>\n                    <Text id='portfolio-item-name' component={ TextVariants.p }>\n                      { requestContent ? requestContent.product : '' }\n                    </Text>\n                  </TextContent>\n                </StackItem>\n                <StackItem>\n                  <TextContent>\n                    <Text className={ 'font-14' }>\n                      Portfolio\n                    </Text>\n                    <Text  id='portfolio-name' component={ TextVariants.p }>\n                      { requestContent ? requestContent.portfolio : '' }\n                    </Text>\n                  </TextContent>\n                </StackItem>\n                <StackItem>\n                  <TextContent>\n                    <Text className={ 'font-14' }>\n                      Platform\n                    </Text>\n                    <Text id='source-name' component={ TextVariants.p }>\n                      { requestContent ? requestContent.platform : ' ' }\n                    </Text>\n                  </TextContent>\n                </StackItem>\n                <StackItem>\n                  <TextContent>\n                    <Text className={ 'font-14' }>Requester </Text>\n                    <Text id='requester_name' component={ TextVariants.p }>\n                      { request.requester_name }\n                    </Text>\n                  </TextContent>\n                </StackItem>\n                <StackItem>\n                  <TextContent>\n                    <Text className={ 'font-14' }>Order# </Text>\n                    <Text id='requester_name' component={ TextVariants.p }>\n                      { requestContent ? requestContent.order_id : '' }\n                    </Text>\n                  </TextContent>\n                </StackItem>\n              </Stack>\n            </CardBody>\n          </Card>\n        </StackItem>\n        <StackItem>\n          <Card>\n            <CardHeader>\n              <Title headingLevel=\"h5\" size=\"lg\">Parameters</Title>\n            </CardHeader>\n            <CardBody>\n              <Stack gutter=\"md\">\n                { requestContent.params && Object.keys(requestContent.params).map(param => {\n                  return ((requestContent.params[param]) &&\n                      <StackItem>\n                        <TextContent>\n                          <Text key={ param } className={ 'font-14' }>\n                            { `${param}` }\n                          </Text>\n                          <Text id={ param } component={ TextVariants.p }>\n                            { `${requestContent.params[param]}` }\n                          </Text>\n                        </TextContent>\n                      </StackItem>\n                  );\n                })\n                }\n              </Stack>\n            </CardBody>\n          </Card>\n        </StackItem>\n      </Stack>\n    </Fragment>\n  );\n};\n\nRequestInfoBar.propTypes = {\n  request: PropTypes.shape({\n    requester_name: PropTypes.string,\n    order_id: PropTypes.string\n  }).isRequired,\n  requestContent: PropTypes.object\n};\nexport default RequestInfoBar;\n\n","import React from 'react';\nimport { timeAgo }  from '../../../helpers/shared/helpers';\nimport {\n  Stack,\n  TextContent,\n  Text,\n  TextVariants\n} from '@patternfly/react-core';\nimport { CheckCircleIcon,\n  CommentIcon,\n  EnvelopeIcon,\n  OutlinedTimesCircleIcon,\n  AngleDoubleRightIcon,\n  OnRunningIcon,\n  ErrorCircleOIcon,\n  ExclamationCircleIcon } from '@patternfly/react-icons';\nimport { EmptyTable } from '@redhat-cloud-services/frontend-components';\n\nconst operationInfo = {\n  memo: { displayName: 'Comment from', icon: <CommentIcon/> },\n  approve: { displayName: 'Approved by', icon: <CheckCircleIcon className=\"pf-u-mr-sm icon-success-fill\"/> },\n  deny: { displayName: 'Denied by', icon: <OutlinedTimesCircleIcon className=\"pf-u-mr-sm icon-danger-fill\"/> },\n  notify: { displayName: 'Notified by', icon: <EnvelopeIcon/> },\n  skip: { displayName: 'Skipped by', icon: <AngleDoubleRightIcon/> },\n  start: { displayName: 'Started by', icon: <OnRunningIcon/> },\n  cancel: { displayName: 'Canceled by', icon: <ErrorCircleOIcon className=\"pf-u-mr-sm icon-danger-fill\"/> },\n  error: { displayName: 'Error', icon: <ExclamationCircleIcon className=\"pf-u-mr-sm icon-danger-fill\"/> }\n};\n\nconst operationIcon = (operation) => operationInfo[operation] ? operationInfo[operation].icon : '';\nconst operationDisplayName = (operation) => operationInfo[operation] ? operationInfo[operation].displayName : '';\n\nexport const ActionTranscript = actionList => {\n  const actions = actionList.actionList;\n  return actions ? (\n    <Stack>\n      { actions.map(actionItem =>\n        <div key={ `${actionItem.id}-action` }>\n          <TextContent><Text key={ `${actionItem.id}-action-created_at` } style={ { marginBottom: 0 } }\n            className=\"data-table-detail content\" component={ TextVariants.small }>\n            { timeAgo(actionItem.created_at) }\n          </Text>\n          <Text key={ `${actionItem.id}-action-operation` }  style={ { marginBottom: 0 } }\n            className=\"data-table-detail content\">\n            { operationIcon(actionItem.operation) } { `${operationDisplayName(actionItem.operation)}  ${actionItem.processed_by}` }\n          </Text>\n          { actionItem.comments && <Text key={ `${actionItem.id}-action-comments` } style={ { marginBottom: 0 } }\n            className=\"data-table-detail content\" component={ TextVariants.h6 }>\n            { `${actionItem.comments}` }\n          </Text> } </TextContent>\n          <br/>\n        </div>)\n      }\n    </Stack>\n  ) : <EmptyTable centered\n    aria-label=\"No records\"/>;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { isRequestStateActive } from '../../../helpers/shared/helpers';\nimport { ActionTranscript } from './action-transcript';\n\nimport {\n  Stack,\n  StackItem,\n  Button,\n  DataListItem,\n  DataListItemRow,\n  DataListCell,\n  DataListToggle,\n  DataListItemCells,\n  DataListContent,\n  DropdownItem,\n  Dropdown,\n  DropdownPosition,\n  KebabToggle,\n  TextVariants,\n  TextContent,\n  Level,\n  LevelItem\n} from '@patternfly/react-core';\n\nclass Request extends Component {\n  state = {\n    isKebabOpen: false\n  };\n\n  onKebabToggle = isOpen => {\n    this.setState({\n      isKebabOpen: isOpen\n    });\n  };\n\n  onKebabSelect = () => {\n    this.setState({ isKebabOpen: !this.state.isKebabOpen });\n  };\n\n  buildRequestActionKebab = (request) => {\n    return (\n      <Dropdown\n        position={ DropdownPosition.right }\n        onSelect={ this.onKebabSelect }\n        toggle={ <KebabToggle id={ `request-request-dropdown-${request.id}` } onToggle={ this.onKebabToggle }/> }\n        isOpen={ this.state.isKebabOpen }\n        dropdownItems={ [\n          <DropdownItem aria-label=\"Add Comment\" key={ `add_comment_${request.id}` }>\n            <Link\n              id={ `request-${request.id}-request-comment` }\n              to={ `/requests/detail/${request.id}/add_comment` }\n              className=\"pf-c-dropdown__menu-item\"\n            >\n              Comment\n            </Link>\n          </DropdownItem>\n        ] }\n        isPlain\n      />\n    );\n  };\n\n  fetchRequestDetails = (request) => {\n    return <ActionTranscript actionList={ request.actions }/>;\n  };\n\n  render() {\n    const { item, isExpanded } = this.props;\n    const requestActive = isRequestStateActive(item.state);\n    return (\n      <DataListItem key={ `request-${item.id}` }\n        aria-labelledby={ `check-request-${item.id}` }\n        isExpanded={ isExpanded }>\n        <DataListItemRow>\n          <DataListToggle\n            onClick={ () => this.props.toggleExpand(`request-${item.id}`) }\n            isExpanded={ isExpanded }\n            id={ `request-${item.id}` }\n            aria-labelledby={ `request-${item.id} request-${item.id}` }\n            aria-label=\"Toggle details for\"\n          />\n          <DataListItemCells\n            dataListCells={ [\n              <DataListCell key={ item.id }>\n                <span id={ `${item.id}-name` }>{ `${item.group_name ? item.group_name : item.name}` } </span>\n              </DataListCell>,\n              <DataListCell key={ `${item.id}-state` }>\n                <span style={ { textTransform: 'capitalize' } } id={ `${item.id}-state` }>{ `${item.state}` } </span>\n              </DataListCell>,\n              <DataListCell key={ `${item.id}-action` }>\n                <Level>\n                  <LevelItem>\n                    { (requestActive) &&\n                    <div>\n                      <Link id={ `approve-${item.id}` } to={ `/requests/detail/${item.id}/approve` }>\n                        <Button variant=\"link\" aria-label=\"Approve Request\">\n                          Approve\n                        </Button>\n                      </Link>\n                      <Link id={ `deny-${item.id}` } to={ `/requests/detail/${item.id}/deny` }>\n                        <Button variant=\"link\" className=\"destructive-color\" aria-label=\"Deny Request\">\n                          Deny\n                        </Button>\n                      </Link>\n                    </div> }\n                  </LevelItem>\n                </Level>\n              </DataListCell>,\n              <DataListCell\n                key={ `request-${item.id}` }\n                className=\"pf-c-data-list__action\"\n                aria-labelledby={ `request-${item.id} check-request-action${item.id}` }\n                id={ `workflow-${item.id}` }\n                aria-label=\"Actions\">\n                { requestActive && this.buildRequestActionKebab(item) }\n              </DataListCell>\n            ] }/>\n        </DataListItemRow>\n        <DataListContent aria-label=\"Request Content Details\"\n          isHidden={ !isExpanded }>\n          <Stack gutter=\"md\">\n            <StackItem>\n              <TextContent component={ TextVariants.h6 }>\n                { this.fetchRequestDetails(item) }\n              </TextContent>\n            </StackItem>\n          </Stack>\n        </DataListContent>\n\n      </DataListItem>\n    );\n  };\n}\n\nRequest.propTypes = {\n  isLoading: PropTypes.bool,\n  item: PropTypes.shape({\n    id: PropTypes.string,\n    name: PropTypes.string,\n    state: PropTypes.string,\n    group_name: PropTypes.string.isRequired,\n    requestActions: PropTypes.shape({\n      data: PropTypes.array\n    })\n  }).isRequired,\n  idx: PropTypes.number,\n  isExpanded: PropTypes.bool.isRequired,\n  toggleExpand: PropTypes.func.isRequired,\n  noItems: PropTypes.string\n};\n\nexport default Request;\n","import React, { Component, Fragment } from 'react';\nimport propTypes from 'prop-types';\nimport { PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components/components/PageHeader';\nimport { DataList } from '@patternfly/react-core';\nimport Request from './request';\nimport { DataListLoader } from '../../../presentational-components/shared/loader-placeholders';\n\nclass RequestList extends Component {\n  state = {\n    expanded: []\n  };\n\n  toggleExpand = id => this.setState(({ expanded }) => {\n    const index = expanded.indexOf(id);\n    const newExpanded =\n      index >= 0 ? [ ...expanded.slice(0, index), ...expanded.slice(index + 1, expanded.length) ] : [ ...expanded, id ];\n    return ({ expanded: newExpanded });\n  });\n\n  isExpanded = key => {\n    return this.state.expanded.includes(key);\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div>\n          { this.props.isLoading && (\n            <Fragment>\n              <PageHeader>\n                <PageHeaderTitle title={ this.props.noItems }/>\n              </PageHeader>\n              <DataListLoader/>\n            </Fragment>\n          ) }\n        </div>\n        { this.props.items.length > 0 && (\n          <DataList aria-label=\"Expandable data list\">\n            { this.props.items.map((item, idx) => (\n              <Request\n                key={ item.id }\n                item={ item }\n                idx={ idx }\n                isActive={ idx === 0 }\n                isExpanded={ this.isExpanded(`request-${item.id}`) }\n                toggleExpand={ this.toggleExpand }\n              />)) }\n          </DataList>)\n        }\n      </Fragment>\n    );\n  };\n}\n\nRequestList.propTypes = {\n  isLoading: propTypes.bool,\n  items: propTypes.array,\n  noItems: propTypes.string,\n  active_request: propTypes.number\n};\n\nRequestList.defaultProps = {\n  items: []\n};\n\nexport default RequestList;\n\n","import React, { Fragment }  from 'react';\nimport PropTypes from 'prop-types';\nimport { Title } from '@patternfly/react-core';\nimport RequestList from './request-list';\n\nconst RequestTranscript = ({ request }) => (<Fragment>\n  <Title size=\"sm\" style={ { paddingLeft: '32px' } }> Request transcript </Title>\n  <RequestList items={ request.children && request.children.length > 0 ? request.children : [ request ] }/>\n</Fragment>);\n\nRequestTranscript.propTypes = {\n  request: PropTypes.shape({\n    content: PropTypes.object,\n    children: PropTypes.array\n  }).isRequired\n};\n\nexport default RequestTranscript;\n","import React, { Fragment, useContext, useEffect, useReducer } from 'react';\nimport { Route, useParams, useLocation } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Grid, GridItem } from '@patternfly/react-core';\nimport { Section } from '@redhat-cloud-services/frontend-components/components/Section';\nimport '../../../App.scss';\nimport ActionModal from '../action-modal';\nimport RequestInfoBar from './request-info-bar';\nimport RequestTranscript from './request-transcript';\nimport { fetchRequest, fetchRequestContent } from '../../../redux/actions/request-actions';\nimport { RequestLoader } from '../../../presentational-components/shared/loader-placeholders';\nimport { TopToolbar, TopToolbarTitle } from '../../../presentational-components/shared/top-toolbar';\nimport UserContext from '../../../user-context';\nimport { approvalPersona } from '../../../helpers/shared/helpers';\n\nconst initialState = {\n  isFetching: true\n};\nconst requestState = (state, action) => {\n  switch (action.type) {\n    case 'setFetching':\n      return { ...state, isFetching: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst RequestDetail = () => {\n  const [{ isFetching }, stateDispatch ] = useReducer(requestState, initialState);\n\n  const { selectedRequest, requestContent } = useSelector(\n    ({\n      requestReducer: {\n        requestContent: requestContent,\n        selectedRequest: selectedRequest\n      }\n    }) => ({ selectedRequest, requestContent })\n  );\n  const { id }  = useParams();\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const { roles: userRoles } = useContext(UserContext);\n\n  useEffect(() => {\n    const persona = approvalPersona(userRoles);\n    Promise.all([ dispatch(fetchRequest(id, persona)), dispatch(fetchRequestContent(id, persona)) ])\n    .then(() => stateDispatch({ type: 'setFetching', payload: false }));\n  }, []);\n\n  const renderRequestDetails = () => {\n    if (isFetching || !selectedRequest || Object.keys(selectedRequest).length === 0) {\n      return (\n        <Section style={ { backgroundColor: 'white', minHeight: '100%' } }>\n          <RequestLoader />\n        </Section>\n      );\n    }\n    else {\n      return (\n        <Fragment>\n          <GridItem span={ 3 } className=\"info-bar\">\n            <RequestInfoBar request={ selectedRequest } requestContent={ requestContent }/>\n          </GridItem>\n          <GridItem md={ 9 } className=\"detail-pane\">\n            <RequestTranscript request={ selectedRequest } url={ location.url }/>\n          </GridItem>\n        </Fragment>\n      );\n    }\n  };\n\n  return (\n    <Fragment>\n      <Route exact path=\"/requests/detail/:id/add_comment\" render={ props =>\n        <ActionModal { ...props } actionType={ 'Add Comment' } closeUrl={ location.url } /> }/>\n      <Route exact path=\"/requests/detail/:id/approve\" render={ props =>\n        <ActionModal { ...props } actionType={ 'Approve' } closeUrl={ location.url } /> } />\n      <Route exact path=\"/requests/detail/:id/deny\" render={ props =>\n        <ActionModal { ...props } actionType={ 'Deny' } closeUrl={ location.url } /> } />\n      <TopToolbar\n        breadcrumbs={ [{ title: 'Request queue', to: '/requests', id: 'requests' }] }\n        paddingBottom={ true }\n      >\n        <TopToolbarTitle title={ `Request ${id}` } />\n      </TopToolbar>\n      <Section type=\"content\">\n        <Grid gutter=\"md\">\n          { renderRequestDetails() }\n        </Grid>\n      </Section>\n    </Fragment>\n  );\n};\n\nexport default RequestDetail;\n","import React, { Fragment, useEffect, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\nimport { expandable } from '@patternfly/react-table';\nimport { fetchRequests, expandRequest } from '../../redux/actions/request-actions';\nimport ActionModal from './action-modal';\nimport { createRows } from './request-table-helpers';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport RequestDetail from './request-detail/request-detail';\nimport { isApprovalAdmin, isRequestStateActive } from '../../helpers/shared/helpers';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport AppTabs from '../../smart-components/app-tabs/app-tabs';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport asyncDebounce from '../../utilities/async-debounce';\nimport { scrollToTop, approvalPersona } from '../../helpers/shared/helpers';\nimport { SearchIcon } from '@patternfly/react-icons/dist/js/index';\nimport TableEmptyState from '../../presentational-components/shared/table-empty-state';\nimport UserContext from '../../user-context';\n\nconst columns = [{\n  title: 'Name',\n  cellFormatters: [ expandable ]\n},\n'Requester',\n'Opened',\n'Updated',\n'Status',\n'Decision'\n];\n\nconst debouncedFilter = asyncDebounce(\n  (filter, dispatch, filteringCallback, persona, meta = defaultSettings) => {\n    filteringCallback(true);\n    dispatch(fetchRequests(filter, persona, meta)).then(() =>\n      filteringCallback(false)\n    );\n  },\n  1000\n);\nconst initialState = {\n  filterValue: '',\n  isOpen: false,\n  isFetching: true,\n  isFiltering: false\n};\n\nconst requestsListState = (state, action) => {\n  switch (action.type) {\n    case 'setFetching':\n      return { ...state, isFetching: action.payload };\n    case 'setFilterValue':\n      return { ...state, filterValue: action.payload };\n    case 'setFilteringFlag':\n      return { ...state, isFiltering: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst Requests = () => {\n  const [{ filterValue, isFetching, isFiltering }, stateDispatch ] = useReducer(\n    requestsListState,\n    initialState\n  );\n  const { data, meta } = useSelector(\n    ({ requestReducer: { requests }}) => requests\n  );\n\n  const { roles: userRoles } = useContext(UserContext);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useEffect(() => {\n    dispatch(\n      fetchRequests(filterValue, defaultSettings, approvalPersona(userRoles))\n    ).then(() => stateDispatch({ type: 'setFetching', payload: false }));\n    scrollToTop();\n  }, []);\n\n  const handleFilterChange = (value) => {\n    stateDispatch({ type: 'setFilterValue', payload: value });\n    debouncedFilter(\n      value,\n      dispatch,\n      (isFiltering) =>\n        stateDispatch({ type: 'setFilteringFlag', payload: isFiltering }),\n      {\n        ...meta,\n        offset: 0\n      },\n      approvalPersona(userRoles)\n    );\n  };\n\n  const tabItems = [{ eventKey: 0, title: 'Request queue', name: '/requests' },\n    { eventKey: 1, title: 'Approval processes', name: '/workflows' }];\n\n  const routes = () => <Fragment>\n    <Route exact path=\"/requests/add_comment/:id\" render={ props => <ActionModal { ...props }\n      actionType={ 'Add Comment' }\n      postMethod={ fetchRequests } /> }/>\n    <Route exact path=\"/requests/approve/:id\" render={ props => <ActionModal { ...props } actionType={ 'Approve' }\n      postMethod={ fetchRequests }/> } />\n    <Route exact path=\"/requests/deny/:id\" render={ props => <ActionModal { ...props } actionType={ 'Deny' }\n      postMethod={ fetchRequests }/> } />\n  </Fragment>;\n\n  const areActionsDisabled = (requestData) => requestData &&\n    requestData.state ?\n    !isRequestStateActive(requestData.state) || requestData.number_of_children > 0 : true;\n\n  const actionResolver = (requestData) => {\n    return (requestData && requestData.id && areActionsDisabled(requestData) ? null :\n      [\n        {\n          title: 'Comment',\n          onClick: () => history.push(`/requests/add_comment/${requestData.id}`)\n        }\n      ]);\n  };\n\n  const handlePagination = (_apiProps, pagination) => {\n    stateDispatch({ type: 'setFetching', payload: true });\n    dispatch(fetchRequests(filterValue, pagination, approvalPersona(userRoles)))\n    .then(() => stateDispatch({ type: 'setFetching', payload: false }))\n    .catch(() => stateDispatch({ type: 'setFetching', payload: false }));\n  };\n\n  const onCollapse = (id, setRows, setOpen) => {\n    dispatch(expandRequest(id));\n    setRows((rows) => setOpen(rows, id));\n  };\n\n  const renderRequestsList = () => {\n    return (\n      <Fragment>\n        <TopToolbar>\n          <TopToolbarTitle title=\"Approval\"/>\n          { isApprovalAdmin(userRoles) && <AppTabs tabItems={ tabItems } /> }\n        </TopToolbar>\n        <TableToolbarView\n          data={ data }\n          createRows={ createRows }\n          columns={ columns }\n          fetchData={ handlePagination }\n          routes={ routes }\n          actionResolver={ actionResolver }\n          titlePlural=\"requests\"\n          titleSingular=\"request\"\n          pagination={ meta }\n          handlePagination={ handlePagination }\n          filterValue={ filterValue }\n          onFilterChange={ handleFilterChange }\n          isLoading={ isFetching || isFiltering }\n          onCollapse={ onCollapse }\n          renderEmptyState={ () => (\n            <TableEmptyState\n              title={ filterValue === '' ? 'No requests' : 'No results found' }\n              Icon={ SearchIcon }\n              PrimaryAction={ () =>\n                filterValue !== '' ? (\n                  <Button onClick={ () => handleFilterChange('') } variant=\"link\">\n                            Clear all filters\n                  </Button>\n                ) : null\n              }\n              description={\n                filterValue === ''\n                  ? ''\n                  : 'No results match the filter criteria. Remove all filters or clear all filters to show results.'\n              }\n            />\n          ) }\n        />\n      </Fragment>);\n  };\n\n  return (\n    <Switch>\n      <Route path={ '/requests/detail/:id' } render={ props => <RequestDetail { ...props }/> } />\n      <Route path={ '/requests' } render={ () => renderRequestsList() } />\n    </Switch>\n  );\n};\n\nRequests.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }),\n  requests: PropTypes.array,\n  isLoading: PropTypes.bool\n};\n\nRequests.defaultProps = {\n  requests: [],\n  isLoading: false\n};\n\nexport default Requests;\n","import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (\n  asyncFunction,\n  debounceTime = 250,\n  options = { onlyResolvesLast: false }\n) => awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport { Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\n\nconst ApprovalBreadcrumbs = ({ breadcrumbs }) => breadcrumbs\n  ? (\n    <Breadcrumb>\n      { Object.values(breadcrumbs).map(item => (\n        <BreadcrumbItem key={ item.title } isActive={ item.isActive }>\n          { (item.to && <NavLink exact to={ item.to }>{ item.title }</NavLink>) || item.title }\n        </BreadcrumbItem>\n      )) }\n    </Breadcrumb>\n  ) : null;\n\nApprovalBreadcrumbs.propTypes = {\n  breadcrumbs: PropTypes.arrayOf(PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    isActive: PropTypes.bool,\n    to: PropTypes.string\n  }))\n};\n\nexport default ApprovalBreadcrumbs;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Level, LevelItem, Text, TextContent, TextVariants  } from '@patternfly/react-core';\nimport { ToolbarTitlePlaceholder } from './loader-placeholders';\nimport ApprovalBreadcrumbs from './breadcrubms';\n\nimport './top-toolbar.scss';\n\nexport const TopToolbar = ({ children,  breadcrumbs, paddingBottom }) => (\n  <div className={ `pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg ${paddingBottom ? 'pf-u-pb-sm' : ''} top-toolbar` }>\n    { breadcrumbs && (<Level className=\"pf-u-mb-md\">\n      <ApprovalBreadcrumbs breadcrumbs={ breadcrumbs } />\n    </Level>)\n    }\n    { children }\n  </div>\n);\n\nTopToolbar.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired,\n  breadcrumbs: PropTypes.array,\n  paddingBottom: PropTypes.bool\n};\n\nTopToolbar.defaultProps = {\n  paddingBottom: false\n};\n\nexport const TopToolbarTitle = ({ title, description, children }) => (\n  <Fragment>\n    <Level>\n      <LevelItem>\n        <TextContent className=\"pf-u-mb-sm\">\n          { <Text component={ TextVariants.h1 }>{ title || <ToolbarTitlePlaceholder /> }</Text> }\n        </TextContent>\n        { description &&\n              <TextContent className=\"pf-u-pt-sm pf-u-mb-md\">\n                <Text component={ TextVariants.p }>{ description }</Text>\n              </TextContent> }\n      </LevelItem>\n      { children }\n    </Level>\n  </Fragment>\n);\n\nTopToolbarTitle.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string,\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ])\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { Tabs, Tab } from '@patternfly/react-core';\n\nconst AppTabs = ({ history: { push }, location: { pathname }, tabItems }) => {\n  const activeTab = tabItems.find(({ name }) => pathname.includes(name));\n  const handleTabClick = (_event, tabIndex) => push(tabItems[tabIndex].name);\n\n  return (\n    <Tabs className=\"pf-u-mt-sm\" activeKey={ activeTab ? activeTab.eventKey : 0 } onSelect={ handleTabClick }>\n      { tabItems.map((item) => <Tab title={ item.title } key={ item.eventKey } eventKey={ item.eventKey } name={ item.name }/>) }\n    </Tabs>\n  );\n};\n\nAppTabs.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }),\n  tabItems: PropTypes.array.isRequired\n};\n\nexport default withRouter(AppTabs);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateBody,\n  EmptyStateSecondaryActions,\n  Text,\n  TextContent,\n  TextVariants\n} from '@patternfly/react-core';\nimport { EmptyTable } from '@redhat-cloud-services/frontend-components';\nimport { Link }  from 'react-router-dom';\n\nconst TableEmptyState = ({\n  title,\n  Icon,\n  description,\n  PrimaryAction,\n  renderDescription\n}) => (\n  <EmptyTable centered\n    aria-label=\"No records\"\n  >\n    <EmptyState className=\"pf-u-ml-auto pf-u-mr-auto\">\n      <EmptyStateIcon icon={ Icon } />\n      <TextContent>\n        <Text component={ TextVariants.h1 }>{ title }</Text>\n      </TextContent>\n      <EmptyStateBody>\n        { description }\n        { renderDescription() }\n      </EmptyStateBody>\n      <EmptyStateSecondaryActions>\n        { PrimaryAction && <PrimaryAction /> }\n      </EmptyStateSecondaryActions>\n    </EmptyState>\n  </EmptyTable>\n);\n\nTableEmptyState.defaultProps = {\n  renderDescription: () => null\n};\n\nTableEmptyState.propTypes = {\n  title: PropTypes.string.isRequired,\n  Icon: PropTypes.any.isRequired,\n  description: PropTypes.string.isRequired,\n  PrimaryAction: PropTypes.any,\n  renderDescription: PropTypes.func\n};\n\nexport default TableEmptyState;\n\nexport const EmptyStatePrimaryAction = ({ url, label }) => (\n  <Link to={ url }>\n    <Button variant=\"secondary\">{ label }</Button>\n  </Link>\n);\n\nEmptyStatePrimaryAction.propTypes = {\n  url: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { SearchIcon, CloseIcon } from '@patternfly/react-icons';\nimport { ToolbarItem, TextInput } from '@patternfly/react-core';\n\nconst FilterToolbarItem = ({\n  searchValue,\n  onFilterChange,\n  placeholder,\n  isClearable\n}) => (\n  <ToolbarItem>\n    <div className=\"toolbar-filter-input-group\">\n      <TextInput\n        placeholder={ placeholder }\n        value={ searchValue }\n        type=\"text\"\n        onChange={ onFilterChange }\n        aria-label={ placeholder }\n      />\n      <span className=\"filter-icons-container\">\n        { (isClearable && searchValue && (\n          <CloseIcon\n            className=\"clear-filter\"\n            width=\"16\"\n            height=\"16\"\n            onClick={ () => onFilterChange('') }\n          />\n        )) || <SearchIcon /> }\n      </span>\n    </div>\n  </ToolbarItem>\n);\n\nFilterToolbarItem.propTypes = {\n  onFilterChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  searchValue: PropTypes.string,\n  isClearable: PropTypes.bool\n};\n\nFilterToolbarItem.defaultProps = {\n  searchValue: '',\n  isClearable: false\n};\n\nexport default FilterToolbarItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport debouncePromise from 'awesome-debounce-promise';\n\nimport { Pagination } from '@patternfly/react-core';\n\nimport { getCurrentPage, getNewPage } from '../../helpers/shared/pagination';\n\nconst AsyncPagination = ({\n  meta: { limit, count, offset },\n  apiProps,\n  apiRequest,\n  className,\n  isCompact,\n  ...props\n}) => {\n  const handleOnPerPageSelect = (_event, limit) =>\n    apiRequest(apiProps, {\n      offset,\n      limit\n    });\n\n  const handleSetPage = (_event, number, debounce) => {\n    const options = {\n      offset: getNewPage(number, limit),\n      limit\n    };\n\n    const request = () => apiRequest(apiProps, options);\n    if (debounce) {\n      return debouncePromise(request, 250)();\n    }\n\n    return request();\n  };\n\n  return (\n    <div className={ className }>\n      <Pagination\n        perPage={ limit || 50 }\n        itemCount={ count || 0 }\n        onPerPageSelect={ handleOnPerPageSelect }\n        page={ getCurrentPage(limit, offset) }\n        onSetPage={ handleSetPage }\n        direction=\"down\"\n        isCompact={ isCompact }\n        { ...props }\n      />\n    </div>\n  );\n};\n\nAsyncPagination.propTypes = {\n  meta: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number.isRequired,\n    offset: PropTypes.number.isRequired\n  }),\n  apiRequest: PropTypes.func.isRequired,\n  apiProps: PropTypes.any,\n  className: PropTypes.string,\n  isCompact: PropTypes.bool\n};\n\nAsyncPagination.defaultProps = {\n  meta: {\n    count: 0,\n    limit: 50,\n    offset: 0\n  },\n  className: '',\n  isCompact: false\n};\n\nexport default AsyncPagination;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst BottomPaginationContainer = ({ children }) => (\n  <div className=\"pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto\">\n    { children }\n  </div>\n);\n\nBottomPaginationContainer.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ])\n};\n\nexport default BottomPaginationContainer;\n","\nimport React, { Fragment, useEffect, useState } from 'react';\nimport propTypes from 'prop-types';\nimport { Toolbar, ToolbarGroup, ToolbarItem, Level, LevelItem } from '@patternfly/react-core';\nimport { Table, TableHeader, TableBody } from '@patternfly/react-table';\nimport { defaultSettings  } from '../../helpers/shared/pagination';\nimport FilterToolbar from '../../presentational-components/shared/filter-toolbar-item';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { DataListLoader } from './loader-placeholders';\nimport AsyncPagination from '../../smart-components/common/async-pagination';\nimport BottomPaginationContainer from '../../presentational-components/shared/bottom-pagination-container';\n\n/**\n * Need to optimize this component\n * There is 7 renders before first table render\n * Should be just 2 - Loader -> Table\n */\n\nexport const TableToolbarView = ({\n  isSelectable,\n  createRows,\n  columns,\n  fetchData,\n  toolbarButtons,\n  data,\n  actionResolver,\n  routes,\n  titlePlural,\n  titleSingular,\n  pagination,\n  setCheckedItems,\n  filterValue,\n  onFilterChange,\n  isLoading,\n  onCollapse,\n  renderEmptyState\n}) => {\n  const [ rows, setRows ] = useState([]);\n\n  useEffect(() => {\n    setRows(createRows(data));\n  }, [ data ]);\n\n  const setOpen = (data, id) => data.map(row => row.id === id ?\n    {\n      ...row,\n      isOpen: !row.isOpen\n    } : {\n      ...row\n    });\n\n  const setSelected = (data, id) => {\n    const newData = data.map(row => row.id === id ?\n      {\n        ...row,\n        selected: !row.selected\n      } : {\n        ...row\n      });\n\n    const checkedItems = newData.filter(item => (item.id && item.selected));\n    setCheckedItems(checkedItems);\n    return newData;\n  };\n\n  const onCollapseInternal = (_event, _index, _isOpen, { id }) => onCollapse ?\n    onCollapse(id, setRows, setOpen) :\n    setRows((rows) => setOpen(rows, id));\n\n  const selectRow = (_event, selected, index, { id } = {}) => index === -1\n    ? setRows(rows.map(row => ({ ...row, selected })))\n    : setRows((rows) => setSelected(rows, id));\n\n  const renderToolbar = (isLoading) => {\n    return (<Toolbar className={ `pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg pf-u-pb-lg top-toolbar` }>\n      <Level style={ { flex: 1 } }>\n        <LevelItem>\n          <Toolbar>\n            <FilterToolbar onFilterChange={ onFilterChange } searchValue={ filterValue } isClearable={ true }\n              placeholder={ `Filter by ${titleSingular}` }/>\n            { toolbarButtons() }\n          </Toolbar>\n        </LevelItem>\n\n        <LevelItem>\n          <Toolbar>\n            <ToolbarGroup>\n              <ToolbarItem>\n                <AsyncPagination\n                  apiRequest={ fetchData }\n                  isDisabled={ isLoading }\n                  meta={ pagination }\n                  isCompact\n                />\n              </ToolbarItem>\n            </ToolbarGroup>\n          </Toolbar>\n        </LevelItem>\n      </Level>\n    </Toolbar>);\n  };\n\n  return (\n    <Section type=\"content\" page-type={ `tab-${titlePlural}` } id={ `tab-${titlePlural}` }>\n      { routes() }\n      { renderToolbar(isLoading) }\n      { isLoading && <DataListLoader/> }\n      { !isLoading && rows.length === 0 ? (\n        renderEmptyState()\n      ) :\n        <Fragment>\n          { !isLoading &&\n          <Table\n            aria-label={ `${titlePlural} table` }\n            onCollapse={ onCollapseInternal }\n            rows={ rows }\n            cells={ columns }\n            onSelect={ isSelectable && selectRow }\n            actionResolver={ actionResolver }\n            className=\"table-fix\"\n          >\n            <TableHeader />\n            <TableBody/>\n          </Table> }\n          { pagination.count > 0 &&\n            <BottomPaginationContainer>\n              <AsyncPagination\n                dropDirection=\"up\"\n                meta={ pagination }\n                apiRequest={ fetchData }\n              />\n            </BottomPaginationContainer>\n          }\n        </Fragment>\n      }\n    </Section>);\n};\n\nTableToolbarView.propTypes = {\n  isSelectable: propTypes.bool,\n  createRows: propTypes.func.isRequired,\n  columns: propTypes.array.isRequired,\n  toolbarButtons: propTypes.func,\n  fetchData: propTypes.func.isRequired,\n  data: propTypes.array,\n  pagination: propTypes.shape({\n    limit: propTypes.number,\n    offset: propTypes.number,\n    count: propTypes.number\n  }),\n  titlePlural: propTypes.string,\n  titleSingular: propTypes.string,\n  routes: propTypes.func,\n  actionResolver: propTypes.func,\n  setCheckedItems: propTypes.func,\n  filterValue: propTypes.string,\n  onFilterChange: propTypes.func,\n  isLoading: propTypes.bool,\n  onCollapse: propTypes.func,\n  renderEmptyState: propTypes.func\n};\n\nTableToolbarView.defaultProps = {\n  requests: [],\n  isLoading: false,\n  pagination: defaultSettings,\n  toolbarButtons: () => null,\n  isSelectable: null,\n  routes: () => null,\n  renderEmptyState: () => null\n};\n"],"sourceRoot":""}