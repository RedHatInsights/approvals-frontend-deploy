{"version":3,"sources":["webpack:///./src/messages/form.messages.js","webpack:///./src/helpers/workflow/workflow-helper.js","webpack:///./src/messages/workflows.messages.js","webpack:///./src/redux/actions/workflow-actions.js","webpack:///./src/forms/name-async-validator.js","webpack:///./src/forms/workflow-info.schema.js","webpack:///./src/forms/load-groups-debounced.js","webpack:///./src/helpers/group/group-helper.js","webpack:///./src/forms/set-group-select.schema.js","webpack:///./src/forms/add-workflow.schema.js","webpack:///./src/smart-components/workflow/add-workflow-modal.js","webpack:///./src/utilities/use-workflows.js","webpack:///./src/smart-components/workflow/remove-workflow-modal.js","webpack:///./src/smart-components/workflow/workflow-table-context.js","webpack:///./src/smart-components/workflow/workflow-table-helpers.js","webpack:///./src/smart-components/workflow/edit-workflow-modal.js","webpack:///./src/smart-components/workflow/workflows.js"],"names":["formMessages","defineMessages","require","createApprovalTitle","id","defaultMessage","generalInformation","setGroups","enterInfo","approvalProcessName","enterApprovalName","description","nameTaken","selectPlaceholder","summary","groups","create","workflowApi","getWorkflowApi","templateApi","getTemplateApi","fetchWorkflows","filter","pagination","defaultSettings","sortBy","paginationQuery","Math","max","limit","offset","filterQuery","sortQuery","property","direction","getAxiosInstance","get","APPROVAL_API_BASE","fetchWorkflow","showWorkflow","removeWorkflow","workflowId","a","destroyWorkflow","removeWorkflows","selectedWorkflows","Promise","all","map","worfklowMessages","edit","editInformation","deleteApprovalTitle","approvalProcess","approvalProcesses","noApprovalProcesses","sequence","enterSequence","removeProcessTitle","removeProcessAriaLabel","removeProcessDescription","removeProcessDescriptionWithDeps","editProcessTitle","addProcessSuccessTitle","addProcessSuccessDescription","updateProcessSuccessTitle","updateProcessSuccessDescription","removeProcessSuccessTitle","removeProcessSuccessDescription","removeProcessesSuccessTitle","removeProcessesSuccessDescription","up","down","dispatch","getState","workflowReducer","workflows","filterValue","finalPagination","meta","type","ActionTypes","payload","WorkflowHelper","updateWorkflow","workflowData","intl","data","notifications","fulfilled","variant","title","formatMessage","setFilterValueWorkflows","asyncDebounce","name","fetchWorkflowByName","then","find","wf","workflowInfoSchema","component","componentTypes","TEXT_FIELD","isRequired","label","validate","value","debouncedValidatorName","validatorTypes","REQUIRED","message","TEXTAREA","RBAC_API_BASE","length","uuid","undefined","setGroupSelectSchema","SELECT","loadOptions","noValueUpdates","isMulti","isSearchable","simpleValue","menuIsPortal","isClearable","placeholder","sequenceField","addWorkflowSchema","fields","AddWorkflow","useDispatch","push","useHistory","useIntl","onCancel","routes","index","Modal","isOpen","onClose","onSubmit","group_refs","values","workflow","listTemplates","Error","addWorkflowToTemplate","addWorkflow","group","schema","FormTemplate","props","buttonClassName","disableSubmit","useWorkflow","useSelector","shallowEqual","RemoveWorkflowModal","ids","fetchData","resetSelectedWorkflows","useState","fetchedWorkflow","setFetchedWorkflow","submitting","setSubmitting","useQuery","finalId","useEffect","apiProps","removeWf","dependenciesMessage","isEmpty","metadata","object_dependencies","Object","keys","reduce","acc","item","APP_DISPLAY_NAME","key","Fragment","isLoading","aria-label","count","header","Title","size","headingLevel","fill","className","actions","Button","isDisabled","onClick","Spinner","commonMessages","deleting","cancel","TextContent","Text","TextVariants","p","dependenciesList","propTypes","PropTypes","func","array","WorkflowTableContext","createContext","MoveButtons","cache","useContext","isUpdating","updateSequence","process","debouncedMove","Stack","StackItem","string","number","GroupsLabels","Flex","FlexItem","Label","arrayOf","shape","SelectBox","setSelectedWorkflows","Checkbox","isChecked","includes","onChange","createRows","cells","reducer","state","initialValues","prepareInitialValues","wfData","groupOptions","EditWorkflow","loadedWorkflow","useReducer","stateDispatch","submitLabel","save","columns","selectedAll","selectAll","transforms","cellWidth","sortable","wrappable","tableToolbarMessages","cellTransforms","truncate","debouncedFilter","filteringCallback","prepareChips","category","chips","areSelectedAll","rows","selected","every","row","unique","self","indexOf","workflowsListState","action","isFetching","isFiltering","Workflows","moveFunctionsCache","useRef","filterValueRedux","initialState","history","updateWorkflows","scrollToTop","handleFilterChange","anyWorkflowsSelected","approvalTitle","Provider","current","onSort","_e","sortWorkflows","exact","path","routesLinks","add","render","postMethod","remove","actionResolver","_event","_rowId","pathname","search","titlePlural","titleSingular","toolbarButtons","ToolbarGroup","ToolbarItem","to","onFilterChange","renderEmptyState","noResultsFound","Icon","SearchIcon","PrimaryAction","clearAllFilters","clearAllFiltersDescription","activeFiltersConfig","filters","onDelete"],"mappings":"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","file":"js/workflows~5a4d8549.0a688af8f6cc04fa6a3a.js","sourcesContent":["const { defineMessages } = require('react-intl');\n\nconst formMessages = defineMessages({\n  createApprovalTitle: {\n    id: 'formMessages.createApprovalTitle',\n    defaultMessage: 'Create approval process'\n  },\n  generalInformation: {\n    id: 'formMessages.generalInformation',\n    defaultMessage: 'General information'\n  },\n  setGroups: {\n    id: 'formMessages.setGroups',\n    defaultMessage: 'Set groups'\n  },\n  enterInfo: {\n    id: 'formMessages.enterInfo',\n    defaultMessage: 'Enter your information'\n  },\n  approvalProcessName: {\n    id: 'formMessages.approvalProcessName',\n    defaultMessage: 'Name'\n  },\n  enterApprovalName: {\n    id: 'formMessages.enterApprovalName',\n    defaultMessage: 'Enter a name for the approval process'\n  },\n  description: {\n    id: 'formMessages.description',\n    defaultMessage: 'Description'\n  },\n  nameTaken: {\n    id: 'formMessages.nameTaken',\n    defaultMessage: 'Name has already been taken'\n  },\n  selectPlaceholder: {\n    id: 'formMessages.selectPlaceholder',\n    defaultMessage: 'Select...'\n  },\n  summary: {\n    id: 'formMessages.summary',\n    defaultMessage: 'Summary'\n  },\n  groups: {\n    id: 'formMessages.groups',\n    defaultMessage: 'Groups'\n  },\n  create: {\n    id: 'formMessages.create',\n    defaultMessage: 'Create'\n  }\n});\n\nexport default formMessages;\n","import { getWorkflowApi, getTemplateApi, getAxiosInstance } from '../shared/user-login';\nimport { defaultSettings } from '../shared/pagination';\nimport { APPROVAL_API_BASE } from '../../utilities/constants';\n\nconst workflowApi = getWorkflowApi();\nconst templateApi = getTemplateApi();\n\nexport function fetchWorkflows(filter = '', pagination = defaultSettings, sortBy) {\n  const paginationQuery = `&limit=${Math.max(pagination.limit, 10)}&offset=${pagination.offset}`;\n  const filterQuery = `&filter[name][contains_i]=${filter}`;\n  const sortQuery = sortBy ? `&sort_by=${sortBy.property}:${sortBy.direction}` : '';\n\n  return getAxiosInstance().get(\n    `${APPROVAL_API_BASE}/workflows/?${filterQuery}${paginationQuery}${sortQuery}`\n  );\n}\n\nexport const fetchWorkflow = (id) => workflowApi.showWorkflow(id);\n\nexport function fetchWorkflowByName(name) {\n  return fetchWorkflows(name);\n}\n\nexport function updateWorkflow(data) {\n  return workflowApi.updateWorkflow(data.id, data);\n}\n\nexport  function addWorkflow(workflow) {\n  return templateApi.listTemplates().then(({ data }) => {\n    // workaround for v1. Need to pass template ID with the workflow. Assigning to first template\n    if (!data[0]) {\n      throw new Error('No template exists');\n    }\n\n    return data[0].id;\n\n  }).then(id => workflowApi.addWorkflowToTemplate(id, workflow, {}));\n}\n\nexport async function removeWorkflow(workflowId) {\n  return await workflowApi.destroyWorkflow(workflowId);\n}\n\nexport async function removeWorkflows(selectedWorkflows) {\n  return Promise.all(selectedWorkflows.map(async workflowId => await workflowApi.destroyWorkflow(workflowId)));\n}\n\n","const { defineMessages } = require('react-intl');\n\nconst worfklowMessages = defineMessages({\n  edit: {\n    id: 'worfklowMessages.edit',\n    defaultMessage: 'Edit'\n  },\n  editInformation: {\n    id: 'worfklowMessages.editInformation',\n    defaultMessage: 'Edit information'\n  },\n  deleteApprovalTitle: {\n    id: 'worfklowMessages.deleteApprovalTitle',\n    defaultMessage: 'Delete approval process'\n  },\n  approvalProcess: {\n    id: 'worfklowMessages.approvalProcess',\n    defaultMessage: 'approval process'\n  },\n  approvalProcesses: {\n    id: 'worfklowMessages.approvalProcesses',\n    defaultMessage: 'approval processes'\n  },\n  noApprovalProcesses: {\n    id: 'worfklowMessages.noApprovalProcesses',\n    defaultMessage: 'No approval processes'\n  },\n  sequence: {\n    id: 'workflowMessages.sequence',\n    defaultMessage: 'Sequence'\n  },\n  enterSequence: {\n    id: 'workflowMessages.enterSequence',\n    defaultMessage: 'Enter sequence'\n  },\n  removeProcessTitle: {\n    id: 'workflowMessages.removeProcessTitle',\n    defaultMessage: 'Delete {count, plural, one {approval process} other {approval processes}}?'\n  },\n  removeProcessAriaLabel: {\n    id: 'workflowMessages.removeProcessTitle',\n    defaultMessage: 'Delete {count, plural, one {approval process} other {approval processes}} modal'\n  },\n  removeProcessDescription: {\n    id: 'workflowMessages.removeProcessDescription',\n    defaultMessage: '{name} will be removed.'\n  },\n  removeProcessDescriptionWithDeps: {\n    id: 'workflowMessages.removeProcessDescriptionWithDeps',\n    defaultMessage: '{name} will be removed from the following applications: {dependenciesList}'\n  },\n  editProcessTitle: {\n    id: 'workflowMessages.editProcessTitle',\n    defaultMessage: 'Make any changes to approval process {name}'\n  },\n  addProcessSuccessTitle: {\n    id: 'workflowMessages.addProcessSuccessTitle',\n    defaultMessage: 'Success adding approval process'\n  },\n  addProcessSuccessDescription: {\n    id: 'workflowMessages.addProcessSuccessDescription',\n    defaultMessage: 'The approval process was added successfully.'\n  },\n  updateProcessSuccessTitle: {\n    id: 'workflowMessages.updateProcessSuccessTitle',\n    defaultMessage: 'Success updating approval process'\n  },\n  updateProcessSuccessDescription: {\n    id: 'workflowMessages.updateProcessSuccessDescription',\n    defaultMessage: 'The approval process was updated successfully.'\n  },\n  removeProcessSuccessTitle: {\n    id: 'workflowMessages.removeProcessSuccessTitle',\n    defaultMessage: 'Success removing approval process'\n  },\n  removeProcessSuccessDescription: {\n    id: 'workflowMessages.removeProcessSuccessDescription',\n    defaultMessage: 'The approval process was removed successfully.'\n  },\n  removeProcessesSuccessTitle: {\n    id: 'workflowMessages.removeProcessesSuccessTitle',\n    defaultMessage: 'Success removing approval processes'\n  },\n  removeProcessesSuccessDescription: {\n    id: 'workflowMessages.removeProcessesSuccessDescription',\n    defaultMessage: 'The selected approval processes were removed successfully.'\n  },\n  up: {\n    id: 'workflowMessages.up',\n    defaultMessage: 'up'\n  },\n  down: {\n    id: 'workflowMessages.down',\n    defaultMessage: 'down'\n  }\n});\n\nexport default worfklowMessages;\n","import * as ActionTypes from '../action-types';\nimport * as WorkflowHelper from '../../helpers/workflow/workflow-helper';\nimport worfklowMessages from '../../messages/workflows.messages';\n\nexport const fetchWorkflows = (pagination) => (dispatch, getState) => {\n  const { sortBy, workflows, filterValue } = getState().workflowReducer;\n\n  let finalPagination = pagination;\n\n  if (!pagination && workflows) {\n    const { limit, offset } = workflows.meta;\n    finalPagination = { limit, offset };\n  }\n\n  return dispatch ({\n    type: ActionTypes.FETCH_WORKFLOWS,\n    payload: WorkflowHelper.fetchWorkflows(filterValue, finalPagination, sortBy)\n  });\n};\n\nexport const fetchWorkflow = apiProps => ({\n  type: ActionTypes.FETCH_WORKFLOW,\n  payload: WorkflowHelper.fetchWorkflow(apiProps)\n});\n\nexport const addWorkflow = (workflowData, intl) => ({\n  type: ActionTypes.ADD_WORKFLOW,\n  payload: WorkflowHelper.addWorkflow(workflowData),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: intl.formatMessage(worfklowMessages.addProcessSuccessTitle),\n        description: intl.formatMessage(worfklowMessages.addProcessSuccessDescription)\n      }\n    }\n  }\n});\n\nexport const updateWorkflow = (workflowData, intl) => ({\n  type: ActionTypes.UPDATE_WORKFLOW,\n  payload: WorkflowHelper.updateWorkflow(workflowData),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: intl.formatMessage(worfklowMessages.updateProcessSuccessTitle),\n        description: intl.formatMessage(worfklowMessages.updateProcessSuccessDescription)\n      }\n    }\n  }\n});\n\nexport const removeWorkflow = (workflow, intl) => ({\n  type: ActionTypes.REMOVE_WORKFLOW,\n  payload: WorkflowHelper.removeWorkflow(workflow),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: intl.formatMessage(worfklowMessages.removeProcessSuccessTitle),\n        description: intl.formatMessage(worfklowMessages.removeProcessSuccessDescription)\n      }\n    }\n  }\n});\n\nexport const removeWorkflows = (workflows, intl) => ({\n  type: ActionTypes.REMOVE_WORKFLOWS,\n  payload: WorkflowHelper.removeWorkflows(workflows),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: intl.formatMessage(worfklowMessages.removeProcessesSuccessTitle),\n        description: intl.formatMessage(worfklowMessages.removeProcessesSuccessDescription)\n      }\n    }\n  }\n});\n\nexport const sortWorkflows = (sortBy) => ({\n  type: ActionTypes.SORT_WORKFLOWS,\n  payload: sortBy\n});\n\nexport const setFilterValueWorkflows = (filterValue) => ({\n  type: ActionTypes.SET_FILTER_WORKFLOWS,\n  payload: filterValue\n});\n\nexport const moveSequence = process => ({\n  type: ActionTypes.MOVE_SEQUENCE,\n  payload: process\n});\n","import { fetchWorkflowByName } from '../helpers/workflow/workflow-helper';\nimport asyncDebounce from '../utilities/async-debounce';\nimport formMessages from '../messages/form.messages';\n\nconst validateName = (name, id, intl) => fetchWorkflowByName(name)\n.then(({ data }) => {\n  const workflow = id ?\n    data.find(wf => name === wf.name && id !== wf.id)\n    : data.find(wf => name === wf.name);\n\n  if (workflow) {\n    throw intl.formatMessage(formMessages.nameTaken);\n  }\n});\n\nexport default asyncDebounce(validateName);\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\n\nimport debouncedValidatorName from './name-async-validator';\nimport formMessages from '../messages/form.messages';\n\nconst workflowInfoSchema = (intl, id) => ([{\n  component: componentTypes.TEXT_FIELD,\n  name: 'name',\n  isRequired: true,\n  id: 'workflow-name',\n  label: intl.formatMessage(formMessages.approvalProcessName),\n  validate: [\n    (value) => debouncedValidatorName(value, id, intl),\n    {\n      type: validatorTypes.REQUIRED,\n      message: intl.formatMessage(formMessages.enterApprovalName)\n    }]\n}, {\n  component: componentTypes.TEXTAREA,\n  name: 'description',\n  id: 'workflow-description',\n  label: intl.formatMessage(formMessages.description)\n}]);\n\nexport default workflowInfoSchema;\n","import asyncDebounce from '../utilities/async-debounce';\nimport { fetchFilterApprovalGroups } from '../helpers/group/group-helper';\n\nexport default asyncDebounce(fetchFilterApprovalGroups);\n","import { getAxiosInstance } from '../shared/user-login';\nimport { RBAC_API_BASE } from '../../utilities/constants';\n\nexport const fetchFilterApprovalGroups = (filterValue) => {\n  const filterQuery = `&name=${filterValue}`;\n  return getAxiosInstance().get(`${RBAC_API_BASE}/groups/?role_names=\",Approval Administrator,Approval Approver,\"\n  ${filterValue && filterValue.length > 0\n    ? filterQuery : ''}`)\n  .then(({ data }) => (data && data.length > 0 ? data.map(({ uuid, name }) => ({ label: name, value: uuid })) : undefined));\n};\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\n\nimport loadOptions from './load-groups-debounced';\nimport formMessages from '../messages/form.messages';\n\nconst setGroupSelectSchema = (intl) => ({\n  component: componentTypes.SELECT,\n  name: 'group_refs',\n  label: intl.formatMessage(formMessages.setGroups),\n  loadOptions,\n  noValueUpdates: true,\n  isMulti: true,\n  isSearchable: true,\n  simpleValue: false,\n  menuIsPortal: true,\n  isClearable: true,\n  placeholder: intl.formatMessage(formMessages.selectPlaceholder)\n});\n\nexport default setGroupSelectSchema;\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\n\nimport workflowInfoSchema from './workflow-info.schema';\nimport setGroupSelectSchema from './set-group-select.schema';\nimport worfklowMessages from '../messages/workflows.messages';\n\nconst sequenceField = (intl) => ({\n  component: componentTypes.TEXT_FIELD,\n  name: 'sequence',\n  label: intl.formatMessage(worfklowMessages.enterSequence),\n  isRequired: true,\n  validate: [{ type: validatorTypes.REQUIRED }]\n});\n\nconst addWorkflowSchema = (intl, id) => ({\n  fields: [\n    ...workflowInfoSchema(intl, id),\n    setGroupSelectSchema(intl),\n    ...(id ? [ sequenceField(intl) ] : [])\n  ]\n});\n\nexport default addWorkflowSchema;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\nimport { Modal } from '@patternfly/react-core';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\n\nimport { addWorkflow, fetchWorkflows } from '../../redux/actions/workflow-actions';\nimport routes from '../../constants/routes';\nimport FormRenderer from '../common/form-renderer';\nimport addWorkflowSchema from '../../forms/add-workflow.schema';\nimport formMessages from '../../messages/form.messages';\n\nconst AddWorkflow = () => {\n  const dispatch = useDispatch();\n  const { push } = useHistory();\n  const intl = useIntl();\n\n  const onSave = ({ group_refs = [], ...values }) => {\n    push(routes.workflows.index);\n\n    return dispatch(addWorkflow({\n      ...values,\n      group_refs: group_refs.length > 0 ? group_refs.map(group => ({ name: group.label, uuid: group.value })) : []\n    }, intl)).then(() => dispatch(fetchWorkflows()));\n  };\n\n  const onCancel = () => push(routes.workflows.index);\n\n  return (\n    <Modal\n      isOpen\n      onClose={ onCancel }\n      title={ intl.formatMessage(formMessages.createApprovalTitle) }\n      variant=\"small\"\n    >\n      <FormRenderer\n        onSubmit={ onSave }\n        onCancel={ onCancel }\n        schema={ addWorkflowSchema(intl) }\n        FormTemplate={ (props) => <FormTemplate\n          { ...props }\n          buttonClassName=\"pf-u-mt-0\"\n          disableSubmit={ [ 'validating', 'pristine' ] }\n        /> }\n      />\n    </Modal>\n  );\n};\n\nexport default AddWorkflow;\n","import { shallowEqual, useSelector } from 'react-redux';\n\nconst useWorkflow = (id) => {\n  const { workflows } = useSelector(({ workflowReducer: { workflows }}) => ({ workflows }), shallowEqual);\n\n  return workflows && workflows.data && workflows.data.find((wf) => wf.id === id);\n};\n\nexport default useWorkflow;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Modal, Button, Text, TextContent, TextVariants, Spinner, Title } from '@patternfly/react-core';\nimport { useIntl } from 'react-intl';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { removeWorkflow, removeWorkflows, fetchWorkflow } from '../../redux/actions/workflow-actions';\nimport useQuery from '../../utilities/use-query';\nimport routes from '../../constants/routes';\nimport useWorkflow from '../../utilities/use-workflows';\nimport { FormItemLoader } from '../../presentational-components/shared/loader-placeholders';\nimport worfklowMessages from '../../messages/workflows.messages';\nimport commonMessages from '../../messages/common.message';\nimport isEmpty from 'lodash/isEmpty';\nimport { APP_DISPLAY_NAME } from '../../utilities/constants';\n\nconst RemoveWorkflowModal = ({\n  ids = [],\n  fetchData,\n  resetSelectedWorkflows\n}) => {\n  const dispatch = useDispatch();\n  const [ fetchedWorkflow, setFetchedWorkflow ] = useState();\n  const [ submitting, setSubmitting ] = useState(false);\n  const { push } = useHistory();\n  const [{ workflow: workflowId }] = useQuery([ 'workflow' ]);\n\n  const finalId = workflowId || ids.length === 1 && ids[0];\n\n  const intl = useIntl();\n  const workflow = useWorkflow(finalId);\n\n  useEffect(() => {\n    if (finalId && !workflow) {\n      dispatch(fetchWorkflow(finalId))\n      .then(({ value }) => setFetchedWorkflow(value))\n      .catch(() => push(routes.workflows.index));\n    }\n  }, []);\n\n  if (!finalId && ids.length === 0) {\n    return null;\n  }\n\n  const removeWf = () =>(finalId ? dispatch(removeWorkflow(finalId, intl)) : dispatch(removeWorkflows(ids, intl)))\n  .catch(() => setSubmitting(false))\n  .then(() => push(routes.workflows.index))\n  .then(() => resetSelectedWorkflows())\n  .then(() => fetchData());\n\n  const onCancel = () => push(routes.workflows.index);\n\n  const onSubmit = () => {\n    setSubmitting(true);\n    return removeWf();\n  };\n\n  const dependenciesMessage = () => {\n    const wf = workflow || fetchedWorkflow;\n    if (!wf || isEmpty(wf) ||\n        !wf.metadata || !wf.metadata.object_dependencies\n        || isEmpty(wf.metadata.object_dependencies))\n    {return [];}\n\n    return Object.keys(wf.metadata.object_dependencies)\n    .reduce((acc, item) => [ ...acc, `${APP_DISPLAY_NAME[item] || item}` ], []);\n  };\n\n  const name = (\n    <b key=\"remove-key\">\n      {\n        finalId\n          ? fetchedWorkflow && fetchedWorkflow.name || workflow && workflow.name\n          : (<React.Fragment>\n            { ids.length } { intl.formatMessage(worfklowMessages.approvalProcesses) }\n          </React.Fragment>)\n      }\n    </b>\n  );\n\n  const isLoading = finalId && !workflow && !fetchedWorkflow;\n\n  return (\n    <Modal\n      isOpen\n      variant=\"small\"\n      aria-label={\n        intl.formatMessage(worfklowMessages.removeProcessAriaLabel, { count: finalId ? 1 : ids.length })\n      }\n      header={\n        <Title size=\"2xl\" headingLevel=\"h1\">\n          <ExclamationTriangleIcon size=\"sm\" fill=\"#f0ab00\" className=\"pf-u-mr-sm\" />\n          { intl.formatMessage(worfklowMessages.removeProcessTitle, { count: finalId ? 1 : ids.length }) }\n        </Title>\n      }\n      onClose={ onCancel }\n      actions={ [\n        <Button id=\"submit-remove-workflow\" key=\"submit\" variant=\"danger\" type=\"button\" isDisabled={ submitting } onClick={ onSubmit }>\n          { submitting\n            ? <React.Fragment><Spinner size=\"sm\" className=\"pf-u-mr-md\"/>{ intl.formatMessage(commonMessages.deleting) }</React.Fragment>\n            : intl.formatMessage(commonMessages.delete)\n          }\n        </Button>,\n        <Button id=\"cancel-remove-workflow\" key=\"cancel\" variant=\"link\" type=\"button\" isDisabled={ submitting } onClick={ onCancel }>\n          { intl.formatMessage(commonMessages.cancel) }\n        </Button>\n      ] }\n    >\n      <TextContent>\n        <Text component={ TextVariants.p }>\n          {\n            isLoading\n              ? <FormItemLoader/>\n              : isEmpty(dependenciesMessage())\n                ? intl.formatMessage(worfklowMessages.removeProcessDescription, { name })\n                : intl.formatMessage(worfklowMessages.removeProcessDescriptionWithDeps, {\n                  name,\n                  dependenciesList: <span key=\"span\" className=\"pf-u-mt-lg span-block\">\n                    { dependenciesMessage().map(item => <li key={ item }>{ item }</li>) }\n                  </span>\n                })\n          }\n        </Text>\n      </TextContent>\n    </Modal>\n  );\n};\n\nRemoveWorkflowModal.propTypes = {\n  fetchData: PropTypes.func.isRequired,\n  ids: PropTypes.array,\n  resetSelectedWorkflows: PropTypes.func.isRequired\n};\n\nexport default RemoveWorkflowModal;\n","import { createContext } from 'react';\n\nconst WorkflowTableContext = createContext({ selectedWorkflows: []});\n\nexport default WorkflowTableContext;\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Label, Flex, FlexItem, Stack, StackItem, Button, Checkbox } from '@patternfly/react-core';\nimport { AngleUpIcon, AngleDownIcon } from '@patternfly/react-icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useIntl } from 'react-intl';\n\nimport WorkflowTableContext from './workflow-table-context';\nimport worfklowMessages from '../../messages/workflows.messages';\nimport { updateWorkflow, fetchWorkflows, moveSequence } from '../../redux/actions/workflow-actions';\nimport asyncDebounce from '../../utilities/async-debounce';\n\nconst debouncedMove = (cache, id) => {\n  if (cache[id]) {\n    return cache[id];\n  }\n\n  cache[id] = asyncDebounce(\n    (workflow, dispatch, intl) => dispatch(updateWorkflow(workflow, intl))\n    .then(() => dispatch(fetchWorkflows())),\n    1500\n  );\n\n  return cache[id];\n};\n\nexport const MoveButtons = ({ id, sequence }) => {\n  const { cache } = useContext(WorkflowTableContext);\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const { isUpdating, direction, property } = useSelector(\n    ({ workflowReducer: { isUpdating, isLoading, sortBy: { direction, property }}}) => (\n      { isUpdating: isUpdating > 0 || isLoading, direction, property }\n    )\n  );\n\n  const updateSequence = (sequence) => {\n    dispatch(moveSequence({ id, sequence }));\n\n    return debouncedMove(cache, id)({ id, sequence }, dispatch, intl);\n  };\n\n  if (property !== 'sequence') {\n    return null;\n  }\n\n  return (\n    <Stack>\n      <StackItem>\n        <Button\n          variant=\"plain\"\n          aria-label={ intl.formatMessage(worfklowMessages.up) }\n          id={ `up-${id}` }\n          onClick={ () => updateSequence(direction === 'asc' ? sequence - 1 : sequence + 1) }\n          isDisabled={ direction === 'asc' && sequence === 1 || isUpdating }\n        >\n          <AngleUpIcon />\n        </Button>\n      </StackItem>\n      <StackItem>\n        <Button\n          variant=\"plain\"\n          aria-label={ intl.formatMessage(worfklowMessages.down) }\n          id={ `down-${id}` }\n          onClick={ () => updateSequence(direction === 'asc' ? sequence + 1 : sequence - 1) }\n          isDisabled={ direction === 'desc' && sequence === 1 || isUpdating }\n        >\n          <AngleDownIcon />\n        </Button>\n      </StackItem>\n    </Stack>\n  );\n};\n\nMoveButtons.propTypes = {\n  id: PropTypes.string.isRequired,\n  sequence: PropTypes.number.isRequired\n};\n\nexport const GroupsLabels = ({ group_refs, id }) => (\n  <Flex key={ id } className=\"pf-u-mt-sm\">\n    { group_refs.map(({ name, uuid }) => (\n      <FlexItem key={ uuid }>\n        <Label className=\"group-label pf-u-mb-sm\">\n          { name }\n        </Label>\n      </FlexItem>\n    )) }\n  </Flex>\n);\n\nGroupsLabels.propTypes = {\n  id: PropTypes.string,\n  group_refs: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    uuid: PropTypes.string.isRequired\n  }))\n};\n\nexport const SelectBox = ({ id }) => {\n  const { selectedWorkflows, setSelectedWorkflows } = useContext(WorkflowTableContext);\n\n  return (\n    <Checkbox\n      id={ `select-${id}` }\n      isChecked={ selectedWorkflows.includes(id) }\n      onChange={ () => setSelectedWorkflows(id) }\n    />\n  );\n};\n\nSelectBox.propTypes = {\n  id: PropTypes.string.isRequired\n};\n\nexport const createRows = (data) => data.map((\n  {\n    id,\n    name,\n    description,\n    sequence,\n    group_refs\n  }\n) => ({\n  id,\n  cells: [\n    <React.Fragment key={ `${id}-buttons` }>\n      <MoveButtons id={ id } sequence={ sequence } />\n    </React.Fragment>,\n    <React.Fragment key={ `${id}-checkbox` }>\n      <SelectBox id={ id } />\n    </React.Fragment>,\n    sequence,\n    name,\n    description,\n    <React.Fragment key={ id }>\n      <GroupsLabels key={ id } group_refs={ group_refs } id={ id } />\n    </React.Fragment>\n  ]\n})\n);\n","import React, { useEffect, useReducer } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\nimport { Modal } from '@patternfly/react-core';\n\nimport { fetchWorkflows, updateWorkflow } from '../../redux/actions/workflow-actions';\nimport routes from '../../constants/routes';\nimport FormRenderer from '../common/form-renderer';\nimport addWorkflowSchema from '../../forms/add-workflow.schema';\nimport worfklowMessages from '../../messages/workflows.messages';\nimport useQuery from '../../utilities/use-query';\nimport useWorkflow from '../../utilities/use-workflows';\nimport { fetchWorkflow } from '../../helpers/workflow/workflow-helper';\nimport { WorkflowInfoFormLoader } from '../../presentational-components/shared/loader-placeholders';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\nimport commonMessages from '../../messages/common.message';\n\nconst reducer = (state, { type, initialValues, schema }) => {\n  switch (type) {\n    case 'loaded':\n      return {\n        ...state,\n        initialValues,\n        schema,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n};\n\nconst prepareInitialValues = (wfData) => {\n  const groupOptions = wfData.group_refs.map((group) =>\n    ({ label: group.name, value: group.uuid })\n  );\n  return { ...wfData, group_refs: groupOptions };\n};\n\nconst EditWorkflow = () => {\n  const dispatch = useDispatch();\n  const { push } = useHistory();\n  const intl = useIntl();\n  const [{ workflow: id }] = useQuery([ 'workflow' ]);\n  const loadedWorkflow = useWorkflow(id);\n\n  const [{ initialValues, schema, isLoading }, stateDispatch ] = useReducer(reducer, { isLoading: true });\n\n  useEffect(() => {\n    if (!loadedWorkflow) {\n      fetchWorkflow(id)\n      .then((data) => stateDispatch({ type: 'loaded', initialValues: prepareInitialValues(data), schema: addWorkflowSchema(intl, data.id) }));\n    } else {\n      stateDispatch({ type: 'loaded', initialValues: prepareInitialValues(loadedWorkflow), schema: addWorkflowSchema(intl, loadedWorkflow.id) });\n    }\n  }, []);\n\n  const onCancel = () => push(routes.workflows.index);\n\n  const onSave = ({ group_refs = [], ...values }) => {\n    onCancel();\n\n    const workflowData = { ...values, group_refs: group_refs.map(group => ({ name: group.label, uuid: group.value })) };\n\n    return dispatch(updateWorkflow(workflowData, intl))\n    .then(() => dispatch(fetchWorkflows()));\n  };\n\n  return (\n    <Modal\n      isOpen\n      onClose={ onCancel }\n      title={ intl.formatMessage(worfklowMessages.editInformation) }\n      description={ !isLoading && intl.formatMessage(worfklowMessages.editProcessTitle, { name: initialValues.name }) }\n      variant=\"small\"\n    >\n      { isLoading && <WorkflowInfoFormLoader/> }\n      { !isLoading && <FormRenderer\n        onSubmit={ onSave }\n        onCancel={ onCancel }\n        schema={ schema }\n        initialValues={ initialValues }\n        FormTemplate={ (props) => <FormTemplate\n          { ...props }\n          submitLabel={ intl.formatMessage(commonMessages.save) }\n          buttonClassName=\"pf-u-mt-0\"\n          disableSubmit={ [ 'validating', 'pristine' ] }\n        /> }\n      /> }\n    </Modal>\n  );\n};\n\nexport default EditWorkflow;\n","import React, { Fragment, useEffect, useReducer, useRef } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { Route, Link, useHistory } from 'react-router-dom';\nimport { ToolbarGroup, ToolbarItem, Button, Checkbox } from '@patternfly/react-core';\nimport { SearchIcon } from '@patternfly/react-icons';\nimport { sortable, truncate, cellWidth, wrappable } from '@patternfly/react-table';\nimport { fetchWorkflows, sortWorkflows, setFilterValueWorkflows } from '../../redux/actions/workflow-actions';\nimport AddWorkflow from './add-workflow-modal';\nimport RemoveWorkflow from './remove-workflow-modal';\nimport { createRows } from './workflow-table-helpers';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport { AppTabs } from '../../smart-components/app-tabs/app-tabs';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport asyncDebounce from '../../utilities/async-debounce';\nimport { scrollToTop } from '../../helpers/shared/helpers';\nimport TableEmptyState from '../../presentational-components/shared/table-empty-state';\nimport routesLinks from '../../constants/routes';\nimport { useIntl } from 'react-intl';\nimport commonMessages from '../../messages/common.message';\nimport worfklowMessages from '../../messages/workflows.messages';\nimport formMessages from '../../messages/form.messages';\nimport tableToolbarMessages from '../../messages/table-toolbar.messages';\nimport EditWorkflow from './edit-workflow-modal';\nimport WorkflowTableContext from './workflow-table-context';\n\nconst columns = (intl, selectedAll, selectAll) => [\n  { title: '', transforms: [ cellWidth(1) ]},\n  { title: <Checkbox onChange={ selectAll } isChecked={ selectedAll } id=\"select-all\"/>, transforms: [ cellWidth(1) ]},\n  { title: intl.formatMessage(worfklowMessages.sequence), transforms: [ sortable, wrappable ]},\n  {\n    title: intl.formatMessage(tableToolbarMessages.name),\n    transforms: [ sortable ]\n  },\n  { title: intl.formatMessage(formMessages.description), transforms: [ sortable, cellWidth(35) ], cellTransforms: [ truncate ]},\n  { title: intl.formatMessage(formMessages.groups) }\n];\n\nconst debouncedFilter = asyncDebounce(\n  (filter, dispatch, filteringCallback, meta = defaultSettings) => {\n    filteringCallback(true);\n    dispatch(setFilterValueWorkflows(filter, meta));\n    return dispatch(fetchWorkflows(meta))\n    .then(() =>\n      filteringCallback(false)\n    );\n  },\n  1000\n);\n\nconst prepareChips = (filterValue, intl) => filterValue ? [{\n  category: intl.formatMessage(tableToolbarMessages.name),\n  key: 'name',\n  chips: [{ name: filterValue, value: filterValue }]\n}] : [];\n\nconst initialState = (filterValue = '') => ({\n  filterValue,\n  isFetching: true,\n  isFiltering: false,\n  selectedWorkflows: [],\n  selectedAll: false,\n  rows: []\n});\n\nconst areSelectedAll = (rows = [], selected) => rows.every(row => selected.includes(row.id));\n\nconst unique = (value, index, self) => self.indexOf(value) === index;\n\nexport const workflowsListState = (state, action) => {\n  switch (action.type) {\n    case 'setRows':\n      return {\n        ...state,\n        rows: action.payload,\n        selectedAll: areSelectedAll(action.payload, state.selectedWorkflows)\n      };\n    case 'setFetching':\n      return {\n        ...state,\n        isFetching: action.payload\n      };\n    case 'setFilterValue':\n      return { ...state, filterValue: action.payload };\n    case 'select':\n      return {\n        ...state,\n        selectedAll: false,\n        selectedWorkflows: state.selectedWorkflows.includes(action.payload)\n          ? state.selectedWorkflows.filter(id => id !== action.payload)\n          : [ ...state.selectedWorkflows, action.payload ]\n      };\n    case 'selectAll':\n      return {\n        ...state,\n        selectedWorkflows: [ ...state.selectedWorkflows, ...action.payload ].filter(unique),\n        selectedAll: true\n      };\n    case 'unselectAll':\n      return {\n        ...state,\n        selectedWorkflows: state.selectedWorkflows.filter(selected => !action.payload.includes(selected)),\n        selectedAll: false\n      };\n    case 'resetSelected':\n      return {\n        ...state,\n        selectedWorkflows: [],\n        selectedAll: false\n      };\n    case 'setFilteringFlag':\n      return {\n        ...state,\n        isFiltering: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nconst Workflows = () => {\n  const moveFunctionsCache = useRef({});\n  const { workflows: { data, meta }, sortBy, filterValueRedux } = useSelector(\n    ({ workflowReducer: { workflows, sortBy, filterValue: filterValueRedux }}) => ({ workflows, sortBy, filterValueRedux })\n    , shallowEqual\n  );\n  const [{ filterValue, isFetching, isFiltering, selectedWorkflows, selectedAll, rows }, stateDispatch ] = useReducer(\n    workflowsListState,\n    initialState(filterValueRedux)\n  );\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const intl = useIntl();\n\n  const setSelectedWorkflows = (id) => stateDispatch({ type: 'select', payload: id });\n\n  const updateWorkflows = (pagination) => {\n    stateDispatch({ type: 'setFetching', payload: true });\n    return dispatch(fetchWorkflows(pagination))\n    .then(() => stateDispatch({ type: 'setFetching', payload: false }))\n    .catch(() => stateDispatch({ type: 'setFetching', payload: false }));\n  };\n\n  useEffect(() => {\n    updateWorkflows(defaultSettings);\n    scrollToTop();\n  }, []);\n\n  useEffect(() => {\n    stateDispatch({ type: 'setRows', payload: createRows(data) });\n  }, [ data ]);\n\n  const handleFilterChange = (value) => {\n    stateDispatch({ type: 'setFilterValue', payload: value });\n    debouncedFilter(\n      value,\n      dispatch,\n      (isFiltering) => stateDispatch({ type: 'setFilteringFlag', payload: isFiltering }),\n      { ...meta, offset: 0 }\n    );\n  };\n\n  const onSort = (_e, index, direction, { property }) => {\n    dispatch(sortWorkflows({ index, direction, property }));\n    return updateWorkflows();\n  };\n\n  const routes = () => <Fragment>\n    <Route exact path={ routesLinks.workflows.add } render={ props => <AddWorkflow { ...props }\n      postMethod={ updateWorkflows } /> }/>\n    <Route exact path={ routesLinks.workflows.edit } component={ EditWorkflow }/>\n    <Route exact path={ routesLinks.workflows.remove }\n      render={ props => <RemoveWorkflow\n        { ...props }\n        ids={ selectedWorkflows }\n        fetchData={ updateWorkflows }\n        resetSelectedWorkflows={ () => stateDispatch({ type: 'resetSelected' }) }\n      /> }\n    />\n  </Fragment>;\n\n  const actionResolver = () => [\n    {\n      title: intl.formatMessage(worfklowMessages.edit),\n      component: 'button',\n      onClick: (_event, _rowId, workflow) =>\n        history.push({ pathname: routesLinks.workflows.edit, search: `?workflow=${workflow.id}` })\n    },\n    {\n      title: intl.formatMessage(commonMessages.delete),\n      component: 'button',\n      onClick: (_event, _rowId, workflow) =>\n        history.push({ pathname: routesLinks.workflows.remove, search: `?workflow=${workflow.id}` })\n    }\n  ];\n\n  const selectAllFunction = () => selectedAll\n    ? stateDispatch({ type: 'unselectAll', payload: data.map(wf => wf.id) })\n    : stateDispatch({ type: 'selectAll', payload: data.map(wf => wf.id) });\n\n  const anyWorkflowsSelected = selectedWorkflows.length > 0;\n\n  const toolbarButtons = () => <ToolbarGroup className={ `pf-u-pl-lg top-toolbar` }>\n    <ToolbarItem>\n      <Link id=\"add-workflow-link\" to={ { pathname: routesLinks.workflows.add } }>\n        <Button\n          variant=\"primary\"\n          aria-label={ intl.formatMessage(formMessages.create) }\n        >\n          { intl.formatMessage(formMessages.create) }\n        </Button>\n      </Link>\n    </ToolbarItem>\n    <ToolbarItem>\n      <Link\n        id=\"remove-multiple-workflows\"\n        className={ anyWorkflowsSelected ? '' : 'disabled-link' }\n        to={ { pathname: routesLinks.workflows.remove } }\n      >\n        <Button\n          variant=\"secondary\"\n          isDisabled={ !anyWorkflowsSelected }\n          aria-label={ intl.formatMessage(worfklowMessages.deleteApprovalTitle) }\n        >\n          { intl.formatMessage(commonMessages.delete) }\n        </Button>\n      </Link>\n    </ToolbarItem>\n  </ToolbarGroup>;\n\n  return (\n    <Fragment>\n      <TopToolbar>\n        <TopToolbarTitle title={ intl.formatMessage(commonMessages.approvalTitle) }/>\n        <AppTabs/>\n      </TopToolbar>\n      <WorkflowTableContext.Provider value={ { selectedWorkflows, setSelectedWorkflows, cache: moveFunctionsCache.current } }>\n        <TableToolbarView\n          sortBy={ sortBy }\n          onSort={ onSort }\n          rows={ rows }\n          columns={ columns(intl, selectedAll, selectAllFunction) }\n          fetchData={ updateWorkflows }\n          routes={ routes }\n          actionResolver={ actionResolver }\n          titlePlural={ intl.formatMessage(worfklowMessages.approvalProcesses) }\n          titleSingular={ intl.formatMessage(worfklowMessages.approvalProcess) }\n          pagination={ meta }\n          toolbarButtons={ toolbarButtons }\n          filterValue={ filterValue }\n          onFilterChange={ handleFilterChange }\n          isLoading={ isFetching || isFiltering }\n          renderEmptyState={ () => (\n            <TableEmptyState\n              title={ filterValue === ''\n                ? intl.formatMessage(worfklowMessages.noApprovalProcesses)\n                : intl.formatMessage(tableToolbarMessages.noResultsFound)\n              }\n              Icon={ SearchIcon }\n              PrimaryAction={ () =>\n                filterValue !== '' ? (\n                  <Button onClick={ () => handleFilterChange('') } variant=\"link\">\n                    { intl.formatMessage(tableToolbarMessages.clearAllFilters) }\n                  </Button>\n                ) : null\n              }\n              description={\n                filterValue === ''\n                  ? intl.formatMessage(worfklowMessages.noApprovalProcesses)\n                  : intl.formatMessage(tableToolbarMessages.clearAllFiltersDescription)\n              }\n            />\n          ) }\n          activeFiltersConfig={ {\n            filters: prepareChips(filterValue, intl),\n            onDelete: () => handleFilterChange('')\n          } }\n        />\n      </WorkflowTableContext.Provider>\n    </Fragment>\n  );\n};\n\nexport default Workflows;\n"],"sourceRoot":""}